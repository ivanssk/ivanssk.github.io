!function(){var C="googima",_="TYPE_API",j="TYPE_SCHEDULE",M="-1",r="jw-flag-ads-googleima",u="jw-flag-ads-vpaid",c="jw-flag-ads-vpaid-controls",t="paused",g="playing",n="adBreakStart",o="adBreakEnd",L="adCompanions",S="adError",T="adStarted",h="adPlay",I=2e3;function p(e,t,i){if(!e)return e;for(var r,n,o,a,s=t.getPlaylistItem(),d=t.getConfig(),l=e.replace("__random-number__",Math.random()*Math.pow(10,18)).replace("__timestamp__",(new Date).getTime()).replace("__page-url__",encodeURIComponent(window.location.href)).replace("__referrer__",encodeURIComponent(document.referrer)).replace("__player-height__",t.getHeight()||d.height).replace("__player-width__",t.getWidth()||d.width).replace("__item-duration__",(n=t.getDuration(),o=3,a=Math.pow(10,o),Math.round(n*a)/a)).replace("__domain__",encodeURIComponent((r=window.location.href.match(new RegExp(/^[^/]*:\/\/\/?([^/]*)/)))&&1<r.length?r[1]:"")),u=(l=i.companiondiv&&i.companiondiv.id?l.replace("__companion-div__",i.companiondiv.id):l.replace("__companion-div__","")).match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),c=0;u&&c<u.length;c++){var g=u[c],h=g.substring(7,g.length-2);if(s.hasOwnProperty(h)&&t._.isString(s[h])){var p=s[h];1e3<p.length&&(p=p.substring(0,1e3)),l=l.replace(g,encodeURIComponent(p))}else l=l.replace(g,"")}if(s.title&&-1===l.indexOf("vid_t=")){var f=s.title.substring(0,100).replace(/[^\x00-\x7F]/g,"");l+=(-1!==l.indexOf("?")?"&":"?")+"vid_t="+encodeURIComponent(f)}return l}var f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function l(e,t,i){if("start"===e||"0%"===e)return"pre";if("end"===e||"100%"===e)return"post";if("pre"===e||"post"===e||-1<i.indexOf(e,"%"))return e;var r=t.seconds(e);return!!i.isNumber(r)&&r}function s(e,t,i){var r,n,o,a,s,d=l(e,t,i);return d||(d="pre"),i.isNumber(d)&&(r=parseInt(1e3*d,10),n=Math.floor(r)%1e3,o=Math.floor(r/1e3)%60,a=Math.floor(r/6e4)%60,d=(s=(s=Math.floor(r/36e5)%24)<10?"0"+s:s)+":"+(a=a<10?"0"+a:a)+":"+(o=o<10?"0"+o:o)+"."+(n=("000"+n).slice(-3))),d}function d(e,t,i){if(!i)return e;var r=0<=e.indexOf("?")?"&":"?",n="cust_params=",o=e.indexOf(n),a=n.length,s="",d="";if(t.foreach(i,function(e,t){s=""+s+d+e+"="+t,d="&"}),s=encodeURIComponent(s),0<=o){var l=e.substr(0,o+a),u=e.substr(o+a);return""+l+s+"%26"+u}return""+e+r+"cust_params="+s}function m(e,n,o){var a={};return n.foreach(e,function(e,t){var i={},r=t.ad||t;i.offset=s(r.offset||r.position||t.offset||"",n,o),i.tag=d(r.tag,n,r.custParams),i.type=r.type||t.type||"linear,nonlinear",a[e]=i}),a}var y=function(){function i(e,t){f(this,i),this.player=e,this.options=t}return i.prototype.getAdsResponse=function(e){var n=this,o=this.player,t=o.utils,a='<vmap:AdBreak breakType="_type_" breakId="_adbreakname_" timeOffset="_offset_"><vmap:AdSource allowMultipleAds="true" followRedirects="true" id="_adbreakname_-ad-1"><vmap:AdTagURI><![CDATA[_url_]]></vmap:AdTagURI></vmap:AdSource></vmap:AdBreak>',s=[],d=[],l=[];return t.foreach(m(e,t,o._),function(e,t){var i=t.offset.replace("pre","start").replace("post","end"),r=a.replace(/_type_/g,t.type).replace(/_adbreakname_/g,e).replace(/_offset_/g,i).replace(/_url_/g,p(t.tag,o,n.options,t.custParams));"start"===i?s.push(r):"end"===i?l.push(r):d.push(r)}),'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+s.join("")+d.join("")+l.join("")+"</vmap:VMAP>"},i.prototype.getTagMap=function(e){var r=this,n=this.player,o=n.utils,a={};return o.foreach(m(e,o,n._),function(e,t){var i=l(t.offset,o,n._);n._.isString(i)&&(i=parseFloat(i.replace("pre","0").replace("post","-1"))),n._.isNumber(i)&&(a[i]=p(t.tag,n,r.options))}),a},i.prototype.getTagList=function(e){var r=this,n=this.player,o=n.utils,a=[];return o.foreach(m(e,o,n._),function(e,t){var i=l(t.offset,o,n._);n._.isString(i)&&(i=parseFloat(i.replace("pre","0").replace("post","-1"))),a.push({offset:i,tag:p(t.tag,n,r.options)})}),a},i}(),v={adcountercountkey:"__AD_POD_CURRENT__",adcounterdynamic:"Ad __AD_POD_CURRENT__ of __AD_POD_LENGTH__. ",adcountertotalkey:"__AD_POD_LENGTH__",admessage:"This ad will end in xx",admessagedynamickey:"xx",admessagestatic:"This is an Advertisement",advideoheight:0,advideowidth:0,allowadskip:!1,allowadskippastseconds:0,allowplayercontrols:!1,allowvolumeslider:!1,autoplayadsmuted:!1,click_tracking:!0,companiondiv:null,companionResourceType:"",cuetext:"Advertisement",debug:!1,enablePreloading:!1,invertmutebutton:!1,loadVideoTimeout:15e3,locale:"",maxRedirects:-1,overlayslotheight:0,overlayslotwidth:0,premiumAds:!1,requestTimeout:1e4,scaled_ads:!0,usestaticmessage:!1,vastLoadTimeout:1e4,vpaidcontrols:!1,vpaidmode:"insecure"};function b(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e);return isNaN(t)?e:t}var k=function(){function a(e,t){for(var i in f(this,a),this.config=e,this.utils=t,this.bidsResponse={},v)if(v.hasOwnProperty(i)){var r=e[i],n=v[i],o=typeof n;if(void 0!==r){if("boolean"!==o&&"number"!==o||(r=b(r)),typeof r!==o)throw new Error("invalid parameter: "+i+" should be a "+o);this[i]=r}else this[i]=n}this.admessagedynamic=this.admessage}return a.prototype.getSingleTagPrerollBlock=function(){var e=this.getConfigSchedule(),t=this.singleTagBidsResponse;if("string"==typeof e){if(!t)return e;var i=t.custParams;return d(t.tag,this.utils,i)}return null},a.prototype.addBidsResponse=function(e,t){var i=void 0;i=e&&!e.error&&(e.bidWon||e.tag)?e:null,t?this.bidsResponse[t]=i:this.singleTagBidsResponse=i},a.prototype.getSchedule=function(){var r=this,e=this.getConfigSchedule();if(!e)return e;var n=this.utils.extend({},e),t=this.getSingleTagPrerollBlock();return t||(Object.keys(this.bidsResponse).forEach(function(e){var t=n[e],i=r.bidsResponse[e];t&&i&&(t.tag=i.tag,t.custParams=r.utils.extend({},t.custParams,i.custParams))}),n)},a.prototype.getConfigSchedule=function(){var e=this.config;return e.tag||this.adschedule||e.schedule||e.ad},a.prototype.getAdRules=function(){var e=this.config.rules||{};return{startOn:e.startOn||1,frequency:void 0!==e.frequency?e.frequency:1}},a}(),x=function(){function n(e,t,i){f(this,n);var r=document.createElement("div");this.visible=!1,this.style=i,this.div=e,(this.adDiv=r).id=t+"_ad",i(e,{overflow:"hidden",width:"100%",height:"100%",display:"block",visibility:"hidden",pointerEvents:"none",opacity:0}),i(r,{position:"absolute",width:"100%",height:"100%"}),e.appendChild(r)}return n.prototype.resizeNonLinear=function(e,t){this.style(this.div,{height:t+"px",top:"auto",width:"100%"})},n.prototype.resizeLinear=function(){this.style(this.div,{top:"0px",left:"0px",width:"100%",height:"100%"})},n.prototype.getAdDiv=function(){return this.adDiv},n.prototype.adSetup=function(){this.visible=!0,this.style(this.div,{visibility:"visible",display:"block",pointerEvents:"all",opacity:1},!0);for(var e=this.adDiv.childNodes,t=0;t<e.length;t++){var i=e[t];("DIV"!==i.tagName||i.hasChildNodes())&&this.style(i,{width:"100%",height:"100%"})}},n.prototype.adTakeDown=function(){this.visible=!1,this.style(this.div,{visibility:"hidden",pointerEvents:"none",opacity:0});for(var e=this.adDiv.childNodes,t=0;t<e.length;t++)this.style(e[t],{width:"",height:""})},n}(),a=null,w=-1;function R(){return w}function D(e){if(a)return a;if(window.google&&google.ima&&google.ima.AdDisplayContainer)return a=Promise.resolve();var t=["//","imasdk.googleapis.com/js/sdkloader/ima3.js"];"file:"===document.location.protocol&&t.unshift("https:");var i=new e.scriptloader(t.join(""));return a=i.load().then(function(){w=Date.now()})}var i={};function O(e,r){var n=this,t=i[r];return t||(this.jwplayerEntitlements=function(e,t,i){var r={canPlayAds:!0},n=new e.key(t),o=n.edition();if("unlimited"===o)return i(r);var a=n.token(),s=["//","entitlements.jwplayer.com","/",a,".json"];"file:"===window.location.protocol&&s.unshift("https:"),e.ajax(s.join(""),function(e){r.canPlayAds=!e||!e.response||!1!==e.response.canPlayAds,i(r)},function(){i(r)},{timeout:1e4,responseType:"json"})},i[r]=new Promise(function(t,i){n.jwplayerEntitlements(e,r,function(e){e.canPlayAds?t():i({message:"Ad Limit Reached"})})}))}var e,B=function(){function r(e,t,i){f(this,r),e.extend(this,t),this.vol=0,this.imaProxy=null,this.view=i}return r.prototype.setProxy=function(e){this.imaProxy=e,"boolean"==typeof this.muted&&this.mute(this.muted)},r.prototype.attachMedia=function(){},r.prototype.detachMedia=function(){},r.prototype.mute=function(e){this.muted=e,this.imaProxy&&(e?this.imaProxy.setVolume(0):this.vol&&this.imaProxy.setVolume(this.vol),this.muteAllAdContainerVideo(e))},r.prototype.muteAllAdContainerVideo=function(e){for(var t=this.view.getAdDiv().getElementsByTagName("video"),i=0;i<t.length;i++)t[i].muted=e},r.prototype.volume=function(e){this.vol=e/100,this.imaProxy&&this.imaProxy.setVolume(this.vol)},r}(),A=2e3,P=2e3,E="usd",q=1,U="//c.amazon-adsystem.com/aax2/apstag.js",N="video",V="2962993",W="//js-sec.indexww.com/htv/htv-jwplayer.min.js",G="//js.spotx.tv/directsdk/v1/",z="//search.spotxchange.com/ad/vast.html?key=",J="dfp",F="jwp",H="jwpspotx",K="jwpdfp",X=F,Q="APS",Y="Index",Z="SpotX",$=((e={})[[J]]=[Q,"FAN",Y,Z],e[[F]]=["FAN",Z],e[[K]]=[Z],e[[H]]=[Z],e),ee="bid",te="error",ie="invalid",re="noBid",ne="timeout",oe=Date.now||function(){return(new Date).getTime()};function ae(n,o){return new Promise(function(t,e){setTimeout(e,o);var i=document.createElement("script");i.onload=i.onreadystatechange=function(e){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t(e),i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i))},i.onerror=e,i.type="text/javascript",i.charset="utf-8",i.async=!0,i.timeout=o,i.src=n;var r=document.getElementsByTagName("head")[0]||document.documentElement;r.insertBefore(i,r.firstChild)}).catch(function(){return Promise.reject("Error loading script")})}var se=encodeURIComponent(window.location.href);var de=null;function le(){return null===de&&(de=Promise.resolve(window.apstag).then(function(e){return e&&e.init&&e.fetchBids?e:ae(["file"===document.location.protocol?"https:":"",U].join(""),P).then(function(){return window.apstag})}).catch(function(e){throw de=null,e})),de}var ue=null,ce=null;function ge(n){return null===ce&&(ce=Promise.resolve(ue||window.SpotX).then(function(e){if(e&&e.DirectAdOS)return e;var i,r,t=["file"===document.location.protocol?"https:":"",G,n,".js"].join("");return"function"==typeof require?(i=t,r=P,new Promise(function(e,t){setTimeout(t,r),require([i],e)}).catch(function(){return Promise.reject("Error loading script")})).then(function(e){return ue=e}):ae(t,P).then(function(){return window.SpotX})}).catch(function(e){throw ce=null,e})),ce}var he,pe=null;function fe(t){return null===pe&&(pe=Promise.resolve(window.indexapi).then(function(e){return e||ae(["file"===document.location.protocol?"https:":"",t||W].join(""),P).then(function(){return window.indexapi})}).catch(function(e){throw pe=null,e})),pe}var me=((he={})[[Q]]=function(i,r){return i.id&&i.slotID?le().then(function(t){return t.init({id:i.pubId,adServer:i.adServer}),new Promise(function(e){t.fetchBids({slots:[{slotID:i.slotID}],timeout:r.bidTimeout},e)})}).then(function(e){return e&&e[0]&&e[0].slotID===i.slotID?{result:ee,tag:r.tag,custParams:{amznbid:e[0].amznbid,amzniid:e[0].amzniid}}:{result:re,message:"No bids for pubID and slotID"}}).catch(function(e){return{result:te,message:"Amazon header bidding failed: "+e}}):Promise.resolve({result:ie,message:"Missing id or slotID in configuration"})},he[["FAN"]]=function(e,g,i){var t,r,n,o,a,s,h=e.id,d=(t=h,r=g.playerWidth,n=g.playerHeight,["https://an.facebook.com/v2/placementbid.json?&placementids[]="+t,"&playerwidth="+r,"&playerheight="+n,"&adformats[]="+N,"&sdk="+V,"&pageurl="+se].join(""));return o=g.mediationLayerAdServer,a=g.floorPriceCents,s=g.floorPriceCurrency||E,d&&(o===J||a&&s===E)?new Promise(function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===this.readyState&&(e(this),t=null)},t.open("GET",d),t.withCredentials=!0,t.send(null),i.then(function(){t&&(t.abort(),t=null)})}).then(function(e){if(200!==e.status)return{result:te,message:"Invalid response (status "+e.status+")"};var t=JSON.parse(e.responseText),i=t.errors;if(i&&i.length)return{result:te,message:i[0]};var r=t.bids;if(!r||!r[h]||!r[h][0])return{result:re,message:"No bids for placement id"};var n=r[h][0],o=n.bid_price_cents,a=n.bid_id;if(g.mediationLayerAdServer===J)return{result:ee,tag:g.tag,custParams:{jwFANBidPrice:Math.round(o/100),jwFANBidID:a}};var s,d,l,u,c={result:ee,priceInCents:o,priceCurrency:n.bid_price_currency};return o>=g.floorPriceCents&&(c.tag=(s=h,d=a,l=g.playerWidth,u=g.playerHeight,["https://an.facebook.com/v1/instream/vast.xml?placementid="+s,"&playerwidth="+l,"&playerheight="+u,"&sdk="+V,"&bidid="+d,"&pageurl="+se].join(""))),c}).catch(function(e){return{result:te,message:"FAN header bidding failed: "+e}}):Promise.resolve({result:ie,message:"Invalid configuration"})},he[[Y]]=function(e,r){if(!e.id&&!e.script)return Promise.resolve({result:ie,message:"Missing id or script in configuration"});var t=Object.assign({videoCommonArgs:{protocols:[2,3,5,6],mimes:["video/mp4","video/webm","application/javascript"],apiList:[1,2]},siteID:e.id},e);return fe().then(function(e){return new Promise(function(i){e.deferQueue=e.deferQueue||[],e.deferQueue.push(function(){e.solicitIndexVideoAds(r.tag,function(e,t){i({updatedTag:e,indexTargeting:t})},t)})})}).then(function(e){var t=e.indexTargeting;return void 0!==t?{result:ee,tag:r.tag,custParams:t}:{result:re,message:"No bids for site id"}}).catch(function(e){return{result:te,message:"Index Exchange header bidding failed: "+e}})},he[[Z]]=function(e,o){if(!e.id)return Promise.resolve({result:ie,message:"Missing id in configuration"});var t=Object.assign({channel_id:e.id,slot:o.playerContainer,content_width:o.playerWidth,content_height:o.playerHeight,player_vendor:"SpotXJW",player_vendor_id:o.playerId,ad_volume:o.adVolume,autoplay:o.autoplay,blocked_autoplay_override_mode:o.autoplayAdsMuted,start_delay:o.offset,placement:1,hide_skin:!0},e.optionalParams);return e.passFloorPrice&&o.floorPriceCents&&(t.price_floor=o.floorPriceCents/100),"pre"===o.offset?t.start_delay=0:"post"===o.offset&&(t.start_delay=-2),ge(e.id).then(function(e){return new e.DirectAdOS(t).getAdServerKVPs()}).then(function(e){var t=e.spotx_ad_key,i={spotx_bid:e.spotx_bid,spotx_ad_key:t};if(o.mediationLayerAdServer===J)return{result:ee,custParams:i};var r=100*parseFloat(e.spotx_bid),n=["file:"===document.location.protocol?"https:":"",z,t].join("");return{result:ee,priceInCents:r,tag:n,tagKey:t,custParams:i}}).catch(function(e){return"SpotX :: Unable to find ad"===e.message?{result:re,message:e.message}:{result:te,message:"SpotX header bidding failed: "+e}})},he);var ye=function(){function c(){var e,t,i,r,n=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=o.settings,s=void 0===a?{}:a,d=o.bidders,l=void 0===d?[]:d,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(f(this,c),this.settings=(e=s,t=u,i=Object.assign({bidTimeout:A,offset:"",playerContainer:t.container,playerHeight:t.height||0,playerWidth:t.width||0,tag:""},t,e),$[i.mediationLayerAdServer]||(i.mediationLayerAdServer=X),i.mediationLayerAdServer===H&&(i.floorPriceCents=q),i),this.bidders=l.reduce(function(e,t){return t.name&&(e[t.name]=Object.assign(t,t.custom_params)),e},{}),"pre"!==this.settings.offset&&0!==parseInt(this.settings.offset))&&(this.bidders=this.bidders[Z]?((r={})[[Z]]=this.bidders[Z],r):{});this.bidders[Q]&&this.bidders[Q].id&&this.bidders[Q].slotID&&le(),this.bidders[Y]&&(this.bidders[Y].script||this.bidders[Y].id)&&fe(this.bidders[Y].script),this.bidders[Z]&&this.bidders[Z].id&&ge(this.bidders[Z].id),this._bidRequest=null,this._currentTimeout=null,this._onCancelTrigger=null,this.onCancel=new Promise(function(e){n._onCancelTrigger=e})}return c.prototype.start=function(){var e,r,s,n,t;return this._bidRequest||(this._bidRequest=(e={config:this.bidders,settings:this.settings,onCancel:this.onCancel},r=e.config,s=e.settings,n=e.onCancel,t=$[s.mediationLayerAdServer].filter(function(e){return r[e]}).map(function(t){var i=oe();return Promise.race([me[t](r[t],s,n),n]).then(function(e){return Object.assign({},r[t],e,{timeForBidResponse:oe()-i|0})})}),Promise.all(t).then(function(e){var t=s.mediationLayerAdServer===J||s.mediationLayerAdServer===K,i=s.mediationLayerAdServer===F||s.mediationLayerAdServer===K||s.mediationLayerAdServer===H,r={priceInCents:s.floorPriceCents,timeForBidResponse:1/0},n=[],o={},a={};return a.bidders=e.map(function(e){return t||(e.winner=!1),e.result!==ee&&e.result!==ne&&(e.result=re),e.result===ee&&(n.push(e),Object.assign(o,e.custParams),i&&(e.priceInCents>r.priceInCents||e.priceInCents===r&&e.timeForBidResponse<r.timeForBidResponse)&&(r=a.result=e)),e}),i&&r.name?r.winner=!0:t&&n.length&&(a.result={tag:s.tag,custParams:o}),a}))),this._bidRequest},c.prototype.stop=function(){var t=this;clearTimeout(this._currentTimeout),this._onCancelTrigger({result:"abort"}),this._bidRequest=null,this._currentTimeout=null,this._onCancelTrigger=null,this.onCancel=new Promise(function(e){t._onCancelTrigger=e})},c.prototype.getEventObject=function(e,t,i){var r=i.offset,n=this.settings.mediationLayerAdServer,o=t||[];"pre"!==r&&0!==parseInt(r)&&(o=t.filter(function(e){return e.name===Z}));var a={client:e,offset:r,mediationLayerAdServer:n,bidders:o,bidTimeout:this.settings.bidTimeout},s=this.settings.floorPriceCents;s&&n!==H&&n!==J&&(a.floorPriceCents=s);var d=this.settings.floorPriceCurrency;return d&&(a.floorPriceCurrency=d),a},c.prototype.then=function(e){return this._bidRequest?this._bidRequest.then(e,e):null},c.prototype.timeout=function(){clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout(this._onCancelTrigger,this.settings.bidTimeout,{result:ne})},c}();function ve(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return{type:e,client:C,adposition:null!==i?i:function(e){if(e.isBeforePlay()||0===e.getPosition())return"pre";if(e.isBeforeComplete()||e.getPosition()===e.getDuration())return"post";return"mid"}(t),viewable:t.getViewable()}}function be(e,t){var i=t.bidders,r=t.bids;if(!i)return e;var n=r.length?r[0]:null;if(n&&i.length){var o=n.getEventObject(C,i,{offset:e.adposition});e.mediationLayerAdServer=o.mediationLayerAdServer,e.bidders=o.bidders,o.floorPriceCents&&(e.floorPriceCents=o.floorPriceCents),"dfp"===e.mediationLayerAdServer&&"SpotXJW"===e.adsystem&&e.bidders.forEach(function(e){e.winner="SpotX"===e.name})}return e}var we=function(){function s(e,t,i,r,n,o,a){f(this,s),i.utils.extend(this,i.Events),this.item=e,this.options=t,this.player=i,this.env=i.getEnvironment(),this.utils=i.utils,this.instreamProvider=r,this.view=n,this.initAdsManagerPromise=null,this.bidsPromise=null,this.blockingInstreamPlayer=null,this.currentAd=null,this.bidders=[],this.bids=[],this.timeoutAdStart=-1,this.progressIntervalId=-1,this.fullscreenIcon=i.getContainer().querySelector(".jw-icon-fullscreen"),this.adsLoaderManager=o,this.playbackProxy={currentTime:0,duration:0},this.video=a,this.isItemSchedule=!0,this.paused=!1,this.pausedByViewable=!1,this._qoe=new i.utils.Timer,this.debugConsoleLog=i.utils.noop,t.debug&&(this.debugConsoleLog=function(){var e;(e=console).log.apply(e,arguments)})}return s.prototype.startBid=function(t,i,r){var n=this,e=this.utils.extend({},t.config.bids),o=new ye(e,{tag:i.tag,offset:i.offset,width:this.player.getWidth(),height:this.player.getHeight(),container:this.player.getContainer(),playerId:this.player.id,autoplay:this.player.getConfig().autostart,autoplayAdsMuted:t.autoplayadsmuted,adVolume:this.player.getVolume()});return this.bids.push(o),o.start(),this.trigger("adBidRequest",o.getEventObject(C,e.bidders,i)),o.then(function(e){if(n.trigger("adBidResponse",o.getEventObject(C,e.bidders,i)),n.bidders&&"pre"!==i.offset&&0!==parseInt(i.offset)||(n.bidders=e.bidders),n.destroyed())return null;t.addBidsResponse(e.result,r)})},s.prototype.init=function(e,t){var s=this;if(t.config.bids){var i=t.config.schedule||t.config.tag,r=[];"string"==typeof i?r.push(this.startBid(t,{tag:i,offset:"pre"})):Object.keys(i).forEach(function(e){r.push(s.startBid(t,i[e],e))}),this.bidsPromise=Promise.all(r)}else this.bidsPromise=Promise.resolve();this.initAdsManagerPromise=this.bidsPromise.then(D).then(function(){return s.destroyed()?null:(s.debugConsoleLog("[JW DEBUG] Open adsLoaderManager"),s.adsLoaderManager.open(e,t,s.player,s.options,s.video))}).then(function(e){if(s.destroyed())return null;var t=s.playbackProxy,i=s.adsLoaderManager,r=i.getAdsManager(e,t,s.options);s.instreamProvider.setProxy(r),s.muteInstreamProvider();var n=s.player.getSafeRegion(!1);if(s.debugConsoleLog("[JW DEBUG] adsManager init with",n.width,n.height,s.getViewMode()),r.init(n.width,n.height,s.getViewMode()),i.initializeDisplay(),i.bindEvents({LOADED:s.adLoaded.bind(s),AD_ERROR:s.adError.bind(s),CONTENT_PAUSE_REQUESTED:s.pauseRequested.bind(s),CONTENT_RESUME_REQUESTED:s.resumeRequested.bind(s),LOG:s.adLog.bind(s),STARTED:s.adStarted.bind(s),IMPRESSION:s.adImpression.bind(s),LINEAR_CHANGED:s.resize.bind(s),CLICK:s.adClick.bind(s),PAUSED:s.adPaused.bind(s),RESUMED:s.adResumed.bind(s),SKIPPED:s.adSkipped.bind(s),USER_CLOSE:s.adUserClose.bind(s),ALL_ADS_COMPLETED:s.allAdsCompleted.bind(s)}),s.isItemSchedule){var o=r.getCuePoints();if("string"==typeof i.schedule||o.length&&0===o[0]||(s.debugConsoleLog("[JW DEBUG] Stop blocking since there is no preroll"),s.stopBlocking()),o.length){var a=o.filter(function(e){return 0<e}).map(function(e){return{begin:e,text:s.options.cuetext}});s.player.setCues(a)}}return r}).catch(function(e){throw s.asyncError&&s.asyncError(e),e})},s.prototype.getViewMode=function(){var e=google.ima.ViewMode;return this.player.getFullscreen()?e.FULLSCREEN:e.NORMAL},s.prototype.prepareToPlayAd=function(e){if(!this.destroyed())if(this.blockingInstreamPlayer){var t=e?"":this.player.getConfig().localization.loadingAd;this.blockingInstreamPlayer.setText(t)}else clearTimeout(this.timeoutAdStart),this.startBlocking(e)},s.prototype.muteInstreamProvider=function(){var e=this.video.muted||this.player.getMute();this.debugConsoleLog("[JW DEBUG] Setting mute on instreamProvider",e),this.instreamProvider.mute(e)},s.prototype.exitFullscreenOnInlineIOS=function(){this.env.OS.iOS&&(this.env.Browser.version.major<10||(this.debugConsoleLog("[JW DEBUG] Exiting fullscreen mode on iOS 10+"),this.player.setFullscreen(!1),this.utils.style(this.fullscreenIcon,{display:"none"})))},s.prototype.startBlocking=function(e){var i=this;if(!this.blockingInstreamPlayer&&!this.destroyed()){this.debugConsoleLog("[JW DEBUG] JW Player startBlocking"),this.exitFullscreenOnInlineIOS(),this.options.premiumAds&&this.player.on("viewable",function(e){e.viewable?i.pausedByViewable&&(i.debugConsoleLog("[JW DEBUG] PremiumAds mode enabled. Start playing the ad on viewable"),i.player.play()):i.paused||(i.debugConsoleLog("[JW DEBUG] PremiumAds mode enabled. Pause the ad on not viewable"),i.player.pause(),i.pausedByViewable=!0)},this),this._qoe.tick("adLoading"),this.player.utils.addClass(this.player.getContainer(),r),this.adsLoaderManager&&this.adsLoaderManager.videoProxy&&this.adsLoaderManager.videoProxy.unblock(),this.blockingInstreamPlayer=this.player.createInstream().init();var t=e?"":this.player.getConfig().localization.loadingAd;this.blockingInstreamPlayer.setText(t),this.blockingInstreamPlayer.applyProviderListeners(this.instreamProvider),this.initAdsManagerPromise.then(function(e){i.debugConsoleLog("[JW DEBUG] Start adsManager"),e.start()}).catch(this.utils.noop),clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){if(i.debugConsoleLog("[JW DEBUG] Ad request timeout"),!i.destroyed()){i.asyncError=null,i.stopBlocking(),i.asyncDiscardAdBreak();var e={message:"Ad Request timeout after "+i.options.requestTimeout+" milliseconds",getErrorCode:function(){return 60004}},t=i.adsLoaderManager.adErrorEventObject(e,{});i.trigger(S,t)}},this.options.requestTimeout)}},s.prototype.stopBlocking=function(){this.destroyed()||(this.debugConsoleLog("[JW DEBUG] JW Player stopBlocking"),this.player.off("viewable",null,this),clearTimeout(this.timeoutAdStart),this.utils.style(this.fullscreenIcon,{display:""}),this.player.utils.removeClass(this.player.getContainer(),[u,c,r]),this.blockingInstreamPlayer&&(this.adsLoaderManager&&this.adsLoaderManager.videoProxy&&this.adsLoaderManager.videoProxy.block(),this.instreamProvider.off(),this.blockingInstreamPlayer.destroy(),this.blockingInstreamPlayer=null,this.view.adTakeDown()))},s.prototype.pauseRequested=function(e){var t=this;this.prepareToPlayAd();var i=this.adsLoaderManager.adEventObject(e.getAd());this.player.trigger(n,ve(n,this.player,i.adposition)),this.blockingInstreamPlayer.on("destroyed",function(){t.player.trigger(o,ve(o,t.player,i.adposition))})},s.prototype.resumeRequested=function(){this.debugConsoleLog("[JW DEBUG] ResumeRequest from IMA SDK"),this.currentAd&&this.currentAd.isLinear()&&(this.finishAd(),this.view.adTakeDown()),this.stopBlocking()},s.prototype.finishAd=function(){this.currentAd&&(clearInterval(this.progressIntervalId),this.currentAd=null)},s.prototype.discardAdBreak=function(e){!e&&this.adsLoaderManager&&(e=this.adsLoaderManager.adsManager),!this.destroyed()&&e&&(e.discardAdBreak(),e.stop())},s.prototype.asyncDiscardAdBreak=function(){var t=this;this.initAdsManagerPromise.then(function(e){return t.discardAdBreak(e)}).catch(this.utils.noop)},s.prototype.pause=function(){this.pausedByViewable=!1;var e=this.adsLoaderManager.adsManager;e&&(this.debugConsoleLog("[JW DEBUG] JW Player pause ad"),e.pause())},s.prototype.resume=function(){this.pausedByViewable=!1;var e=this.adsLoaderManager.adsManager;e&&(this.debugConsoleLog("[JW DEBUG] JW Player resume ad"),e.resume())},s.prototype.beforePlay=function(e){var t=this;this.bids.map(function(e){e.timeout()}),this.player.off("beforePlay",null,this),this.isItemSchedule=!!e,this.prepareToPlayAd(this.isItemSchedule),this.adsLoaderManager.initializeDisplay(),this._qoe.tick("adBeforePlay"),this.bidsPromise.then(D).then(function(){t.destroyed()||(t.debugConsoleLog("[JW DEBUG] Request ads to IMA SDK"),t.adsLoaderManager.requestAds())}).catch(this.utils.noop)},s.prototype.beforeComplete=function(){var e=this.adsLoaderManager.adsManager;e&&-1<e.getCuePoints().indexOf(-1)&&this.prepareToPlayAd(),this.adsLoaderManager.unbindEvents(["CONTENT_RESUME_REQUESTED"]),this.playbackProxy.currentTime=this.playbackProxy.duration,this.debugConsoleLog("[JW DEBUG] Call contentComplete on IMA SDK"),this.adsLoaderManager.contentComplete()},s.prototype.time=function(e){this.playbackProxy.currentTime=e.position,e.duration>=e.position?this.playbackProxy.duration=e.duration:this.playbackProxy.duration=1/0},s.prototype.resize=function(){var e=this.currentAd,t=this.adsLoaderManager.adsManager;if(t){var i=e&&!e.isLinear(),r=this.player.getSafeRegion(i);if(i){var n=e.getHeight();n=this.player.getFullscreen()?r.height/2:Math.max(100,n+10),this.debugConsoleLog("[JW DEBUG] Resize adsManager",r.width,n,this.getViewMode()),t.resize(r.width,n,this.getViewMode()),this.view.resizeNonLinear(r,n)}else this.debugConsoleLog("[JW DEBUG] Resize adsManager",r.width,r.height,this.getViewMode()),t.resize(r.width,r.height,this.getViewMode()),this.view.resizeLinear()}},s.prototype.triggerAdPlay=function(e,t,i,r){if(e.isLinear()){this.instreamProvider.trigger("state",{newstate:i,oldstate:r});var n=this.adsLoaderManager.adEventObject(e);n.oldstate=r,n.newstate=i,this.trigger(t,n)}},s.prototype.progressInterval=function(s,d){var l=this;if(clearInterval(this.progressIntervalId),d){var u=s.getAdId(),c=s.getAdPodInfo(),g=-1,h=this.options.admessage||"",p=new RegExp(this.options.admessagedynamickey,"g"),f=this.options.adcounterdynamic||"",m=new RegExp(this.options.adcountercountkey,"g"),y=new RegExp(this.options.adcountertotalkey,"g");this.progressIntervalId=setInterval(function(){if(l.currentAd&&l.currentAd.getAdId()===u){var e=d.getRemainingTime();if(!(isNaN(e)||e<=0)&&g!==e){g=e;var t=s.getDuration(),i=t-e;if(l.blockingInstreamPlayer){var r=h.replace(p,Math.round(t-i)),n=c.getTotalAds();if(1<n){var o=c.getAdPosition();r=f.replace(m,o).replace(y,n)+"  "+r}l.blockingInstreamPlayer.setText(r),l.instreamProvider.trigger("time",{duration:t,position:i})}if(0<t){var a=l.adsLoaderManager.adEventObject(s);a.position=i,a.duration=t,l.trigger("adTime",a)}}}else clearInterval(l.progressIntervalId)},250)}},s.prototype.adLoaded=function(e){this.muteInstreamProvider();var t=this.adsLoaderManager.adEventObject(e.getAd());this.trigger("adRequest",t)},s.prototype.adStarted=function(e){var t=e.getAd(),i=this.adsLoaderManager.adEventObject(t);this.trigger(T,i)},s.prototype.adImpression=function(e){var t=this,i=e.getAd(),r=i.isLinear(),n=r&&(0<=i.getContentType().indexOf("image")||-1===i.getDuration()),o=i.getContentType(),a="application/javascript"===o||"application/x-shockwave-flash"===o,s=r&&a&&this.options.vpaidcontrols;this.currentAd=i,this.blockingInstreamPlayer&&this.blockingInstreamPlayer.setSkipOffset(i.getSkipTimeOffset()),this.adsLoaderManager.bindEvents({COMPLETE:this.adComplete.bind(this)}),a&&this.env.OS.mobile&&this.options.autoplayadsmuted&&this.adsLoaderManager.bindEvents({VOLUME_CHANGED:function(){t.adsLoaderManager.unbindEvents(["VOLUME_CHANGED"]),t.player.setMute(!!t.adsLoaderManager.adsManager.getVolume())}}),n?this.startBlocking():r||this.stopBlocking(),this.player.utils.toggleClass(this.player.getContainer(),u,r&&(n||a)),this.player.utils.toggleClass(this.player.getContainer(),c,s),this.view.adSetup(),this.resize(),this.muteInstreamProvider(),clearTimeout(this.timeoutAdStart);var d=this.adsLoaderManager.adsManager;this.progressInterval(i,d);var l=this.adsLoaderManager.adEventObject(i);"pre"!==l.adposition||void 0!==l.podcount&&1!==l.sequence||(this._qoe.tick("adImpression"),l.timeLoading=this._qoe.between("adBeforePlay","adImpression")),be(l,this),this.trigger("adImpression",l),this.triggerAdPlay(i,h,g,"buffering")},s.prototype.adComplete=function(e){this.finishAd();var t=e.getAd(),i=this.adsLoaderManager.adEventObject(t);this.trigger("adComplete",i),this.adsLoaderManager.unbindEvents(["VOLUME_CHANGED"])},s.prototype.adClick=function(e){var t=this.adsLoaderManager.adsManager,i=e.getAd(),r=i.getContentType();"application/javascript"===r||"application/x-shockwave-flash"===r||(this.debugConsoleLog("[JW DEBUG] Ad paused due to ad click"),t.pause());var n=this.adsLoaderManager.adEventObject(i);this.trigger("adClick",n),this.pausedByViewable=!1},s.prototype.adPaused=function(e){this.paused||(this.paused=!0,this.triggerAdPlay(e.getAd(),"adPause",t,g))},s.prototype.adResumed=function(e){this.paused&&(this.paused=!1,this.triggerAdPlay(e.getAd(),h,g,t))},s.prototype.adSkipped=function(e){this.debugConsoleLog("[JW DEBUG] AdSkipped"),this.adsLoaderManager.unbindEvents(["COMPLETE","VOLUME_CHANGED"]),this.finishAd();var t=this.adsLoaderManager.adEventObject(e.getAd());this.trigger("adSkipped",t)},s.prototype.adUserClose=function(e){this.debugConsoleLog("[JW DEBUG] AdUserClose"),this.currentAd&&this.currentAd.isLinear()&&-1===this.currentAd.getDuration()?this.adSkipped(e):(this.adsLoaderManager.unbindEvents(["COMPLETE","VOLUME_CHANGED"]),this.finishAd())},s.prototype.allAdsCompleted=function(){this.resumeRequested(),this.view.adTakeDown(),this.stopAdsManager()},s.prototype.stopAdsManager=function(){var t=this;this.initAdsManagerPromise.then(function(e){t.destroyed()||(t.debugConsoleLog("[JW DEBUG] Stop IMA SDK adsManager"),e.stop(),e.destroy(),t.initAdsManagerPromise=null,t.bidsPromise=null)}).catch(this.utils.noop)},s.prototype.adLog=function(e){this.debugConsoleLog("[JW DEBUG]",e.type,e);var t=e.getAdData();if(t&&t.adError){var i=this.adsLoaderManager.adErrorEventObject(t.adError,e);402===i.code?this.handleAdError(t.adError,i):this.trigger(S,i)}},s.prototype.adError=function(e){var t=e.getError();this.handleAdError(t,e)},s.prototype.asyncError=function(e){var t=this;if(!this.destroyed())if(clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){return t.destroy()},0),e&&e.getError){var i=e.getError();this.handleAdError(i,e,!0)}else e.target&&e.target.src?console.error("Failed to load "+e.target.src):console.error(e)},s.prototype.handleAdError=function(e,t,i){var r=this;this.options.debug&&console.error(e),900===e.getErrorCode()||i?(clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){return r.destroy()},0)):(this.stopBlocking(),this.view.adTakeDown());var n=this.adsLoaderManager.adErrorEventObject(e,t);be(n,this),this.player&&0===this.player.getPosition()&&(this._qoe.tick("adError"),n.timeLoading=this._qoe.between("adBeforePlay","adError")),this.trigger(S,n)},s.prototype.destroy=function(){if(this.debugConsoleLog("[JW DEBUG] JW Player destroy PlaylistItemManager"),this.off(),!this.destroyed()){this.player.off(null,null,this),this.bids.map(function(e){e.stop()}),this.bids=[],clearTimeout(this.timeoutAdStart),clearInterval(this.progressIntervalId),this.currentAd=null,this.options=null,this.video=null,this.initAdsManagerPromise=null,this.bidsPromise=null;var e=this.adsLoaderManager;e&&(e.reset(),this.adsLoaderManager=null),this.blockingInstreamPlayer&&this.stopBlocking(),this.instreamProvider.off(),this.instreamProvider.setProxy(null),this.instreamProvider=null,this.view.adTakeDown(),this.view=null,this.player=null,this.item=null}},s.prototype.destroyed=function(){return!this.item},s}();function Ae(e){var i=this;i.video=e,i.blocked=!1;var r={},t=function(t){"function"==typeof e[t]?r[t]={get:function(){return function(){var e=i.video[t];if(e){if("pause"===t&&i.blocked)return;return e.apply(i.video,arguments)}}}}:r[t]={get:function(){return i.video[t]},set:function(e){i.video[t]=e}}};for(var n in e)t(n);Object.defineProperties(this,r)}function Pe(e){try{return e.getAdPodInfo()}catch(e){return null}}!function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}(Ae.prototype,{block:function(){this.blocked=!0},unblock:function(){this.blocked=!1}});var Ee=function(){function t(e){f(this,t),this.adsLoader=null,this.adDisplayContainer=null,this.displayInitialized=!1,this.adsRequest=null,this.userRequestContext=null,this.adsManager=null,this.adsManagerEvents={},this.container=e,this.adIds={},this.schedule=null,this.tagMap={},this.playerApi=null,this.videoProxy=null}return t.prototype.getVpaidMode=function(e){var t=google.ima.ImaSdkSettings.VpaidMode;return"disabled"===e||"none"===e?t.DISABLED:"enabled"===e?t.ENABLED:t.INSECURE},t.prototype.initializeDisplay=function(){this.videoProxy&&this.videoProxy.unblock(),!this.displayInitialized&&this.adDisplayContainer&&(this.adDisplayContainer.initialize(),this.displayInitialized=!0)},t.prototype.contentComplete=function(){if(null!==this.adsRequest){var e=this.adsLoader;e&&e.contentComplete(),this.adsRequest=null}},t.prototype.reset=function(){this.userRequestContext=null;var e=this.adsManager;e&&(e.destroy(),this.adsManager=null),this.contentComplete(!0),this.schedule=null,this.videoProxy&&this.videoProxy.block(),this.adsManagerEvents={},this.adIds={},this.tagMap={}},t.prototype.prepare=function(e){google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);var t=this.adsLoader;return t||(this.videoProxy=new Ae(e),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.container,this.videoProxy),t=this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer)),t},t.prototype.open=function(e,t,i,r,n){t.locale&&google.ima.settings.setLocale(t.locale),0<=t.maxRedirects&&google.ima.settings.setNumRedirects(t.maxRedirects);var o=this.prepare(n);this.playerApi=i;var a={requestType:e,vpaidMode:t.vpaidmode,playerVersion:i.version.split("+")[0]};this.userRequestContext=a;var s=t.getSchedule();if(!s)return Promise.reject();var d=new google.ima.AdsRequest,l=i.getSafeRegion(!1);d.linearAdSlotWidth=l.width,d.linearAdSlotHeight=l.height;var u=i.getSafeRegion(!0);d.nonLinearAdSlotWidth=u.width,d.nonLinearAdSlotHeight=u.height,d.forceNonLinearFullSlot=r.forceNonLinearFullSlot,d.vastLoadTimeout=r.vastLoadTimeout,this.adsRequest=d;var c=new y(i,r);if("object"==typeof s){var g=c.getTagList(s);1===g.length&&0===g[0].offset&&(s=g[0].tag)}return"string"==typeof s?s=d.adTagUrl=a.adTagUrl=p(s,i,r):(d.adsResponse=a.adsResponse=c.getAdsResponse(s),this.tagMap=c.getTagMap(s)),this.schedule=s,new Promise(function(e,t){o.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t,!1),o.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e,!1)})},t.prototype.requestAds=function(){this.adsRequest.setAdWillAutoPlay(this.playerApi.getConfig().autostart),this.adsRequest.setAdWillPlayMuted(this.playerApi.getMute());var e=this.adsLoader,t=this.userRequestContext,i=this.getVpaidMode(t.vpaidMode),r=e.getSettings();r.setPlayerType("jwplayer"),r.setPlayerVersion(t.playerVersion),r.setVpaidMode(i),e.requestAds(this.adsRequest,t)},t.prototype.getAdsManager=function(e,t,i){var r=new google.ima.AdsRenderingSettings;return r.loadVideoTimeout=i.loadVideoTimeout,r.enablePreloading=i.enablePreloading,r.uiElements=null,r.autoAlign=!0,r.useStyledNonLinearAds=!0,this.adsManager=e.getAdsManager(t,r),this.userRequestContext=e.getUserRequestContext(),this.adsManager},t.prototype.bindEvents=function(r){var n=this,o=google.ima.AdEvent.Type,a=google.ima.AdErrorEvent.Type;Object.keys(r).forEach(function(e){var t=o[e]||a[e],i=n.adsManagerEvents[t];i&&n.adsManager.removeEventListener(t,i),n.adsManager.addEventListener(t,r[e],!1),n.adsManagerEvents[t]=r[e]})},t.prototype.unbindEvents=function(e){var r=this,n=google.ima.AdEvent.Type,o=google.ima.AdErrorEvent.Type;e.forEach(function(e){var t=n[e]||o[e],i=r.adsManagerEvents[t];i&&(r.adsManager.removeEventListener(t,i),delete r.adsManagerEvents[t])})},t.prototype.getAdId=function(e){if(e){var t=e.getAdId(),i=Pe(e);if(i&&(t=""+i.getTimeOffset()),t)return void 0===this.adIds[t]&&(this.adIds[t]=(r=12,new Array(r+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,r))),this.adIds[t]}var r;return M},t.prototype.getTag=function(e,t){if("string"==typeof this.schedule)return this.schedule;var i=Pe(e);if(i){var r=this.tagMap[i.getTimeOffset()];if(r)return r}var n=this.userRequestContext;return t&&t.getUserRequestContext&&(n=t.getUserRequestContext()||n),n?n.adTagUrl||n.adsResponse||"":(console.error("invalid request context",n),"")},t.prototype.adEventObject=function(e){var t={client:C,tag:this.getTag(e),ima:{ad:e,userRequestContext:this.userRequestContext}};if(!e)return t;t.id=this.getAdId(e),t.adtitle=e.getTitle(),t.adsystem=e.getAdSystem(),t.creativetype=e.getContentType(),t.linear=e.isLinear()?"linear":"nonlinear",t.viewable=this.playerApi.getViewable();var i=Pe(e);if(i){var r=i.getTotalAds();1<r&&(t.sequence=i.getAdPosition(),t.podcount=r);var n=i.getTimeOffset(),o="mid";0===n?o="pre":-1===n&&(o="post"),t.adposition=o}return t},t.prototype.adErrorEventObject=function(e,t){var i=e.getMessage&&e.getMessage()||e.message,r=e.getVastErrorCode&&e.getVastErrorCode()||900,n=e.getErrorCode&&e.getErrorCode()||900;n<1e4&&(n+=2e4);var o=this.getTag(t.getAd&&t.getAd(),t);return{id:M,client:C,message:"Ad Error: "+i,code:r,adErrorCode:n,tag:o}},t}();!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t)}}(".jwplayer.jw-flag-ads-googleima.jw-flag-small-player.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid) .jw-controls .jw-controlbar,.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-display-icon-display,.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-display-icon-display .jw-icon-display{pointer-events:none}.jwplayer.jw-flag-ads-googleima .jw-controls-backdrop,.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-icon-fullscreen{display:none}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar{font-size:1em}.jwplayer.jw-flag-ads-googleima .jw-controlbar{background:0 0!important;pointer-events:none}.jwplayer.jw-flag-ads-googleima.jw-ie .jw-slider-volume,.jwplayer.jw-flag-ads-googleima.jw-ie .jw-svg-icon{background:rgba(0,0,0,.25);border-radius:3px}.jwplayer.jw-flag-ads-googleima.jw-ie .jw-slider-volume{margin:0 10px}@supports (filter:drop-shadow(0 0 3px #000)){.jwplayer.jw-flag-ads-googleima.jw-ie .jw-slider-volume,.jwplayer.jw-flag-ads-googleima.jw-ie .jw-svg-icon{background:0 0;border-radius:0}.jwplayer.jw-flag-ads-googleima.jw-ie .jw-slider-volume{margin:0}}.jwplayer.jw-flag-ads-googleima .jw-svg-icon{fill:#fff;filter:drop-shadow(0 0 3px #000)}.jwplayer.jw-flag-ads-googleima .jw-spacer,.jwplayer.jw-flag-ads-googleima .jw-text{order:1}.jwplayer.jw-flag-ads-googleima .jw-text{text-shadow:0 0 3px #000}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-controlbar{flex-flow:column-reverse nowrap;height:100%;max-height:none}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-button-container{align-items:flex-end;flex-wrap:wrap;margin-bottom:7px}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-controlbar .jw-icon{height:30px}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-text{align-self:flex-start;margin:16px 0 0 16px;order:-1;width:100%}"),(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)(C,"8.1",function(d,n,e){var i=this,l=d.utils,t=d.getConfig(),u=new k(n||{},l),c=null,g=void 0,h=0;if(u.premiumAds){if(d.getMute()||t.autostart)return console.log("Premium Ads: Cannot play ads in autostart or muted"),void(this.destroy&&this.destroy());var r=function(){var e=(window.performance||{}).timing;if(e){var t=e.loadEventEnd||(new Date).getTime(),i=t-e.navigationStart;if(0<i)return i}return I}();if(I<=r)return console.log("Premium Ads: Page load took too long to start an ad"),void(this.destroy&&this.destroy())}D(l).then(function(){if(g){var e=R();0<=e&&I<=e-g&&(console.log("Premium Ads: IMA SDK load took too long to start an ad"),i.destroy&&i.destroy())}}).catch(l.noop);var s=d._,o=t.key;l.addClass(e,"jw-plugin-googima");var p=new x(e,d.id,l.style),f=new B(l,d.Events,p),m=new Ee(p.getAdDiv()),y=null;function v(e,t,i,r){try{return e.getCompanionAds(t,i,r)}catch(e){return[]}}function b(e){var t=new google.ima.CompanionAdSelectionSettings;t.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;var i=u.companiondiv||{width:300,height:250},r=function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];t.push({width:r.getWidth(),height:r.getHeight(),type:"html",resource:r.getContent(),click:null})}return t}(v(e,i.width,i.height,t)),n=r.length;if(n){var o=y.adsLoaderManager.adEventObject(e);o.companions=r,d.trigger(L,o)}if(u.companiondiv){t=new google.ima.CompanionAdSelectionSettings,u.companionResourceType&&(t.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType[u.companionResourceType]);var a=v(e,u.companiondiv.width,u.companiondiv.height,t);n=Math.max(n,a.length),function(e){if(e&&e.length){var t=document.getElementById(u.companiondiv.id);if(t){var i=e[0];i&&(s.isFunction(i.getContent)?t.innerHTML=i.getContent():t.innerHTML=i.resource||i.content)}}}(a)}return 0<n}function a(){y&&!y.destroyed()&&(d.off(null,null,y),y.destroy(),y=null)}function w(e){y&&y.discardAdBreak(),m.contentComplete(),a(),e&&e.adschedule?u.adschedule=e.adschedule:u.adschedule=null,d.setCues([])}function A(e,t,i){var r,n,o,a=this,s=e.item||{};w(s),t!==j||(r=u.getAdRules(),n=0===r.frequency&&1===h,o=h>=r.startOn&&(h-r.startOn)%r.frequency==0,n||o)?(c||(c=d.createInstream().getMediaElement()),i.getSchedule()?(m.reset(),(y=new we(s,u,d,f,p,m,c)).on("all",function(e,t){return d.trigger(e,t)}),y.init(t,i),y.on(T,function(e){b(e.ima.ad)}),d.once("beforePlay",function(e){if(u.premiumAds){var t=d.getHeight(),i=d.getWidth();if(t<270||i<480)return console.log("Premium Ads: Player size is smaller than 480x270 to play an ad"),void a.destroy();R()<0&&(g=Date.now())}y.beforePlay(e)},y).on("beforeComplete",function(){return y.beforeComplete()},y).on("time",function(e){return y.time(e)},y).on("resize",function(){return y.resize()},y).on("fullscreen",function(){return y.resize()},y)):D(l).then(function(){m.prepare(c)}).catch(l.noop)):u.adschedule=null}this.version="8.1.15",d.utils.extend(this,d.Events),d.pauseAd=function(e){y&&(e?y.pause():y.resume())},d.playAd=function(e){var t=l.extend({},n,{debug:u.debug});delete t.ad,delete t.tag,delete t.schedule,d._.isArray(e)?t.tag=e[0]:t.tag=e;var i=new k(t,l),r=y?y.blockingInstreamPlayer:null;r&&(r.noResume=!0),A({},_,i),y&&y.beforePlay(null)},d.on("ready",function(){D().catch(function(e){e.message.match(/Failed to load/)&&E("Ad playback blocked by an ad blocker",2e4)}),P.catch(function(e){E("Ad Error: "+e.message,60002)})},this).on("playlistItem",function(e){h++,A(e,j,u)},this).on("playlistComplete",function(){w()},this).on("cast",function(e){e.active&&w()},this).on("destroyPlugin",function(){i.destroy()},this);var P=O.call(this,l,o);P.catch(l.noop);var E=function(e,t){a(),d.off(null,null,i),d.playAd=l.noop,d.trigger(S,{id:M,client:C,message:e,code:900,adErrorCode:t,tag:""})};this.destroy=a,this.adsDebugMode=function(){u.debug=!0,y&&(y.debugConsoleLog=function(){var e;(e=console).log.apply(e,arguments)})}})}();
