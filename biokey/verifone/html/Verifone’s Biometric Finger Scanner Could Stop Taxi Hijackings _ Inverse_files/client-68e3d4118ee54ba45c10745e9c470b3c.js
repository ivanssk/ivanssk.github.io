!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n,i,o;n=r(1),i=r(37),o=r(260),o[".*"]={legacy:i},new n(o)},function(t,e,r){var n,i,o,s,a,p,c,u;i=r(2),p=r(16),n=r(20),a=r(21),s=r(34),o=r(35),c=r(36),u=r(11),u(p,window),p.redraw.strategy("diff"),t.exports=function(){function t(t,e,r){null==r&&(r="pathname"),this.isInverse()&&(p.route.mode=r,e=document.getElementById("layout"),new i({extensions:s,legacy:a,mithril:p}).routes(t,e))}return t.prototype.isInverse=function(){return/inverse.com|localhost$/.test(document.location.hostname)},t}()},function(t,e,r){(function(e){(function(){var n,i,o;e.window||(e.window={}),(o=e.window).setTimeout||(o.setTimeout=setTimeout),n=r(3),t.exports=i=function(){function t(t){var e;this.adapters=new n(t),e=this.adapters,this.render=e.render,this.server=e.server}return t.prototype.route=function(t){var e,r,n;return e=t.Component,n=t.path,r=this.adapters.composer({Component:e,path:n}),this.server?this.server.get({composer:r,path:n,render:this.adapters.render}):this.render.component(r)},t.prototype.routes=function(t,e){var r,n,i;null==t&&(t={}),n=function(e){return function(r,n){return t[r]=e.route({Component:n,path:r})}}(this);for(i in t)r=t[i],n(i,r);return this.render.routes(t,e),t},t}()}).call(this)}).call(e,function(){return this}())},function(t,e,r){(function(){var e;e=r(4),t.exports=function(){function t(t){var e,n,i;e=function(t){return function(e,n){var i,o;switch(e){case"express":return o=r(13),t.server=new o.Express(n);case"extensions":return t.extensions=n;case"mithril":return i=r(17),t.render=new i.Mithril(n);default:return t[e]=n}}}(this);for(i in t)n=t[i],e(i,n)}return t.prototype.composer=function(t){var r,n,i;return r=t.Component,i=t.path,"object"==typeof r?(n=Object.keys(r)[0],new this[n]({adapters:this,Component:r[n],extensions:this.extensions,path:i,render:this.render,server:this.server})):new e({adapters:this,Component:r,extensions:this.extensions,path:i,render:this.render,server:this.server})},t}()}).call(this)},function(t,e,r){(function(){var e,n=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.exports=e=function(){function t(t){var e,i,o,s,a,p,c,u;e=r(5)(t),i=r(6)(t),o=r(7)(t),s=r(8)(t),a=r(9)(t),p=r(10)(t),c=t.extensions?t.extensions(t):function(){function t(){t.__super__.constructor.apply(this,arguments)}return t}(),u=t.Component,this.Component=n(e,n(i,n(o,n(s,n(a,n(p,n(c,u)))))))}return t.prototype.component=function(t){return null==t&&(t={}),new this.Component(t)},t}()}).call(this)},function(t,e){(function(){t.exports=function(){return function(){function t(e){var r,n,i;if(e._globals){this._globals=e._globals,n=this._globals;for(r in n)i=n[r],this[r]=i}t.__super__.constructor.apply(this,arguments)}return t}()}}).call(this)},function(t,e,r){(function(){var e,n=[].slice;e=r(4),t.exports=function(t){return function(){function e(s){var a,p,c;p=function(e){return function(s,a){var p,c,u;if(s.match(/^[A-Z]/))return c=i(s),u=o(s),p=t.adapters.composer({Component:a}),e[s]=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],p.component.apply(p,t)},e[c]=r({composer:p,fn_name:c,var_name:u}).bind(e)}}(this);for(c in this)a=this[c],p(c,a);e.__super__.constructor.apply(this,arguments)}var r,i,o;return r=function(t){var e,r,i;return e=t.composer,r=t.fn_name,i=t.var_name,function(){var t,o,s,a,p,c,u,h,l;if(t=1<=arguments.length?n.call(arguments,0):[],u=["number","string"],c=u.indexOf(typeof t[0])>-1?t.shift():void 0,t[0]||(t[0]={}),t[0]._globals=this._globals,s=e.component.bind(e),r.match(/View$/))return s.apply(null,t).view();if(a=c?i+"_"+c:i,this._components||(this._components={}),this._components[a]){h=t[0];for(p in h)l=h[p],this._components[a][p]=l}else(o=this._components)[a]||(o[a]=s.apply(null,t));return this._components[a]}},i=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},o=function(t){return t.replace(/([A-Z])/g,"_$1").toLowerCase().substring(1)},e}()}}).call(this)},function(t,e){(function(){t.exports=function(){return function(){function t(){this._promises=[],t.__super__.constructor.apply(this,arguments)}return t}()}}).call(this)},function(t,e){(function(){var e=[].slice;t.exports=function(t){var r;return r=t.render,function(){function t(){this.p=function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],(n=r.mithril).prop.apply(n,t)},t.__super__.constructor.apply(this,arguments)}return t}()}}).call(this)},function(t,e){(function(){var e=[].slice;t.exports=function(t){var r;return r=t.render,function(){function t(){this.r=function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],(n=r.mithril).redraw.apply(n,t)},t.__super__.constructor.apply(this,arguments)}return t}()}}).call(this)},function(t,e,r){(function(){var e;e=r(11),t.exports=function(t){var r;return r=t.render,function(){function t(){e(r.mithril,this),t.__super__.constructor.apply(this,arguments)}return t}()}}).call(this)},function(t,e,r){var n;(function(t){!function(){var i=function(t,e){t.sugarTags=t.sugarTags||{},e=e||t;var r,n=function(t,e){var r;for(r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},i=function(t){var e;for(e in t)if(t[e]&&t[e].class)return"string"==t[e].class,t[e].class.split(" ")},o=function(e){var r,o;return function(){var s=Array.prototype.slice.call(arguments);if(r=i(s)){o=[e+"."+r.join(".")];for(var a in s)s[a]&&s[a].class&&delete s[a].class}else o=[e];return(t.e?t.e:t).apply(this,n(o,s))}},s=["A","ABBR","ACRONYM","ADDRESS","AREA","ARTICLE","ASIDE","AUDIO","B","BDI","BDO","BIG","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CITE","CODE","COL","COLGROUP","COMMAND","DATALIST","DD","DEL","DETAILS","DFN","DIV","DL","DT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HEAD","HEADER","HGROUP","HR","HTML","I","IFRAME","IMG","INPUT","INS","KBD","KEYGEN","LABEL","LEGEND","LI","LINK","MAP","MARK","META","METER","NAV","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","OUTPUT","P","PARAM","PRE","PROGRESS","Q","RP","RT","RUBY","SAMP","SCRIPT","SECTION","SELECT","SMALL","SOURCE","SPAN","SPLIT","STRONG","STYLE","SUB","SUMMARY","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","TT","UL","VAR","VIDEO","WBR"],a={};for(r in s)s.hasOwnProperty(r)&&!function(t){var r=t.toLowerCase();e[t]=a[r]=o(r)}(s[r]);return t.sugarTags.lower=function(){return a},e};"undefined"!=typeof t&&null!==t&&t.exports?t.exports=i:(n=function(){return i}.call(e,r,e,t),!(void 0!==n&&(t.exports=n)))}()}).call(e,r(12)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){(function(){t.exports={Express:r(14)}}).call(this)},function(t,e,r){(function(){var e,n;n=r(15),t.exports=e=function(){function t(t){this.express=t()}return t.prototype.get=function(t){var e,r,n;return e=t.composer,r=t.path,n=t.render,this.express.get(r,function(t){return function(r,i,o){var s,a,p;return s=t.globals({req:r,res:i}),a=e.component({_globals:s}),(null!=(p=a.server)?p.halt:void 0)?void a.server.end():(i.type(a.response_type||e.Component.response_type||"html"),t.request({component:a,render:n}))}}(this))},t.prototype.globals=function(t){var e,r;return e=t.req,r=t.res,{params:e.params,server:{req:e,res:r,status:function(t){return r.status(t).end()},end:function(t){return r.end(t)}}}},t.prototype.request=function(t){var e,r,i,o;if(e=t.component,i=t.render,r=!1,o=e.server,n.wait(e).then(function(t){return function(n){var s,a;if(s=n.error,!r)return r=!0,!s||(null!=(a=e.server)?a.force_render:void 0)?o.end(i.view(e)):(o.status(500),t.rejected?t.rejected({component:e}):void 0)}}(this)),!e.constructor.disable_timeout)return setTimeout(function(t){return function(){if(!r)return r=!0,o.status(500),t.timeout?t.timeout({component:e}):void 0}}(this),this.timeout_ms||5e3)},t}()}).call(this)},function(t,e,r){(function(){var e,n;n=r(16),t.exports=e=function(){function t(t){this._promises=t._promises,this.ignore_rejections=t.ignore_rejections}return t.prototype.loop=function(t){var e;return null==t&&(t=0),e=this._promises.length,this.delay(10).then(function(e){return function(){return t>500?n.sync([]):(t+=1,n.sync(e._promises))}}(this)).then(function(r){return function(){if(e!==r._promises.length)return r.loop(t)}}(this),function(r){return function(){return r.ignore_rejections?e!==r._promises.length?r.loop(t):void 0:(r.error=!0,n.sync([]))}}(this))},t.prototype.delay=function(t){var e;return e=n.deferred(),setTimeout(function(){return e.resolve()},t),e.promise},t.wait=function(e){var r;return r=new t(e),r.wait()},t.prototype.wait=function(){return this.loop().then(function(t){return function(){return t}}(this))},t}()}).call(this)},function(t,e,r){var n;(function(t){var i=function t(e,r){function n(t){T=t.document,D=t.location,I=t.cancelAnimationFrame||t.clearTimeout,O=t.requestAnimationFrame||t.setTimeout}function i(){var t,e=[].slice.call(arguments),r=!(null==e[1]||j.call(e[1])!==z||"tag"in e[1]||"subtree"in e[1]),n=r?e[1]:{},i="class"in n?"class":"className",o={tag:"div",attrs:{}},s=[];if(j.call(e[0])!=L)throw new Error("selector in m(selector, attrs, children) should be a string");for(;t=N.exec(e[0]);)if(""===t[1]&&t[2])o.tag=t[2];else if("#"===t[1])o.attrs.id=t[2];else if("."===t[1])s.push(t[2]);else if("["===t[3][0]){var a=B.exec(t[3]);o.attrs[a[1]]=a[3]||!a[2]||""}s.length>0&&(o.attrs[i]=s.join(" "));var p=r?e.slice(2):e.slice(1);1===p.length&&j.call(p[0])===E?o.children=p[0]:o.children=p;for(var c in n)if(c===i){var u=o.attrs[c];o.attrs[c]=(u&&n[c]?u+" ":u||"")+n[c]}else o.attrs[c]=n[c];return o}function o(t,e,n,c,h,l,d,f,m,y,g){try{null!=h&&null!=h.toString()||(h="")}catch(t){h=""}if("retain"===h.subtree)return l;var _=j.call(l),v=j.call(h);if(null==l||_!==v){if(null!=l)if(n&&n.nodes){var w=f-c,b=w+(v===E?h:l.nodes).length;p(n.nodes.slice(w,b),n.slice(w,b))}else l.nodes&&p(l.nodes,l);l=new h.constructor,l.tag&&(l={}),l.nodes=[]}if(v===E){for(var k=0,x=h.length;k<x;k++)j.call(h[k])===E&&(h=h.concat.apply([],h),k--,x=h.length);for(var S=[],C=l.length===h.length,A=0,P=1,D=2,O=3,I={},N=!1,k=0;k<l.length;k++)l[k]&&l[k].attrs&&null!=l[k].attrs.key&&(N=!0,I[l[k].attrs.key]={action:P,index:k});for(var B=0,k=0,x=h.length;k<x;k++)if(h[k]&&h[k].attrs&&null!=h[k].attrs.key){for(var R=0,x=h.length;R<x;R++)h[R]&&h[R].attrs&&null==h[R].attrs.key&&(h[R].attrs.key="__mithril__"+B++);break}if(N){var U=!1;if(h.length!=l.length)U=!0;else for(var H,F,k=0;H=l[k],F=h[k];k++)if(H.attrs&&F.attrs&&H.attrs.key!=F.attrs.key){U=!0;break}if(U){for(var k=0,x=h.length;k<x;k++)if(h[k]&&h[k].attrs&&null!=h[k].attrs.key){var q=h[k].attrs.key;I[q]?I[q]={action:O,index:k,from:I[q].index,element:l.nodes[I[q].index]||T.createElement("div")}:I[q]={action:D,index:k}}var W=[];for(var G in I)W.push(I[G]);var J=W.sort(s),$=new Array(l.length);$.nodes=l.nodes.slice();for(var K,k=0;K=J[k];k++){if(K.action===P&&(p(l[K.index].nodes,l[K.index]),$.splice(K.index,1)),K.action===D){var Y=T.createElement("div");Y.key=h[K.index].attrs.key,t.insertBefore(Y,t.childNodes[K.index]||null),$.splice(K.index,0,{attrs:{key:h[K.index].attrs.key},nodes:[Y]}),$.nodes[K.index]=Y}K.action===O&&(t.childNodes[K.index]!==K.element&&null!==K.element&&t.insertBefore(K.element,t.childNodes[K.index]||null),$[K.index]=l[K.from],$.nodes[K.index]=K.element)}l=$}}for(var k=0,Q=0,x=h.length;k<x;k++){var Z=o(t,e,l,f,h[k],l[Q],d,f+A||A,m,y,g);Z!==r&&(Z.nodes.intact||(C=!1),A+=Z.$trusted?(Z.match(/<[^\/]|\>\s*[^<]/g)||[0]).length:j.call(Z)===E?Z.length:1,l[Q++]=Z)}if(!C){for(var k=0,x=h.length;k<x;k++)null!=l[k]&&S.push.apply(S,l[k].nodes);for(var X,k=0;X=l.nodes[k];k++)null!=X.parentNode&&S.indexOf(X)<0&&p([X],[l[k]]);h.length<l.length&&(l.length=h.length),l.nodes=S}}else if(null!=h&&v===z){h.attrs||(h.attrs={}),l.attrs||(l.attrs={});var tt=Object.keys(h.attrs),et=tt.length>("key"in h.attrs?1:0);if((h.tag!=l.tag||tt.join()!=Object.keys(l.attrs).join()||h.attrs.id!=l.attrs.id||"all"==i.redraw.strategy()&&l.configContext&&l.configContext.retain!==!0||"diff"==i.redraw.strategy()&&l.configContext&&l.configContext.retain===!1)&&(l.nodes.length&&p(l.nodes),l.configContext&&typeof l.configContext.onunload===V&&l.configContext.onunload()),j.call(h.tag)!=L)return;var X,rt=0===l.nodes.length;if(h.attrs.xmlns?y=h.attrs.xmlns:"svg"===h.tag?y="http://www.w3.org/2000/svg":"math"===h.tag&&(y="http://www.w3.org/1998/Math/MathML"),rt?(X=h.attrs.is?y===r?T.createElement(h.tag,h.attrs.is):T.createElementNS(y,h.tag,h.attrs.is):y===r?T.createElement(h.tag):T.createElementNS(y,h.tag),l={tag:h.tag,attrs:et?a(X,h.tag,h.attrs,{},y):h.attrs,children:null!=h.children&&h.children.length>0?o(X,h.tag,r,r,h.children,l.children,!0,0,h.attrs.contenteditable?X:m,y,g):h.children,nodes:[X]},l.children&&!l.children.nodes&&(l.children.nodes=[]),"select"===h.tag&&h.attrs.value&&a(X,h.tag,{value:h.attrs.value},{},y),t.insertBefore(X,t.childNodes[f]||null)):(X=l.nodes[0],et&&a(X,h.tag,h.attrs,l.attrs,y),l.children=o(X,h.tag,r,r,h.children,l.children,!1,0,h.attrs.contenteditable?X:m,y,g),l.nodes.intact=!0,d===!0&&null!=X&&t.insertBefore(X,t.childNodes[f]||null)),typeof h.attrs.config===V){var nt=l.configContext=l.configContext||{retain:"diff"==i.redraw.strategy()||r},it=function(t,e){return function(){return t.attrs.config.apply(t,e)}};g.push(it(h,[X,!rt,nt,l]))}}else if(typeof h!=V){var S;0===l.nodes.length?(h.$trusted?S=u(t,f,h):(S=[T.createTextNode(h)],t.nodeName.match(M)||t.insertBefore(S[0],t.childNodes[f]||null)),l="string number boolean".indexOf(typeof h)>-1?new h.constructor(h):h,l.nodes=S):l.valueOf()!==h.valueOf()||d===!0?(S=l.nodes,m&&m===T.activeElement||(h.$trusted?(p(S,l),S=u(t,f,h)):"textarea"===e?t.value=h:m?m.innerHTML=h:((1===S[0].nodeType||S.length>1)&&(p(l.nodes,l),S=[T.createTextNode(h)]),t.insertBefore(S[0],t.childNodes[f]||null),S[0].nodeValue=h)),l=new h.constructor(h),l.nodes=S):l.nodes.intact=!0}return l}function s(t,e){return t.action-e.action||t.index-e.index}function a(t,e,r,n,i){for(var o in r){var s=r[o],a=n[o];if(o in n&&a===s)"value"===o&&"input"===e&&t.value!=s&&(t.value=s);else{n[o]=s;try{if("config"===o||"key"==o)continue;if(typeof s===V&&0===o.indexOf("on"))t[o]=h(s,t);else if("style"===o&&null!=s&&j.call(s)===z){for(var p in s)null!=a&&a[p]===s[p]||(t.style[p]=s[p]);for(var p in a)p in s||(t.style[p]="")}else null!=i?"href"===o?t.setAttributeNS("http://www.w3.org/1999/xlink","href",s):"className"===o?t.setAttribute("class",s):t.setAttribute(o,s):o in t&&"list"!==o&&"style"!==o&&"form"!==o&&"type"!==o&&"width"!==o&&"height"!==o?"input"===e&&t[o]===s||(t[o]=s):t.setAttribute(o,s)}catch(t){if(t.message.indexOf("Invalid argument")<0)throw t}}}return n}function p(t,e){for(var r=t.length-1;r>-1;r--)if(t[r]&&t[r].parentNode){try{t[r].parentNode.removeChild(t[r])}catch(t){}e=[].concat(e),e[r]&&c(e[r])}0!=t.length&&(t.length=0)}function c(t){if(t.configContext&&typeof t.configContext.onunload===V&&(t.configContext.onunload(),t.configContext.onunload=null),t.children)if(j.call(t.children)===E)for(var e,r=0;e=t.children[r];r++)c(e);else t.children.tag&&c(t.children)}function u(t,e,r){var n=t.childNodes[e];if(n){var i=1!=n.nodeType,o=T.createElement("span");i?(t.insertBefore(o,n||null),o.insertAdjacentHTML("beforebegin",r),t.removeChild(o)):n.insertAdjacentHTML("beforebegin",r)}else t.insertAdjacentHTML("beforeend",r);for(var s=[];t.childNodes[e]!==n;)s.push(t.childNodes[e]),e++;return s}function h(t,e){return function(r){r=r||event,i.redraw.strategy("diff"),i.startComputation();try{return t.call(e,r)}finally{tt()}}}function l(t){var e=H.indexOf(t);return e<0?H.push(t)-1:e}function d(t){var e=function(){return arguments.length&&(t=arguments[0]),t};return e.toJSON=function(){return t},e}function f(){for(var t,e=0;t=W[e];e++)J[e]&&i.render(t,G[e].view?G[e].view(J[e]):Z());Y&&(Y(),Y=null),$=null,K=new Date,i.redraw.strategy("diff")}function m(t){return t.slice(nt[i.route.mode].length)}function y(t,e,r){et={};var n=r.indexOf("?");n!==-1&&(et=w(r.substr(n+1,r.length)),r=r.substr(0,n));var o=Object.keys(e),s=o.indexOf(r);if(s!==-1)return i.module(t,e[o[s]]),!0;for(var a in e){if(a===r)return i.module(t,e[a]),!0;var p=new RegExp("^"+a.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(p.test(r))return r.replace(p,function(){for(var r=a.match(/:[^\/]+/g)||[],n=[].slice.call(arguments,1,-2),o=0,s=r.length;o<s;o++)et[r[o].replace(/:|\./g,"")]=decodeURIComponent(n[o]);i.module(t,e[a])}),!0}}function g(t){if(t=t||event,!t.ctrlKey&&!t.metaKey&&2!==t.which){t.preventDefault?t.preventDefault():t.returnValue=!1;for(var e=t.currentTarget||t.srcElement,r="pathname"===i.route.mode&&e.search?w(e.search.slice(1)):{};e&&"A"!=e.nodeName.toUpperCase();)e=e.parentNode;i.route(e[i.route.mode].slice(nt[i.route.mode].length),r)}}function _(){"hash"!=i.route.mode&&D.hash?D.hash=D.hash:e.scrollTo(0,0)}function v(t,e){var n={},i=[];for(var o in t){var s=e?e+"["+o+"]":o,a=t[o],p=j.call(a),c=null===a?encodeURIComponent(s):p===z?v(a,s):p===E?a.reduce(function(t,e){return n[s]||(n[s]={}),n[s][e]?t:(n[s][e]=!0,t.concat(encodeURIComponent(s)+"="+encodeURIComponent(e)))},[]).join("&"):encodeURIComponent(s)+"="+encodeURIComponent(a);a!==r&&i.push(c)}return i.join("&")}function w(t){for(var e=t.split("&"),r={},n=0,i=e.length;n<i;n++){var o=e[n].split("="),s=decodeURIComponent(o[0]),a=2==o.length?decodeURIComponent(o[1]):null;null!=r[s]?(j.call(r[s])!==E&&(r[s]=[r[s]]),r[s].push(a)):r[s]=a}return r}function b(t){var e=l(t);p(t.childNodes,F[e]),F[e]=r}function k(t,e){var r=i.prop(e);return t.then(r),r.then=function(r,n){return k(t.then(r,n),e)},r}function x(t,e){function r(t){h=t||c,d.map(function(t){h===p&&t.resolve(l)||t.reject(l)})}function n(t,e,r,n){if((null!=l&&j.call(l)===z||typeof l===V)&&typeof t===V)try{var o=0;t.call(l,function(t){o++||(l=t,e())},function(t){o++||(l=t,r())})}catch(t){i.deferred.onerror(t),l=t,r()}else n()}function o(){var c;try{c=l&&l.then}catch(t){return i.deferred.onerror(t),l=t,h=a,o()}n(c,function(){h=s,o()},function(){h=a,o()},function(){try{h===s&&typeof t===V?l=t(l):h===a&&"function"==typeof e&&(l=e(l),h=s)}catch(t){return i.deferred.onerror(t),l=t,r()}l===u?(l=TypeError(),r()):n(c,function(){r(p)},r,function(){r(h===s&&p)})})}var s=1,a=2,p=3,c=4,u=this,h=0,l=0,d=[];u.promise={},u.resolve=function(t){return h||(l=t,h=s,o()),this},u.reject=function(t){return h||(l=t,h=a,o()),this},u.promise.then=function(t,e){var r=new x(t,e);return h===p?r.resolve(l):h===c?r.reject(l):d.push(r),r.promise}}function S(t){return t}function C(t){if(!t.dataType||"jsonp"!==t.dataType.toLowerCase()){var n=new e.XMLHttpRequest;if(n.open(t.method,t.url,!0,t.user,t.password),n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?t.onload({type:"load",target:n}):t.onerror({type:"error",target:n}))},t.serialize===JSON.stringify&&t.data&&"GET"!==t.method&&n.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.deserialize===JSON.parse&&n.setRequestHeader("Accept","application/json, text/*"),typeof t.config===V){var i=t.config(n,t);null!=i&&(n=i)}var o="GET"!==t.method&&t.data?t.data:"";if(o&&j.call(o)!=L&&o.constructor!=e.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return n.send(o),n}var s="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),a=T.createElement("script");e[s]=function(n){a.parentNode.removeChild(a),t.onload({type:"load",target:{responseText:n}}),e[s]=r},a.onerror=function(n){return a.parentNode.removeChild(a),t.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),e[s]=r,!1},a.onload=function(t){return!1},a.src=t.url+(t.url.indexOf("?")>0?"&":"?")+(t.callbackKey?t.callbackKey:"callback")+"="+s+"&"+v(t.data||{}),T.body.appendChild(a)}function A(t,e,r){if("GET"===t.method&&"jsonp"!=t.dataType){var n=t.url.indexOf("?")<0?"?":"&",i=v(e);t.url=t.url+(i?n+i:"")}else t.data=r(e);return t}function P(t,e){var r=t.match(/:[a-z]\w+/gi);if(r&&e)for(var n=0;n<r.length;n++){var i=r[n].slice(1);t=t.replace(r[n],e[i]),delete e[i]}return t}var T,D,O,I,z="[object Object]",E="[object Array]",L="[object String]",V="function",j={}.toString,N=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,B=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,M=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;n(e);var R,U={appendChild:function(t){R===r&&(R=T.createElement("html")),T.documentElement&&T.documentElement!==t?T.replaceChild(t,T.documentElement):T.appendChild(t),this.childNodes=T.childNodes},insertBefore:function(t){this.appendChild(t)},childNodes:[]},H=[],F={};i.render=function(t,e,n){var i=[];if(e!==!1){if(!t)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var s=l(t),a=t===T,c=a||t===T.documentElement?U:t;a&&"html"!=e.tag&&(e={tag:"html",attrs:{},children:e}),F[s]===r&&p(c.childNodes),n===!0&&b(t),F[s]=o(c,null,r,r,e,F[s],!1,0,null,r,i);for(var u=0,h=i.length;u<h;u++)i[u]()}},i.trust=function(t){return t=new String(t),t.$trusted=!0,t},i.prop=function(t){return(null!=t&&j.call(t)===z||typeof t===V)&&typeof t.then===V?k(t):d(t)};var q,W=[],G=[],J=[],$=null,K=0,Y=null,Q=16;i.module=function(t,e){if(!t)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var r=W.indexOf(t);r<0&&(r=W.length);var n=!1;if(J[r]&&typeof J[r].onunload===V){var o={preventDefault:function(){n=!0}};J[r].onunload(o)}if(!n){i.redraw.strategy("all"),i.startComputation(),W[r]=t;var s=q=e=e||{},a=new(e.controller||function(){});return s===q&&(J[r]=a,G[r]=e),tt(),J[r]}},i.redraw=function(t){$&&t!==!0?(new Date-K>Q||O===e.requestAnimationFrame)&&($>0&&I($),$=O(f,Q)):(f(),$=O(function(){$=null},Q))},i.redraw.strategy=i.prop();var Z=function(){return""},X=0;i.startComputation=function(){X++},i.endComputation=function(){X=Math.max(X-1,0),0===X&&i.redraw()};var tt=function(){"none"==i.redraw.strategy()?(X--,i.redraw.strategy("diff")):i.endComputation()};i.withAttr=function(t,e){return function(r){r=r||event;var n=r.currentTarget||this;e(t in n?n[t]:n.getAttribute(t))}};var et,rt,nt={pathname:"",hash:"#",search:"?"},it=function(){};return i.route=function(){if(0===arguments.length)return rt;if(3===arguments.length&&j.call(arguments[1])===L){var t=arguments[0],r=arguments[1],n=arguments[2];it=function(e){var o=rt=m(e);y(t,n,o)||i.route(r,!0)};var o="hash"===i.route.mode?"onhashchange":"onpopstate";e[o]=function(){var t=D[i.route.mode];"pathname"===i.route.mode&&(t+=D.search),rt!=m(t)&&it(t)},Y=_,e[o]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){var s=arguments[0];arguments[1],arguments[2];s.href=("pathname"!==i.route.mode?D.pathname:"")+nt[i.route.mode]+this.attrs.href,s.addEventListener?(s.removeEventListener("click",g),s.addEventListener("click",g)):(s.detachEvent("onclick",g),s.attachEvent("onclick",g))}else if(j.call(arguments[0])===L){var a=rt;rt=arguments[0];var p=arguments[1]||{},c=rt.indexOf("?"),u=c>-1?w(rt.slice(c+1)):{};for(var h in p)u[h]=p[h];var l=v(u),d=c>-1?rt.slice(0,c):rt;l&&(rt=d+(d.indexOf("?")===-1?"?":"&")+l);var f=(3===arguments.length?arguments[2]:arguments[1])===!0||a===arguments[0];e.history.pushState?(Y=function(){e.history[f?"replaceState":"pushState"](null,T.title,nt[i.route.mode]+rt),_()},it(nt[i.route.mode]+rt)):(D[i.route.mode]=rt,it(nt[i.route.mode]+rt))}},i.route.param=function(t){if(!et)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return et[t]},i.route.mode="search",i.route.buildQueryString=v,i.route.parseQueryString=w,i.deferred=function(){var t=new x;return t.promise=k(t.promise),t},i.deferred.onerror=function(t){if("[object Error]"===j.call(t)&&!t.constructor.toString().match(/ Error/))throw t},i.sync=function(t){function e(t,e){return function(i){return s[t]=i,e||(r="reject"),0===--o&&(n.promise(s),n[r](s)),i}}var r="resolve",n=i.deferred(),o=t.length,s=new Array(o);if(t.length>0)for(var a=0;a<t.length;a++)t[a].then(e(a,!0),e(a,!1));else n.resolve([]);return n.promise},i.request=function(t){t.background!==!0&&i.startComputation();var e=new x,r=t.dataType&&"jsonp"===t.dataType.toLowerCase(),n=t.serialize=r?S:t.serialize||JSON.stringify,o=t.deserialize=r?S:t.deserialize||JSON.parse,s=t.extract||function(t){return 0===t.responseText.length&&o===JSON.parse?null:t.responseText};return t.url=P(t.url,t.data),t=A(t,t.data,n),t.onload=t.onerror=function(r){try{r=r||event;var n=("load"===r.type?t.unwrapSuccess:t.unwrapError)||S,a=n(o(s(r.target,t)),r.target);if("load"===r.type)if(j.call(a)===E&&t.type)for(var p=0;p<a.length;p++)a[p]=new t.type(a[p]);else t.type&&(a=new t.type(a));e["load"===r.type?"resolve":"reject"](a)}catch(t){i.deferred.onerror(t),e.reject(t)}t.background!==!0&&i.endComputation()},C(t),e.promise=k(e.promise,t.initialValue),e.promise},i.deps=function(t){return n(e=t||e),e},i.deps.factory=t,i}("undefined"!=typeof window?window:{});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=i:(n=function(){return i}.call(e,r,e,t),!(void 0!==n&&(t.exports=n)))}).call(e,r(12)(t))},function(t,e,r){(function(){t.exports={Mithril:r(18)}}).call(this)},function(t,e,r){(function(){var e,n,i=[].slice;e=r(15),"undefined"!=typeof document&&null!==document||(n=r(19)),t.exports=function(){function t(t){this.mithril=t}return t.prototype.component=function(t){var r;return r=this.globals(),{controller:function(){var n;return n=t.component({_globals:r}),"undefined"!=typeof window&&null!==window&&(window.paradisoReady=function(){return e.wait(n)}),n},view:function(t){return t.view()}}},t.prototype.globals=function(){var t;return t=this.mithril,{params:t.route.param}},t.prototype.render=function(){var t,e;return t=1<=arguments.length?i.call(arguments,0):[],(e=this.mithril).render.apply(e,t)},t.prototype.routes=function(t,e){if("undefined"!=typeof document&&null!==document)return this.mithril.route(e||document.body,"/",t)},t.prototype.view=function(t){return"undefined"!=typeof document&&null!==document?t.view():n(t.view())},t}()}).call(this)},function(t,e){"use strict";function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2")}function i(t){return t&&Object.keys(t).length?Object.keys(t).map(function(e){if("function"!=typeof t[e]){if("style"===e){var r=t.style;return"string"==typeof r?' style="'+r+'"':' style="'+Object.keys(r).map(function(t){return[n(t).toLowerCase(),r[t]].join(":")}).join(";")+'"'}return" "+("className"===e?"class":e)+'="'+t[e]+'"'}}).join(""):""}function o(t){return Object.keys(t).map(function(e){return"$trusted"===e?"":t[e]}).join("")}function s(t){return t.children&&t.children.length?a(t.children):""}function a(t){if(!t)return"";if("string"==typeof t||"number"==typeof t)return t;if(r(t))return t.map(a).join("");if(t.$trusted)return o(t);var e=s(t);return!e&&p.indexOf(t.tag)>=0?"<"+t.tag+i(t.attrs)+">":["<",t.tag,i(t.attrs),">",e,"</",t.tag,">"].join("")}var p=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];t.exports=a},function(t,e,r){var n,i;i=function(){try{return r(!function(){var t=new Error('Cannot find module "../config/domains/development"');throw t.code="MODULE_NOT_FOUND",t}())}catch(t){}}()||{},t.exports=n=function(){function t(t,e){this.server=t,this.env=null!=e?e:"production",this.env||(this.env="development"),this.origin="origin",this.name=void 0,this.serverToVars(this.server),this.shouldVars()}return t.prototype.envUrl=function(t){var e;return"www"===t&&(t="flatiron"),e=(t.toUpperCase()+"_URL").replace(/[\.\-]/,"_"),"development"===this.env?i[e]||{DOMAIN:"inverse.com",ENV:"production",FLATIRON_NAME:void 0,NODE_ENV:"production"}[e]:{DOMAIN:"inverse.com",ENV:"production",FLATIRON_NAME:void 0,NODE_ENV:"production"}[e]},t.prototype.hostShouldBe=function(){return"production"===this.env,"inverse.com"},t.prototype.httpShouldBe=function(t){return t.match(/^ws-/)?this.ws_should:this.http_should},t.prototype.isArticle=function(){return null!=this.path.match(/^\/article\//)},t.prototype.isCdn=function(){var t,e,r,n;return n="production"===this.env,e="development"!==this.env,t=!this.isCms(),r=!this.isOriginArticle(),(n||!this.isOrigin())&&t&&e&&r},t.prototype.isCms=function(){return null!=this.path.match(/^\/cms\//)},t.prototype.isHttps=function(){return"development"!==this.env},t.prototype.isOriginArticle=function(){return this.isOrigin()&&this.isArticle()},t.prototype.isOrigin=function(){return null!=this.host.match(RegExp(this.origin+"\\."+this.host_should))},t.prototype.legacyUrl=function(t,e){return e},t.prototype.portShouldBe=function(t){var e;return"development"!==this.env&&"test"!==this.env?"":(e={www:":8000",consumer:":8000",morgue:":4000","ws-morgue":":4000",sorta:":4002","ws-sorta":":4002",weaver:":3000",auther:":4003",barker:":4004",mailman:":4005",catalog:":4007","ws-catalog":":4007",pillager:":4009",skreemr:":4010","ws-skreemr":":4010",diplomat:":4012","ws-shaper":":4013"},e[t])},t.prototype.redirect=function(t){return this.url(t)!==this.urlShouldBe(t)},t.prototype.redirectUrl=function(t){return""+this.urlShouldBe(t)+this.path},t.prototype.serverToVars=function(){var t;return null!=(null!=(t=this.server)?t.req:void 0)?(this.server.req.get("fastly-ssl")&&(this.http="https"),this.http||(this.http=this.server.req.protocol),this.host=this.server.req.get("host"),this.path=this.server.req.originalUrl):null!=("undefined"!=typeof window&&null!==window?window.location:void 0)?(this.http=window.location.protocol.slice(0,-1),this.host=window.location.host,this.path=window.location.pathname):"test"===this.env?(this.http="",this.host="127.0.0.1",this.path=""):void 0},t.prototype.shouldVars=function(){return this.host_should=this.hostShouldBe(),this.isCdn()?this.origin_should="":this.origin_should=this.origin+".",this.isHttps()?(this.http_should="https",this.ws_should="wss"):(this.http_should="http",this.ws_should="ws")},t.prototype.subShouldBe=function(t){var e,r,n,i,o,s,a,p;return r="development"===this.env,a="test"===this.env,s="staging"===this.env,o="production"===this.env,p="www"===t,e="consumer"===t,i=this.origin_should.length,r||a||e?"":(n={origin:i,production:o,staging:s,sub:t,www:p},this.subProdCms(n)||this.subProdOrigin(n)||this.subStaging(n)||this.subWebsocket(n)||t+"."+this.origin_should)},t.prototype.subProdCms=function(t){var e,r,n;if(r=t.production,n=t.www,e=t.origin,r&&n&&e&&"origin."!==this.origin_should)return this.origin_should+"origin."},t.prototype.subProdOrigin=function(t){var e,r,n;if(r=t.production,n=t.www,e=t.origin,r&&n&&e)return"www."+this.origin_should},t.prototype.subStaging=function(t){var e,r;if(e=t.staging,r=t.www,e&&r)return"www."+this.origin_should},t.prototype.subWebsocket=function(t){var e;if(e=t.sub,e.match(/^ws-/))return e+".origin."},t.prototype.url=function(t){return this.legacyUrl(t,this.http+"://"+this.host)},t.prototype.urlShouldBe=function(t){var e;return e=this.envUrl(t),e||(e=[this.httpShouldBe(t),"://",this.subShouldBe(t),this.host_should,this.portShouldBe(t)].join("")),this.legacyUrl(t,e)},t.prototype.urls=function(){return{flatiron:this.urlShouldBe("www"),consumer:this.urlShouldBe("www"),morgue:this.urlShouldBe("morgue"),morgue_ws:this.urlShouldBe("ws-morgue"),sorta:this.urlShouldBe("sorta"),sorta_ws:this.urlShouldBe("ws-sorta"),auther:this.urlShouldBe("auther"),weaver:this.urlShouldBe("weaver"),barker:this.urlShouldBe("barker"),mailman:this.urlShouldBe("mailman"),pillager:this.urlShouldBe("pillager"),skreemr:this.urlShouldBe("skreemr"),skreemr_ws:this.urlShouldBe("ws-skreemr"),diplomat:this.urlShouldBe("diplomat"),
catalog:this.urlShouldBe("catalog"),catalog_ws:this.urlShouldBe("ws-catalog")}},t}()},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n={Promises:r(22)},t.exports=function(){function t(t){var e,r;e=t.Component,r=function(){function t(e){var r;r=n.Promises.get(e),this._promises=r.promises,t.__super__.constructor.apply(this,arguments)}return t}(),this.Component=i(r,e)}return t.prototype.component=function(t){var e,r;return null==t&&(t={}),r=t._globals.server,e=new this.Component(r),e.legacy=!0,e.server=r,e.view=function(e,r){return this.render(e||t,r)},e},t}()},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=r(23),"undefined"!=typeof document&&null!==document||(o=r(33)),n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.reset()}return s(e,t),e.cache_key="promises",e.prototype.add=function(t,e){return this.promises_finished||(this.params.push(t),this.promises.push(e)),e},e.prototype.error=function(t){var e;return"undefined"!=typeof document&&null!==document||(e="Ajax "+t.method+" error",console.error(e,JSON.stringify(t,null,2)),o.notify(new Error(e),{data:t})),this.errors.push(t),t},e.prototype.paramsForError=function(){var t,e,r;return r=[],t=[],e=this.params.map(function(t){return function(t){return{url:t.url,method:t.method,data:t.data}}}(this)),this.promises.forEach(function(e){return function(e,n){return e.then(function(){return r.push(n)},function(){return t.push(n)})}}(this)),{data:{params:e,errors:this.errors,resolved:r,failed:t}}},e.prototype.reset=function(t){return null==t&&(t=!1),this.errors=[],this.params=[],this.promises=[],this.promises_finished=t,this.render_calls=0},e}(i),t.exports=i.export(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;o=r(24),s=r(16),n=r(25),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.export=function(t){return{get:function(e){var r,n;if("undefined"!=typeof document&&null!==document)n=window.store_cache||(window.store_cache={});else{if(!e)throw console.trace(),new Error("state called without server!");n=e.store||(e.store={})}if(!t.cache_key)throw new Error("store does not have @cache_key");return r=t.cache_key,null==n[r]&&(n[r]=new t(void 0,void 0,e)),n[r]}}},e}(n),t.exports=i},function(t,e,r){var n;(function(t,i){(function(){function o(t,e){if(t!==e){var r=null===t,n=t===xr,i=t===t,o=null===e,s=e===xr,a=e===e;if(t>e&&!o||!i||r&&!s&&a||n&&a)return 1;if(t<e&&!r||!a||o&&!n&&i||s&&i)return-1}return 0}function s(t,e,r){for(var n=t.length,i=r?n:-1;r?i--:++i<n;)if(e(t[i],i,t))return i;return-1}function a(t,e,r){if(e!==e)return f(t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function p(t){return null==t?"":t+""}function c(t,e){for(var r=-1,n=t.length;++r<n&&e.indexOf(t.charAt(r))>-1;);return r}function u(t,e){for(var r=t.length;r--&&e.indexOf(t.charAt(r))>-1;);return r}function h(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function l(t){return Dn[t]}function d(t){return On[t]}function f(t,e,r){for(var n=t.length,i=e+(r?0:-1);r?i--:++i<n;){var o=t[i];if(o!==o)return i}return-1}function m(t){return!!t&&"object"==typeof t}function y(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function g(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;)t[r]===e&&(t[r]=Ur,o[++i]=r);return o}function _(t,e){for(var r,n=-1,i=t.length,o=-1,s=[];++n<i;){var a=t[n],p=e?e(a,n,t):a;n&&r===p||(r=p,s[++o]=a)}return s}function v(t){for(var e=-1,r=t.length;++e<r&&y(t.charCodeAt(e)););return e}function w(t){for(var e=t.length;e--&&y(t.charCodeAt(e)););return e}function b(t){return In[t]}function k(t){if(m(t)&&!Vi(t)&&!(t instanceof C)){if(t instanceof S)return t;if(Wn.call(t,"__chain__")&&Wn.call(t,"__wrapped__"))return de(t)}return new S(t)}function x(){}function S(t,e,r){this.__wrapped__=t,this.__actions__=r||[],this.__chain__=!!e}function C(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ui,this.__views__=[]}function A(){var t=new C(this.__wrapped__);return t.__actions__=E(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=E(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=E(this.__views__),t}function P(){if(this.__filtered__){var t=new C(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function T(){var t=this.__wrapped__.value(),e=this.__dir__,r=Vi(t),n=e<0,i=r?t.length:0,o=Kt(0,i,this.__views__),s=o.start,a=o.end,p=a-s,c=n?a:s-1,u=this.__iteratees__,h=u.length,l=0,d=ai(p,this.__takeCount__);if(!r||i<Nr||i==p&&d==p)return _t(t,this.__actions__);var f=[];t:for(;p--&&l<d;){c+=e;for(var m=-1,y=t[c];++m<h;){var g=u[m],_=g.iteratee,v=g.type,w=_(y);if(v==Mr)y=w;else if(!w){if(v==Br)continue t;break t}}f[l++]=y}return f}function D(t){var e=t?t.length:0;for(this.data={hash:ei(null),set:new Yn};e--;)this.push(t[e])}function O(t,e){var r=t.data,n="string"==typeof e||Je(e)?r.set.has(e):r.hash[e];return n?0:-1}function I(t){var e=this.data;"string"==typeof t||Je(t)?e.set.add(t):e.hash[t]=!0}function z(t,e){for(var r=-1,n=t.length,i=-1,o=e.length,s=Array(n+o);++r<n;)s[r]=t[r];for(;++i<o;)s[r++]=e[i];return s}function E(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function L(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function V(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[++i]=s)}return o}function j(t,e){for(var r=-1,n=t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function N(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function B(t,e,r,n){var i=-1,o=t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function M(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function R(t,e){return t===xr?e:t}function U(t,e,r){for(var n=-1,i=Ri(e),o=i.length;++n<o;){var s=i[n],a=t[s],p=r(a,e[s],s,t,e);(p===p?p===a:a!==a)&&(a!==xr||s in t)||(t[s]=p)}return t}function H(t,e){return null==e?t:q(e,Ri(e),t)}function F(t,e){for(var r=-1,n=null==t,i=!n&&Xt(t),o=i?t.length:0,s=e.length,a=Array(s);++r<s;){var p=e[r];i?a[r]=te(p,o)?t[p]:xr:a[r]=n?xr:t[p]}return a}function q(t,e,r){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n];r[o]=t[o]}return r}function W(t,e,r){var n=typeof t;return"function"==n?e===xr?t:bt(t,e,r):null==t?_r:"object"==n?ot(t):e===xr?kr(t):st(t,e)}function G(t,e,r,n,i,o,s){var a;if(r&&(a=i?r(t,n,i):r(t)),a!==xr)return a;if(!Je(t))return t;var p=Vi(t);if(p){if(a=Yt(t),!e)return E(t,a)}else{var c=Gn.call(t),u=c==Jr;if(c!=Yr&&c!=Hr&&(!u||i))return Tn[c]?Zt(t,c,e):i?t:{};if(Mn(t))return i?t:{};if(a=Qt(u?{}:t),!e)return H(a,t)}o||(o=[]),s||(s=[]);for(var h=o.length;h--;)if(o[h]==t)return s[h];return o.push(t),s.push(a),(p?L:Z)(t,function(n,i){a[i]=G(n,e,r,i,t,o,s)}),a}function J(t,e){var r=t?t.length:0,n=[];if(!r)return n;var i=-1,o=Gt(),s=o===a,p=s&&e.length>=Nr?Dt(e):null,c=e.length;p&&(o=O,s=!1,e=p);t:for(;++i<r;){var u=t[i];if(s&&u===u){for(var h=c;h--;)if(e[h]===u)continue t;n.push(u)}else o(e,u,0)<0&&n.push(u)}return n}function $(t,e){var r=[];return bi(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function K(t,e,r,n){var i;return r(t,function(t,r,o){if(e(t,r,o))return i=n?r:t,!1}),i}function Y(t,e,r,n){n||(n=[]);for(var i=-1,o=t.length;++i<o;){var s=t[i];m(s)&&Xt(s)&&(r||Vi(s)||Fe(s))?e?Y(s,e,r,n):N(n,s):r||(n[n.length]=s)}return n}function Q(t,e){return ki(t,e,ir)}function Z(t,e){return ki(t,e,Ri)}function X(t,e){for(var r=-1,n=e.length,i=-1,o=[];++r<n;){var s=e[r];Ge(t[s])&&(o[++i]=s)}return o}function tt(t,e,r){if(null!=t){t=he(t),r!==xr&&r in t&&(e=[r]);for(var n=0,i=e.length;null!=t&&n<i;)t=he(t)[e[n++]];return n&&n==i?t:xr}}function et(t,e,r,n,i,o){return t===e||(null==t||null==e||!Je(t)&&!m(e)?t!==t&&e!==e:rt(t,e,et,r,n,i,o))}function rt(t,e,r,n,i,o,s){var a=Vi(t),p=Vi(e),c=Fr,u=Fr;a||(c=Gn.call(t),c==Hr?c=Yr:c!=Yr&&(a=tr(t))),p||(u=Gn.call(e),u==Hr?u=Yr:u!=Yr&&(p=tr(e)));var h=c==Yr&&!Mn(t),l=u==Yr&&!Mn(e),d=c==u;if(d&&!a&&!h)return Ht(t,e,c);if(!i){var f=h&&Wn.call(t,"__wrapped__"),m=l&&Wn.call(e,"__wrapped__");if(f||m)return r(f?t.value():t,m?e.value():e,n,i,o,s)}if(!d)return!1;o||(o=[]),s||(s=[]);for(var y=o.length;y--;)if(o[y]==t)return s[y]==e;o.push(t),s.push(e);var g=(a?Ut:Ft)(t,e,r,n,i,o,s);return o.pop(),s.pop(),g}function nt(t,e,r){var n=e.length,i=n,o=!r;if(null==t)return!i;for(t=he(t);n--;){var s=e[n];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<i;){s=e[n];var a=s[0],p=t[a],c=s[1];if(o&&s[2]){if(p===xr&&!(a in t))return!1}else{var u=r?r(p,c,a):xr;if(!(u===xr?et(c,p,r,!0):u))return!1}}return!0}function it(t,e){var r=-1,n=Xt(t)?Array(t.length):[];return bi(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function ot(t){var e=Jt(t);if(1==e.length&&e[0][2]){var r=e[0][0],n=e[0][1];return function(t){return null!=t&&(t=he(t),t[r]===n&&(n!==xr||r in t))}}return function(t){return nt(t,e)}}function st(t,e){var r=Vi(t),n=re(t)&&oe(e),i=t+"";return t=le(t),function(o){if(null==o)return!1;var s=i;if(o=he(o),(r||!n)&&!(s in o)){if(o=1==t.length?o:tt(o,ft(t,0,-1)),null==o)return!1;s=ve(t),o=he(o)}return o[s]===e?e!==xr||s in o:et(e,o[s],xr,!0)}}function at(t,e,r,n,i){if(!Je(t))return t;var o=Xt(e)&&(Vi(e)||tr(e)),s=o?xr:Ri(e);return L(s||e,function(a,p){if(s&&(p=a,a=e[p]),m(a))n||(n=[]),i||(i=[]),pt(t,e,p,at,r,n,i);else{var c=t[p],u=r?r(c,a,p,t,e):xr,h=u===xr;h&&(u=a),u===xr&&(!o||p in t)||!h&&(u===u?u===c:c!==c)||(t[p]=u)}}),t}function pt(t,e,r,n,i,o,s){for(var a=o.length,p=e[r];a--;)if(o[a]==p)return void(t[r]=s[a]);var c=t[r],u=i?i(c,p,r,t,e):xr,h=u===xr;h&&(u=p,Xt(p)&&(Vi(p)||tr(p))?u=Vi(c)?c:Xt(c)?E(c):[]:Qe(p)||Fe(p)?u=Fe(c)?rr(c):Qe(c)?c:{}:h=!1),o.push(p),s.push(u),h?t[r]=n(u,p,i,o,s):(u===u?u!==c:c===c)&&(t[r]=u)}function ct(t){return function(e){return null==e?xr:he(e)[t]}}function ut(t){var e=t+"";return t=le(t),function(r){return tt(r,t,e)}}function ht(t,e){for(var r=t?e.length:0;r--;){var n=e[r];if(n!=i&&te(n)){var i=n;Qn.call(t,n,1)}}return t}function lt(t,e){return t+ri(ci()*(e-t+1))}function dt(t,e,r,n,i){return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function ft(t,e,r){var n=-1,i=t.length;e=null==e?0:+e||0,e<0&&(e=-e>i?0:i+e),r=r===xr||r>i?i:+r||0,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}function mt(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function yt(t,e){var r=-1,n=Gt(),i=t.length,o=n===a,s=o&&i>=Nr,p=s?Dt():null,c=[];p?(n=O,o=!1):(s=!1,p=e?[]:c);t:for(;++r<i;){var u=t[r],h=e?e(u,r,t):u;if(o&&u===u){for(var l=p.length;l--;)if(p[l]===h)continue t;e&&p.push(h),c.push(u)}else n(p,h,0)<0&&((e||s)&&p.push(h),c.push(u))}return c}function gt(t,e){for(var r=-1,n=e.length,i=Array(n);++r<n;)i[r]=t[e[r]];return i}function _t(t,e){var r=t;r instanceof C&&(r=r.value());for(var n=-1,i=e.length;++n<i;){var o=e[n];r=o.func.apply(o.thisArg,N([r],o.args))}return r}function vt(t,e,r){var n=0,i=t?t.length:n;if("number"==typeof e&&e===e&&i<=di){for(;n<i;){var o=n+i>>>1,s=t[o];(r?s<=e:s<e)&&null!==s?n=o+1:i=o}return i}return wt(t,e,_r,r)}function wt(t,e,r,n){e=r(e);for(var i=0,o=t?t.length:0,s=e!==e,a=null===e,p=e===xr;i<o;){var c=ri((i+o)/2),u=r(t[c]),h=u!==xr,l=u===u;if(s)var d=l||n;else d=a?l&&h&&(n||null!=u):p?l&&(n||h):null!=u&&(n?u<=e:u<e);d?i=c+1:o=c}return ai(o,li)}function bt(t,e,r){if("function"!=typeof t)return _r;if(e===xr)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,s){return t.call(e,r,n,i,o,s)}}return function(){return t.apply(e,arguments)}}function kt(t){var e=new $n(t.byteLength),r=new Zn(e);return r.set(new Zn(t)),e}function xt(t,e,r){for(var n=r.length,i=-1,o=si(t.length-n,0),s=-1,a=e.length,p=Array(a+o);++s<a;)p[s]=e[s];for(;++i<n;)p[r[i]]=t[i];for(;o--;)p[s++]=t[i++];return p}function St(t,e,r){for(var n=-1,i=r.length,o=-1,s=si(t.length-i,0),a=-1,p=e.length,c=Array(s+p);++o<s;)c[o]=t[o];for(var u=o;++a<p;)c[u+a]=e[a];for(;++n<i;)c[u+r[n]]=t[o++];return c}function Ct(t,e){return function(r,n,i){var o=e?e():{};if(n=qt(n,i,3),Vi(r))for(var s=-1,a=r.length;++s<a;){var p=r[s];t(o,p,n(p,s,r),r)}else bi(r,function(e,r,i){t(o,e,n(e,r,i),i)});return o}}function At(t){return Ue(function(e,r){var n=-1,i=null==e?0:r.length,o=i>2?r[i-2]:xr,s=i>2?r[2]:xr,a=i>1?r[i-1]:xr;for("function"==typeof o?(o=bt(o,a,5),i-=2):(o="function"==typeof a?a:xr,i-=o?1:0),s&&ee(r[0],r[1],s)&&(o=i<3?xr:o,i=1);++n<i;){var p=r[n];p&&t(e,p,o)}return e})}function Pt(t,e){return function(r,n){var i=r?Ci(r):0;if(!ie(i))return t(r,n);for(var o=e?i:-1,s=he(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}function Tt(t){return function(e,r,n){for(var i=he(e),o=n(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var p=o[a];if(r(i[p],p,i)===!1)break}return e}}function Dt(t){return ei&&Yn?new D(t):null}function Ot(t){return function(e){for(var r=-1,n=yr(ur(e)),i=n.length,o="";++r<i;)o=t(o,n[r],r);return o}}function It(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=wi(t.prototype),n=t.apply(r,e);return Je(n)?n:r}}function zt(t,e){return Ue(function(r){var n=r[0];return null==n?n:(r.push(e),t.apply(xr,r))})}function Et(t,e){return function(r,n,i){if(n=qt(n,i,3),Vi(r)){var o=s(r,n,e);return o>-1?r[o]:xr}return K(r,n,t)}}function Lt(t){return function(e,r,n){return r=qt(r,n,3),K(e,r,t,!0)}}function Vt(t,e){return function(r,n,i){return"function"==typeof n&&i===xr&&Vi(r)?t(r,n):e(r,bt(n,i,3))}}function jt(t){return function(e,r,n){var i={};return r=qt(r,n,3),Z(e,function(e,n,o){var s=r(e,n,o);n=t?s:n,e=t?e:s,i[n]=e}),i}}function Nt(t){return function(e,r,n){return e=p(e),(t?e:"")+Rt(e,r,n)+(t?"":e)}}function Bt(t,e){return function(r,n,i,o){var s=arguments.length<3;return"function"==typeof n&&o===xr&&Vi(r)?t(r,n,i,s):dt(r,qt(n,o,4),i,s,e)}}function Mt(t,e,r,n,i,o,s,a,p,c){function u(){for(var v=arguments.length,w=v,b=Array(v);w--;)b[w]=arguments[w];if(n&&(b=xt(b,n,i)),o&&(b=St(b,o,s)),f||y){var k=u.placeholder,x=g(b,k);if(v-=x.length,v<c){var S=a?E(a):xr,C=si(c-v,0),A=f?x:xr,P=f?xr:x,T=f?b:xr,D=f?xr:b;e|=f?Or:Ir,e&=~(f?Ir:Or),m||(e&=~(Cr|Ar));var O=[t,e,r,T,A,D,P,S,p,C],I=Mt.apply(xr,O);return ne(t)&&Ai(I,O),I.placeholder=k,I}}var z=l?r:this,L=d?z[t]:t;return a&&(b=pe(b,a)),h&&p<b.length&&(b.length=p),this&&this!==Bn&&this instanceof u&&(L=_||It(t)),L.apply(z,b)}var h=e&zr,l=e&Cr,d=e&Ar,f=e&Tr,m=e&Pr,y=e&Dr,_=d?xr:It(t);return u}function Rt(t,e,r){var n=t.length;if(e=+e,n>=e||!ii(e))return"";var i=e-n;return r=null==r?" ":r+"",lr(r,ti(i/r.length)).slice(0,i)}function Ut(t,e,r,n,i,o,s){var a=-1,p=t.length,c=e.length;if(p!=c&&!(i&&c>p))return!1;for(;++a<p;){var u=t[a],h=e[a],l=n?n(i?h:u,i?u:h,a):xr;if(l!==xr){if(l)continue;return!1}if(i){if(!M(e,function(t){return u===t||r(u,t,n,i,o,s)}))return!1}else if(u!==h&&!r(u,h,n,i,o,s))return!1}return!0}function Ht(t,e,r){switch(r){case qr:case Wr:return+t==+e;case Gr:return t.name==e.name&&t.message==e.message;case Kr:return t!=+t?e!=+e:t==+e;case Qr:case Xr:return t==e+""}return!1}function Ft(t,e,r,n,i,o,s){var a=Ri(t),p=a.length,c=Ri(e),u=c.length;if(p!=u&&!i)return!1;for(var h=p;h--;){var l=a[h];if(!(i?l in e:Wn.call(e,l)))return!1}for(var d=i;++h<p;){l=a[h];var f=t[l],m=e[l],y=n?n(i?m:f,i?f:m,l):xr;if(!(y===xr?r(f,m,n,i,o,s):y))return!1;d||(d="constructor"==l)}if(!d){var g=t.constructor,_=e.constructor;if(g!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _))return!1}return!0}function qt(t,e,r){var n=k.callback||gr;return n=n===gr?W:n,r?n(t,e,r):n}function Wt(t){for(var e=t.name+"",r=yi[e],n=r?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function Gt(t,e,r){var n=k.indexOf||_e;return n=n===_e?a:n,t?n(t,e,r):n}function Jt(t){for(var e=or(t),r=e.length;r--;)e[r][2]=oe(e[r][1]);return e}function $t(t,e){var r=null==t?xr:t[e];return Ke(r)?r:xr}function Kt(t,e,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=ai(e,t+s);break;case"takeRight":t=si(t,e-s)}}return{start:t,end:e}}function Yt(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Wn.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Qt(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}function Zt(t,e,r){var n=t.constructor;switch(e){case en:return kt(t);case qr:case Wr:return new n(+t);case rn:case nn:case on:case sn:case an:case pn:case cn:case un:case hn:n instanceof n&&(n=gi[e]);var i=t.buffer;return new n(r?kt(i):i,t.byteOffset,t.length);case Kr:case Xr:return new n(t);case Qr:var o=new n(t.source,bn.exec(t));o.lastIndex=t.lastIndex}return o}function Xt(t){return null!=t&&ie(Ci(t))}function te(t,e){return t="number"==typeof t||xn.test(t)?+t:-1,e=null==e?fi:e,t>-1&&t%1==0&&t<e}function ee(t,e,r){if(!Je(r))return!1;var n=typeof e;if("number"==n?Xt(r)&&te(e,r.length):"string"==n&&e in r){var i=r[e];return t===t?t===i:i!==i}return!1}function re(t,e){var r=typeof t;if("string"==r&&gn.test(t)||"number"==r)return!0;if(Vi(t))return!1;var n=!yn.test(t);return n||null!=e&&t in he(e)}function ne(t){var e=Wt(t),r=k[e];if("function"!=typeof r||!(e in C.prototype))return!1;if(t===r)return!0;var n=Si(r);return!!n&&t===n[0]}function ie(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=fi}function oe(t){return t===t&&!Je(t)}function se(t,e){t=he(t);for(var r=-1,n=e.length,i={};++r<n;){var o=e[r];o in t&&(i[o]=t[o])}return i}function ae(t,e){var r={};return Q(t,function(t,n,i){e(t,n,i)&&(r[n]=t)}),r}function pe(t,e){for(var r=t.length,n=ai(e.length,r),i=E(t);n--;){var o=e[n];t[n]=te(o,r)?i[o]:xr}return t}function ce(t){for(var e=ir(t),r=e.length,n=r&&t.length,i=!!n&&ie(n)&&(Vi(t)||Fe(t)||Xe(t)),o=-1,s=[];++o<r;){var a=e[o];(i&&te(a,n)||Wn.call(t,a))&&s.push(a)}return s}function ue(t){return null==t?[]:Xt(t)?k.support.unindexedChars&&Xe(t)?t.split(""):Je(t)?t:Object(t):ar(t)}function he(t){if(k.support.unindexedChars&&Xe(t)){for(var e=-1,r=t.length,n=Object(t);++e<r;)n[e]=t.charAt(e);return n}return Je(t)?t:Object(t)}function le(t){if(Vi(t))return t;var e=[];return p(t).replace(_n,function(t,r,n,i){e.push(n?i.replace(wn,"$1"):r||t)}),e}function de(t){return t instanceof C?t.clone():new S(t.__wrapped__,t.__chain__,E(t.__actions__))}function fe(t,e,r){e=(r?ee(t,e,r):null==e)?1:si(ri(e)||1,1);for(var n=0,i=t?t.length:0,o=-1,s=Array(ti(i/e));n<i;)s[++o]=ft(t,n,n+=e);return s}function me(t,e,r){var n=t?t.length:0;return n?((r?ee(t,e,r):null==e)&&(e=1),ft(t,e<0?0:e)):[]}function ye(t){return t?t[0]:xr}function ge(t,e,r){var n=t?t.length:0;return r&&ee(t,e,r)&&(e=!1),n?Y(t,e):[]}function _e(t,e,r){var n=t?t.length:0;if(!n)return-1;if("number"==typeof r)r=r<0?si(n+r,0):r;else if(r){var i=vt(t,e);return i<n&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return a(t,e,r||0)}function ve(t){var e=t?t.length:0;return e?t[e-1]:xr}function we(t,e,r){var n=[];if(!t||!t.length)return n;var i=-1,o=[],s=t.length;for(e=qt(e,r,3);++i<s;){var a=t[i];e(a,i,t)&&(n.push(a),o.push(i))}return ht(t,o),n}function be(t,e,r,n){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(n=r,r=ee(t,e,n)?xr:e,e=!1);var o=qt();return null==r&&o===W||(r=o(r,n,3)),e&&Gt()===a?_(t,r):yt(t,r)}function ke(t,e){var r=-1,n=t?t.length:0,i={};for(!n||e||Vi(t[0])||(e=[]);++r<n;){var o=t[r];e?i[o]=e[r]:o&&(i[o[0]]=o[1])}return i}function xe(t){var e=k(t);return e.__chain__=!0,e}function Se(t,e,r){return e.call(r,t),t}function Ce(t,e,r){return e.call(r,t)}function Ae(){return xe(this)}function Pe(){return new S(this.value(),this.__chain__)}function Te(t){for(var e,r=this;r instanceof x;){var n=de(r);e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e}function De(){var t=this.__wrapped__,e=function(t){return t.reverse()};if(t instanceof C){var r=t;return this.__actions__.length&&(r=new C(this)),r=r.reverse(),r.__actions__.push({func:Ce,args:[e],thisArg:xr}),new S(r,this.__chain__)}return this.thru(e)}function Oe(){return this.value()+""}function Ie(){return _t(this.__wrapped__,this.__actions__)}function ze(t,e,r){var n=Vi(t)?V:$;return e=qt(e,r,3),n(t,e)}function Ee(t,e,r){var n=Vi(t)?j:it;return e=qt(e,r,3),n(t,e)}function Le(t,e){return Ee(t,kr(e))}function Ve(t,e,r){var n=Vi(t)?V:$;return e=qt(e,r,3),n(t,function(t,r,n){return!e(t,r,n)})}function je(t,e,r){if(r?ee(t,e,r):null==e){t=ue(t);var n=t.length;return n>0?t[lt(0,n-1)]:xr}var i=-1,o=er(t),n=o.length,s=n-1;for(e=ai(e<0?0:+e||0,n);++i<e;){var a=lt(i,s),p=o[a];o[a]=o[i],o[i]=p}return o.length=e,o}function Ne(t){return je(t,ui)}function Be(t){var e=t?Ci(t):0;return ie(e)?e:Ri(t).length}function Me(t,e,r){if(null==t)return[];r&&ee(t,e,r)&&(e=xr);var n=-1;e=qt(e,r,3);var i=it(t,function(t,r,i){return{criteria:e(t,r,i),index:++n,value:t}});return mt(i,h)}function Re(t,e,r){function n(){d&&clearTimeout(d),c&&clearTimeout(c),m=0,c=d=f=xr}function i(e,r){r&&clearTimeout(r),c=d=f=xr,e&&(m=Li(),u=t.apply(l,p),d||c||(p=l=xr))}function o(){var t=e-(Li()-h);t<=0||t>e?i(f,c):d=setTimeout(o,t)}function s(){i(g,d)}function a(){if(p=arguments,h=Li(),l=this,f=g&&(d||!_),y===!1)var r=_&&!d;else{c||_||(m=h);var n=y-(h-m),i=n<=0||n>y;i?(c&&(c=clearTimeout(c)),m=h,u=t.apply(l,p)):c||(c=setTimeout(s,n))}return i&&d?d=clearTimeout(d):d||e===y||(d=setTimeout(o,e)),r&&(i=!0,u=t.apply(l,p)),!i||d||c||(p=l=xr),u}var p,c,u,h,l,d,f,m=0,y=!1,g=!0;if("function"!=typeof t)throw new TypeError(Rr);if(e=e<0?0:+e||0,r===!0){var _=!0;g=!1}else Je(r)&&(_=!!r.leading,y="maxWait"in r&&si(+r.maxWait||0,e),g="trailing"in r?!!r.trailing:g);return a.cancel=n,a}function Ue(t,e){if("function"!=typeof t)throw new TypeError(Rr);return e=si(e===xr?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,i=si(r.length-e,0),o=Array(i);++n<i;)o[n]=r[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,r[0],o);case 2:return t.call(this,r[0],r[1],o)}var s=Array(e+1);for(n=-1;++n<e;)s[n]=r[n];return s[e]=o,t.apply(this,s)}}function He(t,e,r){return"function"==typeof e?G(t,!0,bt(e,r,3)):G(t,!0)}function Fe(t){return m(t)&&Xt(t)&&Wn.call(t,"callee")&&!Kn.call(t,"callee")}function qe(t){return null==t||(Xt(t)&&(Vi(t)||Xe(t)||Fe(t)||m(t)&&Ge(t.splice))?!t.length:!Ri(t).length)}function We(t,e,r,n){r="function"==typeof r?bt(r,n,3):xr;var i=r?r(t,e):xr;return i===xr?et(t,e,r):!!i}function Ge(t){return Je(t)&&Gn.call(t)==Jr}function Je(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $e(t){return Ye(t)&&t!=+t}function Ke(t){return null!=t&&(Ge(t)?Jn.test(qn.call(t)):m(t)&&(Mn(t)?Jn:kn).test(t))}function Ye(t){return"number"==typeof t||m(t)&&Gn.call(t)==Kr}function Qe(t){var e;if(!m(t)||Gn.call(t)!=Yr||Mn(t)||Fe(t)||!Wn.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return k.support.ownLast?(Q(t,function(t,e,n){return r=Wn.call(n,e),!1}),r!==!1):(Q(t,function(t,e){r=e}),r===xr||Wn.call(t,r))}function Ze(t){return Je(t)&&Gn.call(t)==Qr}function Xe(t){return"string"==typeof t||m(t)&&Gn.call(t)==Xr}function tr(t){return m(t)&&ie(t.length)&&!!Pn[Gn.call(t)]}function er(t){var e=t?Ci(t):0;return ie(e)?e?k.support.unindexedChars&&Xe(t)?t.split(""):E(t):[]:ar(t)}function rr(t){return q(t,ir(t))}function nr(t,e,r){var n=null==t?xr:tt(t,le(e),e+"");return n===xr?r:n}function ir(t){if(null==t)return[];Je(t)||(t=Object(t));var e=t.length,r=k.support;e=e&&ie(e)&&(Vi(t)||Fe(t)||Xe(t))&&e||0;for(var n=t.constructor,i=-1,o=Ge(n)&&n.prototype||Hn,s=o===t,a=Array(e),p=e>0,c=r.enumErrorProps&&(t===Un||t instanceof Error),u=r.enumPrototypes&&Ge(t);++i<e;)a[i]=i+"";for(var h in t)u&&"prototype"==h||c&&("message"==h||"name"==h)||p&&te(h,e)||"constructor"==h&&(s||!Wn.call(t,h))||a.push(h);if(r.nonEnumShadows&&t!==Hn){var l=t===Fn?Xr:t===Un?Gr:Gn.call(t),d=_i[l]||_i[Yr];for(l==Yr&&(o=Hn),e=An.length;e--;){h=An[e];var f=d[h];s&&f||(f?!Wn.call(t,h):t[h]===o[h])||a.push(h)}}return a}function or(t){t=he(t);for(var e=-1,r=Ri(t),n=r.length,i=Array(n);++e<n;){var o=r[e];i[e]=[o,t[o]]}return i}function sr(t,e,r,n){var i=Vi(t)||tr(t);if(e=qt(e,n,4),null==r)if(i||Je(t)){var o=t.constructor;r=i?Vi(t)?new o:[]:wi(Ge(o)?o.prototype:xr)}else r={};return(i?L:Z)(t,function(t,n,i){return e(r,t,n,i)}),r}function ar(t){return gt(t,Ri(t))}function pr(t,e,r){r&&ee(t,e,r)&&(e=r=xr);var n=null==t,i=null==e;if(null==r&&(i&&"boolean"==typeof t?(r=t,t=1):"boolean"==typeof e&&(r=e,i=!0)),n&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,r||t%1||e%1){var o=ci();return ai(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return lt(t,e)}function cr(t){return t=p(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function ur(t){return t=p(t),t&&t.replace(Sn,l).replace(vn,"")}function hr(t){return t=p(t),t&&mn.test(t)?t.replace(dn,d):t}function lr(t,e){var r="";if(t=p(t),e=+e,e<1||!t||!ii(e))return r;do e%2&&(r+=t),e=ri(e/2),t+=t;while(e);return r}function dr(t,e,r){var n=t;return(t=p(t))?(r?ee(n,e,r):null==e)?t.slice(v(t),w(t)+1):(e+="",t.slice(c(t,e),u(t,e)+1)):t}function fr(t,e,r){r&&ee(t,e,r)&&(e=xr);var n=Er,i=Lr;if(null!=e)if(Je(e)){var o="separator"in e?e.separator:o;n="length"in e?+e.length||0:n,i="omission"in e?p(e.omission):i}else n=+e||0;if(t=p(t),n>=t.length)return t;var s=n-i.length;if(s<1)return i;var a=t.slice(0,s);if(null==o)return a+i;if(Ze(o)){if(t.slice(s).search(o)){var c,u,h=t.slice(0,s);for(o.global||(o=RegExp(o.source,(bn.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(h);)u=c.index;a=a.slice(0,null==u?s:u)}}else if(t.indexOf(o,s)!=s){var l=a.lastIndexOf(o);l>-1&&(a=a.slice(0,l))}return a+i}function mr(t){return t=p(t),t&&fn.test(t)?t.replace(ln,b):t}function yr(t,e,r){return r&&ee(t,e,r)&&(e=xr),t=p(t),t.match(e||Cn)||[]}function gr(t,e,r){return r&&ee(t,e,r)&&(e=xr),m(t)?vr(t):W(t,e)}function _r(t){return t}function vr(t){return ot(G(t,!0))}function wr(t,e,r){if(null==r){var n=Je(e),i=n?Ri(e):xr,o=i&&i.length?X(e,i):xr;(o?o.length:n)||(o=!1,r=e,e=t,t=this)}o||(o=X(e,Ri(e)));var s=!0,a=-1,p=Ge(t),c=o.length;r===!1?s=!1:Je(r)&&"chain"in r&&(s=r.chain);for(;++a<c;){var u=o[a],h=e[u];t[u]=h,p&&(t.prototype[u]=function(e){return function(){var r=this.__chain__;if(s||r){var n=t(this.__wrapped__),i=n.__actions__=E(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),n.__chain__=r,n}return e.apply(t,N([this.value()],arguments))}}(h))}return t}function br(){}function kr(t){return re(t)?ct(t):ut(t)}var xr,Sr="3.10.1",Cr=1,Ar=2,Pr=4,Tr=8,Dr=16,Or=32,Ir=64,zr=128,Er=30,Lr="...",Vr=150,jr=16,Nr=200,Br=1,Mr=2,Rr="Expected a function",Ur="__lodash_placeholder__",Hr="[object Arguments]",Fr="[object Array]",qr="[object Boolean]",Wr="[object Date]",Gr="[object Error]",Jr="[object Function]",$r="[object Map]",Kr="[object Number]",Yr="[object Object]",Qr="[object RegExp]",Zr="[object Set]",Xr="[object String]",tn="[object WeakMap]",en="[object ArrayBuffer]",rn="[object Float32Array]",nn="[object Float64Array]",on="[object Int8Array]",sn="[object Int16Array]",an="[object Int32Array]",pn="[object Uint8Array]",cn="[object Uint8ClampedArray]",un="[object Uint16Array]",hn="[object Uint32Array]",ln=/&(?:amp|lt|gt|quot|#39|#96);/g,dn=/[&<>"'`]/g,fn=RegExp(ln.source),mn=RegExp(dn.source),yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,gn=/^\w*$/,_n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,vn=/[\u0300-\u036f\ufe20-\ufe23]/g,wn=/\\(\\)?/g,bn=/\w*$/,kn=/^\[object .+?Constructor\]$/,xn=/^\d+$/,Sn=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Cn=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),An=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Pn={};Pn[rn]=Pn[nn]=Pn[on]=Pn[sn]=Pn[an]=Pn[pn]=Pn[cn]=Pn[un]=Pn[hn]=!0,Pn[Hr]=Pn[Fr]=Pn[en]=Pn[qr]=Pn[Wr]=Pn[Gr]=Pn[Jr]=Pn[$r]=Pn[Kr]=Pn[Yr]=Pn[Qr]=Pn[Zr]=Pn[Xr]=Pn[tn]=!1;var Tn={};Tn[Hr]=Tn[Fr]=Tn[en]=Tn[qr]=Tn[Wr]=Tn[rn]=Tn[nn]=Tn[on]=Tn[sn]=Tn[an]=Tn[Kr]=Tn[Yr]=Tn[Qr]=Tn[Xr]=Tn[pn]=Tn[cn]=Tn[un]=Tn[hn]=!0,Tn[Gr]=Tn[Jr]=Tn[$r]=Tn[Zr]=Tn[tn]=!1;var Dn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},On={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},In={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},zn={function:!0,object:!0},En=zn[typeof e]&&e&&!e.nodeType&&e,Ln=zn[typeof t]&&t&&!t.nodeType&&t,Vn=En&&Ln&&"object"==typeof i&&i&&i.Object&&i,jn=zn[typeof self]&&self&&self.Object&&self,Nn=zn[typeof window]&&window&&window.Object&&window,Bn=(Ln&&Ln.exports===En&&En,Vn||Nn!==(this&&this.window)&&Nn||jn||this),Mn=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Rn=Array.prototype,Un=Error.prototype,Hn=Object.prototype,Fn=String.prototype,qn=Function.prototype.toString,Wn=Hn.hasOwnProperty,Gn=Hn.toString,Jn=RegExp("^"+qn.call(Wn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$n=Bn.ArrayBuffer,Kn=Hn.propertyIsEnumerable,Yn=$t(Bn,"Set"),Qn=Rn.splice,Zn=Bn.Uint8Array,Xn=$t(Bn,"WeakMap"),ti=Math.ceil,ei=$t(Object,"create"),ri=Math.floor,ni=$t(Array,"isArray"),ii=Bn.isFinite,oi=$t(Object,"keys"),si=Math.max,ai=Math.min,pi=$t(Date,"now"),ci=Math.random,ui=Number.POSITIVE_INFINITY,hi=4294967295,li=hi-1,di=hi>>>1,fi=9007199254740991,mi=Xn&&new Xn,yi={},gi={};gi[rn]=Bn.Float32Array,gi[nn]=Bn.Float64Array,gi[on]=Bn.Int8Array,gi[sn]=Bn.Int16Array,gi[an]=Bn.Int32Array,gi[pn]=Zn,gi[cn]=Bn.Uint8ClampedArray,gi[un]=Bn.Uint16Array,gi[hn]=Bn.Uint32Array;var _i={};_i[Fr]=_i[Wr]=_i[Kr]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},_i[qr]=_i[Xr]={constructor:!0,toString:!0,valueOf:!0},_i[Gr]=_i[Jr]=_i[Qr]={constructor:!0,toString:!0},_i[Yr]={constructor:!0},L(An,function(t){for(var e in _i)if(Wn.call(_i,e)){var r=_i[e];r[t]=Wn.call(r,t)}});var vi=k.support={};!function(t){var e=function(){this.x=t},r={0:t,length:t},n=[];e.prototype={valueOf:t,y:t};for(var i in new e)n.push(i);vi.enumErrorProps=Kn.call(Un,"message")||Kn.call(Un,"name"),vi.enumPrototypes=Kn.call(e,"prototype"),vi.nonEnumShadows=!/valueOf/.test(n),vi.ownLast="x"!=n[0],vi.spliceObjects=(Qn.call(r,0,1),!r[0]),vi.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0);var wi=function(){function t(){}return function(e){if(Je(e)){t.prototype=e;var r=new t;t.prototype=xr}return r||{}}}(),bi=Pt(Z),ki=Tt(),xi=mi?function(t,e){return mi.set(t,e),t}:_r,Si=mi?function(t){return mi.get(t)}:br,Ci=ct("length"),Ai=function(){var t=0,e=0;return function(r,n){var i=Li(),o=jr-(i-e);if(e=i,o>0){if(++t>=Vr)return r}else t=0;return xi(r,n)}}(),Pi=Ue(function(t,e){e=Y(e);var r=F(t,e);return ht(t,e.sort(o)),r}),Ti=Ue(function(t,e){
return Xt(t)?J(t,e):[]}),Di=Ue(function(t){return t=Y(t),this.thru(function(e){return z(Vi(e)?e:[he(e)],t)})}),Oi=Et(bi),Ii=Vt(L,bi),zi=Ct(function(t,e,r){Wn.call(t,r)?t[r].push(e):t[r]=[e]}),Ei=Bt(B,bi),Li=pi||function(){return(new Date).getTime()},Vi=ni||function(t){return m(t)&&ie(t.length)&&Gn.call(t)==Fr},ji=At(at),Ni=At(function(t,e,r){return r?U(t,e,r):H(t,e)}),Bi=zt(Ni,R),Mi=Lt(Z),Ri=oi?function(t){var e=null==t?xr:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?k.support.enumPrototypes:Xt(t))?ce(t):Je(t)?oi(t):[]}:ce,Ui=jt(),Hi=Ue(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=j(Y(e),String);return se(t,J(ir(t),e))}var r=bt(e[0],e[1],3);return ae(t,function(t,e,n){return!r(t,e,n)})}),Fi=Ue(function(t,e){return null==t?{}:"function"==typeof e[0]?ae(t,bt(e[0],e[1],3)):se(t,Y(e))}),qi=Ot(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Wi=Nt(),Gi=Ot(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Ji=Ot(function(t,e,r){return t+(r?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});k.prototype=x.prototype,S.prototype=wi(x.prototype),S.prototype.constructor=S,C.prototype=wi(x.prototype),C.prototype.constructor=C,D.prototype.push=I,k.assign=Ni,k.callback=gr,k.chain=xe,k.chunk=fe,k.debounce=Re,k.defaults=Bi,k.drop=me,k.filter=ze,k.flatten=ge,k.forEach=Ii,k.groupBy=zi,k.keys=Ri,k.keysIn=ir,k.map=Ee,k.mapValues=Ui,k.matches=vr,k.merge=ji,k.mixin=wr,k.omit=Hi,k.pairs=or,k.pick=Fi,k.pluck=Le,k.property=kr,k.pullAt=Pi,k.reject=Ve,k.remove=we,k.restParam=Ue,k.shuffle=Ne,k.sortBy=Me,k.tap=Se,k.thru=Ce,k.toArray=er,k.toPlainObject=rr,k.transform=sr,k.uniq=be,k.values=ar,k.without=Ti,k.zipObject=ke,k.collect=Ee,k.each=Ii,k.extend=Ni,k.iteratee=gr,k.object=ke,k.select=ze,k.unique=be,wr(k,k),k.capitalize=cr,k.cloneDeep=He,k.deburr=ur,k.escape=hr,k.find=Oi,k.findKey=Mi,k.first=ye,k.get=nr,k.identity=_r,k.indexOf=_e,k.isArguments=Fe,k.isArray=Vi,k.isEmpty=qe,k.isEqual=We,k.isFunction=Ge,k.isNaN=$e,k.isNative=Ke,k.isNumber=Ye,k.isObject=Je,k.isPlainObject=Qe,k.isRegExp=Ze,k.isString=Xe,k.isTypedArray=tr,k.kebabCase=qi,k.last=ve,k.noop=br,k.now=Li,k.padLeft=Wi,k.random=pr,k.reduce=Ei,k.repeat=lr,k.size=Be,k.snakeCase=Gi,k.startCase=Ji,k.trim=dr,k.trunc=fr,k.unescape=mr,k.words=yr,k.eq=We,k.detect=Oi,k.foldl=Ei,k.head=ye,k.inject=Ei,wr(k,function(){var t={};return Z(k,function(e,r){k.prototype[r]||(t[r]=e)}),t}(),!1),k.sample=je,k.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return je(e,t)}):je(this.value())},k.VERSION=Sr,L(["drop","take"],function(t,e){C.prototype[t]=function(r){var n=this.__filtered__;if(n&&!e)return new C(this);r=null==r?1:si(ri(r)||0,0);var i=this.clone();return n?i.__takeCount__=ai(i.__takeCount__,r):i.__views__.push({size:r,type:t+(i.__dir__<0?"Right":"")}),i},C.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),L(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r!=Mr;C.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:qt(t,e,1),type:r}),i.__filtered__=i.__filtered__||n,i}}),L(["first","last"],function(t,e){var r="take"+(e?"Right":"");C.prototype[t]=function(){return this[r](1).value()[0]}}),L(["initial","rest"],function(t,e){var r="drop"+(e?"":"Right");C.prototype[t]=function(){return this.__filtered__?new C(this):this[r](1)}}),L(["pluck","where"],function(t,e){var r=e?"filter":"map",n=e?ot:kr;C.prototype[t]=function(t){return this[r](n(t))}}),C.prototype.compact=function(){return this.filter(_r)},C.prototype.reject=function(t,e){return t=qt(t,e,1),this.filter(function(e){return!t(e)})},C.prototype.slice=function(t,e){t=null==t?0:+t||0;var r=this;return r.__filtered__&&(t>0||e<0)?new C(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==xr&&(e=+e||0,r=e<0?r.dropRight(-e):r.take(e-t)),r)},C.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},C.prototype.toArray=function(){return this.take(ui)},Z(C.prototype,function(t,e){var r=/^(?:filter|map|reject)|While$/.test(e),n=/^(?:first|last)$/.test(e),i=k[n?"take"+("last"==e?"Right":""):e];i&&(k.prototype[e]=function(){var e=n?[1]:arguments,o=this.__chain__,s=this.__wrapped__,a=!!this.__actions__.length,p=s instanceof C,c=e[0],u=p||Vi(s);u&&r&&"function"==typeof c&&1!=c.length&&(p=u=!1);var h=function(t){return n&&o?i(t,1)[0]:i.apply(xr,N([t],e))},l={func:Ce,args:[h],thisArg:xr},d=p&&!a;if(n&&!o)return d?(s=s.clone(),s.__actions__.push(l),t.call(s)):i.call(xr,this.value())[0];if(!n&&u){s=d?s:new C(this);var f=t.apply(s,e);return f.__actions__.push(l),new S(f,o)}return this.thru(h)})}),L(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?Fn:Rn)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=!vi.spliceObjects&&/^(?:pop|shift|splice)$/.test(t),i=/^(?:join|pop|replace|shift)$/.test(t),o=n?function(){var t=e.apply(this,arguments);return 0===this.length&&delete this[0],t}:e;k.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?o.apply(this.value(),t):this[r](function(e){return o.apply(e,t)})}}),Z(C.prototype,function(t,e){var r=k[e];if(r){var n=r.name+"",i=yi[n]||(yi[n]=[]);i.push({name:e,func:r})}}),yi[Mt(xr,Ar).name]=[{name:"wrapper",func:xr}],C.prototype.clone=A,C.prototype.reverse=P,C.prototype.value=T,k.prototype.chain=Ae,k.prototype.commit=Pe,k.prototype.concat=Di,k.prototype.plant=Te,k.prototype.reverse=De,k.prototype.toString=Oe,k.prototype.run=k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=Ie,k.prototype.collect=k.prototype.map,k.prototype.head=k.prototype.first,k.prototype.select=k.prototype.filter,k.prototype.tail=k.prototype.rest,Bn._=k,n=function(){return k}.call(e,r,e,t),!(n!==xr&&(t.exports=n))}).call(this)}).call(e,r(12)(t),function(){return this}())},function(t,e,r){var n,i=[].slice;n=r(26),t.exports=function(){function t(t,e,r){this.server=r}return t.prototype.m=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],n.m.apply(this,t)},t}()},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){return function(){return t.apply(e,arguments)}},h=[].slice;p=r(16),s=r(24),i=r(20),c=r(27),a=r(28),o={Cookies:r(32)},t.exports=n=function(){function t(t){this.constructor.State&&(this.state=new this.constructor.State(t)),this.render=this.render.bind(this)}return t.map=function(t){var e;if(this.components||(this.components={}),t)return(e=this.components)[t]||(e[t]=new this)},t.m=function(t,e,r){return new t(e,r,this.server)},t.prototype.mapProps=function(t,e){return null!=e?t.children=e:!this.isChildren(t)&&s.isObject(t)||(t={children:t}),t},t.prototype.isChildren=function(t){return s.isArray(t)||s.size(s.pick(t,["tag","subtree"]))},t.prototype.render=function(t,e){return t=this.mapProps(t,e),this._view=new this.constructor.View(t,this.state),this._view.render()},t.State=function(){function e(t){this.param=u(this.param,this),this.server=t,this.component_id=c.v4()}return e.prototype.domain=function(){return new i(this.server)},e.prototype.lazyComponent=function(t,e,r){var n;return n=this.component(t,e),n||(n=this.component(t,e,r)),n},e.prototype.param=function(t){var e,r;return this.server?null!=(e=this.server.req.params[t])?e.toLowerCase():void 0:null!=(r=p.route.param(t))?r.toLowerCase():void 0},e.prototype.queryString=function(){var t;return this.server?this.server.req.query:(t=p.route().match(/\?(.*)/),(null!=t?t[1]:void 0)?p.route.parseQueryString(t[1]):{})},e.prototype.component=function(t,e,r){var n,i;if(this.cache||(this.cache={}),"function"==typeof e&&(r=e,e=null),e?((n=this.cache)[t]||(n[t]={}),i=this.cache[t],t=""+e):i=this.cache,r){if(r==={})return delete i[t];i[t]||(i[t]=new r(this.server))}return i[t]},e.prototype.components=function(t,e,r){var n,i,o,a;if(e)for(r||(r=1),a=s.size(this.cache[t]),n=i=0,o=r;0<=o?i<o:i>o;n=0<=o?++i:--i)this.component(t,a++,e);return this.cache[t]},e.prototype.currentUser=function(){var t,e;return"undefined"!=typeof document&&null!==document?(e=new o.Cookies(document.cookie),t="_token:production",a(e.get(t))):this.server.req.user},e.prototype.m=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],t.m.apply(this,e)},e.prototype.canonical=function(){return this.server?""+new i(this.server).urlShouldBe("www")+this.server.req.originalUrl:document.location.href},e.prototype.strippedOriginalUrl=function(){return this.originalUrl().replace(/^\/|\?.*$/g,"")},e.prototype.originalUrl=function(){return this.server?this.server.req.originalUrl:p.route()},e}(),t.View=function(){function e(t,e){null==e&&(e={}),this.param=u(this.param,this),s.assign(this,t),this.state=e,this.server=t.server||e.server}return e.prototype.domain=function(){return this.state.domain()},e.prototype.param=function(t){var e,r;return this.server?null!=(e=this.server.req.params[t])?e.toLowerCase():void 0:null!=(r=p.route.param(t))?r.toLowerCase():void 0},e.prototype.queryString=function(){var t,e;return this.server?t=this.server.req.query:(e=p.route().match(/\?(.*)/),t=p.route.parseQueryString((null!=e?e[1]:void 0)||""))},e.prototype.path=function(){return this.server?this.server.req.originalUrl:p.route()},e.prototype.attributes=function(){return s.pick(this,["id","alt","rel","href","name","class","title","style","target","checked","tabindex","placeholder","autocomplete","itemprop","itemtype","itemscope","key","config","onblur","onfocus","onhover","oninput","onchange","onclick","onkeydown","ondblclick","onkeypress"])},e.prototype.classes=function(t){return s.isArray(t)||(t=[t]),s.without(t,void 0,null).join(" ").trim()},e.prototype.m=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],t.m.apply(this,e)},e}(),t}()},function(t,e,r){var n;(function(){function i(t,e,r){var n=e&&r||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){i<16&&(e[n+i++]=m[t])});i<16;)e[n+i++]=0;return e}function o(t,e){var r=e||0,n=f;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]}function s(t,e,r){var n=e&&r||0,i=e||[];t=t||{};var s=null!=t.clockseq?t.clockseq:v,a=null!=t.msecs?t.msecs:(new Date).getTime(),p=null!=t.nsecs?t.nsecs:b+1,c=a-w+(p-b)/1e4;if(c<0&&null==t.clockseq&&(s=s+1&16383),(c<0||a>w)&&null==t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");w=a,b=p,v=s,a+=122192928e5;var u=(1e4*(268435455&a)+p)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=255&u;var h=a/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=255&h,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var l=t.node||_,d=0;d<6;d++)i[n+d]=l[d];return e?e:o(i)}function a(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"==t?new d(16):null,t=null),t=t||{};var i=t.random||(t.rng||p)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var s=0;s<16;s++)e[n+s]=i[s];return e||o(i)}var p,c=this;if("function"==typeof c.require)try{var u=c.require("crypto").randomBytes;p=u&&function(){return u(16)}}catch(t){}if(!p&&c.crypto&&crypto.getRandomValues){var h=new Uint8Array(16);p=function(){return crypto.getRandomValues(h),h}}if(!p){var l=new Array(16);p=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),l[e]=t>>>((3&e)<<3)&255;return l}}for(var d="function"==typeof c.Buffer?c.Buffer:Array,f=[],m={},y=0;y<256;y++)f[y]=(y+256).toString(16).substr(1),m[f[y]]=y;var g=p(),_=[1|g[0],g[1],g[2],g[3],g[4],g[5]],v=16383&(g[6]<<8|g[7]),w=0,b=0,k=a;if(k.v1=s,k.v4=a,k.parse=i,k.unparse=o,k.BufferClass=d,"undefined"!=typeof t&&t.exports)t.exports=k;else{n=function(){return k}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}}).call(this)},function(t,e,r){var n=r(29),i=r(31);t.exports=function(t){return i(n(t.split(".")[1]))}},function(t,e,r){var n=r(30);t.exports=function(t){var e=t.replace("-","+").replace("_","/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}var r=n.atob(e);try{return decodeURIComponent(escape(r))}catch(t){return r}}},function(t,e,r){!function(){var t=e,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=function(){try{document.createElement("$")}catch(t){return t}}();t.btoa||(t.btoa=function(t){for(var e,i,o=0,s=r,a="";t.charAt(0|o)||(s="=",o%1);a+=s.charAt(63&e>>8-o%1*8)){if(i=t.charCodeAt(o+=.75),i>255)throw n;e=e<<8|i}return a}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw n;for(var e,i,o=0,s=0,a="";i=t.charAt(s++);~i&&(e=o%4?64*e+i:i,o++%4)?a+=String.fromCharCode(255&e>>(-2*o&6)):0)i=r.indexOf(i);return a})}()},function(module,exports){module.exports=function(str){return window.JSON?window.JSON.parse(str):eval("("+str+")")}},function(t,e,r){var n,i;i=r(24),n=function(){function t(){"undefined"!=typeof document&&null!==document&&(this.cookies=i.chain(document.cookie).split("; ").reduce(this.combineHash,{}).value())}return t.prototype.get=function(t){return this.cookies[t]},t.prototype.combineHash=function(t,e){var r;return r=e.split("="),t[r[0]]=r[1],t},t.prototype.set=function(t,e,r,n){var o;return o=i.without([t+"="+e+";",null!=r?"max-age="+r+";":void 0,n?"path="+n+";":void 0],void 0),document.cookie=o.join("")},t}(),t.exports=n},function(t,e){},function(t,e,r){var n,i=[].slice;n={Promises:r(22)},t.exports=function(){return function(){function t(){var e;this.c=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],t.filter(function(t){return t}).join(" ")},this.m=function(t,e,r){return new t(e,r,this.server)},t.__super__.constructor.apply(this,arguments),e=n.Promises.get(this.server),this._promises=e.promises}return t}()}},function(t,e){!function(t){var e=function(e){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==e&&this.setOption(e);var r=this,n=function(){setTimeout(function(){r._options.checkOnLoad===!0&&(r._options.debug===!0&&r._log("onload->eventCallback","A check loading is launched"),null===r._var.bait&&r._creatBait(),setTimeout(function(){r.check()},1))},1)};void 0!==t.addEventListener?t.addEventListener("load",n,!1):t.attachEvent("onload",n)};e.prototype._options=null,e.prototype._var=null,e.prototype._bait=null,e.prototype._log=function(t,e){console.log("[BlockAdBlock]["+t+"] "+e)},e.prototype.setOption=function(t,e){if(void 0!==e){var r=t;t={},t[r]=e}for(var n in t)this._options[n]=t[n],this._options.debug===!0&&this._log("setOption",'The option "'+n+'" he was assigned to "'+t[n]+'"');return this},e.prototype._creatBait=function(){var e=document.createElement("div");e.setAttribute("class",this._options.baitClass),e.setAttribute("style",this._options.baitStyle),this._var.bait=t.document.body.appendChild(e),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,this._options.debug===!0&&this._log("_creatBait","Bait has been created")},e.prototype._destroyBait=function(){t.document.body.removeChild(this._var.bait),this._var.bait=null,this._options.debug===!0&&this._log("_destroyBait","Bait has been removed")},e.prototype.check=function(t){if(void 0===t&&(t=!0),this._options.debug===!0&&this._log("check","An audit was requested "+(t===!0?"with a":"without")+" loop"),this._var.checking===!0)return this._options.debug===!0&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var e=this;return this._var.loopNumber=0,t===!0&&(this._var.loop=setInterval(function(){e._checkBait(t)},this._options.loopCheckTime)),setTimeout(function(){e._checkBait(t)},1),this._options.debug===!0&&this._log("check","A check is in progress ..."),!0},e.prototype._checkBait=function(e){var r=!1;if(null===this._var.bait&&this._creatBait(),null===t.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(r=!0),void 0!==t.getComputedStyle){var n=t.getComputedStyle(this._var.bait,null);!n||"none"!=n.getPropertyValue("display")&&"hidden"!=n.getPropertyValue("visibility")||(r=!0)}this._options.debug===!0&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(r===!0?"positive":"negative")),e===!0&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),r===!0?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),e===!0&&(this._var.checking=!1)):null!==this._var.loop&&e!==!1||(this._destroyBait(),this.emitEvent(!1),e===!0&&(this._var.checking=!1))},e.prototype._stopLoop=function(t){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,this._options.debug===!0&&this._log("_stopLoop","A loop has been stopped")},e.prototype.emitEvent=function(t){this._options.debug===!0&&this._log("emitEvent","An event with a "+(t===!0?"positive":"negative")+" detection was called");var e=this._var.event[t===!0?"detected":"notDetected"];for(var r in e)this._options.debug===!0&&this._log("emitEvent","Call function "+(parseInt(r)+1)+"/"+e.length),e.hasOwnProperty(r)&&e[r]();return this._options.resetOnEnd===!0&&this.clearEvent(),this},e.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],this._options.debug===!0&&this._log("clearEvent","The event list has been cleared")},e.prototype.on=function(t,e){return this._var.event[t===!0?"detected":"notDetected"].push(e),this._options.debug===!0&&this._log("on",'A type of event "'+(t===!0?"detected":"notDetected")+'" was added'),this},e.prototype.onDetected=function(t){return this.on(!0,t)},e.prototype.onNotDetected=function(t){return this.on(!1,t)},t.BlockAdBlock=e,void 0===t.blockAdBlock&&(t.blockAdBlock=new e({checkOnLoad:!0,resetOnEnd:!0}))}(window)},function(t,e){!function(t,e,r){function n(t,e){return typeof t===e}function i(){var t,e,r,i,o,s,p;for(var h in a)if(a.hasOwnProperty(h)){if(t=[],e=a[h],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(r=0;r<e.options.aliases.length;r++)t.push(e.options.aliases[r].toLowerCase());for(i=n(e.fn,"function")?e.fn():e.fn,o=0;o<t.length;o++)s=t[o],p=s.split("."),1===p.length?c[p[0]]=i:(!c[p[0]]||c[p[0]]instanceof Boolean||(c[p[0]]=new Boolean(c[p[0]])),c[p[0]][p[1]]=i),u.push((i?"":"no-")+p.join("-"))}}function o(t){var e=h.className,r=c._config.classPrefix||"";if(l&&(e=e.baseVal),c._config.enableJSClass){var n=new RegExp("(^|\\s)"+r+"no-js(\\s|$)");e=e.replace(n,"$1"+r+"js$2")}c._config.enableClasses&&(e+=" "+r+t.join(" "+r),l?h.className.baseVal=e:h.className=e)}function s(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):l?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}var a=[],p={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var r=this;setTimeout(function(){e(r[t])},0)},addTest:function(t,e,r){a.push({name:t,fn:e,options:r})},addAsyncTest:function(t){a.push({name:null,fn:t})}},c=function(){};c.prototype=p,c=new c;var u=[],h=e.documentElement,l="svg"===h.nodeName.toLowerCase(),d=p._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];p._prefixes=d,/*!
	{
	  "name": "CSS position: sticky",
	  "property": "csspositionsticky",
	  "tags": ["css"],
	  "builderAliases": ["css_positionsticky"],
	  "notes": [{
	    "name": "Chrome bug report",
	    "href":"https://code.google.com/p/chromium/issues/detail?id=322972"
	  }],
	  "warnings": [ "using position:sticky on anything but top aligned elements is buggy in Chrome < 37 and iOS <=7+" ]
	}
	!*/
c.addTest("csspositionsticky",function(){var t="position:",e="sticky",r=s("a"),n=r.style;return n.cssText=t+d.join(e+";"+t).slice(0,-t.length),n.position.indexOf(e)!==-1}),i(),o(u),delete p.addTest,delete p.addAsyncTest;for(var f=0;f<c._q.length;f++)c._q[f]();t.Modernizr=c}(window,document)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),n=r(38),o={App:r(48),Stream:r(103)},i={Error:r(131),Header:r(257)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){var t,r,n;e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.stream=o.Stream.get(this.server),r=this.server?this.server.req.path:s.route(),n="home",this.app.section=n,t=this.navigation.meta(n),this.app.pageData(t,this.navigation.social(t)),this.app.surrogateKey("404 home"),this.set404Headers(),this.component("error",i.Error),this.component("header",i.Header)}return a(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"404",header:this.state.component("header")},this.state.component("error").render())},e.prototype.childrenOrError=function(t){return t},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,l=function(t,e){return function(){return t.apply(e,arguments)}};p=r(24),c=r(16),n=r(26),o={Ads:r(39),App:r(48),Modal:r(102),Screen:r(40),Stream:r(103),Article:r(62),Channel:r(109),Related:r(113),Scripts:r(114),Pillager:r(97),Navigation:r(115),Newsletter:r(118)},i={Layout:r(120),Error:r(131),Oop:r(133),Ad:r(201),Link:r(134),Pixel:r(135),Messages:r(202),Search:r(207),Background:r(210),Navigation:r(211),Newsletter:r(240)},a={Dom:r(46),Html:r(45),Cookies:r(32)},s={ArticleImage:r(100)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){this.onError=l(this.onError,this),this.set404=l(this.set404,this),e.__super__.constructor.apply(this,arguments),this.ads=o.Ads.get(this.server),this.app=o.App.get(this.server),this.modal=o.Modal.get(this.server),this.stream=o.Stream.get(this.server),this.article=o.Article.get(this.server),this.channel=o.Channel.get(this.server),this.related=o.Related.get(this.server),this.scripts=o.Scripts.get(this.server),this.pillager=o.Pillager.get(this.server),this.navigation=o.Navigation.get(this.server),this.newsletter=o.Newsletter.get(this.server),this.arm=this.pillager.getArm(this.m(s.ArticleImage).name),this.initAppStore(),this.ads.resetRendering(),this.getStoreData(),this.resetStores(),this.setComponents(),this.app.loaded}return u(e,t),e.prototype.initAppStore=function(){if(this.app.loaded&&(this.app.pages+=1,this.app.navigated=!0),this.app.amp=this.amp,this.app.applenews=this.applenews,!this.app.loaded)return this.app.setQueryString(this.queryString()),this.app.setReferrer(),this.server||"newsletter"!==this.app.referrer?void 0:this.newsletter.setCookie("closed")},e.prototype.getStoreData=function(){if(this.server||!this.app.loaded)return this.fetchNavigationData(),this.fetchNewsletterData()},e.prototype.fetchNavigationData=function(){return this.navigation.get().then(this.onDone,this.onError)},e.prototype.fetchNewsletterData=function(){return this.newsletter.get().then(this.onDone,this.onError)},e.prototype.resetStores=function(){if(!this.app.error&&this.app.loaded)return this.app.amp=this.amp,this.app.applenews=this.applenews,this.ads.reset(),this.app.reset(),this.related.reset(),this.channel.reset(),this.navigation.reset(),this.newsletter.reset()},e.prototype.setComponents=function(){if(this.component("background",i.Background),this.app.standardLayout())return this.component("oop_tp",i.Oop),this.component("oop_logo",i.Oop),this.component("layout",i.Layout),this.component("search",i.Search),this.component("messages",i.Messages),this.component("navigation",i.Navigation)},e.prototype.redirect=function(t){var e;return this.server?(e=p.map(this.server.req.query,function(t,e){return e+"="+t}),e=e.join("&"),e.length&&(e="?"+e),this.server.halt=!0,this.server.res.redirect(301,""+t+e)):this.app.route(""+t+window.location.search,!0)},e.prototype.set404=function(){return this.set404Headers(),this.onError(),this.app.error=!0,this.server&&(this.server.force_render=!0),this.app.stopNavigating(),c.redraw()},e.prototype.set404Headers=function(){if(this.server)return this.server.res.status(404),this.server.res.set("Cache-Control",this.cacheControl()),this.server.res.set("Surrogate-Control",this.surrogateControl())},e.prototype.cacheControl=function(){return"max-age=0, no-cache"},e.prototype.surrogateControl=function(){return"max-age=604800, stale-while-revalidate=604800, stale-if-error=604800"},e.prototype.onDone=function(t){return t},e.prototype.onError=function(t){return this.server&&(this.server.force_render=!0,this.server.ignore_rejections=!0),t},e.prototype.setAdViewCookie=function(){var t,e,r;if(!this.server&&!this.ad_view_count_updated&&this.ads.render)return this.ad_view_count_updated=!0,e=this.ads.uv_cookie,t=(new a.Cookies).get(e),null!=t?(r=parseInt(t,10)+1,r<10&&(r="0"+r)):r="01",document.cookie=e+"="+r+";expires="+this.expiresDate()+";path=/"},e.prototype.expiresDate=function(){var t;return t=new Date,t.setHours(23,59,59),t.toUTCString()},e}(n.State),e.View=function(t){function e(){this.consumerBackground=l(this.consumerBackground,this),this.slidingHeader=l(this.slidingHeader,this),this.updateHeader=l(this.updateHeader,this),this.onAdRender=l(this.onAdRender,this),this.onAdResize=l(this.onAdResize,this),this.headerConfig=l(this.headerConfig,this),this.config=l(this.config,this),this.appMainConfig=l(this.appMainConfig,this),e.__super__.constructor.apply(this,arguments),this.ads=this.state.ads,this.app=this.state.app,this.screen=o.Screen,this.nav_section=this.state.navigation.section,this.app.error&&this.ads.setRendering(!1),this.state.setAdViewCookie(),this.setDefaultNewsletterList()}return u(e,t),e.prototype.render=function(t,e){var r,n,i,o;return this.has_modal=this.app.cms&&this.state.modal.component(),null==e&&(e=t,t={}),i="consumer",this.app.cms&&(i="cms",e=DIV({class:this.classes(["cms-body",t.cms_class])},e)),n={config:this.appMainConfig,class:this.classes(["app-main",this.main_classes,this.collapsed()?"collapsed":void 0,this.screenLocked()?"nooverflow":void 0])},(o=this.appMainStyle())&&(n.style=o),r=[DIV({config:this.config,class:this.mainClasses(t,i)},[this.header(t.header,t.header_props),this.adSpacer(),this.messages(),DIV(n,[this.search(),this.oopLogo(),this.childrenOrError(e),this.skinLink()]),this.consumerBackground(),this.navigation(),this.renderModal(),this.oop("oop_tp")])],this.server?this.state.component("layout").render({content:r,server:this.server}):r},e.prototype.childrenOrError=function(t){var e;return this.app.error?(e=this.state.component_id,this.state.lazyComponent("error",e,i.Error).render({dynamic:!0})):t},e.prototype.appMainStyle=function(){if(this.app.height)return{height:this.app.height+"px"}},e.prototype.appMainConfig=function(t,e,r){return this.state.screen_lock&&!this.screenLocked()&&(a.Dom.scrollBackTo(this.app.scroll_pos),this.app.scroll_pos=null),this.state.screen_lock=this.screenLocked(),r.onunload=function(){return window.inverse_sponsor_classes=""}},e.prototype.screenLocked=function(){return this.collapsed()||this.app.height},e.prototype.collapsed=function(){return this.overlay()||this.has_modal},e.prototype.mainClasses=function(t,e){return this.classes(["app",this.adClasses(),this.appClasses(),e,"flatiron-app",this.screenClasses(),this.has_modal?"modal":void 0,this.overlay()?"overlay":void 0,this.app.error?void 0:t.class,this.app.navigating?"app--navigating":void 0,this.app.sectionPage()&&this.nav_section?"app--section":void 0,this.navigationMenu()?"-navigation":void 0,this.server?void 0:window.inverse_sponsor_classes])},e.prototype.appClasses=function(){return this.classes([this.app.amp?"amp":void 0,"labs"===this.app.section?"labs":void 0,this.server&&!this.app.amp?"server":void 0])},e.prototype.screenClasses=function(){return this.classes([this.screenLocked()?"locked":void 0])},e.prototype.adClasses=function(){if(this.ads.render)return"top-"+this.ads.class},e.prototype.config=function(t,e,r){return this.state.el=t,this.app.cms||(this.state.ads.refresh(!1),this.updateAdTargeting(),this.app.loaded||(this.attachWindowUnload(),"function"==typeof window._FskReloadScript&&window._FskReloadScript())),this.app.loaded||this.app.dev||(window.isomithric=null),this.state.loaded=!0,this.appTracking(),this.app.loaded=!0,this.screen.resized.width(!1),this.screen.resized.height(!1),window.inverse_fb_init&&this.app.attachFBEvents(),this.routeConfig(t,e,r)},e.prototype.attachWindowUnload=function(){return window.onunload=function(t){return function(){return t.onExit("app",{pages:t.app.pages,timespent:new Date-t.app.timestamp})}}(this)},e.prototype.onExit=function(t,e){return null==e&&(e={}),this.app.onExit(t,e)},e.prototype.appTracking=function(){var t,e,r;if(!this.state.tracked&&!this.app.navigating)return t={},this.state.tracked=!0,"article"===this.app.page&&(r=this.state.article.model(),e=r.gaDimensions(),!r.long()&&this.state.arm&&e.push("article_crop_"+this.state.arm.widget()),t.params=p.assign({},r.skreemrParams(),{index:0})),this.app.track(document.location.pathname,p.assign(t,{dimensions:e}))},e.prototype.header=function(t,e){var r;return null==e&&(e={}),r={config:this.headerConfig,class:this.classes(["header-container",this.headerPositionClass(e.is_static)])},p.assign(e,{sliding:this.slidingHeader}),DIV(r,[this.adTop(),t.render(e)])},e.prototype.headerConfig=function(t){return this.state.header_el=t},e.prototype.headerPositionClass=function(t){var e;if(!t&&!this.app.amp)return e=this.navigationMenu(),e?"absolute":this.app.locked&&!e?"absolute":this.app.cms||!this.server&&this.ads.rendered()?"sticky":"fixed"},e.prototype.useTopOffset=function(){return this.app.locked||this.headerFixed()||this.headerSticky()},e.prototype.adTop=function(){if(!this.app.hide_top_ad&&!this.app.thirdParty()&&!this.skin()&&"custom"!==this.app.page)return this.state.lazyComponent("ad",this.state.component_id,i.Ad).render({onrender:this.onAdRender,onresizecb:this.onAdResize,updateParent:this.updateHeader})},e.prototype.adSpacer=function(){if(this.ads.render&&!(this.app.locked||this.app.thirdParty()||this.headerSticky()))return DIV({class:"ads-spacer",style:{height:this.ads.top()+"px"},config:function(t){return function(e,r,n){return t.state.spacer=e,n.onunload=function(){return t.state.spacer=null}}}(this)})},e.prototype.oopLogo=function(){if(this.app.standardLayout())return this.state.component("oop_logo").render({preload:!0,position:"oop_logo"})},e.prototype.onAdResize=function(){var t,e,r;if(this.state.header_el&&(r=this.headerTop(),null!=r&&(t="top:"+r+"px;",this.headerSticky()&&(t=t+"height:"+-r+"px"),this.state.header_el.setAttribute("style",t))),this.state.spacer)return e="top: "+this.ads.top()+"px;height:"+this.ads.top()+"px",this.state.spacer.setAttribute("style",e)},e.prototype.onAdRender=function(){var t;if(this.ads.rendered(!0),t=this.state.header_el.className,t.match(/fixed/))return this.state.header_el.className=t.replace(/fixed/,"sticky")},e.prototype.updateHeader=function(){var t,e;if(t=this.headerFixed(),e=this.headerTop(),t||(e=0),e!==this.state.fixed_header_top)return this.state.fixed_header_top=e,this.state.header_el.setAttribute("style","top:"+e+"px;")},e.prototype.headerTop=function(t){var e;if(!t)return this.app.navigating||this.navigationMenu()?0:(e=this.app.header.top)?e:this.useTopOffset()&&(this.ads.animated()||this.ads.animating())?-this.ads.top():void 0},e.prototype.renderModal=function(){if(this.app.standardLayout())return this.state.modal.renderComponent()},e.prototype.overlay=function(){if(!this.app.thirdParty())return this.app.overlay()},e.prototype.messages=function(){if(!this.app.thirdParty())return this.state.component("messages").render()},e.prototype.search=function(){if(!this.app.thirdParty()&&!this.app.cms&&"search"===this.app.page)return this.state.component("search").render({class:"app-search"})},e.prototype.navigation=function(){if(!this.app.thirdParty()&&!this.app.cms)return this.state.component("navigation").render()},e.prototype.headerFixed=function(){return!this.headerSticky()&&(!!this.app.navigating||(!this.ads.rendered()||!this.ads.animated()||this.screen.scroll.top()>=this.ads.top()))},e.prototype.headerSticky=function(){if(!this.server&&!this.app.cms)return Modernizr.csspositionsticky},e.prototype.slidingHeader=function(){var t;if(!((null!=(t=this.screen.scroll)?t.top():void 0)<Math.abs(this.headerTop())))return!0},e.prototype.navigationMenu=function(){return this.state.navigation.menu()},e.prototype.consumerBackground=function(){var t,e;if(!this.app.cms&&!this.app.navigating)return t=this.app.background,t&&null!=t.overrides.tinted&&(e=t.overrides.tinted),this.state.component("background").render({mono:e,model:t},[this.backgroundTrackers()])},e.prototype.skinLink=function(){var t,e;return(t=this.backgroundHref())&&(e=new i.Link(this.server).render({href:t,class:"skin__link"})),DIV({class:"skin__link--page"},[e])},e.prototype.oop=function(t){if(!this.app.thirdParty()&&!this.app.cms)return this.state.component(t).render({preload:!0,position:t})},e.prototype.skin=function(){var t;return this.ads.skin(null!=(t=this.nav_section)?t.permalink:void 0)},e.prototype.updateAdTargeting=function(){var t;if(this.app.loaded&&!this.state.loaded&&!this.app.articlePage())return this.ads.update({page:this.app.page,section:null!=(t=this.nav_section)?t.permalink:void 0,labels:[this.app.page,this.app.section]})},e.prototype.renderNewsletterOverlayModal=function(t){var e,r,n;if(null==t&&(t={}),!this.app.query_string.force_newsletter){if(this.app.navigating||this.state.newsletter.cookied())return;if(!this.app.showNewsletterOverlay())return}return r=this.state.component_id,n=i.Newsletter,e=this.state.lazyComponent("newsletter-modal",r,n).render({tracking:t}),this.state.modal.setRenderedComponent(e,!0)},e.prototype.setDefaultNewsletterList=function(){var t,e,r;if(!this.app.navigating&&!this.state.newsletter.default_list)return t="science-innovation",this.state.navigation&&(e=this.state.navigation.section||{},"humans"!==e.permalink&&"culture"!==e.permalink||(t="culture")),this.app.articlePage()&&(r=this.taxonomyList())&&(t=r),this.state.newsletter.defaultList(t)},e.prototype.taxonomyList=function(){var t;if(t=this.state.article.model())return t.hasTaxonomy("elonmusk")?"musk-reads":t.hasTaxonomy("strategy")?"strategy":t.hasTaxonomy("science")?"science-innovation":t.hasTaxonomy("starwars")?"star-wars":t.hasTaxonomy("streaming")?"streaming":t.hasTaxonomy("culture")?"culture":void 0},e.prototype.routeConfig=p.noop,e.prototype.backgroundHref=p.noop,e.prototype.backgroundTrackers=p.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(16),s=r(24),i=r(23),o={Screen:r(40)},n=function(t){function e(){var t,r,n;e.__super__.constructor.apply(this,arguments),this.server||(r={},n=a.route().match(/\?(.*)/),(null!=n?n[1]:void 0)&&(r=a.route.parseQueryString(n[1])),t=r.skin),s.assign(this,{counter:0,id:21054826,targeting:{},class:"vert",render:!1,preroll:!1,refresh_ads:!1,force_skin:t,uv_cookie:"inv_ads_view_count",sticky_cookie:"inv_ad_top_sticky",slots:{content:{name:"main1"},article:{name:"content1"},list1:{name:"list1"},list2:{name:"list2"},oop1:{name:"oop1"},oop2:{name:"oop2"},oop_tp:{name:"oop_tp"},oop_logo:{name:"oop_logo"},oop_skin:{name:"oop_skin"},oop_package:{name:"oop_promo_package"},oop_related:{name:"oop_promo_related"},oop_section_list:{name:"oop_promo_section_list"},rail1:{name:"rail1"},rail2:{name:"rail2"},rail3:{name:"rail3"},top:{min:50,name:"top1"}}}),this.server||s.assign(this.targeting,isomithric.ads),this.reset()}return p(e,t),e.cache_key="ads",e.prototype.reset=function(){return s.assign(this.targeting,{page:null,labels:[],rail:!1,atype:null,section:null,article_id:null}),s.assign(this.slots.top,{offset:0,state:"inactive"})},e.prototype.resetRendering=function(){return s.assign(this,{render:!1,preroll:!1})},e.prototype.refresh=function(t){return this.refresh_ads=t},e.prototype.setRendering=function(t,e){return null==e&&(e=t),this.render=t,this.preroll=e},e.prototype.updateArticle=function(t){if(t)return this.update(t.targeting())},e.prototype.update=function(t){var e;if(null==t&&(t={}),s.assign(this.targeting,t,{uv_cookie:this.uv_cookie,page:this.page(t.page),sticky_cookie:this.sticky_cookie,labels:this.labels(t.labels||this.targeting.labels)}),!this.server&&window.inverse)return e=o.Screen,s.assign(this.targeting,{breakpoint:e.breakpoints.rail,dimensions:{width:e.width(),height:e.height()}}),window.inverse.ads.target(this.targeting)},e.prototype.page=function(t){return(null!=t?t.length:void 0)?t:"misc"},e.prototype.labels=function(t){return s.without(t,"",null,void 0)},e.prototype.showTop=function(){return this.top()>=this.slots.top.min},e.prototype.top=function(t){return null!=t&&(this.slots.top.offset=t),this.slots.top.offset},e.prototype.inactive=function(t){return this.changeState("inactive",t)},e.prototype.animating=function(t){return this.changeState("animating",t)},e.prototype.animated=function(t){return this.changeState("animated",t)},e.prototype.rendered=function(t){return this.changeState("rendered",t),"inactive"!==this.slots.top.state},e.prototype.changeState=function(t,e){return e&&(this.slots.top.state=t),this.slots.top.state===t},e.prototype.logo=function(t,e){return"microsoft"===t},e.prototype.skin=function(t,e){return!!this.force_skin&&"lg"},e.prototype.sponsor=function(){},e.prototype.production=function(t){if(null==this.targeting.production)return this.targeting.production=t},e.prototype.platform=function(t){if(!this.targeting.platform)return this.targeting.platform=t},e.prototype.targetMap=function(){var t,e;return e=this.targeting.section,"home"===this.targeting.page&&(e="home"),t=function(){switch(this.targeting.page){case"section":return"sec";case"article":return"art";case"channel":return"str";default:return this.targeting.page}}.call(this),{pt:t,s:e,pid:this.targeting.article_id,t:this.yesNo(!this.targeting.production),tag:this.targeting.labels,rail:this.yesNo(this.targeting.rail),gi:this.yesNo(this.targeting.gi),nsfa:this.yesNo(this.targeting.nsfa),nsfg:this.yesNo(this.targeting.nsfg),atype:this.targeting.atype,platform:this.targeting.platform}},e.prototype.yesNo=function(t){return t?"y":"n"},e}(i),t.exports=i.export(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){return function(){return t.apply(e,arguments)}};p=r(41),a=r(16),s=r(24),n=r(44),o={Html:r(45),Window:r(47)},i=function(){function t(){this.onresize=c(this.onresize,this),this.onscroll=c(this.onscroll,this),s.assign(this,{timer:null,passive:!1,width:a.prop(o.Window.width()),height:a.prop(o.Window.height()),ticking:{scroll:!1,resize:!1},callbacks:{scroll:{},resize:{}},resized:{threshold:75,width:a.prop(!1),height:a.prop(!1)},scroll:{top:a.prop(o.Window.scrollTop()),left:a.prop(o.Window.scrollLeft())},breakpoints:{lap:863,palm:751,phone:559,header:804,labs_header:1137,rail:1200},sizes:{small:375,medium:650,large:1200,xlarge:1800,content:700},header:{big:60,small:44}}),this.testPassive(),this.addEvents(),this.width(o.Window.width()),this.height(o.Window.height()),this.old_width=this.width(),this.old_height=this.height()}return t.prototype.addEvents=function(){var t;if("undefined"!=typeof document&&null!==document)return t=!!this.passive&&{passive:!0},window.addEventListener("scroll",this.onscroll,t),window.addEventListener("resize",this.onresize,t),this.sensor=new n(document.body,function(t){return function(){return t.requestTick("resize",function(){var e;return e="resize",t.runCallbacks(e),t.ticking[e]=!1})}}(this))},t.prototype.addCallback=function(t,e,r){if(e&&null!=t)return this.callbacks[e][t]=r},t.prototype.removeCallback=function(t,e){if(e&&null!=t)return this.callbacks[e]=s.omit(this.callbacks[e],[t])},t.prototype.onscroll=function(){return this.scroll.top(o.Window.scrollTop()),this.requestTick("scroll",function(t){return function(){var e,r;if(r="scroll",e=t.runCallbacks(r),t.ticking[r]=!1,e)return a.redraw()}}(this))},t.prototype.onresize=function(){var t,e;return e=o.Window.width(),t=o.Window.height(),this.width()!==e&&this.resized.width(!0),this.height()!==t&&this.resized.height(!0),this.old_width=this.width(),this.old_height=this.height(),this.width(e),this.height(t),this.requestTick("resize",function(t){return function(){var e;return e="resize",t.runCallbacks(e,!0),t.runCallbacks("scroll",!0),t.ticking[e]=!1,a.redraw()}}(this))},t.prototype.requestTick=function(t,e){return this.ticking[t]||p(e),this.ticking[t]=!0},t.prototype.runCallbacks=function(t,e){var r;return r=!1,s.each(this.callbacks[t],function(t){var n;if("function"==typeof t&&(n=t(e),null!=n?n.redraw:void 0))return r=!0}),r},t.prototype.threshold=function(){var t;return t=2,this.height()*t},t.prototype.device=function(t){var e;return e=this.palm(),t&&e&&!this.phone()?"tablet":this.palm()?"mobile":"desktop"},t.prototype.headerHeight=function(){return this.palm()?this.header.small:this.header.big},t.prototype.phone=function(){return this.smallerThan("phone")},t.prototype.palm=function(){return this.smallerThan("palm")},t.prototype.lap=function(){return this.smallerThan("lap")},t.prototype.lapAndUp=function(){return this.biggerThan("palm")},t.prototype.deskAndUp=function(){return this.biggerThan("lap")},t.prototype.rail=function(){return this.biggerThan("rail")},t.prototype.biggerThan=function(t){var e;if(e=this.width())return e>this.breakpoints[t]},t.prototype.smallerThan=function(t){var e;if(e=this.width())return e<=this.breakpoints[t]},t.prototype.heightResize=function(t){var e;if(e=this.resized.height())return null==t?e:Math.abs(t-this.height())>=this.resized.threshold},t.prototype.onscreen=function(t,e){return null==e&&(e=5/6),t<this.scroll.top()+this.height()*e},t.prototype.testPassive=function(){var t,e;if("undefined"!=typeof document&&null!==document)try{return e=Object.defineProperty({},"passive",{get:function(t){return function(){return t.passive=!0}}(this)}),window.addEventListener("test",null,e)}catch(e){return t=e,console.error(t)}},t}(),t.exports=function(){return new i}()},function(t,e,r){(function(e){for(var n=r(42),i="undefined"==typeof window?e:window,o=["moz","webkit"],s="AnimationFrame",a=i["request"+s],p=i["cancel"+s]||i["cancelRequest"+s],c=0;!a&&c<o.length;c++)a=i[o[c]+"Request"+s],p=i[o[c]+"Cancel"+s]||i[o[c]+"CancelRequest"+s];if(!a||!p){var u=0,h=0,l=[],d=1e3/60;a=function(t){if(0===l.length){var e=n(),r=Math.max(0,d-(e-u));u=r+e,setTimeout(function(){var t=l.slice(0);l.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(u)}catch(t){setTimeout(function(){throw t},0)}},Math.round(r))}return l.push({handle:++h,callback:t,cancelled:!1}),h},p=function(t){for(var e=0;e<l.length;e++)l[e].handle===t&&(l[e].cancelled=!0)}}t.exports=function(t){return a.call(i,t)},t.exports.cancel=function(){p.apply(i,arguments)},t.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=a,t.cancelAnimationFrame=p}}).call(e,function(){return this}())},function(t,e,r){(function(e){(function(){var r,n,i,o,s,a;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-s)/1e6},n=e.hrtime,r=function(){var t;return t=n(),1e9*t[0]+t[1]},o=r(),a=1e9*e.uptime(),s=o-a):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(e,r(43))},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){m&&d&&(m=!1,d.length?f=d.concat(f):y=-1,f.length&&a())}function a(){if(!m){var t=i(s);m=!0;for(var e=f.length;e;){for(d=f,f=[];++y<e;)d&&d[y].run();y=-1,e=f.length}d=null,m=!1,o(t)}}function p(t,e){this.fun=t,this.array=e}function c(){}var u,h,l=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(t){u=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var d,f=[],m=!1,y=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new p(t,e)),1!==f.length||m||i(a)},p.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.prependListener=c,l.prependOnceListener=c,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,r){var n,i;!function(o,s){n=s,i="function"==typeof n?n.call(e,r,e,t):n,!(void 0!==i&&(t.exports=i))}("undefined"!=typeof window?window:this,function(){function t(t,e){var r=Object.prototype.toString.call(t),n="[object Array]"===r||"[object NodeList]"===r||"[object HTMLCollection]"===r||"[object Object]"===r||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,i=0,o=t.length;if(n)for(;i<o;i++)e(t[i]);else e(t)}function e(t){if(!t.getBoundingClientRect)return{width:t.offsetWidth,height:t.offsetHeight};var e=t.getBoundingClientRect();return{width:Math.round(e.width),height:Math.round(e.height)}}if("undefined"==typeof window)return null;var r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},n=function(i,o){function s(){var t=[];this.add=function(e){t.push(e)};var e,r;this.call=function(){for(e=0,r=t.length;e<r;e++)t[e].call()},this.remove=function(n){var i=[];for(e=0,r=t.length;e<r;e++)t[e]!==n&&i.push(t[e]);t=i},this.length=function(){return t.length}}function a(t,n){if(t){if(t.resizedAttached)return void t.resizedAttached.add(n);t.resizedAttached=new s,t.resizedAttached.add(n),t.resizeSensor=document.createElement("div"),t.resizeSensor.dir="ltr",t.resizeSensor.className="resize-sensor";var i="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",o="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=i,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+o+'"></div></div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor);var a=window.getComputedStyle(t).getPropertyValue("position");"absolute"!==a&&"relative"!==a&&"fixed"!==a&&(t.style.position="relative");var p,c,u,h,l=t.resizeSensor.childNodes[0],d=l.childNodes[0],f=t.resizeSensor.childNodes[1],m=e(t),y=m.width,g=m.height,_=function(){var e=0===t.offsetWidth&&0===t.offsetHeight;if(e){var r=t.style.display;t.style.display="block"}d.style.width="100000px",d.style.height="100000px",l.scrollLeft=1e5,l.scrollTop=1e5,f.scrollLeft=1e5,f.scrollTop=1e5,e&&(t.style.display=r)};t.resizeSensor.resetSensor=_;var v=function(){c=0,p&&(y=u,g=h,t.resizedAttached&&t.resizedAttached.call())},w=function(){var n=e(t),i=n.width,o=n.height;p=i!=y||o!=g,p&&!c&&(c=r(v)),_()},b=function(t,e,r){t.attachEvent?t.attachEvent("on"+e,r):t.addEventListener(e,r)};b(l,"scroll",w),b(f,"scroll",w),r(_)}}t(i,function(t){a(t,o)}),this.detach=function(t){n.detach(i,t)},this.reset=function(){i.resizeSensor.resetSensor()}};return n.reset=function(e,r){t(e,function(t){t.resizeSensor.resetSensor()})},n.detach=function(e,r){t(e,function(t){t&&(t.resizedAttached&&"function"==typeof r&&(t.resizedAttached.remove(r),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached))})},n})},function(t,e,r){var n,i,o;o=r(24),n={Dom:r(46)},i=function(){function t(){}return t.prototype.toggleOverflow=function(t){return this.toggleClass("nooverflow",t)},t.prototype.toggleSaving=function(t){return this.toggleClass("saving",t)},t.prototype.toggleClass=function(t,e){if("undefined"!=typeof document&&null!==document)return n.Dom.toggleClass(n.Dom.root(),t,e)},t}(),t.exports=new i},function(t,e,r){var n,i;i=r(24),n=function(){function t(){}return t.prototype.root=function(){return this.html()||this.body()},t.prototype.html=function(){return document.documentElement},t.prototype.body=function(){return document.body},t.prototype.cancelEvent=function(t){return t.stopPropagation(),t.preventDefault(),!1},t.prototype.metaKeyClick=function(t){return t.ctrlKey||t.metaKey||2===t.which},t.prototype.toggleClass=function(t,e,r){return null!=r?r?this.addClass(t,e):this.removeClass(t,e):this.addClass(t,e)?void 0:this.removeClass(t,e)},t.prototype.addClass=function(t,e){if(t)return this.hasClass(t,e)?void 0:t.classList?t.classList.add(e):t.className+=" "+e},t.prototype.removeClass=function(t,e){if(t)return t.classList?t.classList.remove(e):t.className=t.className.replace(e," ")},t.prototype.hasClass=function(t,e){if(t)return t.classList?t.classList.contains(e):t.className.match(e)},t.prototype.rect=function(t){var e,r,n,i;if(t){for(i=t.offsetWidth,e=t.offsetHeight,n=this.offset(t,"top"),r=this.offset(t,"left");t=t.offsetParent;)n+=this.offset(t,"top"),r+=this.offset(t,"left");return{top:n,left:r,width:i,height:e,bottom:n+e}}},t.prototype.offset=function(t,e){var r,n;return r="offset"+i.capitalize(e),n=t[r],isNaN(n)?0:n},t.prototype.screenLockPos=function(t){if(t)return this.scrollPos()},t.prototype.scrollBackTo=function(t){if(t)return this.scroll(t)},t.prototype.scrollPos=function(){return this.body().scrollTop},t.prototype.scroll=function(t){return window.scrollTo(0,t),this.body().scrollTop=t},t.prototype.removeChildren=function(t){var e;if(t){for(e=[];t.firstChild;)e.push(t.removeChild(t.firstChild));return e}},t.prototype.getComputedStyle=function(t){var e;return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle:window.getComputedStyle&&(e=window.getComputedStyle),e(t,null)},t}(),t.exports=new n},function(t,e,r){var n,i,o,s=function(t,e){return function(){return t.apply(e,arguments)}};i=r(24),n=function(){function t(){this.adjustIframeHeight=s(this.adjustIframeHeight,this)}return t.prototype.path=function(){return"undefined"==typeof window||null===window?[]:i.drop(window.location.pathname.split("/"))},t.prototype.width=function(){return o("innerWidth","clientWidth")},t.prototype.height=function(){return o("innerHeight","clientHeight")},t.prototype.scrollTop=function(){return o("pageYOffset","scrollTop")},t.prototype.scrollLeft=function(){return o("pageXOffset","scrollLeft");
},t.prototype.adjustIframeHeight=function(t,e){var r;if("undefined"!=typeof document&&null!==document)return r=document.getElementById(t),window.setTimeout(function(t){return function(){var n;return n=t.iframeHeight(e.body,e.documentElement),r.style.height=parseInt(n)+"px"}}(this),500)},t.prototype.iframeHeight=function(t,e){var r,n,i,o,s;return n=t.scrollHeight,r=t.offsetHeight,i=e.clientHeight,s=e.scrollHeight,o=e.offsetHeight,Math.max(n,r,i,s,o)},t.prototype.position=function(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop},t}(),o=function(t,e){return("undefined"!=typeof window&&null!==window?window[t]:void 0)?window[t]:("undefined"!=typeof document&&null!==document?document.documentElement:void 0)?document.documentElement[e]:("undefined"!=typeof document&&null!==document?document.body:void 0)?document.body[e]:0},t.exports=new n},function(t,e,r){var n,i,o,s,a,p,c,u,h,l=function(t,e){return function(){return t.apply(e,arguments)}},d=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty,m=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};u=r(16),c=r(24),h=r(27),i=r(20),s=r(23),o={Skreemr:r(49)},p={GA:r(55),Dom:r(46),Html:r(45),Head:r(56),Cookies:r(32),Parsely:r(60),Accounts:r(61)},a={Ads:r(39),Screen:r(40),Article:r(62),Pillager:r(97)},n=function(t){function e(){this.reset=l(this.reset,this),this.pageData=l(this.pageData,this),this.logoutFb=l(this.logoutFb,this),this.attachFBEvents=l(this.attachFBEvents,this),this.onpopstate=l(this.onpopstate,this),this.trackAmazon=l(this.trackAmazon,this);var t;e.__super__.constructor.apply(this,arguments),t=new i(this.server),c.assign(this,{fb:{},pages:1,page:"",query:"",amp:!1,cms:!1,section:"",height:null,loaded:!1,locked:!1,dropdown:null,canonical:null,no_index:!1,background:null,header_up:!1,scroll_pos:null,navigated:!1,navigate_cbs:{},navigating:!1,visit_id:h.v4(),no_background:!1,timestamp:new Date,overlay:u.prop(!1),screen:a.Screen,accounts:p.Accounts,skreemr:this.m(o.Skreemr),is_origin:t.isOrigin(),www:t.urlShouldBe("www"),error:("undefined"!=typeof isomithric&&null!==isomithric?isomithric.error:void 0)||!1,article:a.Article.get(this.server),pillager:a.Pillager.get(this.server),dev:!1,header:{el:null,top:null,height:0}}),this.pillager.model.visit_id=this.visit_id,this.resetRel(),this.resetPageData(),this.initAmazonTracking(),this.server||(this.skreemr.connect(),window.blockAdBlock.onDetected(function(t){return function(){return t.ads_blocked=!0,p.GA.niEventOnce("ads","blocked")}}(this)),this.initRepeatVisitor())}return d(e,t),e.cache_key="app",e.prototype.initRepeatVisitor=function(){var t;if(t=new p.Cookies,!(this.repeat_visitor=!!t.get("repeat_visitor")))return t.set("repeat_visitor",!0,730,"/")},e.prototype.attachPopstate=function(){if(!this.navigated&&window.onpopstate)return window.onpopstate=this.onpopstate},e.prototype.initAmazonTracking=function(){if(!this.server)return window.inverse_amazon_tracking=this.trackAmazon},e.prototype.trackAmazon=function(t){if("A"===t.tagName&&t.href.match(/www\.amazon\.com/))return this.event(document.location.href,{action:"click",ga:{label:"link"},category:"amazon",params:{type:"link"}})},e.prototype.onpopstate=function(){return this.route(document.location.pathname,!0)},e.prototype.attachFBEvents=function(){var t;if(!this.facebook_attached&&"undefined"!=typeof FB&&null!==FB)return this.facebook_attached=!0,t=function(t){return function(e,r){var n,i,o;return i="facebook",p.GA.event(i,e,r),p.GA.social(i,e,r),n=t.article.model().url(),o={category:i,action:e,params:{url:r}},t.skreemr.social(n,o,t.visit_id)}}(this),FB.Event.subscribe("edge.create",function(e){return t("like",e)}),FB.Event.subscribe("edge.remove",function(e){return t("unlike",e)}),this.checkFacebookLoginAndEmail(u.redraw)},e.prototype.checkFacebookLoginAndEmail=function(t,e){return null==t&&(t=c.noop),null==e&&(e=c.noop),FB.getLoginStatus(function(r){return function(n){var i;return null==n&&(n={}),"connected"!==n.status?e(n):(c.assign(r.fb,{connected:!0,token:null!=(i=n.authResponse)?i.signedRequest:void 0}),r.getFbEmail(t))}}(this),!0)},e.prototype.getFbEmail=function(t){return null==t&&(t=c.noop),FB.api("/me",{fields:"email"},function(e){return function(r){return null==r&&(r={}),e.fb.email=r.email,t()}}(this))},e.prototype.logoutFb=function(){return this.fb={},FB.logout(),u.redraw()},e.prototype.surrogateKey=function(t){var e;if(this.server)return this.surrogates||(this.surrogates=["all"]),m.call(this.surrogates,t)<0&&this.surrogates.push(t),e=c.uniq(this.surrogates.join(" ").split(" ")),e=c.map(e,encodeURI).join(" "),this.server.res.set("Surrogate-Key",e)},e.prototype.stopNavigating=function(){return this.navigating=!1},e.prototype.pageData=function(t,e,r){return null!=t&&(this.page_data=t,c.assign(this.page_data,{rel:this.rel,robots:this.robots(),headline:t.title}),this.paginatedTitleAndDescription(),this.inversifyTitle(),e&&(this.social_data=e),(this.navigated||r)&&p.Head.meta(this.page_data,e)),this.page_data},e.prototype.robots=function(){return this.dev||this.is_origin?"noindex,nofollow":this.no_index?"noindex":void 0},e.prototype.paginatedTitleAndDescription=function(){var t,e;if(e=this.page_data.pagination,e&&1!==e.page&&e.pages>1)return t="Page "+e.page+" of "+e.pages,c.assign(this.page_data,{title:this.page_data.title+", "+t,description:t+" about "+this.page_data.description})},e.prototype.inversifyTitle=function(){var t;if(t=this.page_data.title.match(/^Inverse$|\| Inverse$/i),!this.page_data.home&&!t)return this.page_data.title+=" | Inverse"},e.prototype.reset=function(){return c.assign(this,{page:"",query:"",static:"",section:"",height:null,error:!1,canonical:null,no_index:!1,background:null,hide_top_ad:!1,no_background:!1}),this.header.el=null,this.resetRel(),this.toggleLockAndOverlay(!1)},e.prototype.resetRel=function(){return this.rel={prev:null,next:null}},e.prototype.resetPageData=function(){return this.social_data={},this.page_data={url:"",image:"",title:"",keywords:"",description:""}},e.prototype.toggleLockAndOverlay=function(t,e){return this.toggleScrollLock(t,e),this.toggleOverlay(t)},e.prototype.toggleOverlay=function(t){if("undefined"!=typeof document&&null!==document)return this.overlay(t)},e.prototype.toggleScrollLock=function(t,e){if("undefined"!=typeof document&&null!==document)return t&&(this.scroll_pos=this.screen.scroll.top(),null==e&&(e=this.screen.height())),this.height=e,this.locked=t,t?p.Dom.scroll(0):void 0},e.prototype.toggleOverflow=function(t){return p.Html.toggleOverflow(t)},e.prototype.setArticlePageData=function(t){if(this.updateCanonical(t),t.category)return this.section=c.kebabCase(t.category)},e.prototype.route=function(t,e){return null==e&&(e=!1),this.navigated=!0,this.navigating=!0,this.toggleOverlay(!1),c.forEach(this.navigate_cbs,function(t){if("function"==typeof t)return t()}),this.navigate_cbs={},this.navigate(t,e)},e.prototype.navigate=function(t,e){return u.route(t,e)},e.prototype.onExit=function(t,e){var r,n;return null==e&&(e={}),n=document.location.pathname,r=this.article.bookmark,e=c.assign(e,{bookmark:r}),this.articlePage()&&c.assign(e,this.article.model().skreemrParams()),this.event(n,{action:"exit",params:e,category:t,ga:{label:["page="+r.page,"pages="+r.pages,"seen="+r.seen].join("_")}})},e.prototype.event=function(t,e){return this.trackAction("event",t,e)},e.prototype.social=function(t,e){return this.trackAction("social",t,e)},e.prototype.trackAction=function(t,e,r){var n,i,o,s,a,u;if(null==r&&(r={}),t)return o=r.ga,a=r.skreemr,r=c.omit(r,["ga","skreemr"]),o=c.assign({},r,o||{}),a=c.assign({},r,a||{}),a.params||(a.params={}),c.assign(a.params,this.pillagerParams()),s=o.label,u=o.value,n=o.action,i=o.category,p.GA[t](i,n,s,u),p.GA.sendMain(t,i,n,s,u,{nonInteraction:!0}),this.skreemr[t](e,a,this.visit_id)},e.prototype.conversion=function(t,e){return this.test("conversion",t,e)},e.prototype.impression=function(t,e){return this.test("impression",t,e)},e.prototype.test=function(t,e,r){if(null==r&&(r={}),!this.server)return r.params||(r.params={}),c.assign(r.params,this.pillagerParams()),this.skreemr[t](e,r)},e.prototype.runningTests=function(){var t;return t={},c.forEach(this.pillager.arms,function(e){if(e.fetched())return t[e.name]=e.value}),t},e.prototype.track=function(t,e){if(null==e&&(e={}),!this.cms)return e.params||(e.params={}),c.assign(e.params,this.pillagerParams()),this.loaded&&(this.ga(t,e),this.parsely(t)),this.skreemr.hit(t,e,this.visit_id)},e.prototype.parsely=function(t){return p.Parsely.pageview(t,this.www)},e.prototype.ga=function(t,e){return p.GA.pageview(t,e)},e.prototype.pillagerParams=function(){return{referrer:this.referrer,tests:this.runningTests(),bookmark:this.article.bookmark}},e.prototype.updateDynamicMeta=function(t){return this.updateAndToggleCanonical(t),p.Head.toggleAmp(this.canonical),p.Head.toggleParselyId(t.id)},e.prototype.updateAndToggleCanonical=function(t){return this.updateCanonical(t),p.Head.toggleCanonical(t.canonicalUrl())},e.prototype.updateCanonical=function(t){if(t)return this.canonical=t.canonicalUrl()},e.prototype.articlePage=function(){var t;return"custom"===(t=this.page)||"article"===t||"channel"===t||"labs"===this.section},e.prototype.sectionPage=function(){var t;return"home"===(t=this.page)||"section"===t},e.prototype.standardLayout=function(){return!this.thirdParty()},e.prototype.thirdParty=function(){return this.amp||this.applenews||this.yahoo||this.fbinsta},e.prototype.setRel=function(t,e){var r;if(r=this.rel,t&&!t.match(this.www)&&(t=""+this.www+t),e&&!e.match(this.www)&&(e=""+this.www+e),this.rel={prev:t,next:e},!c.isEqual(this.rel,r))return p.Head.toggleRel(this.rel)},e.prototype.showNewsletterOverlay=function(){var t;return!!this.repeat_visitor||("bing"===(t=this.referrer)||"yahoo"===t||"reddit"===t||"toutiao"===t||"twitter"===t||"facebook"===t||"linkedin"===t||"flipboard"===t||"instagram"===t||"smartnews"===t)},e.prototype.setQueryString=function(t){if(!this.query_string)return this.query_string=t||{}},e.prototype.setReferrer=function(){var t,e,r,n;if(!this.referrer)return(r="undefined"!=typeof isomithric&&null!==isomithric?isomithric.referrer:void 0)?void(this.referrer=r):(e={bing:[],yahoo:[],reddit:[],toutiao:[],facebook:[],linkedin:[],flipboard:[],instagram:[],smartnews:[],twitter:["t\\.co"]},t=("undefined"!=typeof document&&null!==document?document.referrer:void 0)||"",this.referrer=c.findKey(e,function(e,r){var n,i,o;return t===r||(i="https?:\\/\\/",n="(www|m|mobile|web|l|lm|static\\.ak|nativeapp)\\.",o=e.concat([r+"\\.com"]).join("|"),t.match(new RegExp("^("+i+")?("+n+")?"+o,"i")))}),!this.referrer&&(n=this.query_string.utm_source)?this.referrer=n:void 0)},e}(s),t.exports=s.export(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=r(24),p=r(16),i=r(20),n=r(50),s={Screen:r(40)},o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.service="skreemr"}return c(e,t),e.prototype.endpoint="events:client",e.prototype.connect=function(){return this.channel=e.__super__.connect.call(this,"events:client"),this.channel.join()},e.prototype.initializeSocket=function(){return e.__super__.initializeSocket.call(this,"event_socket")},e.prototype.emit=function(t,e){if(this.channel)return this.channel.push(t,e).receive("ok",console.log).receive("error",console.error)},e.prototype.event=function(t,e,r){var n,i;return n=a.assign({},e,{type:"event"}),i=a.transform(n,function(t,e,r){return t[r]=e||"",t}),this.action(t,i,r)},e.prototype.social=function(t,e,r){return e=a.assign({},e,{type:"social"}),this.action(t,e,r)},e.prototype.action=function(t,e,r){return this.emit("new:action",this.generatePayload(t,e,r))},e.prototype.impression=function(t,e,r){return null==e&&(e={}),a.assign(e,{reward:0}),this.test(t,e,r)},e.prototype.conversion=function(t,e,r){return null==e&&(e={}),a.defaults(e,{reward:5}),this.test(t,e,r)},e.prototype.test=function(t,e,r){return null==e&&(e={}),e=a.assign({},e,{arm:t.id,sessionId:this.sessionId(),name:t.name||e.name,label:t.context||e.context}),this.emit("new:test",this.generatePayload(null,e,r))},e.prototype.trackingPixel=function(t,e){var r,n,o;return null==t&&(t=""),null==e&&(e={}),r=new i(this.server).urlShouldBe("skreemr"),"amp"===t&&(r=r.replace("http:","")),n=this.getPayload(t),n=a.merge({},n,e,{distributionPlatform:t}),o=p.route.buildQueryString(n),r+("/pixel/tracking.gif?"+o)},e.prototype.hit=function(t,e,r){return this.emit("new:request",this.generatePayload(t,e,r))},e.prototype.getPayload=function(t){switch(t){case"amp":return{appName:"VIEWER",innerHeight:"VIEWPORT_HEIGHT",innerWidth:"VIEWPORT_WIDTH",ip:this.server.req.remoteAddress,language:"BROWSER_LANGUAGE",outerHeight:"SCREEN_HEIGHT",outerWidth:"SCREEN_WIDTH",referrer:"DOCUMENT_REFERRER",sessionId:"CLIENT_ID(invrs-amp)",urlPath:"SOURCE_PATH"};default:return{}}},e.prototype.generatePayload=function(t,e,r){var n;return n=a.assign({},this.windowProps(),this.navigatorProps(),{urlPath:t,visit_id:r,sessionId:this.sessionId(),referrer:document.referrer,urlParameters:this.urlParameters(location.search)}),n=a.transform(n,function(t,e,r){return t[r]=e||"",t}),a.merge({},n,e)},e.prototype.windowProps=function(){var t;return t=s.Screen,{ip:window.myip,device:t.device(),innerWidth:t.width(),innerHeight:t.height()}},e.prototype.navigatorProps=function(){var t,e;return t=window.navigator,e=a.pick(t,["appCodeName","appName","appVersion","cookieEnabled","doNotTrack","hardwareConcurrency","language","languages","maxTouchPoints","oscpu","platform","productSub","userAgent"]),a.assign({},e,{javaEnabled:t.javaEnabled()})},e.prototype.urlParameters=function(t){var e;return t=t.replace(/^\?/,"").split("&"),t=function(){var r,n,i;for(i=[],r=0,n=t.length;r<n;r++)e=t[r],i.push(e.split("="));return i}(),a.reduce(t,function(t,e){var r,n;return r=e[0],n=e[1],t[r]=n||!0,t},{})},e}(n),t.exports=o},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),i=r(20),n=r(51),o=r(54),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{channels:[],channel_data:{}})}return p(e,t),e.prototype.endpoint="",e.prototype.connect=function(){if(!this.server)return this.initializeSocket(),this.createChannel(this.endpoint)},e.prototype.initializeSocket=function(t,e){if(null==e&&(e={}),!this.server&&!this.ws&&t&&this.service)return this.ws=new o.Socket(this.domain()+"/"+t,{params:e}),this.ws.connect(),this.ws.onClose(this.ondisconnect),this.ws.onError(this.ondisconnect)},e.prototype.domain=function(){return new i(this.server).urlShouldBe("ws-"+this.service)},e.prototype.createChannel=function(t){var e;if(this.ws)return e=s.assign({},this.channel_data,{onerror:this.onChannelError}),t=this.ws.channel(t,e),t.onError(this.onChannelError),this.channels.push(t),t},e.prototype.onChannelError=function(t){return console.error("channel error",t)},e.prototype.disconnect=function(){return this.leaveChannels()},e.prototype.leaveChannels=function(){return s.forEach(this.channels,this.leaveChannel),this.channels=[]},e.prototype.leaveChannel=function(t){if(t)return t.leave()},e.prototype.ondisconnect=s.noop,e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r(24),a=r(27),i=r(25),n=r(20),o=r(52),t.exports=function(t){function e(t){null==t&&(t={}),e.__super__.constructor.apply(this,arguments),this.initialize(t)}return p(e,t),e.prototype.type="",e.prototype.initialize=function(t){return null==t&&(t={}),"object"==typeof t&&s.assign(this,t),this.no_default_id||this.id||(this.id=a.v4()),this.component_id||(this.component_id=a.v4()),this._meta||(this._meta={type:this.type}),this},e.prototype.sessionId=function(){var t;return t=new n(this.server).host_should,new o({domain:t}).sessionId()},e}(i)},function(t,e,r){var n,i,o,s;o=r(24),s=r(27),n=r(53),t.exports=i=function(){function t(t){null==t&&(t={}),this.config=o.defaults(t,{session_key:"_session",session_expires:3650})}return t.prototype.create=function(){var t,e;return e=s.v4(),t=this.options(),n.set(this.config.session_key,e,t),e},t.prototype.options=function(){return{expires:this.config.session_expires,domain:this.config.domain.host_should,secure:"https"===this.config.domain.http}},t.prototype.sessionId=function(){var t;return t=n.get(this.config.session_key),t||(t=this.create()),t},t}()},function(t,e,r){var n,i;!function(o){n=o,i="function"==typeof n?n.call(e,r,e,t):n,!(void 0!==i&&(t.exports=i))}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function e(r){function n(e,i,o){var s;if("undefined"!=typeof document){if(arguments.length>1){if(o=t({path:"/"},n.defaults,o),"number"==typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(t){}return i=r.write?r.write(i,e):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",i,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}e||(s={});for(var p=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,u=0;u<p.length;u++){var h=p[u].split("="),l=h.slice(1).join("=");'"'===l.charAt(0)&&(l=l.slice(1,-1));try{var d=h[0].replace(c,decodeURIComponent);if(l=r.read?r.read(l,d):r(l,d)||l.replace(c,decodeURIComponent),this.json)try{l=JSON.parse(l)}catch(t){}if(e===d){s=l;break}e||(s[d]=l)}catch(t){}}return s}}return n.set=n,n.get=function(t){return n(t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,r){n(e,"",t(r,{expires:-1}))},n.withConverter=e,n}return e(function(){})})},function(t,e){t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s="1.0.0",a={connecting:0,open:1,closing:2,closed:3},p=1e4,c={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},u={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},h={longpoll:"longpoll",websocket:"websocket"},l=function(){function t(e,r,i,o){n(this,t),this.channel=e,this.event=r,this.payload=i||{},this.receivedResp=null,this.timeout=o,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return o(t,[{key:"resend",value:function(t){this.timeout=t,this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}},{key:"receive",value:function(t,e){return this.hasReceived(t)&&e(this.receivedResp.response),this.recHooks.push({status:t,callback:e}),this}},{key:"matchReceive",value:function(t){var e=t.status,r=t.response;t.ref,this.recHooks.filter(function(t){return t.status===e}).forEach(function(t){return t.callback(r)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var t=this;this.timeoutTimer||(this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(e){t.cancelRefEvent(),t.cancelTimeout(),t.receivedResp=e,t.matchReceive(e)}),this.timeoutTimer=setTimeout(function(){t.trigger("timeout",{})},this.timeout))}},{key:"hasReceived",value:function(t){return this.receivedResp&&this.receivedResp.status===t}},{key:"trigger",value:function(t,e){this.channel.trigger(this.refEvent,{status:t,response:e})}}]),t}(),d=e.Channel=function(){function t(e,r,i){var o=this;n(this,t),this.state=c.closed,this.topic=e,this.params=r||{},this.socket=i,this.bindings=[],this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new l(this,u.join,this.params,this.timeout),this.pushBuffer=[],this.rejoinTimer=new y(function(){return o.rejoinUntilConnected()},this.socket.reconnectAfterMs),this.joinPush.receive("ok",function(){o.state=c.joined,o.rejoinTimer.reset(),o.pushBuffer.forEach(function(t){return t.send()}),o.pushBuffer=[]}),this.onClose(function(){o.rejoinTimer.reset(),o.socket.log("channel","close "+o.topic+" "+o.joinRef()),o.state=c.closed,o.socket.remove(o)}),this.onError(function(t){o.isLeaving()||o.isClosed()||(o.socket.log("channel","error "+o.topic,t),o.state=c.errored,o.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",function(){o.isJoining()&&(o.socket.log("channel","timeout "+o.topic,o.joinPush.timeout),o.state=c.errored,o.rejoinTimer.scheduleTimeout())}),this.on(u.reply,function(t,e){o.trigger(o.replyEventName(e),t)})}return o(t,[{key:"rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}},{key:"join",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw"tried to join multiple times. 'join' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(t),this.joinPush}},{key:"onClose",value:function(t){this.on(u.close,t)}},{key:"onError",value:function(t){this.on(u.error,function(e){return t(e)})}},{key:"on",value:function(t,e){this.bindings.push({event:t,callback:e})}},{key:"off",value:function(t){this.bindings=this.bindings.filter(function(e){return e.event!==t})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '"+t+"' to '"+this.topic+"' before joining. Use channel.join() before pushing events";var n=new l(this,t,e,r);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}},{key:"leave",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=c.leaving;var r=function(){t.socket.log("channel","leave "+t.topic),t.trigger(u.close,"leave",t.joinRef())},n=new l(this,u.leave,{},e);return n.receive("ok",function(){return r()}).receive("timeout",function(){return r()}),n.send(),this.canPush()||n.trigger("ok",{}),n}},{key:"onMessage",value:function(t,e,r){return e}},{key:"isMember",value:function(t){return this.topic===t}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"sendJoin",value:function(t){this.state=c.joining,this.joinPush.resend(t)}},{key:"rejoin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||this.sendJoin(t)}},{key:"trigger",value:function(t,e,r){var n=u.close,i=u.error,o=u.leave,s=u.join;if(!(r&&[n,i,o,s].indexOf(t)>=0&&r!==this.joinRef())){var a=this.onMessage(t,e,r);if(e&&!a)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(function(e){return e.event===t}).map(function(t){return t.callback(a,r)})}}},{key:"replyEventName",value:function(t){return"chan_reply_"+t}},{key:"isClosed",value:function(){return this.state===c.closed}},{key:"isErrored",value:function(){return this.state===c.errored}},{key:"isJoined",value:function(){return this.state===c.joined}},{key:"isJoining",value:function(){return this.state===c.joining}},{key:"isLeaving",value:function(){return this.state===c.leaving}}]),t}(),f=(e.Socket=function(){function t(e){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||p,this.transport=i.transport||window.WebSocket||f,this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.reconnectAfterMs=i.reconnectAfterMs||function(t){return[1e3,2e3,5e3,1e4][t-1]||1e4},this.logger=i.logger||function(){},this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=i.params||{},this.endPoint=e+"/"+h.websocket,this.reconnectTimer=new y(function(){r.disconnect(function(){return r.connect()})},this.reconnectAfterMs)}return o(t,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var t=m.appendParams(m.appendParams(this.endPoint,this.params),{vsn:s});return"/"!==t.charAt(0)?t:"/"===t.charAt(1)?this.protocol()+":"+t:this.protocol()+"://"+location.host+t}},{key:"disconnect",value:function(t,e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r||""):this.conn.close(),this.conn=null),t&&t()}},{key:"connect",value:function(t){var e=this;t&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=t),this.conn||(this.conn=new this.transport(this.endPointURL()),this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return e.onConnOpen()},this.conn.onerror=function(t){return e.onConnError(t)},this.conn.onmessage=function(t){return e.onConnMessage(t)},this.conn.onclose=function(t){return e.onConnClose(t)})}},{key:"log",value:function(t,e,r){this.logger(t,e,r)}},{key:"onOpen",value:function(t){this.stateChangeCallbacks.open.push(t)}},{key:"onClose",value:function(t){this.stateChangeCallbacks.close.push(t)}},{key:"onError",value:function(t){this.stateChangeCallbacks.error.push(t)}},{key:"onMessage",value:function(t){this.stateChangeCallbacks.message.push(t)}},{key:"onConnOpen",value:function(){var t=this;this.log("transport","connected to "+this.endPointURL(),this.transport.prototype),this.flushSendBuffer(),this.reconnectTimer.reset(),this.conn.skipHeartbeat||(clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return t.sendHeartbeat()},this.heartbeatIntervalMs)),this.stateChangeCallbacks.open.forEach(function(t){return t()})}},{key:"onConnClose",value:function(t){this.log("transport","close",t),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(e){return e(t)})}},{key:"onConnError",value:function(t){this.log("transport",t),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(e){return e(t)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(t){return t.trigger(u.error)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case a.connecting:return"connecting";case a.open:return"open";case a.closing:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(t){this.channels=this.channels.filter(function(e){return e.joinRef()!==t.joinRef()})}},{key:"channel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new d(t,e,this);return this.channels.push(r),r}},{key:"push",value:function(t){var e=this,r=t.topic,n=t.event,i=t.payload,o=t.ref,s=function(){return e.conn.send(JSON.stringify(t))};this.log("push",r+" "+n+" ("+o+")",i),this.isConnected()?s():this.sendBuffer.push(s)}},{key:"makeRef",value:function(){var t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}},{key:"sendHeartbeat",value:function(){this.isConnected()&&this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.makeRef()})}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(t){return t()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(t){var e=JSON.parse(t.data),r=e.topic,n=e.event,i=e.payload,o=e.ref;this.log("receive",(i.status||"")+" "+r+" "+n+" "+(o&&"("+o+")"||""),i),this.channels.filter(function(t){return t.isMember(r)}).forEach(function(t){return t.trigger(n,i,o)}),this.stateChangeCallbacks.message.forEach(function(t){return t(e)})}}]),t}(),e.LongPoll=function(){function t(e){n(this,t),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=a.connecting,this.poll()}return o(t,[{key:"normalizeEndpoint",value:function(t){return t.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+h.websocket),"$1/"+h.longpoll)}},{key:"endpointURL",value:function(){return m.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=a.connecting}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var t=this;this.readyState!==a.open&&this.readyState!==a.connecting||m.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(e){if(e){var r=e.status,n=e.token,i=e.messages;t.token=n}else var r=0;switch(r){case 200:i.forEach(function(e){return t.onmessage({data:JSON.stringify(e)})}),t.poll();break;case 204:t.poll();break;case 410:t.readyState=a.open,t.onopen(),t.poll();break;case 0:case 500:t.onerror(),t.closeAndRetry();break;default:throw"unhandled poll status "+r}})}},{key:"send",value:function(t){var e=this;m.request("POST",this.endpointURL(),"application/json",t,this.timeout,this.onerror.bind(this,"timeout"),function(t){t&&200===t.status||(e.onerror(status),e.closeAndRetry())})}},{key:"close",value:function(t,e){this.readyState=a.closed,this.onclose()}}]),t}()),m=e.Ajax=function(){function t(){n(this,t)}return o(t,null,[{key:"request",value:function(t,e,r,n,i,o,s){if(window.XDomainRequest){var a=new XDomainRequest;this.xdomainRequest(a,t,e,n,i,o,s)}else{var p=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.xhrRequest(p,t,e,r,n,i,o,s)}}},{key:"xdomainRequest",value:function(t,e,r,n,i,o,s){var a=this;t.timeout=i,t.open(e,r),t.onload=function(){var e=a.parseJSON(t.responseText);s&&s(e)},o&&(t.ontimeout=o),t.onprogress=function(){},t.send(n)}},{key:"xhrRequest",value:function(t,e,r,n,i,o,s,a){var p=this;t.timeout=o,t.open(e,r,!0),t.setRequestHeader("Content-Type",n),t.onerror=function(){a&&a(null)},t.onreadystatechange=function(){if(t.readyState===p.states.complete&&a){var e=p.parseJSON(t.responseText);a(e)}},s&&(t.ontimeout=s),t.send(i)}},{key:"parseJSON",value:function(t){return t&&""!==t?JSON.parse(t):null}},{key:"serialize",
value:function(t,e){var r=[];for(var n in t)if(t.hasOwnProperty(n)){var o=e?e+"["+n+"]":n,s=t[n];"object"===("undefined"==typeof s?"undefined":i(s))?r.push(this.serialize(s,o)):r.push(encodeURIComponent(o)+"="+encodeURIComponent(s))}return r.join("&")}},{key:"appendParams",value:function(t,e){if(0===Object.keys(e).length)return t;var r=t.match(/\?/)?"&":"?";return""+t+r+this.serialize(e)}}]),t}();m.states={complete:4};var y=(e.Presence={syncState:function(t,e,r,n){var i=this,o=this.clone(t),s={},a={};return this.map(o,function(t,r){e[t]||(a[t]=r)}),this.map(e,function(t,e){var r=o[t];if(r){var n=e.metas.map(function(t){return t.phx_ref}),p=r.metas.map(function(t){return t.phx_ref}),c=e.metas.filter(function(t){return p.indexOf(t.phx_ref)<0}),u=r.metas.filter(function(t){return n.indexOf(t.phx_ref)<0});c.length>0&&(s[t]=e,s[t].metas=c),u.length>0&&(a[t]=i.clone(r),a[t].metas=u)}else s[t]=e}),this.syncDiff(o,{joins:s,leaves:a},r,n)},syncDiff:function(t,e,n,i){var o=e.joins,s=e.leaves,a=this.clone(t);return n||(n=function(){}),i||(i=function(){}),this.map(o,function(t,e){var i=a[t];if(a[t]=e,i){var o;(o=a[t].metas).unshift.apply(o,r(i.metas))}n(t,i,e)}),this.map(s,function(t,e){var r=a[t];if(r){var n=e.metas.map(function(t){return t.phx_ref});r.metas=r.metas.filter(function(t){return n.indexOf(t.phx_ref)<0}),i(t,r,e),0===r.metas.length&&delete a[t]}}),a},list:function(t,e){return e||(e=function(t,e){return e}),this.map(t,function(t,r){return e(t,r)})},map:function(t,e){return Object.getOwnPropertyNames(t).map(function(r){return e(r,t[r])})},clone:function(t){return JSON.parse(JSON.stringify(t))}},function(){function t(e,r){n(this,t),this.callback=e,this.timerCalc=r,this.timer=null,this.tries=0}return o(t,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.tries=t.tries+1,t.callback()},this.timerCalc(this.tries+1))}}]),t}())}])},function(t,e,r){var n,i;i=r(24),n=function(){function t(){}return t.prototype.event=function(t,e,r,n){return this.send("event",t,e,r,n)},t.prototype.eventOnce=function(t,e,r,n){return this.once("event",t,e,r,n)},t.prototype.social=function(t,e,r,n){return this.send("social",t,e,r,n)},t.prototype.socialOnce=function(t,e,r,n){return this.once("social",t,e,r,n)},t.prototype.niEvent=function(t,e,r,n){return this.send("event",t,e,r,n,{nonInteraction:!0})},t.prototype.niEventOnce=function(t,e,r,n){return this.once("event",t,e,r,n,{nonInteraction:!0})},t.prototype.once=function(t,e,r,n,i,o){var s;if(window.ga)return s=t+"_"+e+"_"+r+"_"+n,window.ga_events||(window.ga_events=[]),window.ga_events.indexOf(s)===-1?(window.ga_events.push(s),this.send(t,e,r,n,i,o)):void 0},t.prototype.pageview=function(t,e){var r,n,o,s,a;return r=e.both,n=e.dimensions,null==r&&(r=!0),a="pageview",(s=t.match(/inverse\.com(\/[^\?#]+)/))?s=s[1]:(s=t.match(/^\/[^\?#]+/))&&(s=s[0]),s||(s="/"),e.slideshow||(o=s.replace(/\/page\/\d*$/,"")),this.set("page",s,r,o),n&&i.each(n,function(t){return function(e,n){return t.set("dimension"+(n+1),e,r)}}(this)),r?this.sendBoth(a):this.send(a)},t.prototype.set=function(t,e,r,n){if(window.ga)return window.ga("custom.set",t,e),r?window.ga("set",t,n||e):void 0},t.prototype.sendBoth=function(t,e,r,n,i,o){return this.send(t,e,r,n,i,o),this.sendMain(t,e,r,n,i,o)},t.prototype.send=function(t,e,r,n,i,o){if(window.ga)return window.ga("custom.send",t,e,r,n,i,o)},t.prototype.sendMain=function(t,e,r,n,i,o){if(window.ga)return window.ga("send",t,e,r,n,i,o)},t}(),t.exports=new n},function(t,e,r){var n,i,o,s;s=r(16),o=r(24),n={Dom:r(46),Image:r(57),String:r(58),Markdown:r(59)},i=function(){function t(){}return t.prototype.meta=function(t,e){var r,n;if("undefined"!=typeof document&&null!==document)return n=document.createDocumentFragment(),t.article&&!t.sponsor&&(r=t.canonical),this.title(t.title||t.name),this.metaTag("name","description",this.cleanString(t.description,n)),this.metaTag("name","keywords",t.keywords,n),this.updateMeta(t,e,n),this.toggleParselyId(t.id,n),this.toggleRobots(t.robots,n),this.toggleCanonical(t.canonical,n),this.toggleAmp(r,n),this.toggleRel(t.rel,n),document.head.appendChild(n)},t.prototype.updateMeta=function(t,e,r){var n;return n=e||t,o.assign(n,{headline:t.headline}),this.socialMeta(n,r)},t.prototype.socialMeta=function(t,e){var r,n;return n=t.url||"",n.match(/^https?:\/\/www.inverse.com/)||(n="https://www.inverse.com"+n),r=this.socialProps({url:n,date:t.date,image:t.image,author:t.author,article:t.article,modified:t.modified,title:this.cleanString(t.title),category_name:t.category_name,keywords:this.cleanString(t.keywords),description:this.cleanString(t.description)}),o.flatten(o.map(r,function(t){return function(r,n){return o.map(r,function(r,i){return t.toggleTag(n,i,r,e)})}}(this)))},t.prototype.socialProps=function(t){return null==t&&(t={}),o.assign({},{name:this.twitterTags(t),property:o.assign({},this.ogTags(t),this.articleTags(t),{author:t.author})})},t.prototype.ogTags=function(t){return{"og:url":t.url,"og:image":t.image,"og:title":t.title,"og:description":t.description}},t.prototype.articleTags=function(t){return o.defaults(t,{keywords:""}),t.article||(t.keywords=""),{"article:author":t.facebook,"article:published_at":t.date,"article:modified_at":t.modified,"article:category":t.category_name,"article:tag":t.keywords.split(",")}},t.prototype.twitterTags=function(t){var e,r,n;return n=t.title,e=t.description,r=t.image,{"twitter:image":r,"twitter:title":n,"twitter:description":e}},t.prototype.removeMeta=function(t){return o.forEach(t,function(t){if(t)return document.head.removeChild(t)})},t.prototype.title=function(t){return null!=t&&"undefined"!=typeof document&&null!==document&&(document.title=this.cleanString(t)),t},t.prototype.cleanString=function(t){return t=n.String.cleanString(this.replaceCharacters(o.unescape(t))),t=n.Markdown.stripMarkdown(t),"undefined"!=typeof document&&null!==document?this.replaceQuotes(t):o.escape(t)},t.prototype.toggleParselyId=function(t,e){var r,n;if("undefined"!=typeof document&&null!==document){if(n=this.metaTag("name","parsely-post-id"),t)return n?n.setAttribute("content",t):(r={content:t,name:"parsely-post-id"},this.addTag("meta",r,e));if(n)return document.head.removeChild(n)}},t.prototype.toggleRobots=function(t,e){var r,n;if("undefined"!=typeof document&&null!==document){if(n=this.metaTag("name","robots"),t){if(n)return;return r={name:"robots",content:t},this.addTag("meta",r,e)}if(n)return document.head.removeChild(n)}},t.prototype.toggleRel=function(t,e){return o.forEach(t,function(t){return function(r,n){return t.toggleLink(n,r,e)}}(this))},t.prototype.toggleCanonical=function(t,e){return this.toggleLink("canonical",t,e)},t.prototype.toggleAmp=function(t,e){return t&&!t.match(/\/amp\/article\//)&&(t=t.replace(/\/article/,"/amp/article")),this.toggleLink("amphtml",t,e)},t.prototype.toggleLink=function(t,e,r){var n,i;if("undefined"!=typeof document&&null!==document){if(i=document.querySelector("link[rel="+t+"]"),e)return i?i.setAttribute("href",e):(n={rel:t,href:e},this.addTag("link",n,r));if(i)return i.parentNode.removeChild(i)}},t.prototype.toggleTag=function(t,e,r,n){var i;return o.isArray(r)?this.toggleTags(t,e,r,n):(i=this.metaTag(t,e,r,n),!r&&i?i.parentNode.removeChild(i):void 0)},t.prototype.toggleTags=function(t,e,r,n){var i;if("undefined"!=typeof document&&null!==document)return i=document.head.querySelectorAll("meta["+t+"='"+e+"']"),o.each(i,function(t){return t.parentNode.removeChild(t)}),o.each(r,function(r){return function(i){var o,s;return o={content:i},o[""+t]=e,s=o,r.addTag("meta",s,n)}}(this))},t.prototype.metaTag=function(t,e,r,n){var i,o,a;if("undefined"!=typeof document&&null!==document)return a=document.head.querySelector("meta["+t+"='"+e+"']"),null!=r&&(a?a.content=s.trust(r):(i={content:r},i[""+t]=e,o=i,a=this.addTag("meta",o,n))),a},t.prototype.addTag=function(t,e,r){var n;if("undefined"!=typeof document&&null!==document)return n=document.createElement(t),o.forEach(e,function(t,e){return n.setAttribute(e,t)}),r||(r=document.head),r.appendChild(n),n},t.prototype.replaceCharacters=function(t){return this.replaceEntities(this.replaceSpaces(t))},t.prototype.replaceEntities=function(t){return t.replace(/&mdash;/g,"")},t.prototype.replaceSpaces=function(t){return t.replace(/\s/g," ")},t.prototype.replaceQuotes=function(t){var e;return e=1,t.replace(/"/g,function(){return e%2===1?(e+=1,""):""})},t}(),t.exports=new i},function(t,e,r){var n,i;i=r(24),n=function(){function t(){}return t.prototype.robotsImage=function(t,e){var r;if(null==e&&(e={}),t)return i.defaults(e,{dpr:!1,width:1200,format:"png"}),r=this.sourceWithQueryString(t,e),this.replaceFormat(r,e.format)},t.prototype.replaceFormat=function(t,e){return t.replace(/auto=[^&]*/,"fm="+e)},t.prototype.sourceWithQueryString=function(t,e){var r,n,i;return null==e&&(e={}),this.validSource(t)?(i=/[\?&]?(auto=[^&]*|(gif)?q=\d\d?|dpr=[\d\.]{0,3}|[wh]=\d*)/g,n=t.replace(i,""),r=n.indexOf("?")>0?"&":"?",n.match(/\?&$/)&&(r=""),e.gif=this.isGif(t),(""+n+r+this.optQueryParams(e)).replace(/,/g,"%2C")):t},t.prototype.getClasses=function(t,e){return e||(e=[]),null==(null!=t?t.className:void 0)?e:this.getClasses(t.parentNode,e.concat(t.className.split(" ")))},t.prototype.optQueryParams=function(t){var e,r,n;return null==t&&(t={}),t.gif?n="gifq=35":t.dpr&&(e="dpr=2"),r=[e,"auto=format,compress",null!=t.width?"w="+t.width:void 0,n],i.without(r,void 0,"").join("&")},t.prototype.validSource=function(t){return null!=t&&!t.match(/^data:image/)},t.prototype.isGif=function(t){if(t)return t.match(/$\.gif|\.gif\??/)},t.prototype.circleMask=function(t,e,r){return t+"?"+this.circleMaskParams(e,r)},t.prototype.circleMaskParams=function(t,e){return null==t&&(t=100),null==e&&(e=100),["w="+t,"h="+e,"fit=crop","mask=ellipse","maskbg=00000000"].join("&")},t}(),t.exports=new n},function(t,e,r){var n,i,o;o=r(24),n="a|abbr|acronym|address|applet|area|article|aside|audio|b|base|basefont|bdi|bdo|bgsound|big|blink|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|command|content|data|datalist|dd|del|details|dfn|dialog|dir|div|dl|DOCTYPE|dt|element|em|embed|fieldset|figcaption|figure|font|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|iframe|image|img|input|ins|isindex|kbd|keygen|label|legend|li|link|listing|main|map|mark|marquee|menu|menuitem|meta|meter|multicol|nav|nobr|noembed|noframes|noscript|object|ol|optgroup|option|output|p|param|picture|plaintext|pre|progress|q|rp|rt|rtc|ruby|s|samp|script|section|select|shadow|small|source|spacer|span|strike|strong|style|sub|summary|sup|table|tbody|td|template|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video|wbr|xmp",i=function(){function t(){}return t.prototype.regexes={script:/<script[^<]*<\/script>/gi,tags:new RegExp("</?\\b("+n+")(\\s?[^>]*|\\b)>","gi"),illegals:/\uffe2\uffa8|\uffe2|\uffa8|\uFFFD/g,spaces:"\f\t\v\u2028\u2029\ufeff"},t.prototype.tags=function(){return n},t.prototype.beforeTag=function(t,e){return this.search(t,new RegExp("(.*)</"+e+">"))},t.prototype.afterTag=function(t,e){return this.search(t,new RegExp("</"+e+">(.*)"))},t.prototype.search=function(t,e){var r;return null!=(r=t.replace(/(\r\n|\n|\r)/gm,"").match(e))?r[1]:void 0},t.prototype.startsWithTag=function(t){return t.match(new RegExp("^\\s*<\\b("+n+")\\b>"))},t.prototype.endsWithTag=function(t){return t.match(new RegExp("<\\/\\b("+n+")\\b>\\s*$"))},t.prototype.getTags=function(t){if(t)return t.match(new RegExp("</?\\b("+n+")\\b>","g"))},t.prototype.getTag=function(t){var e,r,i,o,s;return t&&(this.startsWithTag(t)||this.endsWithTag(t))?(s="\\b("+n+")\\b",r=null!=(i=t.match(new RegExp("^\\s*<"+s+">")))?i[1]:void 0,e=null!=(o=t.match(new RegExp("</"+s+">\\s*$")))?o[1]:void 0,r||e):null},t.prototype.cleanGraph=function(t){return this.cleanAnchors(this.stripIllegals(t))},t.prototype.cleanAnchors=function(t){return t.replace(/<a href="([^"]*)"/g,function(t){return function(e,r){return'<a href="'+(t.cleanHref(r)||"/")+'"'}}(this))},t.prototype.cleanHref=function(t){var e,r;return null==t&&(t=""),t=t.replace(/^\(/,""),t.match(/\?/)||(t=t.replace(/\)$/,"")),t.length?t.match(/^(mailto:)/)?t:t.match(/\./)||"/"===(e=t[0])||"#"===e?(t.match(/https?:\/\//)?t=t.replace(/^[^h]*/,""):t.match(/\/\//)?t="http:"+t.replace(/^[^\/]*/,""):"/"!==(r=t[0])&&"#"!==r&&(t="http://"+t),t.trim()):void 0:t},t.prototype.cleanString=function(t){return this.stripTags(this.stripIllegals(t))},t.prototype.stripAnchors=function(t){return null!=t?t.replace(/<a[^>]*>|<\/a>/gi,""):void 0},t.prototype.stripTags=function(t){return this.stripScripts(null!=t?t.replace(this.regexes.tags,""):void 0)},t.prototype.removeAnchors=function(t){return null!=t?t.replace(/<a[^>]*>|<\/a>/gi,""):void 0},t.prototype.stripScripts=function(t){return null!=t?t.replace(this.regexes.script,""):void 0},t.prototype.stripIllegals=function(t){return null!=t?t.replace(this.regexes.illegals,""):void 0},t.prototype.replaceSpaces=function(t){var e;return e=new RegExp("["+this.regexes.spaces+"]","g"),null!=t?t.replace(e," "):void 0},t.prototype.escapeQuotes=function(t){return null!=t?t.replace(/"/g,'\\"'):void 0},t.prototype.quotize=function(t){return['"',t,'"'].join("")},t}(),t.exports=new i},function(t,e,r){var n,i;i=r(24),n=function(){function t(){}return t.prototype.regexes={headline:/^(\#{1,6})\s([^\#\n]+)$/m,hr:/^(?:([\*\-_] ?)+)\1\1$/gm,lists:/^((\s*((\*|\-)|\d(\.)) [^\n]+)\n?)+/gm,bolditalic:/(?:([\*~]{2,3}))([^\*~\n]+[^\*~\s])\1/g,italic:/(?:([\*~]))([^\*~\n]+[^\*~\s])\1/g,links:/!?\[([^\]]+)\]\(([^ \)<>]+)( "[^\(\)\"]+")?\)/g,blockquote:/^>(.*)/},t.prototype.htmls={italic:"em",links:"a",bolditalic:"strong",blockquote:"blockquote"},t.prototype.strip_rules={headline:"$2",hr:"",bolditalic:"$2",italic:"$2",links:"$1",blockquote:"$1"},t.prototype.addMarkdownTags=function(t){return i.forEach(this.regexes,function(e){return function(r,n){return t=t.replace(r,function(t){return e.markdownTag(t,n)})}}(this)),t},t.prototype.stripMarkdown=function(t){return i.forEach(i.omit(this.regexes,["lists"]),function(e){return function(r,n){return t=null!=t?t.replace(r,e.strip_rules[n]):void 0}}(this)),t},t.prototype.removeMarkdownTags=function(t){return t=t.replace(/<span class="[a-zA-Z\-\s]*">/,""),t.replace(/<\/span>/,"")},t.prototype.isList=function(t){return null==t&&(t=""),t.match(this.regexes.lists)},t.prototype.markdownTag=function(t,e){var r;return r=t,"lists"===e&&(t=t.trim().split(/\n|\r/),r=i.map(t,function(t){return"<li>"+t+"</li>\n"}).join("")),'<span class="markdown markdown--'+e+'">'+r+"</span>"},t.prototype.replaceWithHtml=function(t,e){return i.forEach(this.regexes,function(r){return function(n,o){var s,a,p,c,u,h;if(h=r.htmls[o])return c=h,t&&"links"===o&&(a="window.inverse_amazon_tracking(this);",s=null!=(u=t.match(n))?u[0].match(/www\.amazon\.com/):void 0,c=i.without([h,'href="$2"','target="_blank"',s&&!e?'onclick="'+a+'"':void 0,s&&e?'class="inverse-amazon-link"':void 0],void 0).join(" ")),p="<"+c+">"+r.strip_rules[o]+"</"+h+">",t=null!=t?t.replace(n,p):void 0}}(this)),t},t}(),t.exports=new n},function(t,e,r){var n,i;i=r(16),n=function(){function t(){}return t.prototype.pageview=function(t,e){var r,n,o;if(null!=(r=window.PARSELY)?r.beacon:void 0)return e&&(o=""+e+i.route(),t.match(e)||(n=""+e+t)),window.PARSELY.beacon.trackPageView({js:1,url:n||t,urlref:o||i.route(),action_name:this.getAction(t)})},t.prototype.getAction=function(t){var e;return e=t.match(/^\/([^\/\?]*)[\/\?]?/),e?e[1].length?e[1]:"home":"miscellaneous"},t}(),t.exports=new n},function(t,e,r){var n,i,o;o=r(16),i=r(24),n=function(){function t(){}return t.prototype.facebook={app:0x529232f243c11,pixel:0x52c1b1e861987,test:715353198564735,inverse:820406651341117,entertainment:926393777449724,ad_placement:"1187101234665835_1187101311332494",pages:{inverse:"inverse",science:"inversescience",starwars:"starwarsoninverse",humans:"inverseentertainment"}},t.prototype.quantcast={qacct:"p-dsZ5hTqk9YtgS"},t.prototype.jwplayer={id:"5q5VzNo4",old:"NjrKGkKb",insta:"1zq1VJBl"},t.prototype.ga={custom:"UA-63231719-2",default:"UA-63231719-1"},t.prototype.comscore={c1:2,c2:19987187},t.prototype.google={page:"https://plus.google.com/+Inversedotcom"},t.prototype.parsely={apikey:"inverse.com",script:"d1z2jf7jlzjs58.cloudfront.net"},t.prototype.keywee={domain:"//dc8xl0ndzn2cb.cloudfront.net",script:"/js/inversecom/v0/keywee.min.js"},t.prototype.simplereach={script:"/js/reach.js",pid:"57f3ecc3736b79fb6c004ba8",domain:"//d8rk54i4mohrb.cloudfront.net"},t.prototype.flipboard={page:"https://flipboard.com/@inversedotcom?utm_campaign=widgets&utm_source=logo&utm_medium=web"},t.prototype.applenews={page:"https://apple.news/TKny6NgaxRpugeMifHaypsA"},t.prototype.linkedin={id:"275370"},t.prototype.facebookPage=function(t){return null==t&&(t="inverse"),"https://www.facebook.com/"+this.facebook.pages[t.replace(/\s*/g,"")]},t.prototype.comscoreCode=function(){return o.trust('<!-- Begin comScore Tag --><script>var _comscore = _comscore || [];_comscore.push({ c1: "'+this.comscore.c1+'", c2: "'+this.comscore.c2+'" });(function() {var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";el.parentNode.insertBefore(s, el);})();</script><noscript><img alt="Comscore" src="https://b.scorecardresearch.com/p?c1='+this.comscore.c1+"&amp;c2="+this.comscore.c2+'&amp;cv=2.0&amp;cj=1" /></noscript><!-- End comScore Tag -->')},t.prototype.quantcastCode=function(t){return null==t&&(t=""),o.trust('<!-- Quantcast Tag --><script type="text/javascript">var _qevents = _qevents || [];(function() {var elem = document.createElement("script");elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName("script")[0];scpt.parentNode.insertBefore(elem, scpt);})();_qevents.push({qacct:"'+this.quantcast.qacct+'",labels:"'+t+'"});</script><noscript><div style="display:none;"><img src="//pixel.quantserve.com/pixel/'+this.quantcast.qacct+'.gif" border="0" height="1" width="1" alt="Quantcast"/></div></noscript><!-- End Quantcast tag -->')},t.prototype.keyweeCode=function(){return o.trust('<script src="'+this.keywee.domain+this.keywee.script+'" type="text/javascript" async></script>')},t.prototype.simplereachCode=function(t){return o.trust("<script> __reach_config = "+JSON.stringify(this.simplereachData(t))+';</script><script async defer src="'+this.simplereach.domain+this.simplereach.script+'"></script>')},t.prototype.simplereachData=function(t){return null==t&&(t={}),i.assign({},t,{ignore_errors:!1,pid:this.simplereach.pid,manual_scroll_depth:!0})},t.prototype.gaCode=function(t,e){var r;return r="analytics",e&&(r+="_debug"),[o.trust("<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;"+this.customGaCode(t,e)+'ga("send", "pageview");ga("custom.send", "pageview");</script>'),o.trust('<script async defer src="https://www.google-analytics.com/'+r+'.js"></script>')]},t.prototype.customGaCode=function(t,e){var r;return r=[e?"window.ga_debug = {trace: true};":void 0,'ga("create", "'+this.ga.default+'", "auto", {"useAmpClientId": true});','ga("create", "'+this.ga.custom+'", "auto", {"name": "custom","useAmpClientId": true});',e?'ga("set", "sendHitTask", null);':void 0,this.customGaDimensions(t)],i.without(r,void 0,null,"").join("")},t.prototype.customGaDimensions=function(t){return t=i.map(t,function(t,e){return['ga("set", "dimension'+(e+1)+'", "'+t+'");','ga("custom.set", "dimension'+(e+1)+'", "'+t+'");'].join("")}),t.join("")},t.prototype.parseFacebook=function(t,e){if(null==e&&(e=!0),window.inverse_fb_init&&("undefined"!=typeof FB&&null!==FB?FB.XFBML:void 0)){if(t){if(e&&t.querySelector("iframe"))return;FB.XFBML.parse(t.parentNode)}else FB.XFBML.parse();return!0}},t.prototype.loadTwitter=function(t){if("undefined"!=typeof twttr&&null!==twttr?twttr.widgets:void 0)return twttr.widgets.load(t),!0},t.prototype.processInstagrams=function(t){if("undefined"!=typeof instgrm&&null!==instgrm?instgrm.Embeds:void 0)return instgrm.Embeds.process(t),!0},t}(),t.exports=new n},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(16),s=r(24),o=r(23),i={Person:r(63),Article:r(70)},n=function(t){function e(){var t,r,n;e.__super__.constructor.apply(this,arguments),this.server||(t=isomithric.article,(r=null!=(n=isomithric.authors)?n[null!=t?t.created_by:void 0]:void 0)&&(t=s.assign({},t,{author:this.m(i.Person,r)}))),s.assign(this,{previous:null,pinned_ids:[],bookmark:{seen:0},landing_id:null!=t?t.landing_id:void 0,model:a.prop(this.m(i.Article,t))}),this.resetBookmark()}return p(e,t),e.cache_key="article",e.prototype.reset=function(){return this.pinned_ids=[],this.previous=null,this.landing_id=null,this.model(this.m(i.Article)),this.resetBookmark()},e.prototype.resetBookmark=function(){return s.assign(this.bookmark,{page:1,pages:1,stream_index:0})},e.prototype.active=function(t){return t.id===this.model().id},e.prototype.jsonData=function(){if(this.json)return s.omit(this.json,["author"])},e.prototype.nextBodyID=function(t){var e,r,n,i;return e=t.next_body_id,(n=t.pinned_body_ids)?(i=t.id,u.call(this.pinned_ids,i)<0&&this.pinned_ids.push(t.id),(r=s.find(n,function(t){return function(e){return u.call(t.pinned_ids,e)<0}}(this)))?(this.pinned_ids.push(r),r):e):e},e}(o),t.exports=o.export(n)},function(t,e,r){var n,i,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};o=r(24),i=r(64),n={Paragraphs:r(66),Image:r(67)},t.exports=function(t){function e(){this.crop=s(this.crop,this),e.__super__.constructor.apply(this,arguments),this.initializeWidget()}return a(e,t),e.prototype.type="people",e.prototype.api=function(){return this.domain("diplomat")+"/users"},e.prototype.initializeWidget=function(){return o.defaults(this,{widget:{}}),this.widget=this.m(n.Image,this.widget)},e.prototype.graph=function(){return{children:function(t){return function(){return[t.m(n.Paragraphs,{position:0,content_md:t.bio,content_html:t.bio+" "})]}}(this)}},e.prototype.breadcrumbs=function(){var t;return o.without([{href:"/about/team",text:"All Authors"},(t=this.fullName())?{href:this.url(),text:t}:void 0],null,void 0)},e.prototype.fullName=function(){var t,e;return e=this.lastName(),t=this.firstName(),t&&e?t+" "+e:t?t:e?e:""},e.prototype.meta=function(){return{url:this.url(),title:this.fullName(),image:this.aboutImage(),description:this.socialDescription()}},e.prototype.socialTitle=function(){return"Read more articles from "+this.displayName()},e.prototype.socialImage=function(){return this.aboutImage()},e.prototype.socialDescription=function(){return this.bio},e.prototype.displayName=function(){var t;return t=this.firstName()||"",t.match(/\s+and\s?|^the\s?/i)?this.fullName():t},e.prototype.firstName=function(){return this.first_name||this.first_name},e.prototype.lastName=function(){return this.last_name||this.last_name},e.prototype.aboutImage=function(){return this.image("2x1_team")},e.prototype.crop=function(t){return null==t&&(t="2:1"),this.image(t)},e.prototype.image=function(t){return null==t&&(t=""),this.widget.persisted()?this.widget.crop(t.replace(/x/,":").replace(/_team/,"")):(t.length&&(t=t.replace(/:/,"x").replace(/3x1/,"2x1")+"/"),"https://fsmedia.imgix.net/assets/user/"+t+this.id+".jpg")},e.prototype.circleImage=function(){var t;return t=this.widget.persisted()?this.widget.embed():this.image("2x1"),Utils.Image.circleMask(t)},e.prototype.canonical=function(){return""+this.domain("www")+this.url()},e.prototype.caption=function(){return this.fullName()},e.prototype.mono=function(){return this.widget.persisted()?"&sat=-100":""},e.prototype.url=function(){return"/user/"+this.permalink},e.prototype.twitterUrl=function(){var t;if(null!=(t=this.twitter)?t.length:void 0)return"https://twitter.com/"+this.twitter},e.prototype.facebookPageUrl=function(){var t;if(null!=(t=this.facebook)?t.length:void 0)return"https://www.facebook.com/"+this.facebook},e.prototype.get=function(t){if(null==t&&(t={}),t=o.assign({},t,{url:this.id||t.id}),t.ids&&(t.url=t.ids.join(",")),t.url.match(/^\d*-/))return e.__super__.get.call(this,t).then(function(t){return function(e){return t.fetched=!0,e}}(this))},e.prototype.staff=function(){return!!this.admin()||"staff"===this.job().toLowerCase()},e.prototype.admin=function(){var t;return"admin"===(t=this.job().toLowerCase())||"editor"===t},e.prototype.job=function(){return this.section||this.role||""},e.prototype.ops=function(){var t;return this.superuser()||(t=this.permalink,c.call(this.opsusers,t)>=0)},e.prototype.superuser=function(){var t;return t=this.permalink,c.call(this.superusers,t)>=0},e.prototype.superusers=["1-winton-welsh","2-michael-schaefermeyer","3-dave-nemetz","4-steve-marshall","5-kameron-niksefat","8-hannah-margaret-allen","38-clayton-gentry","50-nick-lucchesi","109-alex-frons","118-connor-finnegan","165-laura-casing","247-evan-meredith"],e.prototype.opsusers=["236-matt-wiener","237-evan-supross","255-russell-stein"],e.prototype.strippedData=function(t){var e;return null==t&&(t=!1),e=o.omit(this.diffsyncData(),["type","_meta","robot","deleted","private"]),t?e:o.omit(e,["role","widget","section"])},e.prototype.diffsyncData=function(){var t;return t=o.pick(this,["id","bio","role","type","_meta","robot","deleted","private","section","twitter","facebook","last_name","permalink","first_name"]),t.widget=this.widget.diffsyncData(),t},e.prototype.noads=o.noop,e.prototype.pixel=o.noop,e}(i)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){return function(){return t.apply(e,arguments)}},h=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;p=r(24),c=r(16),n=r(51),i=r(20),s={Promises:r(22)},a={Cookies:r(32),Navigator:r(65)},t.exports=o=function(t){function e(){this.save=u(this.save,this),e.__super__.constructor.apply(this,arguments),this.promises=s.Promises.get(this.server)}return h(e,t),e.prototype.private=!0,e.prototype.is_json_api=!0,e.prototype.api=function(){return this.domain("morgue")+"/"+this.type},e.prototype.domain=function(t){return new i(this.server).urlShouldBe(t)},e.prototype.promise=function(t){return this.promises.add(t,c.request(t))},e.prototype.persisted=function(){return null!=this.links},e.prototype.save=function(t){return this.isFormData(t)||p.assign(t,{type:this.type}),this.persisted()?(this.isFormData(t)?t.append("data[id]",this.id):t.id=this.id,this.put({url:this.id,data:t}).then(function(e){return function(r){var n;return null==r&&(r={}),t=p.assign({component_id:e.component_id},null!=(n=r.data)?n[0]:void 0),e.initialize(t)}}(this))):this.post({data:t}).then(function(e){return function(r){var n;return null==r&&(r={}),t=p.assign({component_id:e.component_id},null!=(n=r.data)?n[0]:void 0),e.initialize(t)}}(this))},e.prototype.get=function(t){return this.request(t,"get")},e.prototype.post=function(t){return this.request(t,"post",!0)},e.prototype.put=function(t){return this.request(t,"put",!0)},e.prototype.delete=function(t){return null==t&&(t={}),t.url||(t.url=this.id),this.request(t,"delete")},e.prototype.request=function(t,e,r){return t=this.crudParams(t,e,r),this.promise(t)},e.prototype.crudParams=function(t,e,r){var n,i,o,s,c;return null==t&&(t={}),null==t.background&&"undefined"!=typeof document&&null!==document&&(t.background=!0),"http"!==(null!=(s=t.url)?s.substring(0,4):void 0)&&(c="",null!=t.url&&(c="/"+t.url),t.url=""+this.api()+c),(o=this.isFormData(t.data))&&(t.serialize=function(t){return t}),r&&!o&&(this.is_json_api?t.data={data:t.data}:t.body={data:t.data}),!this.private||"undefined"==typeof document||null===document||"post"!==e&&"put"!==e&&"patch"!==e&&"delete"!==e||(i=new a.Cookies,n="_token:production",this.isFormData(t.data)?t.data.append(n,i.get(n)):(t.data||(t.data={}),t.data[n]=i.get(n)),t.no_token&&(t=p.omit(t,["no_token"]),t.data=p.omit(t.data,[n]))),p.assign({},t,this.baseParams(e,t,o))},e.prototype.baseParams=function(t,e,r){return null==r&&(r=!1),{method:t,deserialize:function(t){var e;if(t.length)try{return JSON.parse(t)}catch(r){return e=r,t}},unwrapError:function(r){return function(n,i){return r.promises.error({id:e.id,url:e.url,method:t,status:i.status,message:i.responseText})}}(this),config:function(n){return function(i){return"undefined"!=typeof document&&null!==document&&(i=n.createCORSRequest(i,t,e.url),i&&!r&&n.is_json_api&&i.setRequestHeader("Content-Type","application/vnd.api+json")),i}}(this)}},e.prototype.createCORSRequest=function(t,e,r){return"withCredentials"in t?t.open(e,r,!0):"undefined"!=typeof XDomainRequest?(t=new XDomainRequest,t.open(e,r)):t=null,t},e.prototype.isFormData=function(t){return null!=window.FormData&&t instanceof window.FormData},e}(n)},function(t,e){var r;r=function(){function t(){}return t.prototype.googlebot=function(){return"undefined"!=typeof navigator&&null!==navigator?navigator.userAgent.match(/bot|googlebot|crawler|spider|robot|crawling/i):void 0},t}(),t.exports=new r},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),i=r(64),o={String:r(58),Markdown:r(59)},t.exports=n=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{content_md:"",content_html:"",column_number:0})}return a(e,t),e.prototype.type="paragraphs",e.prototype.text=function(t){return null!=t&&(this.content_md=o.String.cleanString(o.String.replaceSpaces(t))),o.String.cleanString(this.content_md||"")},e.prototype.empty=function(){return 0===this.text().length},e.prototype.isSlide=function(){return!1},e.prototype.isVideo=function(){return!1},e.prototype.isList=function(){return o.Markdown.isList(this.content_md)},e.prototype.isHR=function(){return"--"===this.content_md||this.content_html.match(/^<hr[\s\/>]/)},e.prototype.wordCount=function(){var t;return(t=this.words())?t.length:0},e.prototype.letterCount=function(){var t;return(t=this.words())?t.join(" ").length:0},e.prototype.words=function(){var t;return t=o.String.stripAnchors(o.String.stripTags(this.content_html||"")),s.without(t.trim().split(" "),""," ",null,void 0)},e.prototype.bulletedText=function(t){return t=o.String.cleanString(t).replace(/^(&nbsp;|\s)/,""),t.trim().replace(/[\n\r]/g,"<br>")},e.prototype.strippedData=function(){return s.omit(this.diffsyncData(),["id","content_md"])},e.prototype.diffsyncData=function(){var t;return t=s.pick(this,["id","_meta","content_md","content_html","column_number"]),t.content_md=o.String.stripIllegals(t.content_md),t.content_html=o.String.stripIllegals(t.content_html),t},e}(i)},function(t,e,r){var n,i,o,s,a,p=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=r(24),s=r(68),o={Image:r(57),String:r(58)},i={Alignment:r(69)},n=function(t){function e(){return this.save=p(this.save,this),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.is_image=!0,
e.prototype.maxlength=255,e.prototype.formData=function(t){var e;return e=new FormData,e.append("data[type]",this.type),e.append("data[image]",t),a.isFunction(this.caption)&&(this.overrides.caption=this.caption()),e.append("data[overrides]",JSON.stringify(this.overrides)),e},e.prototype.crop=function(t,e){var r,n,i;return null==e&&(e=this.url),t&&this.internalImage()?e.match(/^data:image/)?e:(r=a.get(this.overrides,["crops",t]),r||"3:1"!==t||(r=a.get(this.overrides,["crops","2:1"])),null==r?e:(i=a.pick(r,["x_offset","y_offset","width","height"]),n=o.Image.optQueryParams({gif:o.Image.isGif(e)}),e+"?rect="+a.values(i).join(",")+"&"+n)):e},e.prototype.crops=function(){return[{width:3,height:1},{width:2,height:1},{width:4,height:3},{width:3,height:4}]},e.prototype.positions=function(t){return this.m(i.Alignment).positions(this.alignment(t),!0)},e.prototype.alignment=function(t){var e,r;return(r=this.overrides.crops[t])&&(e=r.alignment),null==e?0:e},e.prototype.setAlignment=function(t,e){return this.overrides.crops[t].alignment=e},e.prototype.noCrop=function(){return this.overrides.no_cropping},e.prototype.embed=function(){var t,e;return(e=null!=(t=this.oembed_data)?t.url:void 0)?e:this.url?this.url:void 0},e.prototype.width=function(t){return this.cropDimensions(t,"width")},e.prototype.height=function(t){return this.cropDimensions(t,"height")},e.prototype.cropDimensions=function(t,e){var r,n;return r=this.overrides.crops,t&&r&&(n=r[t])?n[e]:this.oembedData(e)},e.prototype.internalImage=function(){var t,e,r,n,i;if(n=this.url,t=this.embed(),(null!=t?t.length:void 0)&&n)return!!n.match(/fsmedia(-[a-zA-Z]*)?\.imgix\.net/)||(!(t!==n||(e=this.oembedData("provider_name")||"",r="inverse.com"===this.source.toLowerCase(),i="inverse.com"===e.toLowerCase(),!r&&!i))||void 0)},e.prototype.isGif=function(){return o.Image.isGif(this.url)},e.prototype.isPlaceHolder=function(){return this.url===e.PLACEHOLDER},e.prototype.reset=function(){return this.source="",this.oembed_data={},this.overrides||(this.overrides={}),this.overrides.crops={}},e.prototype.shouldSave=function(){return!this.persisted()||this.url!==this.oembed_data.url},e.prototype.save=function(t){return t||(t={image_url:this.url,overrides:this.overrides}),e.__super__.save.call(this,t)},e.prototype.diffsyncData=function(){var t;return t=e.__super__.diffsyncData.apply(this,arguments),this.validUrl(t.url)||(t.url=""),this.validUrl(t.oembed_data.url)||(t.oembed_data.url=""),a.assign(t.overrides,this.diffsyncOverrides()),t},e.prototype.mono=function(t){var e;return this.overrides.tinted===!1?"":(e="f6c300","white"===t&&(e="999999"),"&mono="+e)},e.prototype.diffsyncOverrides=function(){var t,e;return t={},e=["alt","credit","source","caption"],a.each(e,function(e){return function(r){var n;if(n=e.overrides[r])return t[r]=o.String.stripIllegals(n)}}(this)),t},e.prototype.validUrl=function(t){var e;return null==t&&(t=this.url),!!t&&(e=t.length,e&&e<=255&&o.Image.validSource(t))},e.prototype.saturate=function(){return"&sat=-100&blend=99000000&exp=-13"},e.prototype.strippedData=function(){var t,r;return r=e.__super__.strippedData.apply(this,arguments),(t=r.overrides.crops)&&a.forEach(t,function(t,e){return r.overrides.crops[e]=a.omit(t,["zoom"])}),r},e}(s),n.PATH="https://fsmedia.imgix.net",n.WIDE_PLACEHOLDER=n.PATH+"/assets/21.png",n.TALL_PLACEHOLDER=n.PATH+"/assets/34.png",n.CROPPED_PLACEHOLDER=n.PATH+"/assets/43.png",n.PLACEHOLDER=n.PATH+"/assets/placeholder.png",t.exports=n},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),i=r(64),o={String:r(58),Accounts:r(61),Markdown:r(59)},n={Paragraphs:r(66)},t.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.source="",e.prototype.type="widgets",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),a.defaults(this,{url:"",source:"",overrides:{},created_by:"",oembed_data:{},column_number:0})},e.prototype.wordCount=function(){var t;return this.isSlide()&&(t=this.words())?t.length:0},e.prototype.words=function(){var t,e,r,n;return r=o.String,t=o.Markdown,n=(this.override("title")||"")+" "+(this.body()||""),e=r.stripAnchors(r.stripTags(t.stripMarkdown(n))),a.without(e.trim().split(" ")," ",null,void 0)},e.prototype.body=function(){var t;if(t=this.grafs())return o.String.stripIllegals(t.join(" "))},e.prototype.grafs=function(){var t;return t=this.override("body"),"string"==typeof t&&(t=[t]),t},e.prototype.alt=function(){return this.override("alt")},e.prototype.credit=function(){return this.override("credit")},e.prototype.caption=function(){return this.override("caption")},e.prototype.link=function(){return this.override("link")},e.prototype.override=function(t){var e;return e=this.overrides[t],a.isArray(e)?e:o.String.stripIllegals(e)},e.prototype.newsUrl=function(){var t,e,r,n;switch(n=this.url,this.name()){case"facebook":return r=/^https?:\/\/www.facebook.com[^\?].*\?href=([^&]*)&.*/,n.replace(r,"$1");case"vine":return n.replace(/\/embed/,"");case"twitter":return n.replace(/\/video\/1$/,"");case"jwplayer":return e=o.Accounts.jwplayer,t=new RegExp("-("+e.id+"|"+e.old+")"),n.replace(/players/,"manifests").replace(t,"")+".m3u8";default:return n}},e.prototype.script=function(){var t,e;if((t=this.embed(!0))&&(e=t.match(o.String.regexes.script)))return this.updateJW(e[0])},e.prototype.embed=function(t){var e;return this.isGist()||"link"===this.oembedData("type")?this.oembedData("url")||this.url:(e=this.oembedData("html")||"","jwplayer"===this.name()&&(e.match(/id=['"]jw-/)||(e=e.replace(/id=['"]([^'"]*)['"]/,"id='jw-$1'")),e=e.replace(/id=['"]([^'"]*)['"]/,"id='$1-"+this.id+"'")),t?this.updateJW(e):this.cleanEmbed(e))},e.prototype.updateJW=function(t){var e;return"jwplayer"!==this.name()?t:(e=o.Accounts.jwplayer,t.replace(e.old,e.id))},e.prototype.cleanEmbed=function(t){return null==t&&(t=""),o.String.stripScripts(t.replace(/<div id="fb-root"><\/div>/g,""))},e.prototype.width=function(){return this.oembedData("width")},e.prototype.height=function(){return this.oembedData("height")},e.prototype.persisted=function(){var t;return(null!=(t=this.source)?t.length:void 0)||this.oembedData("url")},e.prototype.name=function(){var t;return this.isItunes()?"itunes":(null!=(t=this.source)?t.toLowerCase():void 0)||""},e.prototype.isPodcast=function(){return this.isArt19()},e.prototype.isVideo=function(){var t,e;return!this.isGiphy()&&!this.isItunes()&&(!(!this.isJwplayer()&&!this.twitterVideo())||(e=/\.mp4\??/,"video"===this.oembedData("type")||(null!=(t=this.url)?t.match(e):void 0)))},e.prototype.full=function(){return!(!this.isFacebook()||!this.url.match(/video\.php/))||this.isVideo()},e.prototype.twitterVideo=function(){var t;return!!this.isTwitter()&&(null!=(t=this.url)?t.match(/\/video\/1$/):void 0)},e.prototype.isAfilliate=function(){return this.overrides.affiliate},e.prototype.isSlide=function(){return this.overrides.is_slide},e.prototype.isHR=function(){return!1},e.prototype.isIframe=function(){return!0===this.isGiphy()||!0===this.isVimeo()||!0===this.isYoutube()||!0===this.isSoundcloud()||!0===this.isDailymotion()},e.prototype.isTwitter=function(){return"twitter"===this.provider()},e.prototype.isFacebook=function(){return"facebook"===this.provider()},e.prototype.isVimeo=function(){return"vimeo"===this.provider()},e.prototype.isPDF=function(){return this.url.match(/$\.pdf|\.pdf\??/)},e.prototype.isGist=function(){return"github"===this.provider()},e.prototype.isGiphy=function(){return"giphy"===this.provider()},e.prototype.isYoutube=function(){return"youtube"===this.provider()},e.prototype.isDailymotion=function(){return"dailymotion"===this.provider()},e.prototype.isSoundcloud=function(){return"soundcloud"===this.provider()},e.prototype.isArt19=function(){return"art19"===this.provider()},e.prototype.isJwplayer=function(){var t;return"jwplayer"===(t=this.provider())||"jwplatform"===t},e.prototype.isItunes=function(){var t;return t="https://embed.itunes.apple.com","itunes"===this.provider()||this.providerUrl()===t},e.prototype.isRedditComment=function(){if(this.isReddit())return this.script().match(/comment-embed/)},e.prototype.isReddit=function(){return"reddit"===this.provider()},e.prototype.provider=function(){var t;return(null!=(t=this.oembedData("provider_name"))?t.toLowerCase():void 0)||""},e.prototype.providerUrl=function(){return this.oembedData("provider_url")},e.prototype.secureUrl=function(){var t;return t=this.noprotocolUrl(),t.length?"https:"+t:t},e.prototype.noprotocolUrl=function(){return this.url.replace(/^(?:[a-z]+:)?\/\//i,"//")},e.prototype.oembedData=function(t){if(t&&this.oembed_data)return this.oembed_data[t]},e.prototype.getOembed=function(){return this.get({url:this.oembedUrl()}).then(function(t){return function(e){var r;return t.oembed_data=e,t.source=t.oembedData("provider_name"),(r=t.oembedData("url"))&&(t.url=r),e}}(this))},e.prototype.oembedUrl=function(){return this.domain("morgue")+"/oembed?url="+encodeURIComponent(this.url)},e.prototype.internalImage=function(){return!1},e.prototype.strippedData=function(){var t;return t=a.omit(this.diffsyncData(),["created_by"]),a.assign(t,{oembed_data:a.pick(this.oembed_data,["html","type","width","height","mediaid","provider_name"])}),this.isItunes()&&(t.oembed_data.provider_url=this.providerUrl()),t},e.prototype.diffsyncData=function(){return a.pick(this,["id","url","_meta","title","source","overrides","created_by","description","oembed_data","column_number"])},e.prototype.relatedPrompt=function(){return this.prompt?this.prompt:this.prompt=this.choosePrompt()},e.prototype.choosePrompt=function(){return this.prompts[a.random(0,this.prompts.length-1)]+' "'+this.title+'"'},e.prototype.slideModels=function(t){var e;return e=a.without([this,this.titleModel(t)],void 0),e.concat(this.bodyModels(t))},e.prototype.titleModel=function(t){var e;if(e=this.override("title"))return this.m(n.Paragraphs,{content_md:"## "+e,content_html:"<h2>"+this.addTags(e,t)+"</h2> "})},e.prototype.bodyModels=function(t){var e;return(e=this.grafs())?a.map(e,function(e){return function(r){return e.m(n.Paragraphs,{content_md:r,content_html:e.addTags(r,t)+" "})}}(this)):[]},e.prototype.addTags=function(t,e){return o.Markdown.replaceWithHtml(t||"",e)},e.prototype.noCrop=a.noop,e.prototype.prompts=["If you liked this article, check out this video:","Hello! You've made it to the end of the article. <em>Nice</em>. Here's a related video you might like:","You've read that, now watch this:"],e}(i)},function(t,e,r){var n;n=r(24),t.exports=function(){function t(){}return t.prototype.positions=function(t,e){var r;return r=n.without([0===t||1===t||2===t?"top":void 0,0===t||3===t||6===t?"left":void 0,2===t||5===t||8===t?"right":void 0,6===t||7===t||8===t?"bottom":void 0,3===t||4===t||5===t?"center":void 0,1===t||4===t||7===t?"middle":void 0],null,void 0),e&&4===t&&r.push("center-middle"),r},t}()},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(71),i={Related:r(92)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{page:{},links:{},related:{},related_type:"top_by_facebook"}),o.defaults(this.page,this.defaultPage()),o.defaults(this.page.related,this.defaultRelatedPage()),this.related=this.m(i.Related,o.assign({},this.related,{id:this.id,page:this.page,links:this.links.related,related_type:this.related_type}))}return a(e,t),e.prototype.type="article",e.prototype.api=function(){var t;return t=s.route.buildQueryString(this.queryParams()),this.domain("diplomat")+"/bodies/"+this.id+"?"+t},e.prototype.get=function(){return e.__super__.get.apply(this,arguments).then(function(t){return function(e){return null==e&&(e={}),o.defaults(e,{data:{}}),o.assign(t,{links:e.links,metrics:e.data.metrics,next_body_id:e.data.next_body_id,pinned_body_ids:e.data.pinned_body_ids}),t.related.add({links:t.links.related,data:e.data.related}),e}}(this))},e.prototype.update=function(t){return null==t&&(t={}),o.defaults(t,{data:{}}),o.assign(this,t.data.body)},e.prototype.queryParams=function(){return{page:this.page,related_type:this.related_type,landing_article_id:this.landing_id||this.id}},e.prototype.defaultPage=function(){return{related:{}}},e.prototype.defaultRelatedPage=function(){return{limit:8,offset:parseInt(this.page.related.offset,10)||0}},e.prototype.strippedData=function(){return o.assign(e.__super__.strippedData.apply(this,arguments),{next_body_id:this.next_body_id,pinned_body_ids:this.pinned_body_ids,related:{bodies:this.related.diffsyncData()}})},e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(16),s=r(24),i=r(64),o={Date:r(72),Image:r(57),String:r(58),Accounts:r(61),Markdown:r(59)},n={Titles:r(76),Person:r(63),Sections:r(77),Abstracts:r(79),Paragraphs:r(66),AuditTrails:r(80),BodyWidgets:r(81),Taxonomy:r(82),Image:r(67),Widget:r(68)},t.exports=function(t){function e(){this.initializeBodyObject=p(this.initializeBodyObject,this),e.__super__.constructor.apply(this,arguments),this.featured=this.long,s.defaults(this,{flags:{},metrics:{},view_options:{}}),s.defaults(this.flags,{til:!1,nsfa:!1,nsfg:!1,wide:!1,commerce:!1,no_tweet:!1,bottom_ad:!1,evergreen:!1,refresher:!1,sponsored:!1,no_footer:!1,no_preroll:!1,syndication:!1,ignore_rules:!1,graphic_image:!1,no_disclaimer:!1,text_overlay_slider:!1}),s.defaults(this.view_options,{guest_author:"",hide_author:!1,tracking_pixel_url:""}),this.initializeAuthor()}return c(e,t),e.prototype.type="bodies",e.prototype.words_per_page=250,e.prototype.widgets_per_page=3,e.prototype.read_more_breakpoint=50,e.prototype.flag_types={til:"TIL",nsfa:"NSFA",nsfg:"NSFG",wide:"Wide Layout",commerce:"Commerce",no_tweet:"No Tweet",evergreen:"Evergreen",refresher:"Refresher",sponsored:"Sponsored",no_footer:"Hide Footer",no_preroll:"No Preroll",syndication:"Syndication",bottom_ad:"Show Custom Ad",graphic_image:"Graphic Image",no_disclaimer:"Hide Disclaimer",ignore_rules:"Use Custom Layout",text_overlay_slider:"Text Overlay Slider"},e.prototype.custom_flags=["wide","bottom_ad","no_footer","ignore_rules","text_overlay_slider"],e.prototype.formats={stream:"short",standard:"standard",long:"long"},e.prototype.states={draft:"draft",deleted:"deleted",published:"publication_scheduled",review:{in:"in_review",pending:"pending_review"}},e.prototype.types={feature:5,new_information:4,argument:3,franchise:2,explainer:2,list:2,custom:2,news:1},e.prototype.body_objects={abstracts:["dek","social","meta_description"],titles:["seo","url","small","large","social"],widgets:["logo","banner","social","primary","applenews","background","sponsor_logo"]},e.prototype.api=function(t){var e;return t&&(e="/"+this.id+"?_format=json-invrs-api-v1"),this.domain("morgue")+"/bodies"+(e||"")},e.prototype.get=function(t){return null==t&&(t={}),t.url=this.api(!0),e.__super__.get.call(this,t).then(function(t){return function(e){return t.update(e),t.initialize(),t.author().id=t.created_by,e}}(this))},e.prototype.update=function(t){var e;if(null==t&&(t={}),e=t.data[0])return s.assign(this,e)},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.initializeTitles(),this.initializeSections(),this.initializeAbstracts(),this.initializeBodyWidgets(),this.initializeRelatedWidget(),this.taxonomy=this.m(n.Taxonomy,s.assign({},this.taxonomy,{id:this.id}))},e.prototype.initializeAuthor=function(){var t;return t=this.author,this.author=a.prop(this.m(n.Person)),t?this.setAuthor(t):this.created_by?this.author().id=this.created_by:void 0},e.prototype.initializeSections=function(){if(this.sections=a.prop(s.map(this.sections,function(t){return function(e){return t.m(n.Sections,s.assign({},e,{long:t.long()}))}}(this))),0===this.sections().length)return this.sections([this.m(n.Sections)])},e.prototype.initializeTitles=function(){return this.initializeBodyObject("titles",this.body_objects.titles)},e.prototype.initializeAbstracts=function(){return this.initializeBodyObject("abstracts",this.body_objects.abstracts)},e.prototype.initializeBodyWidgets=function(){return this.initializeBodyObject("body_widgets",this.body_objects.widgets)},e.prototype.initializeBodyObject=function(t,e){var r;return r={},s.forEach(e,function(e){return function(i){var o,a,p;return o=(null!=(p=e[t])?p[i]:void 0)||{purpose:i},a=t,"body_widgets"===t&&(a="BodyWidgets"),r[i]=e.m(n[s.capitalize(a)],o)}}(this)),this[t]=a.prop(r)},e.prototype.initializeRelatedWidget=function(){return this.related_widget=this.m(n.Widget,this.related_widget)},e.prototype.getAuthor=function(){if(!this.hideAuthor())return this.author()},e.prototype.setAuthor=function(t){if(t)return t instanceof n.Person||(t=this.m(n.Person,t)),this.created_by=t.id,this.author(t)},e.prototype.title=function(t){return this.getBodyObject("titles",t)},e.prototype.abstract=function(t){return this.getBodyObject("abstracts",t)},e.prototype.bodyWidget=function(t){return this.getBodyObject("body_widgets",t)},e.prototype.getBodyObject=function(t,e){var r,i,o;return i=this[t]()[e],i||(o=t,"body_widgets"===t&&(o="BodyWidgets"),i=this.m(n[s.capitalize(o)],{purpose:e}),r={},r[e]=i,this[t](s.assign({},this[t](),r))),i},e.prototype.resetBodyWidget=function(t){var e;if(e=this.bodyWidget(t))return e.widget=this.m(n.Image)},e.prototype.groupedCredits=function(){var t;return t=s.groupBy(this.creditsWithLinks(),"credit"),s.without(s.map(t,function(t){return function(e,r){return t.creditTextAndLinks(r,e)}}(this),null,void 0))},e.prototype.creditsWithLinks=function(){var t;return t=this.widgets().concat(s.flatten(s.map(this.sections(),function(t){return t.backgrounds()}))),s.reduce(t,function(t,e){var r,n;return e?(n=e.overrides,(r=n.credit)&&t.push({credit:r,link:o.String.cleanHref(n.link)}),t):t},[])},e.prototype.creditTextAndLinks=function(t,e){var r,n,i,o;if(i=e.length)return 1===i?{text:t,link:e[0].link}:(r={text:t},n=this.creditNumbers(e),o=n.length,o?1===o?s.assign({},r,{link:n[0].credit.link}):s.assign({},r,{numbers:n}):r)},e.prototype.creditNumbers=function(t){var e;return e=1,s.reduce(s.uniq(t,"link"),function(t,r){return r.link&&(t.push({index:e,credit:r}),e+=1),t},[])},e.prototype.imageOverrides=function(){return s.reduce(this.widgets(),function(t,e){return e.is_image&&!t[e.id]&&(t[e.id]=e.overrides),t},{})},e.prototype.socialMeta=function(){var t,e,r;return r=this.section()||{permalink:"",name:""},e=s.assign({},this.meta(),{date:this.publish_at,title:this.socialTitle(),modified:this.changedAt(),category_name:r.name,category:r.permalink,description:this.socialDescription()}),(t=this.getAuthor())&&s.assign(e,{author:t.fullName(),facebook:t.facebookPageUrl()}),e},e.prototype.meta=function(t){var e;return e=s.uniq(this.tags().concat([s.startCase(this.format),s.startCase(this.formatType())])),{id:this.id,tags:e,url:this.url(),article:!0,title:this.pageTitle(),sponsor:this.sponsor(),image:this.socialImage(),base_url:this.domain("www"),keywords:e.join(","),canonical:this.canonicalUrl(),description:this.description(t)}},e.prototype.socialDescription=function(){return this.description(!0)},e.prototype.socialTitle=function(){return this.thumbnailTitle("social")},e.prototype.thumbnailTitle=function(t){var e;return t===!0&&(t="social"),t&&(e=this.title(t).cleanText()),e||(e=this.title("large").cleanText()),e||""},e.prototype.socialImage=function(t){var e,r;return null==t&&(t={}),r=this.socialWidget(),e=("function"==typeof r.crop?r.crop("2:1"):void 0)||n.Image.PLACEHOLDER,o.Image.robotsImage(e,t)},e.prototype.socialWidget=function(){var t;return t=this.bodyWidget("social").widget,t.url.length?t:this.primaryPhoto().widget},e.prototype.primaryPhoto=function(){var t,e;return t=this.bodyWidget("banner"),e=t.widget,e.is_image?t:this.bodyWidget("primary")},e.prototype.leadVideo=function(){return!this.bodyWidget("banner").widget.is_image},e.prototype.gaDimensions=function(t){var e,r,n,i,a,p;return null==t&&(t={}),s.defaults(t,{source:"inverse",taxonomy:this.taxonomy}),p=t.taxonomy,e=p.names().join(","),e.length||(e="no_labels"),[(null!=(r=this.getAuthor())?r.permalink:void 0)||"hidden_author",o.String.escapeQuotes(this.thumbnailTitle()),this.format,this.gaDate(),e,t.source,(null!=(n=p.category)?n.name:void 0)||this.category||"no_category",(null!=(i=p.channel)?i.name:void 0)||"no_channel",(null!=(a=p.primary_label)?a.name:void 0)||"no_primary_label",this.article_type||"no_article_type"]},e.prototype.quantcastLabels=function(){var t,e,r,n;return r=[],(n=this.section())&&(r=[n.displayName()]),(t=this.getAuthor())&&(e=r.concat(this.tags()).concat([t.fullName()])),s.map(e,function(t){return t.replace(/\s*/g,"")}).join(",")},e.prototype.pageTitle=function(){var t;return t=this.title("seo").cleanText(),(null!=t?t.length:void 0)||(t=this.thumbnailTitle()),o.String.cleanString(t)},e.prototype.canonicalUrl=function(t){var e,r;return e=this.slideshow_page,r=""+this.domain("www")+this.url(t),e>1?r+"/page/"+e:r},e.prototype.description=function(t,e){var r,n,i;return null==e&&(e=!0),n="",r=t?"social":"meta_description",i=this.abstract(r).cleanText(),(null!=i?i.length:void 0)||(i=this.text()),(null!=i?i.length:void 0)&&(n=o.String.cleanString(i)),n=n.trim(),e?s.trunc(n,320):n},e.prototype.pageCount=function(){var t,e,r,n;return e=this.sections().length,n=this.wordCount(!0)/this.words_per_page,r=this.widgetCount(!1,!0)/this.widgets_per_page,t=Math.ceil(n+r),e>t&&(t=e),t+1},e.prototype.widgetCount=function(t,e){return this.widgets(t,e).length},e.prototype.readMoreCount=function(){var t,e;return e=0,t=this.read_more_breakpoint,s.reduce(this.sections(),function(r,n){var i,o;return i=n.children(),o=s.reduce(i,function(r,n){var i;return"paragraphs"!==n.type?r:(i=n.wordCount(),e<t?(e+=i,r):r+i)},0),r+o},0)},e.prototype.wordCount=function(t){return s.reduce(this.sections(),function(e,r){return e+r.wordCount(t)},0)},e.prototype.introWordCount=function(){return this.sections()[0].introWordCount()},e.prototype.updateSocialText=function(t,e){if((null!=t?t.length:void 0)&&this.title("social").text(t),null!=e?e.length:void 0)return this.abstract("social").text(e)},e.prototype.short=function(){return"short"===this.format},e.prototype.long=function(){return"long"===this.format},e.prototype.differentAuthor=function(){return this.hideAuthor()||this.guestAuthor()},e.prototype.guestAuthor=function(){var t;if(t=this.view_options.guest_author,null!=t?t.length:void 0)return t},e.prototype.hideAuthor=function(){return this.view_options.hide_author},e.prototype.formatName=function(){var t;return t=s.findKey(this.formats,function(t){return function(e){return e===t.format}}(this)),this.templated()?"focused "+t:this.slideshow()?"slideshow "+t:t},e.prototype.formatType=function(t){return null==t&&(t=this.format),this.templated()?"focused "+t:this.slideshow()?"slideshow "+t:t},e.prototype.paragraphs=function(){return s.flatten(s.map(this.sections(),function(t){return t.paragraphs()}))},e.prototype.text=function(){var t;return t=[],s.forEach(this.sections(),function(e){return s.forEach(e.children(),function(e){var r;if("paragraphs"===e.type?r=e.content_md:e.isSlide()&&(r=s.without([e.override("title"),e.body()],void 0).join(" ")),r)return t.push(o.Markdown.stripMarkdown(r))})}),t.join(" ")},e.prototype.pixel=function(){if(this.view_options.tracking_pixel_url)return this.view_options.tracking_pixel_url.replace(/^https?:/,"")},e.prototype.isEvergreen=function(){return this.flags.evergreen},e.prototype.targeting=function(){var t,e;return t=this.format,this.slideshow()&&(t="slideshow_"+t),{gi:this.gi(),nsfa:this.nsfa(),nsfg:this.nsfg(),atype:t,page:"article",rail:!this.long(),labels:this.schemaTags(!1),article_id:this.permalink_id,section:null!=(e=this.section())?e.permalink:void 0}},e.prototype.simplereachData=function(t){var e,r;return null==t&&(t=[]),e=(null!=(r=this.getAuthor())?r.fullName():void 0)||"hidden_author",s.assign(o.Accounts.simplereachData(),{article_id:this.id,date:this.publish_at,authors:[e],url:this.canonicalUrl(),channels:this.categories(),tags:this.schemaTags().concat(t),title:this.title("large").cleanText()})},e.prototype.skreemrParams=function(){var t,e,r,n;return t=this.schemaTags(),e=t.shift(),{article:this.id,labels:t,video:this.leadVideo(),primary_label:e,article_url:this.canonicalUrl(),channel:null!=(r=this.getChannel())?r.name:void 0,section:null!=(n=this.getCategory())?n.name:void 0}},e.prototype.date=function(t){var e;if(e=this.getAvailableDate())return o.Date.formatted(o.Date.utcToEt(e),t)},e.prototype.abbreviatedDate=function(t){var e;if(e=this.getAvailableDate())return o.Date.abbreviated(o.Date.utcToEt(e),t)},e.prototype.gaDate=function(){var t;if(t=this.getAvailableDate())return o.Date.gaFormatted(o.Date.utcToEt(t))},e.prototype.textOverlaySlider=function(){return this.flags.text_overlay_slider},e.prototype.hasSlider=function(){var t;return t=s.find(this.sections(),function(t){return s.find(t.children(),function(t){return t.isSlide()})}),!!t},e.prototype.slideshowWidgets=function(){var t;return t=s.map(this.body_widgets(),function(t){return t.widget}),t.concat(s.flatten(s.map(this.sections(),function(t){var e;return e=[],t.widget&&e.push(t.widget),e.concat(t.widgets())})))},e.prototype.widgets=function(t,e){var r,n;return null==t&&(t=!0),n=[],r=!1,s.each(this.sections(),function(t){return n=n.concat(s.filter(t.children(),function(t){var n;if(e)if(t.isSlide()){if(r)return!1;r=!0}else r&&(r=!1);return"widgets"===t.type||"widgets"===(null!=(n=t._meta)?n.type:void 0)}))}),t?n.concat(s.map(this.body_widgets(),function(t){return t.widget})):n},e.prototype.sponsor=function(){var t;if(t=this.bodyWidget("sponsor_logo"),t.widget.persisted())return t},e.prototype.podcast=function(){switch(this.url()){case"/i-need-my-space-podcast":return"inms";default:return!1}},e.prototype.hasTaxonomy=function(t){if(this.taxonomy&&this.taxonomy[t])return this.taxonomy[t]()},e.prototype.mainTags=function(t){var e,r,n;return n={primary:null!=(e=this.primary())?e.name:void 0,section:null!=(r=this.section())?r.name:void 0},t?s.map(n,function(t){return s.kebabCase(t)}).join("_"):n},e.prototype.schemaTags=function(t){var e,r;return null==t&&(t=!0),e=s.keys(s.pick(this.flags,function(t){return t})),e=s.map(e,function(t){return s.startCase(t)}),r=this.tags().concat(e),t?s.uniq(r.concat([s.startCase(this.format),s.startCase(this.formatType())])):s.uniq(r)},e.prototype.tags=function(){var t;return t=this.tagNames(),this.article_type?t.concat([s.capitalize(this.article_type)]):t},e.prototype.tagNames=function(){var t;return t=[],this.taxonomy.primary_label&&t.push(this.taxonomy.primary_label.name),t.concat(this.taxonomy.labels.names())},e.prototype.commerce=function(){return this.taxonomy.commerce()},e.prototype.primary=function(){var t;return(t=this.taxonomy.primary_label)?t:this.taxonomy.labels.models()[0]},e.prototype.section=function(){return this.getChannel()||this.getCategory()},e.prototype.categories=function(){var t,e,r;return r=[],(e=this.getChannel())&&r.push(e.name),(t=this.getCategory())&&r.push(t.name),r},e.prototype.showComments=function(){var t,e;return"innovation"===(t=null!=(e=this.getCategory())?e.permalink:void 0)},e.prototype.noads=function(){return this.nsfa()||this.nsfg()||this.gi()},e.prototype.nsfa=function(){return this.flags.nsfa},e.prototype.nsfg=function(){return this.flags.nsfg},e.prototype.gi=function(){return this.flags.graphic_image},e.prototype.templated=function(){return this.view_options.templated},e.prototype.slideshow=function(){return this.view_options.slideshow},e.prototype.hideBanner=function(){return this.view_options.hide_banner},e.prototype.isCustom=function(){return"custom"===this.article_type},e.prototype.pageUrl=function(t){var e;return e=this.pagelessCanonicalUrl(),t<=1?e:e+"/page/"+t},e.prototype.pagelessCanonicalUrl=function(){return this.canonicalUrl().replace(/\/page\/\d*$/,"")},e.prototype.contentSections=function(){return s.reject(this.sections(),function(t){if(!t.widget)return!t.hasContent()})},e.prototype.initSlideshowPage=function(){if(!this.slideshow_page)return this.slideshow_page=1},e.prototype.currentSlideTitle=function(){var t;if(t=this.currentSlide().widget)return o.Markdown.replaceWithHtml(t.override("title"))},e.prototype.currentSlide=function(){return this.sections()[this.slideshow_page-1]},e.prototype.secondarySlide=function(){return this.slideshow()&&this.slideshow_page>1},e.prototype.customPageRedirect=function(t,e){if(this.isCustom()&&t.replace(/^\//,"")!==this.permalink)return e!==this.permalink?"/"+this.permalink:void 0},e.prototype.isSpotlight=function(){return this.isCustomPage(/^creators?-spotlight$/)},e.prototype.isAdvertise=function(){return this.isCustomPage(/^advertise$/)},e.prototype.isCustomPage=function(t){return this.isCustom()&&this.permalink.match(t)},e.prototype.getCategory=function(){return this.taxonomy.category},e.prototype.getChannel=function(){return this.taxonomy.channel},e.prototype.getAvailableDate=function(){return this.publish_at||this.updated_at||this.inserted_at},e.prototype.url=function(t){return null==t&&(t=this.permalink),this.isCustom()?"/"+t:"/article/"+this.path(t)},e.prototype.path=function(t){return null==t&&(t=this.permalink),this.permalink_id+"-"+t},e.prototype.persisted=function(){return null!=this.created_by},e.prototype.hasArticleType=function(){return null!=this.article_type},e.prototype.changedAt=function(){return this.updated_at},e.prototype.breadcrumbs=function(){var t;return t=this.getChannel(),t||(t=this.getCategory()),s.without([t,this.primary()],null,void 0)},e.prototype.safeLabels=function(t){var e;return null==t&&(t=this.long()),e=this.taxonomy.safeLabels(t),this.getChannel()?[this.getCategory()].concat(e):e},e.prototype.deletedRedirect=function(){var t,e,r;return(r=this.primary())?r.url():(t=this.getCategory())?t.url():(e=this.category)?"/"+e:"/"},e.prototype.archive=function(t){var e,r,n,i,s;if(null==t&&(t=this.publish_at),r=new Date(t),s=r.getFullYear(),e=null!=(i=this.taxonomy.category)?i.permalink:void 0,n=o.Date.MONTHS[r.getMonth()].toLowerCase(),n&&s&&e)return"/archive/"+n+"/"+s+"/"+e},e.prototype.wide=function(){if(this.isCustom())return this.flags.wide},e.prototype.ignoreRules=function(){if(this.isCustom())return this.flags.ignore_rules},e.prototype.strippedData=function(t){var e,r,n,i,o,a;return null==t&&(t={}),s.defaults(t,{omits:[],includes:{}}),a=["titles","abstracts","body_widgets"],e=["state","permalink","published","shortlink","publish_at","updated_at","permalink_id"],t.article?(e.push("metrics"),this.differentAuthor()&&t.omits.push("created_by"),s.defaults(t.includes,{titles:["large","social"],abstracts:["dek","social"],body_widgets:["banner","social"]}),this.leadVideo()&&t.includes.body_widgets.push("primary"),this.isCustom()&&(t.includes.body_widgets.push("logo"),t.includes.body_widgets.push("background"))):(s.defaults(t.includes,{titles:[],abstracts:[],body_widgets:[]}),s.defaults(t.omits,["related_widget"])),this.bodyWidget("sponsor_logo").widget.persisted()&&t.includes.body_widgets.push("sponsor_logo"),o=t.omits,i=t.includes,r=t.body_widgets,n=s.omit(this.diffsyncData(),a.concat(["_meta","inserted_at"])),s.forEach(e,function(t){return function(e){return n[e]=t[e]}}(this)),this.stripBodyRelations(n,a,i),this.stripBodyWidgets(n,r),n.taxonomy=this.taxonomy.strippedData(t.taxonomy),t.article&&s.assign(n,{commerce_disclaimer:this.commerce_disclaimer,related_widget:this.related_widget.strippedData()}),n=s.omit(n,o),
this.stripFlags(n),this.stripViewOptions(n,r),n.sections&&(n.sections=s.map(this.sections(),function(t){return t.strippedData()})),n},e.prototype.stripBodyRelations=function(t,e,r){return s.forEach(e,function(e){return function(n){if(r[n])return t[n]=s.transform(e[n](),function(t,e,i){if(h.call(r[n],i)>=0&&"small"!==i)return t[i]=e.strippedData()},{})}}(this))},e.prototype.stripBodyWidgets=function(t,e){if(t.body_widgets&&e)return s.forEach(t.body_widgets,function(t,e){var r,n,i,o,a,p;if(i=s.omit(t.widget.overrides,t.overrides),n=s.omit(t.widget.oembed_data,t.oembed_data),t.widget.oembed_data=n,t.widget.overrides=i,r=null!=(a=t.crops)?a[e]:void 0)return o=s.pick(t.widget.overrides.crops,r),h.call(r,"3:1")>=0&&!o["3:1"]&&(o["2:1"]=null!=(p=t.widget.overrides.crops)?p["2:1"]:void 0),t.widget.overrides.crops=o})},e.prototype.stripViewOptions=function(t){if(t.view_options)return t.view_options=s.reduce(t.view_options,function(t,e,r){return""===e||e===!1?t:(t[r]=e,t)},{})},e.prototype.stripFlags=function(t){if(t.flags)return t.flags=s.reduce(t.flags,function(t,e,r){return e===!1?t:(t[r]=e,t)},{})},e.prototype.diffsyncData=function(){var t,e;return e=s.pick(this,["id","flags","format","created_by","publish_at","article_type","view_options"]),t={titles:this.titles(),abstracts:this.abstracts(),body_widgets:this.body_widgets()},s.forEach(t,function(t,r){return e[r]=s.transform(t,function(t,e,r){return t[r]=e.diffsyncData()})}),e.sections=s.map(this.sections(),function(t){return t.diffsyncData()}),e},e}(i)},function(t,e,r){var n,i,o,s;i=r(24),o=r(73),s=r(75),o.timezone.loadingScheme=o.timezone.MANUAL_LOAD,o.timezone.loadZoneDataFromObject(s),n=function(){function t(){}return t.prototype.toETDate=function(t){return new o.Date(t,"America/New_York")},t.prototype.utcToEt=function(t){var e;return e=new o.Date(t,"Etc/UTC"),e.setTimezone("America/New_York"),e},t.prototype.toInputTimeString=function(t){return[i.padLeft(t.getHours(),2,"0"),i.padLeft(t.getMinutes(),2,"0")].join(":")},t.prototype.toInputDateString=function(t){return[i.padLeft(t.getFullYear(),4,"0"),i.padLeft(t.getMonth()+1,2,"0"),i.padLeft(t.getDate(),2,"0")].join("-")},t.prototype.simpleDate=function(t){return t.toString("yyyy-MM-ddTHH:mm:ss","Etc/UTC")+"Z"},t.prototype.formatted=function(t,e){var r;return null==e&&(e=!0),r=this.MONTHS[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear(),e?r+" "+this.time(t):r},t.prototype.gaFormatted=function(t){return""+t.toString("yyyy/MM/dd HH:mm")},t.prototype.abbreviated=function(t,e,r){var n,i;return null==e&&(e=!0),null==r&&(r=", "),i=this.SHORT_MONTHS[t.getMonth()],n=[i+" "+t.getDate(),t.getFullYear()],e?""+n.join(" ")+r+this.time(t,!0):n.join(", ")},t.prototype.time=function(t,e){var r,n,o;return null==e&&(e=!1),n=t.getHours(),o=i.padLeft(t.getMinutes(),2,"0"),r="AM",n%12!==n&&(n%=12,r="PM"),0===n&&(n=12),n+":"+o+" "+r+" "+(e?"":"ET")},t.prototype.oneWeekFromToday=function(){var t;return t=new Date,new Date(t.getFullYear(),t.getMonth(),t.getDate()+7)},t.prototype.timeFromNow=function(t){var e,r,n,i,o;return i=this.dateToObject(t),e=i.days,r=i.hours,n=i.minutes,o=i.seconds,e>0?e+"d":r>0?r+"h":n>0?n+"m":Math.ceil(o)+"s"},t.prototype.dayOld=function(t){var e;return e=this.dateToObject(t).days,e>0},t.prototype.dateToObject=function(t){var e,r,n,i,o,s;return i=new Date,o=new Date(t),s=(i.getTime()-o.getTime())/1e3,n=Math.round(s/60),r=Math.round(n/60),e=Math.round(r/24),{days:e,hours:r,minutes:n,seconds:s}},t.prototype.getDateRangeString=function(t,e){var r,n,i;return null==t&&(t=""),null==e&&(e=""),t.length&&e.length&&t>e&&(i=t,t=e,e=i),e.length&&(r=new Date(e).toISOString()),t.length&&(n=new Date(t).toISOString()),n&&r?"("+n+".."+r+")":n?">="+n:r?"<="+r:""},t.prototype.MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"],t.prototype.SHORT_MONTHS=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],t}(),t.exports=new n},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var root=this,timezoneJS={};__WEBPACK_AMD_DEFINE_RESULT__=function(){return timezoneJS}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),timezoneJS.VERSION="0.4.13";for(var ajax_lib=root.$||root.jQuery||root.Zepto,fleegix=root.fleegix,DAYS=timezoneJS.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTHS=timezoneJS.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],SHORT_MONTHS={},SHORT_DAYS={},EXACT_DATE_TIME={},i=0;i<MONTHS.length;i++)SHORT_MONTHS[MONTHS[i].substr(0,3)]=i;for(i=0;i<DAYS.length;i++)SHORT_DAYS[DAYS[i].substr(0,3)]=i;var _arrIndexOf=Array.prototype.indexOf||function(t){if(null===this)throw new TypeError;var e=Object(this),r=e.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);i<r;i++)if(i in e&&e[i]===t)return i;return-1},_fixWidth=function(t,e){if("number"!=typeof t)throw"not a number: "+t;var r=t>1e3,n=t.toString(),i=n.length;if(r&&i>e)return n.substr(i-e,i);for(n=[n];i<e;)n.unshift("0"),i++;return n.join("")},_transport=function(t){if(t){if(!t.url)throw new Error("URL must be specified");if("async"in t||(t.async=!0),"undefined"==typeof window){var e=__webpack_require__(74);if(t.async){if("function"!=typeof t.success)return;return t.error=t.error||console.error,e.readFile(t.url,"utf8",function(e,r){return e?t.error(e):t.success(r)})}return e.readFileSync(t.url,"utf8")}if(!(fleegix&&"undefined"!=typeof fleegix.xhr||ajax_lib&&"undefined"!=typeof ajax_lib.ajax))throw new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return t.async?fleegix&&fleegix.xhr?fleegix.xhr.send({url:t.url,method:"get",handleSuccess:t.success,handleErr:t.error}):ajax_lib.ajax({url:t.url,dataType:"text",method:"GET",error:t.error,success:t.success}):fleegix&&fleegix.xhr?fleegix.xhr.doReq({url:t.url,async:!1}):ajax_lib.ajax({url:t.url,async:!1,dataType:"text"}).responseText}};timezoneJS.Date=function(){if(this===timezoneJS)throw"timezoneJS.Date object must be constructed with 'new'";var t=Array.prototype.slice.apply(arguments),e=null,r=null,n=[],i=!1;"[object Array]"===Object.prototype.toString.call(t[0])&&(t=t[0]),"string"==typeof t[t.length-1]&&(i=Date.parse(t[t.length-1].replace(/GMT[\+\-]\d+/,"")),(isNaN(i)||null===i)&&(r=t.pop()));var o=!1;switch(t.length){case 0:e=new Date;break;case 1:e=new Date(t[0]),"string"==typeof t[0]&&t[0].search(/[+-][0-9]{4}/)==-1&&t[0].search(/Z/)==-1&&t[0].search(/T/)==-1&&(o=!0);break;case 2:e=new Date(t[0],t[1]),o=!0;break;default:for(var s=0;s<7;s++)n[s]=t[s]||0;e=new Date(n[0],n[1],n[2],n[3],n[4],n[5],n[6]),o=!0}this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=r||null,o?this.setFromDateObjProxy(e):this.setFromTimeProxy(e.getTime(),r)},timezoneJS.Date.prototype={getDate:function(){return this.date},getDay:function(){return this._day},getFullYear:function(){return this.year},getMonth:function(){return this.month},getYear:function(){return this.year-1900},getHours:function(){return this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){return this._timeProxy+60*this.getTimezoneOffset()*1e3},getTimezone:function(){return this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){if(this._useCache)return this._tzInfo;var t;return t=this.timezone?"Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:timezoneJS.timezone.getTzInfo(this._timeProxy,this.timezone):{tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=t,this._useCache=!0,t},getUTCDateProxy:function(){var t=new Date(this._timeProxy);return t.setUTCMinutes(t.getUTCMinutes()+this.getTimezoneOffset()),t},setDate:function(t){return this.setAttribute("date",t),this.getTime()},setFullYear:function(t,e,r){return void 0!==r&&this.setAttribute("date",1),this.setAttribute("year",t),void 0!==e&&this.setAttribute("month",e),void 0!==r&&this.setAttribute("date",r),this.getTime()},setMonth:function(t,e){return this.setAttribute("month",t),void 0!==e&&this.setAttribute("date",e),this.getTime()},setYear:function(t){return t=Number(t),0<=t&&t<=99&&(t+=1900),this.setUTCAttribute("year",t),this.getTime()},setHours:function(t,e,r,n){return this.setAttribute("hours",t),void 0!==e&&this.setAttribute("minutes",e),void 0!==r&&this.setAttribute("seconds",r),void 0!==n&&this.setAttribute("milliseconds",n),this.getTime()},setMinutes:function(t,e,r){return this.setAttribute("minutes",t),void 0!==e&&this.setAttribute("seconds",e),void 0!==r&&this.setAttribute("milliseconds",r),this.getTime()},setSeconds:function(t,e){return this.setAttribute("seconds",t),void 0!==e&&this.setAttribute("milliseconds",e),this.getTime()},setMilliseconds:function(t){return this.setAttribute("milliseconds",t),this.getTime()},setTime:function(t){if(isNaN(t))throw new Error("Units must be a number.");return this.setFromTimeProxy(t,this.timezone),this.getTime()},setUTCFullYear:function(t,e,r){return void 0!==r&&this.setUTCAttribute("date",1),this.setUTCAttribute("year",t),void 0!==e&&this.setUTCAttribute("month",e),void 0!==r&&this.setUTCAttribute("date",r),this.getTime()},setUTCMonth:function(t,e){return this.setUTCAttribute("month",t),void 0!==e&&this.setUTCAttribute("date",e),this.getTime()},setUTCDate:function(t){return this.setUTCAttribute("date",t),this.getTime()},setUTCHours:function(t,e,r,n){return this.setUTCAttribute("hours",t),void 0!==e&&this.setUTCAttribute("minutes",e),void 0!==r&&this.setUTCAttribute("seconds",r),void 0!==n&&this.setUTCAttribute("milliseconds",n),this.getTime()},setUTCMinutes:function(t,e,r){return this.setUTCAttribute("minutes",t),void 0!==e&&this.setUTCAttribute("seconds",e),void 0!==r&&this.setUTCAttribute("milliseconds",r),this.getTime()},setUTCSeconds:function(t,e){return this.setUTCAttribute("seconds",t),void 0!==e&&this.setUTCAttribute("milliseconds",e),this.getTime()},setUTCMilliseconds:function(t){return this.setUTCAttribute("milliseconds",t),this.getTime()},setFromDateObjProxy:function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.date=t.getDate(),this.hours=t.getHours(),this.minutes=t.getMinutes(),this.seconds=t.getSeconds(),this.milliseconds=t.getMilliseconds(),this._day=t.getDay(),this._dateProxy=t,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(t,e){var r=new Date(t),n=e?timezoneJS.timezone.getTzInfo(t,e,!0).tzOffset:r.getTimezoneOffset();r.setTime(t+6e4*(r.getTimezoneOffset()-n)),this.setFromDateObjProxy(r)},setAttribute:function(t,e){if(isNaN(e))throw new Error("Units must be a number.");var r=this._dateProxy,n="year"===t?"FullYear":t.substr(0,1).toUpperCase()+t.substr(1);r["set"+n](e),this.setFromDateObjProxy(r)},setUTCAttribute:function(t,e){if(isNaN(e))throw new Error("Units must be a number.");var r="year"===t?"FullYear":t.substr(0,1).toUpperCase()+t.substr(1),n=this.getUTCDateProxy();n["setUTC"+r](e),n.setUTCMinutes(n.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(n.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(t){var e=this.getTimezoneInfo().tzOffset;this.timezone=t,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+e)},removeTimezone:function(){this.timezone=null,this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return this.timezone?new timezoneJS.Date(this.getTime(),this.timezone):new timezoneJS.Date(this.getTime())},toGMTString:function(){return this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleString:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+"Z"},toJSON:function(){return this.toISOString()},toDateString:function(){return this.toString("EEE MMM dd yyyy")},toTimeString:function(){return this.toString("H:mm k")},toString:function(t,e){t||(t="yyyy-MM-dd HH:mm:ss");var r=t,n=e?timezoneJS.timezone.getTzInfo(this.getTime(),e):this.getTimezoneInfo(),i=this;e&&(i=this.clone(),i.setTimezone(e));var o=i.getHours();return r.replace(/a+/g,function(){return"k"}).replace(/y+/g,function(t){return _fixWidth(i.getFullYear(),t.length)}).replace(/d+/g,function(t){return _fixWidth(i.getDate(),t.length)}).replace(/m+/g,function(t){return _fixWidth(i.getMinutes(),t.length)}).replace(/s+/g,function(t){return _fixWidth(i.getSeconds(),t.length)}).replace(/S+/g,function(t){return _fixWidth(i.getMilliseconds(),t.length)}).replace(/h+/g,function(t){return _fixWidth(o%12===0?12:o%12,t.length)}).replace(/M+/g,function(t){var e=i.getMonth(),r=t.length;return r>3?timezoneJS.Months[e]:r>2?timezoneJS.Months[e].substring(0,r):_fixWidth(e+1,r)}).replace(/k+/g,function(){return o>=12?(o>12&&(o-=12),"PM"):"AM"}).replace(/H+/g,function(t){return _fixWidth(o,t.length)}).replace(/E+/g,function(t){return DAYS[i.getDay()].substring(0,t.length)}).replace(/Z+/gi,function(){return n.tzAbbr})},toUTCString:function(){return this.toGMTString()},civilToJulianDayNumber:function(t,e,r){var n;e++,e>12&&(n=parseInt(e/12,10),e%=12,t+=n),e<=2&&(t-=1,e+=12),n=Math.floor(t/100);var i=2-n+Math.floor(n/4),o=Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+r+i-1524;return o},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}},timezoneJS.timezone=new function(){function invalidTZError(t){throw new Error("Timezone '"+t+"' is either incorrect, or not loaded in the timezone registry.")}function builtInLoadZoneFile(t,e){var r=_this.zoneFileBasePath+"/"+t;return e&&e.async?_this.transport({async:!0,url:r,success:function(t){return _this.parseZones(t)&&"function"==typeof e.callback&&e.callback()},error:function(){throw new Error("Error retrieving '"+r+"' zoneinfo files")}}):_this.parseZones(_this.transport({url:r,async:!1}))}function getRegionForTimezone(t){var e,r,n=regionExceptions[t];if(n)return n;if(e=t.split("/")[0],r=regionMap[e])return r;var i=_this.zones[t];return"string"==typeof i?getRegionForTimezone(i):_this.loadedZones.backward?void invalidTZError(t):(_this.loadZoneFile("backward"),getRegionForTimezone(t))}function parseTimeString(t){var e=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,r=t.match(e);return r[1]=parseInt(r[1],10),r[2]=r[2]?parseInt(r[2],10):0,r[3]=r[3]?parseInt(r[3],10):0,r.slice(1,5)}function processZone(t){if(t[3]){var e=parseInt(t[3],10),r=11,n=31;t[4]&&(r=SHORT_MONTHS[t[4].substr(0,3)],n=parseInt(t[5],10)||1);var i=t[6]?parseTimeString(t[6]):[0,0,0];return[e,r,n,i[0],i[1],i[2]]}}function getZone(t,e){for(var r="number"==typeof t?t:new Date(t).getTime(),n=e,i=_this.zones[n];"string"==typeof i;)n=i,i=_this.zones[n];if(!i){if(!_this.loadedZones.backward)return _this.loadZoneFile("backward"),getZone(t,e);invalidTZError(n)}if(0===i.length)throw new Error("No Zone found for '"+e+"' on "+t);for(var o=i.length-1;o>=0;o--){var s=i[o];if(s[3]&&r>s[3])break}return i[o+1]}function getBasicOffset(t){var e=parseTimeString(t),r="-"===t.charAt(0)?-1:1;return e=r*(1e3*(60*(60*e[0]+e[1])+e[2])),e/60/1e3}function getAdjustedOffset(t,e){return-Math.ceil(e-t)}function getRule(t,e,r){var n="number"==typeof t?new Date(t):t,i=e[1],o=e[0],s=i.match(/^([0-9]):([0-9][0-9])$/);if(s)return[-1e6,"max","-","Jan",1,[0,0,0],60*parseInt(s[1],10)+parseInt(s[2],10),"-"];var a,p=function(t,e,r){var n=0;if("u"===e||"g"===e||"z"===e)n=0;else if("s"===e)n=o;else{if("w"!==e&&e)throw new Error("unknown type "+e);n=getAdjustedOffset(o,r[6])}return n*=6e4,new Date(t.getTime()+n)},c=function(t,e){var r,n=t[0],i=t[1],o=i[5];if(EXACT_DATE_TIME[n]||(EXACT_DATE_TIME[n]={}),EXACT_DATE_TIME[n][i])r=EXACT_DATE_TIME[n][i];else{if(isNaN(i[4])){var s,a;"last"===i[4].substr(0,4)?(r=new Date(Date.UTC(n,SHORT_MONTHS[i[3]]+1,1,o[0]-24,o[1],o[2],0)),s=SHORT_DAYS[i[4].substr(4,3)],a="<="):(r=new Date(Date.UTC(n,SHORT_MONTHS[i[3]],i[4].substr(5),o[0],o[1],o[2],0)),s=SHORT_DAYS[i[4].substr(0,3)],a=i[4].substr(3,2));var c=r.getUTCDay();">="===a?r.setUTCDate(r.getUTCDate()+(s-c+(s<c?7:0))):r.setUTCDate(r.getUTCDate()+(s-c-(s>c?7:0)))}else r=new Date(Date.UTC(n,SHORT_MONTHS[i[3]],i[4],o[0],o[1],o[2],0));EXACT_DATE_TIME[n][i]=r}return e&&(r=p(r,o[3],e)),r},u=function(t,e){for(var r=[],n=0;e&&n<e.length;n++)e[n][0]<=t&&(e[n][1]>=t||e[n][0]===t&&"only"===e[n][1]||"max"===e[n][1])&&r.push([t,e[n]]);return r},h=function(t,e,n){var i,o;return t instanceof Date?n&&(t=p(t,r?"u":"w",n)):(i=t[0],o=t[1],t=!n&&EXACT_DATE_TIME[i]&&EXACT_DATE_TIME[i][o]?EXACT_DATE_TIME[i][o]:c(t,n)),e instanceof Date?n&&(e=p(e,r?"u":"w",n)):(i=e[0],o=e[1],e=!n&&EXACT_DATE_TIME[i]&&EXACT_DATE_TIME[i][o]?EXACT_DATE_TIME[i][o]:c(e,n)),t=Number(t),e=Number(e),t-e},l=n.getUTCFullYear();a=u(l,_this.rules[i]),a.push(n),a.sort(h),_arrIndexOf.call(a,n)<2&&(a=a.concat(u(l-1,_this.rules[i])),a.sort(h));var d=_arrIndexOf.call(a,n);return d>1&&h(n,a[d-1],a[d-2][1])<0?a[d-2][1]:d>0&&d<a.length-1&&h(n,a[d+1],a[d-1][1])>0?a[d+1][1]:0===d?null:a[d-1][1]}function getAbbreviation(t,e){var r=t[2];if(r.indexOf("%s")>-1){var n;return n=e?"-"===e[7]?"":e[7]:"S",r.replace("%s",n)}return r.indexOf("/")>-1?r.split("/",2)[e&&e[6]?1:0]:r}var _this=this,regionMap={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},regionExceptions={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"};this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=getRegionForTimezone,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(t){var e={async:!0},r=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica";for(var n in t)e[n]=t[n];return this.loadZoneFiles(r,e)},this.loadZoneFiles=function(t,e){var r,n=0;if("string"==typeof t)return this.loadZoneFile(t,e);e=e||{},r=e.callback,e.callback=function(){n++,n===t.length&&"function"==typeof r&&r()};for(var i=0;i<t.length;i++)this.loadZoneFile(t[i],e)},this.loadZoneFile=function(t,e){if("undefined"==typeof this.zoneFileBasePath)throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[t])return this.loadedZones[t]=!0,builtInLoadZoneFile(t,e)},this.loadZoneJSONData=function(url,sync){var processData=function(data){data=eval("("+data+")");for(var z in data.zones)_this.zones[z]=data.zones[z];for(var r in data.rules)_this.rules[r]=data.rules[r]};return sync?processData(_this.transport({url:url,async:!1})):_this.transport({url:url,success:processData})},this.loadZoneDataFromObject=function(t){if(t){for(var e in t.zones)_this.zones[e]=t.zones[e];for(var r in t.rules)_this.rules[r]=t.rules[r]}},this.getAllZones=function(){var t=[];for(var e in this.zones)t.push(e);return t.sort()},this.parseZones=function(t){if(!t)return!1;for(var e,r=t.split("\n"),n=[],i="",o=null,s=null,a=0;a<r.length;a++)if(e=r[a],e.match(/^\s/)&&(e="Zone "+o+e),e=e.split("#")[0],e.length>3)switch(n=e.split(/\s+/),i=n.shift()){case"Zone":if(o=n.shift(),_this.zones[o]||(_this.zones[o]=[]),n.length<3)break;n.splice(3,n.length,processZone(n)),n[3]&&(n[3]=Date.UTC.apply(null,n[3])),n[0]=-getBasicOffset(n[0]),_this.zones[o].push(n);break;case"Rule":s=n.shift(),_this.rules[s]||(_this.rules[s]=[]),n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||n[1],n[5]=parseTimeString(n[5]),n[6]=getBasicOffset(n[6]),_this.rules[s].push(n);break;case"Link":if(_this.zones[n[1]])throw new Error("Error with Link "+n[1]+". Cannot create link of a preexisted zone.");isNaN(n[0])?_this.zones[n[1]]=n[0]:_this.zones[n[1]]=parseInt(n[0],10)}return!0},this.transport=_transport,this.getTzInfo=function(t,e,r){if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){var n=getRegionForTimezone(e);if(!n)throw new Error("Not a valid timezone ID.");this.loadZoneFiles(n)}var i=getZone(t,e),o=+i[0],s=getRule(t,i,r);s&&(o=getAdjustedOffset(o,s[6]));var a=getAbbreviation(i,s);return{tzOffset:o,tzAbbr:a}}}}).call("undefined"!=typeof window?window:this)},function(t,e){},function(t,e){t.exports={zones:{"America/New_York":[["296.0333333333333","-","LMT","-2717668562000"],["300","US","E%sT","-1546387200000"],["300","NYC","E%sT","-852163200000"],["300","US","E%sT","-725932800000"],["300","NYC","E%sT","-63244800000"],["300","US","E%sT",null]],"Etc/UTC":[["0","-","UTC",null]]},rules:{US:[["1918","1919","-","Mar","lastSun",["2","0","0",null],"60","D"],["1918","1919","-","Oct","lastSun",["2","0","0",null],"0","S"],["1942","only","-","Feb","9",["2","0","0",null],"60","W",""],["1945","only","-","Aug","14",["23","0","0","u"],"60","P",""],["1945","only","-","Sep","lastSun",["2","0","0",null],"0","S"],["1967","2006","-","Oct","lastSun",["2","0","0",null],"0","S"],["1967","1973","-","Apr","lastSun",["2","0","0",null],"60","D"],["1974","only","-","Jan","6",["2","0","0",null],"60","D"],["1975","only","-","Feb","23",["2","0","0",null],"60","D"],["1976","1986","-","Apr","lastSun",["2","0","0",null],"60","D"],["1987","2006","-","Apr","Sun>=1",["2","0","0",null],"60","D"],["2007","max","-","Mar","Sun>=8",["2","0","0",null],"60","D"],["2007","max","-","Nov","Sun>=1",["2","0","0",null],"0","S"]],NYC:[["1920","only","-","Mar","lastSun",["2","0","0",null],"60","D"],["1920","only","-","Oct","lastSun",["2","0","0",null],"0","S"],["1921","1966","-","Apr","lastSun",["2","0","0",null],"60","D"],["1921","1954","-","Sep","lastSun",["2","0","0",null],"0","S"],["1955","1966","-","Oct","lastSun",["2","0","0",null],"0","S"]]}}},function(t,e,r){var n,i,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r(24),n=r(51),o={String:r(58),Markdown:r(59)},t.exports=i=function(t){function e(){return this.text=a(this.text,this),e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.type="titles",e.prototype.maxlength=555,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),s.defaults(this,{title:""}),this.sliceText()},e.prototype.text=function(t){return null!=t&&(this.title=o.String.stripIllegals(t)),this.sliceText(),this.title},e.prototype.styledText=function(){var t;return t=this.title.replace(o.Markdown.regexes.italic,"<em>$2</em>"),o.String.stripIllegals(t)},e.prototype.cleanText=function(){var t;return t=this.title.replace(o.Markdown.regexes.italic,"$2"),t=o.String.replaceSpaces(t),o.String.stripIllegals(t)},e.prototype.sliceText=function(){return this.title=this.title.slice(0,this.maxlength)},e.prototype.empty=function(){return 0===this.text().length},e.prototype.strippedData=function(){return s.omit(this.diffsyncData(),["id","_meta","ab_test_group"])},e.prototype.diffsyncData=function(){return s.pick(this,["id","_meta","title","purpose","ab_test_group"])},e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(16),s=r(24),n=r(51),i={Columns:r(78),Paragraphs:r(66),Image:r(67),Widgets:r(68)},t.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.type="sections",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),s.defaults(this,{widget:null,view_options:{}}),this.widget&&this.setWidget(this.widget),this.initializeColumns(),this.initializeChildren()},e.prototype.setWidget=function(t){var e;return t.diffsyncData&&(t=t.diffsyncData()),e=i.Image,"photo"!==t.oembed_data.type&&(e=i.Widgets),this.widget=this.m(e,t)},e.prototype.initializeColumns=function(){if(this.columns=s.map(this.columns,function(t){return function(e){return e instanceof i.Columns&&(e=e.diffsyncData()),t.m(i.Columns,e)}}(this)),0===this.columns.length)return this.columns=[this.m(i.Columns)]},e.prototype.initializeChildren=function(){return this.children=a.prop(s.map(this.children,function(t){return function(e){var r,n;return n=e._meta.type,"widgets"===n&&"photo"===(null!=(r=e.oembed_data)?r.type:void 0)&&(n="image"),t.m(i[s.capitalize(n)],e)}}(this))),this.addEmpty()},e.prototype.changeColumns=function(t,e){var r,n,i,o,a,p;if(i=this.position(t),n=t.column_number,r=n+e,r!==n)return o=n>r?function(){a=[];for(var t=0;0<=i?t<=i:t>=i;0<=i?t++:t--)a.push(t);return a}.apply(this):function(){p=[];for(var t=i,e=this.children().length-1;i<=e?t<=e:t>=e;i<=e?t++:t--)p.push(t);return p}.apply(this),this.children(s.map(this.children(),function(t,e){return u.call(o,e)>=0&&(t.column_number=r),t}))},e.prototype.hasContent=function(){return!!this.showBackground()||this.childrenWithContent().length},e.prototype.childrenWithContent=function(){return s.reject(this.children(),function(t){var e,r,n;return"add"===t.type||"paragraphs"===t.type&&(e=""===(n=t.content_html)||null===n||void 0===n,r=s.without(t.words(),"",null,void 0).length<=0,e||r)})},e.prototype.showBackground=function(){return!!this.widget||s.reduce(this.columns,function(t,e){return!t&&e.showBackground()&&(t=!0),t},!1)},e.prototype.backgrounds=function(){return this.widget?[this.widget]:s.map(this.columns,function(t){return t.widget})},e.prototype.updateColumnBackgrounds=function(t){if(t)return s.forEach(this.columns,function(e,r){return e.widget=t[r]})},e.prototype.removeColumnBackgrounds=function(){return s.forEach(this.columns,function(t){return t.widget=null})},e.prototype.column=function(t){var e,r;return r=this.children(),e=this.columns.length,e>1?s.filter(r,function(r){var n;return n=r.column_number,n>e&&(n=e),n===t}):r},e.prototype.toggleColumns=function(t,e){var r;return r=this.columns.length,1===t&&2===r?this.columns.pop():2===t&&1===r?this.columns.push(this.m(i.Columns,e)):void 0},e.prototype.addAfterIfLast=function(t){if(this.position(t)===this.children().length-1)return this.addAfter(t)},e.prototype.addAfter=function(t,e){return this.add(this.position(t)+1,e,t.column_number)},e.prototype.addBefore=function(t,e){return this.add(this.position(t),e,t.column_number)},e.prototype.add=function(t,e,r){return e||(e=this.emptyGraf()),null!=r&&(e.column_number=r),this.insert(e,t),e},e.prototype.addEmpty=function(){if(0===this.children().length)return this.children([this.emptyGraf()])},e.prototype.emptyGraf=function(){return this.m(i.Paragraphs)},e.prototype.insert=function(t,e){return e!==-1&&null!=e||(e=this.children().length),this.children().splice(e,0,t)},e.prototype.remove=function(t){var e;return e=this.children().splice(this.position(t),1),this.updateAll(),this.addEmpty(),e},e.prototype.updateAll=function(){return this.children(s.map(this.children(),function(t){return t.update=!0,t}))},e.prototype.previous=function(t){var e;if(e=this.position(t)-1,!(e<0))return this.children()[e]},e.prototype.updateNext=function(t,e){var r,n,i;if((n=this.next(t))&&(!(r=this.view_options.template_map)||(i=this.position(n))!==r.related_video&&i!==r.floating_art_element||(n=this.next(n))))return n.content_md=""+e+(n.content_md||""),n},e.prototype.next=function(t){var e;if(e=this.position(t)+1,!(e>this.children().length-1))return this.children()[e]},e.prototype.position=function(t){var e;return e=-1,s.find(this.children(),function(r,n){if(r.id===t.id)return e=n,!0}),e},e.prototype.at=function(t){return this.children()[t]},e.prototype.update=function(t,e){return this.children(s.map(this.children(),function(r,n){return n!==e?r:(t.update=!0,t)}))},e.prototype.swap=function(t,e){var r;if(!(e<0||e>=this.children().length))return r=this.children()[e],t.column_number=r.column_number,this.children(s.map(this.children(),function(e){var n;return n=e,e===r?n=t:e===t&&(n=r),n&&(n.update=!0),n}))},e.prototype.wordCount=function(t){var e,r;return r=!1,e=this.paragraphs().concat(this.widgets()),s.reduce(e,function(e,n){if(t)if(n.isSlide()){if(r)return e;r=!0}else r&&(r=!1);return e+n.wordCount()},0)},e.prototype.introWordCount=function(){var t;return t=0,s.reduce(this.children(),function(e,r,n){return"paragraphs"===r.type&&Math.abs(n-t)<=1?(t=n,e+r.wordCount()):e},0)},e.prototype.paragraphs=function(){return null==this.children?[]:s.filter(this.children(),{type:"paragraphs"})},e.prototype.widgets=function(){return null==this.children?[]:s.filter(this.children(),{type:"widgets"})},e.prototype.strippedData=function(){var t,e;return e=["id","_meta"],this.long||(e=e.concat(["widget","columns"])),t=s.omit(this.diffsyncData(),e),t.children=s.map(this.children(),function(t){var e;return e=t.strippedData(),e._meta=s.omit(e._meta,["version"]),e}),this.widget&&(t.widget=this.widget.strippedData()),t.view_options&&(t.view_options=s.reduce(t.view_options,function(t,e,r){return"template_map"===r||e===!1?t:(t[r]=e,t)},{})),this.long&&(t.columns=s.map(this.columns,function(t){return t instanceof i.Columns&&(t=t.strippedData()),t})),t},e.prototype.diffsyncData=function(){var t;return t=s.pick(this,["id","_meta","widget","view_options"]),t.children=s.map(this.children(),function(t){return t.diffsyncData()}),this.widget&&(t.widget=this.widget.diffsyncData()),t.columns=s.map(this.columns,function(t){return t instanceof i.Columns&&(t=t.diffsyncData()),t}),t},e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){
for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(16),s=r(24),n=r(51),o={Alignments:r(69),Image:r(67)},t.exports=i=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.assign(this,{styles:9}),s.defaults(this,{style:0,position:0,alignment:1,widget:null}),this.widget&&this.setWidget(this.widget)}return p(e,t),e.prototype.type="columns",e.prototype.setWidget=function(t){return t instanceof o.Image&&(t=t.diffsyncData()),this.widget=this.m(o.Image,t)},e.prototype.positions=function(){return this.m(o.Alignments).positions(this.alignment)},e.prototype.overlay=function(t){return null==t&&(t=this.style),u.call([3,4,5,6],t)>=0},e.prototype.showBackground=function(t){var e;return null==t&&(t=this.style),u.call(function(){e=[];for(var t=3,r=this.styles-1;3<=r?t<=r:t>=r;3<=r?t++:t--)e.push(t);return e}.apply(this),t)>=0},e.prototype.backgroundOverlay=function(t){return null==t&&(t=this.style),7===t},e.prototype.mono=function(t){if(null==t&&(t=this.style),this.blackAndWhite(t))return"white"},e.prototype.blackAndWhite=function(t){return null==t&&(t=this.style),u.call([3,4,5],t)>=0},e.prototype.strippedData=function(){var t;return t=s.omit(this.diffsyncData(),["id","_meta"]),this.widget&&(t.widget=this.widget.strippedData()),t},e.prototype.diffsyncData=function(){var t;return t=s.pick(this,["id","_meta","style","widget","position","alignment"]),this.widget&&(t.widget=this.widget.diffsyncData()),t},e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r(24),i=r(51),o={String:r(58),Markdown:r(59)},t.exports=n=function(t){function e(){return this.text=a(this.text,this),e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.type="abstracts",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),s.defaults(this,{content:""})},e.prototype.text=function(t){return null!=t&&(this.content=o.String.stripIllegals(t)),this.content},e.prototype.styledText=function(){var t;return t=this.content.replace(o.Markdown.regexes.italic,"<em>$2</em>"),o.String.stripIllegals(t)},e.prototype.cleanText=function(){var t;return t=this.content.replace(o.Markdown.regexes.italic,"$2"),o.String.stripIllegals(t)},e.prototype.empty=function(){return 0===this.text().length},e.prototype.strippedData=function(){return s.omit(this.diffsyncData(),["id","_meta","ab_test_group"])},e.prototype.diffsyncData=function(){return s.pick(this,["id","_meta","content","purpose","ab_test_group"])},e}(i)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),i=r(64),t.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.type="audit_trails",e.prototype.create=function(t){return null==t&&(t={}),this.post(o.assign({},t,{background:!1}))},e}(i)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(51),o={Embed:r(68),Image:r(67)},t.exports=i=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{widget:{}}),this.widget=this.m(o[s.capitalize(this.modelType())],this.widget)}return a(e,t),e.prototype.type="body_widgets",e.prototype.modelType=function(){var t,e,r;return r=null!=(t=this.widget)&&null!=(e=t.oembed_data)?e.type:void 0,r&&"photo"!==r?"embed":"image"},e.prototype.reset=function(){return this.widget=this.m(o.Image)},e.prototype.strippedData=function(){var t;return t=s.omit(this.diffsyncData(),["id","_meta"]),t.widget=this.widget.strippedData(),t.widget.overrides=s.omit(t.widget.overrides,["caption"]),"social"===this.purpose&&(t.widget.overrides=s.omit(t.widget.overrides,["credit"]),t.widget.overrides.crops=s.pick(t.widget.overrides.crops,["2:1"])),t},e.prototype.diffsyncData=function(){var t;return t=s.pick(this,["id","_meta","purpose"]),t.widget=this.widget.diffsyncData(),t},e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};s=r(16),o=r(24),n=r(64),i={Primary:r(83),Labels:r(86),Channel:r(89),Category:r(91)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.api=function(){return this.domain("sorta")+"/bodies/"+this.id+"/taxonomy"},e.prototype.initialize=function(){if(e.__super__.initialize.apply(this,arguments),this.labels=this.m(i.Labels,{labels:this.labels}),this.channel&&(this.channel=this.m(i.Channel,this.channel)),this.category&&(this.category=this.m(i.Category,this.category)),this.primary_label)return this.primary_label=this.m(i.Primary,o.assign({},this.primary_label,{primary:!0}))},e.prototype.set=function(t,e){var r;if("labels"===t||"channel"===t||"category"===t||"primary_label"===t)return r=t,r.match(/^primary/)&&(r="primary"),this[t]=this.m(i[o.capitalize(r)],e)},e.prototype.get=function(){return e.__super__.get.apply(this,arguments).then(function(t){return function(e){var r;return(r=e.data)&&(o.assign(t,o.omit(r,function(t){return null==t})),t.initialize()),e}}(this))},e.prototype.safeLabels=function(t){var e;return e=this.labels.safe(),t&&this.primary_label?[this.primary_label].concat(e):e},e.prototype.tags=function(){var t;return t=o.without([this.channel?this.channel.text():void 0,this.category?this.category.text():void 0],"",void 0),t.concat(this.names())},e.prototype.tag=function(){var t;return this.primary_label?this.primary_label:(t=this.labels.models()[0])?t:this.section()},e.prototype.names=function(){var t;return t=[],this.primary_label&&t.push(this.primary_label.text()),t.concat(this.labels.names())},e.prototype.section=function(){return this.channel?this.channel:this.category?this.category:void 0},e.prototype.sectionName=function(){var t;return t=this.section(),t?t.name:""},e.prototype.strippedData=function(t){var e;return null==t&&(t=[]),e=o.assign({},this.labels.strippedData(),{channel:this.entityStrippedData(this.channel),category:this.entityStrippedData(this.category),primary_label:this.entityStrippedData(this.primary_label)}),o.omit(e,t)},e.prototype.entityStrippedData=function(t){return t?t.strippedData(["id","widget","autolink","meta_keywords","meta_description","description_html"]):null},e.prototype.diffsyncData=function(){return o.assign({},this.labels.diffsyncData(),{channel:this.entityDiffsyncData(this.channel),category:this.entityDiffsyncData(this.category),primary_label:this.entityDiffsyncData(this.primary_label)})},e.prototype.entityDiffsyncData=function(t){return t?t.diffsyncData():null},e.prototype.commerce=function(){return this.findLabel("inverse-loot")},e.prototype.sponsored=function(){return this.findLabel("sponsored-content")},e.prototype.nsfa=function(){return this.findLabel("nsfa")},e.prototype.nsfg=function(){return this.findLabel("nsfg")},e.prototype.starwars=function(){return o.find(this.allLabels(),function(t){return t.permalink.match(/^(star-wars|rogue-one|rogue-leader|solo-a-star)/)})},e.prototype.science=function(){var t,e,r,n,i,o;return t=["science","innovation"],e=["point-b","replicant","life-in-space","science-and-chill"],r=null!=(n=this.channel)?n.permalink:void 0,c.call(e,r)>=0||(i=null!=(o=this.category)?o.permalink:void 0,c.call(t,i)>=0)},e.prototype.culture=function(){var t;return"culture"===(null!=(t=this.category)?t.permalink:void 0)||this.humans()},e.prototype.humans=function(){var t,e,r;if("humans"===(null!=(e=this.channel)?e.permalink:void 0))return!0;if("entertainment"===(null!=(r=this.category)?r.permalink:void 0))return t=["arrow","spawn","comics","dc-comics","dc-movies","deadpool","deadpool-2","death-note","dc-universe","superheroes","marvel-comics","marvel-movies","power-rangers","marvel-universe","agents-of-s-h-i-e-l-d"],o.find(this.allLabels(),function(e){var r;return r=e.permalink,c.call(t,r)>=0})},e.prototype.elonmusk=function(){var t;return t=["tesla","space-x","elon-musk","hyperloop","gigafactory","the-boring-company"],o.find(this.allLabels(),function(e){var r;return r=e.permalink,c.call(t,r)>=0})},e.prototype.streaming=function(){var t;return t=["amc","archer","horror","atlanta","netflix","tv-shows","showtime","star-trek","streaming","adult-swim","network-tv","twin-peaks","amazon-shows","black-mirror","american-gods","adventure-time","rick-and-morty","adult-animation","game-of-thrones","better-call-saul","star-trek-beyond","star-trek-discovery","american-horror-story"],o.find(this.allLabels(),function(e){var r;return r=e.permalink,c.call(t,r)>=0})},e.prototype.strategy=function(){var t;return t=["a-i","apps","work","money","health","bitcoin","fintech","security","cryptocurrency"],o.find(this.allLabels(),function(e){var r;return r=e.permalink,c.call(t,r)>=0})},e.prototype.findLabel=function(t){return o.find(this.allLabels(),function(e){return e.permalink===t})},e.prototype.allLabels=function(){return o.without([this.primary_label].concat(this.labels.models()),void 0,null)},e.prototype.persisted=function(){return this.channel||this.category||this.primary_label||this.labels.persisted()},e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(84),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.defaults(this,{stats:{},cta:!0,nsfa:!1,nsfg:!1,autolink:!0,evergreen_bodies:[]}),i.defaults(this.stats,{draft:0,published:0})}return o(e,t),e.prototype.path="/topic",e.prototype.strippedData=function(){return i.omit(e.__super__.strippedData.apply(this,arguments),["stats","autolink","evergreen_bodies"])},e.prototype.diffsyncData=function(){return i.assign(e.__super__.diffsyncData.apply(this,arguments),i.pick(this,["cta","nsfa","nsfg","stats","autolink","evergreen_bodies"]))},e.prototype.suggestion=function(){return this.text()},e.prototype.attributes=function(){return{nsfa:this.nsfa,nsfg:this.nsfg,cta:this.cta,autolink:this.autolink}},e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(85),i={Image:r(67)},o={String:r(58)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{name:"",widget:{},permalink:"",description:"",meta_keywords:"",meta_description:"",description_html:""}),this.setWidget()}return a(e,t),e.prototype.path="",e.prototype.no_default_id=!0,e.prototype.api=function(){return this.domain("sorta")},e.prototype.update=function(t){return t.widget&&this.setWidget(t.widget),s.assign(this,s.omit(t,"widget"))},e.prototype.strippedData=function(t){var r;return null==t&&(t=[]),r=e.__super__.strippedData.apply(this,arguments),this.widget.persisted()&&(r.widget=this.widget.strippedData()),s.omit(r,t.concat(["description"]))},e.prototype.diffsyncData=function(){var t;return t=s.pick(this,["id","name","permalink","description","meta_keywords","meta_description","description_html"]),t.widget={},this.widget.persisted()&&(t.widget=this.widget.diffsyncData()),t},e.prototype.canonical=function(){return this.url()},e.prototype.url=function(){return this.path+"/"+this.permalink},e.prototype.text=function(t){return null!=t&&(this.name=t),this.name},e.prototype.displayName=function(){switch(this.name.toLowerCase()){case"none":return"News";default:return this.name}},e.prototype.setWidget=function(t){return null==t&&(t=this.widget),this.widget=this.m(i.Image,t)},e.prototype.meta=function(t){var e,r,n;return null==t&&(t={}),r=this.meta_keywords||t.keywords||"",e=o.String.stripTags(this.meta_description||this.description_html),n={url:this.url(),title:this.displayName(),permalink:this.permalink,image:this.widget.embed(),canonical:this.canonical(),description:s.trunc(e,320)},s.assign(n,{keywords:(n.title+", "+r).toLowerCase()}),e.length?n:s.assign(n,{description:[n.title+" breaking news, reviews, videos, photos, arguments, ","and predictions: Everything you need to know about "+n.title].join("")})},e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(64),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.update=function(t){return i.assign(this,t)},e.prototype.strippedData=function(){return this.diffsyncData()},e.prototype.diffsyncData=function(){return{}},e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(87),i={Label:r(83)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{limit:10,offset:0}),this.labels&&(this.add(this.labels),this.labels=null)}return a(e,t),e.prototype.api=function(){return e.__super__.api.apply(this,arguments)+"/labels?"+s.route.buildQueryString(this.queryParams())},e.prototype.queryParams=function(){return{page:{limit:this.limit,offset:this.offset}}},e.prototype.model=function(){return i.Label},e.prototype.strippedData=function(){return{labels:o.map(e.__super__.strippedData.apply(this,arguments),function(t){return o.omit(t,["id","widget","description","meta_keywords","meta_description","description_html","autolink"])})}},e.prototype.diffsyncData=function(){return{labels:e.__super__.diffsyncData.apply(this,arguments)}},e.prototype.persisted=function(){return this.models().length},e.prototype.safe=function(){var t;return t=/sponsored-content|^ad-/,o.reject(this.models(),function(e){var r;return null!=(r=e.permalink)?r.match(t):void 0})},e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),i=r(88),n={Entity:r(84)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.assign(this,{redirects:{}})}return a(e,t),e.prototype.logo="https://fsmedia.imgix.net/assets/inverse_square_yellow.png",e.prototype.api=function(){return this.domain("sorta")},e.prototype.get=function(){return e.__super__.get.call(this).then(function(t){return function(e){return t.models([]),t.add(e.data),e}}(this))},e.prototype.stringify=function(){return this.names().join(", ")},e.prototype.names=function(){return o.map(this.models(),function(t){return t.name.trim()})},e.prototype.filtered=function(t){var e;return t?(e=new RegExp(t,"i"),this.sorted(o.filter(this.models(),function(t){return t.name.match(e)}))):this.sorted()},e.prototype.sorted=function(t){return null==t&&(t=this.models()),o.sortBy(t,function(t){return t.name.toLowerCase()})},e.prototype.social=function(t){var e;return e=o.assign({},t),o.defaults(e,{image:this.ogImage(),title:"What could happen next?"}),e.title.match(/^Inverse$|\| Inverse$/i)||(e.title=e.title+" | Inverse"),e},e.prototype.meta=function(t){if("string"==typeof t&&(t=this.find(t)),t)return t.meta()},e.prototype.find=function(t){return o.find(this.models(),{permalink:t})},e.prototype.findByName=function(t){return o.find(this.models(),{name:t})},e.prototype.model=function(){return n.Entity},e.prototype.redirect=function(t){if(t)return this.redirects[t]},e.prototype.ogImage=function(){return"https://fsmedia.imgix.net/assets/og.png"},e}(i)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(64),i={Entity:r(85)},t.exports=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.models&&(t=this.models),o.assign(this,{models:s.prop([])}),this.add(t)}return a(e,t),e.prototype.update=function(t){var e;return e=o.find(this.models(),{id:t.id}),e?e.update(t):this.add(t)},e.prototype.add=function(t){if(t)return"function"==typeof t.models&&(t=t.models()),o.isArray(t)||(t=[t]),this.models(this.models().concat(o.map(t,function(t){return function(e){return e instanceof t.model()||(e=t.m(t.model(),t.modelData(e))),e}}(this))))},e.prototype.remove=function(t){if(t)return this.models(o.reject(this.models(),{id:t.id}))},e.prototype.empty=function(){return!this.models().length},e.prototype.modelData=function(t){return t},e.prototype.jsonData=function(){return this.strippedData()},e.prototype.modelType=function(){return this.m(this.model()).type},e.prototype.model=function(){return i.Entity},e.prototype.diffsyncData=function(t){return null==t&&(t=this.models()),o.map(t,function(t){return t.diffsyncData()})},e.prototype.strippedData=function(){return o.map(this.models(),function(t){return t.strippedData()})},e}(n)},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=r(90),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.channel&&(this.update(this.channel),this.channel=null)}return i(e,t),e.prototype.path="/channel",e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(84),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.strippedData=function(){var t;return t=e.__super__.strippedData.apply(this,arguments),t.widget&&(i.defaults(t.widget,{overrides:{}}),t.widget.overrides=i.omit(t.widget.overrides,["credit","source","caption"])),i.omit(t,["description_html"])},e}(n)},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=r(90),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.api=function(){return e.__super__.api.apply(this,arguments)+"/categories/"+this.permalink+"/labels"},e.prototype.hidden=function(){var t;return"labs"===(t=this.permalink)||"none"===t},e.prototype.none=function(){return"none"===this.permalink},e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(93),i={Bodies:r(71)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{related_type:"taxonomy"}),"facebook"===this.referrer&&(this.related_type="top_by_facebook")}return a(e,t),e.prototype.type="related",e.prototype.api=function(){var t;return t=s.route.buildQueryString(this.queryParams()),this.domain("diplomat")+"/bodies/"+this.id+"/related?"+t},e.prototype.defaultPage=function(){return{related:{}}},e.prototype.queryParams=function(){return o.assign(e.__super__.queryParams.apply(this,arguments),{related_type:this.related_type})},e.prototype.strippedData=function(t,e){var r,n;return null==e&&(e={}),t instanceof i.Bodies||(t=this.m(i.Bodies,t)),o.defaults(e,{crops:["2:1","4:3"]}),r=["banner"],t.leadVideo()&&r.push("primary"),n=t.strippedData({article:!0,body_widgets:{crops:{banner:e.crops},overrides:["link","credit","source"]},omits:["flags","metrics","sections","taxonomy","created_by","updated_at","related_widget"],includes:{titles:["social"],abstracts:["social"],body_widgets:r}})},e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),i=r(24),n=r(94),t.exports=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),t=this.bodies,this.bodies=[],this.defaultPages(),this.add({data:t,links:this.links})}return s(e,t),e.prototype.type="",e.prototype.defaultPages=function(){return"object"!=typeof this.pages&&(this.pages={}),i.forEach(this.page,function(t){return function(e,r){return i.defaults(t.pages[r],1),i.defaults(t.page[r],{limit:10,offset:parseInt(t.page[r].offset,10)||0})}}(this))},e.prototype.pagination=function(t){var e;if(e=this.page[t])return{pages:this.pages[t],page:Math.floor(e.offset/e.limit)+1}},e.prototype.setOffset=function(t,e){if(this.page[t]&&null!=e)return this.page[t].offset=this.calculateOffset(e,this.page[t].limit)},e.prototype.setPages=function(){return i.forEach(this.page,function(t){return function(r,n){return e.__super__.setPages.call(t,{key:n,page:r,links:t.getLinks(n)})}}(this))},e.prototype.updatePages=function(t,e){if(null!=t&&e)return this.pages[e]=t},e.prototype.getLink=function(t,e){return this.getLinks(e||this.type)[t]},e.prototype.getLinks=function(t){return this.links[t]||this.links},e.prototype.queryParams=function(){return{page:this.page}},e.prototype.get=function(t){return e.__super__.get.call(this,t,!0)},e.prototype.updateLinks=function(t){return null==t&&(t={}),e.__super__.updateLinks.call(this,t[this.type]||t)},e.prototype.jsonBodies=function(t){return null==t&&(t={}),i.defaults(t,{data:{}}),e.__super__.jsonBodies.call(this,{data:t.data[this.type]||t.data})},e.prototype.jsonData=function(t,r){var n;return null==t&&(t={}),i.defaults(t,{data:{},links:{}}),i.assign(t,{data:t.data[this.type]||t.data,links:t.links[this.type]||t.links}),n=e.__super__.jsonData.call(this,t,r),i.assign(n,{data:this.diffsyncData(n.data)})},e.prototype.diffsyncData=function(t){return t||(t=this.bodies),i.map(t,function(t){return function(e){return t.strippedData(e)}}(this))},e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r(16),o=r(24),i=r(64),n={Bodies:r(71),Person:r(63),Taxonomies:r(95)},t.exports=function(t){function e(){this.taxonomy=a(this.taxonomy,this),this.previous=a(this.previous,this),this.next=a(this.next,this),e.__super__.constructor.apply(this,arguments),o.defaults(this,this.defaults()),o.defaults(this.page,this.defaultPage()),o.defaults(this.includes,this.defaultIncludes()),this.setPages(),this.taxonomies=this.m(n.Taxonomies,{models:this.taxonomies})}return p(e,t),e.prototype.type="",e.prototype.defaults=function(){return{page:{},pages:1,links:{},bodies:[],includes:{},is_loading:!1,should_add_pagination:!0,types:n.Bodies.prototype.types,formats:n.Bodies.prototype.formats,flags:o.omit(n.Bodies.prototype.flag_types,n.Bodies.prototype.custom_flags)}},e.prototype.defaultPage=function(){return{limit:10,offset:parseInt(this.page.offset,10)||0}},e.prototype.defaultIncludes=function(){return{titles:[],abstracts:[],body_widgets:["widget"],sections:!1}},e.prototype.queryParams=function(){return{page:this.page,include:this.includeString()}},e.prototype.includeString=function(){var t;return t=[],o.forEach(this.includes,function(e,r){if(e)return t.push(r),o.forEach(e,function(e){return t.push(r+"."+e)})}),t.join(",")},e.prototype.previousPage=function(t){var e;if(!this.fetching())return(e=this.previous(t))?this.get({url:e},this.should_add_pagination):void 0},e.prototype.nextPage=function(t){var e;if(!this.fetching())return(e=this.next(t))?this.get({url:e},this.should_add_pagination):void 0},e.prototype.next=function(t,e){return this.paginationLink("next",t,e)},e.prototype.previous=function(t,e){return this.paginationLink("prev",t,e)},e.prototype.getPage=function(t){return this.pagination(t).page},e.prototype.pagination=function(){return{pages:this.pages,page:Math.floor(this.page.offset/this.page.limit)+1}},e.prototype.paginationLink=function(t,e,r){var n;if(this.links&&(n=this.getLink(t,r)))return e?n.replace(/\[(size|limit)\]=\d*/,"[$1]="+e):n},e.prototype.getLink=function(t){return this.links[t]},e.prototype.get=function(t,r){var n;return null==t&&(t={}),null==r&&(r=!1),this.fetching(!0),n=s.deferred(),e.__super__.get.call(this,t).then(function(t){return function(e){return t.fetching(!1),e.errors?void n.reject(e.errors):(t.updateLinks(e.links),r?t.add(e).then(function(){return n.resolve(e)}):n.resolve(e))}}(this),function(t){return n.reject(t)}),n.promise},e.prototype.add=function(t,e){var r,n;if(null==e&&(e=!1),t&&!t.errors)return n=[],r=s.deferred(),this.updateLinks(t.links),t.taxonomies&&this.taxonomies.add(t.taxonomies),this.bodies=o.uniq(this.bodies.concat(o.map(this.jsonBodies(t),function(t){return function(e){return n.push(e.id),t.addBody(e)}}(this),"id"))),e?this.getTaxonomies(n).then(function(){return r.resolve(t)}):r.resolve(t),r.promise},e.prototype.jsonBodies=function(t){return o.without(t.data,null,void 0)},e.prototype.addBody=function(t){return this.m(n.Bodies,this.strippedData(t))},e.prototype.addAuthors=function(t){return null==t&&(t={}),o.each(this.bodies,function(e){return function(r){var i;if(i=t[r.author().id])return r.author(e.m(n.Person,i))}}(this))},e.prototype.jsonData=function(t,e){var r;return null==t&&(t={}),o.defaults(t,{links:this.links,data:this.bodies}),r=o.map(t.data,function(t){return function(r){return t.strippedData(r,e)}}(this)),{links:t.links,data:o.without(r,void 0)}},e.prototype.remove=function(t){return this.bodies=o.reject(this.bodies,{id:t.id})},e.prototype.updateLinks=function(t){return this.links=t,this.setPages()},e.prototype.setPages=function(t){var e,r,n,i,s,a,p,c;if(null==t&&(t={}),o.defaults(t,{page:this.page,links:this.links}),e=t.key,s=t.page,n=t.links,null!=n?n.last:void 0)return s[e]&&(s=s[e]),r=decodeURIComponent(n.last),c=new RegExp("page(\\["+e+"\\])?\\[(number|offset)\\]=(\\d*)","i"),i=(null!=(a=r.match(c))?a[3]:void 0)||(null!=(p=r.match(c))?p[2]:void 0),null!=i&&(i=parseInt(i,10)),null!=s.offset&&(i=Math.floor((i||0)/s.limit)+1),null==i&&(i=1),this.updatePages(i,e)},e.prototype.updatePages=function(t){if(null!=t)return this.pages=t},e.prototype.fetching=function(t){return null!=t&&(this.is_loading=t),this.is_loading},e.prototype.strippedData=function(t){return t},e.prototype.getTaxonomies=function(t){return this.taxonomies.get(t)},e.prototype.taxonomy=function(t){return this.taxonomies.taxonomy(t)},e.prototype.sectionName=function(t){return this.taxonomies.sectionName(t)},e.prototype.setOffset=function(t){if(null!=t)return this.page.offset=this.calculateOffset(t,this.page.limit)},e.prototype.calculateOffset=function(t,e){return t=parseInt(t,10),0!==t&&(t-=1),e*t},e}(i)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),i=r(64),n={Taxonomy:r(82)},o={Deferred:r(96)},t.exports=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.models&&(t=this.models),s.assign(this,{models:a.prop({})}),this.add(t)}return p(e,t),e.prototype.api=function(t){return this.domain("sorta")+"/bodies/"+t.join(",")+"/taxonomy"},e.prototype.reset=function(){return this.models({})},e.prototype.get=function(t){var r;return null==t&&(t=[]),t.length?(r=this.api(t),e.__super__.get.call(this,{url:r}).then(function(e){return function(r){var n;return n=r.data,1===t.length&&(n={},n[t[0]]=r.data),e.add(n),r}}(this))):o.Deferred.resolved()},e.prototype.add=function(t){return this.models(s.assign({},this.models(),s.transform(t,function(t){return function(e,r,i){return e[i]=t.m(n.Taxonomy,r),e}}(this),{})))},e.prototype.sectionName=function(t){var e;return(e=this.taxonomy(t))?e.sectionName():""},e.prototype.section=function(t){var e;if(e=this.taxonomy(t))return e.section()},e.prototype.taxonomy=function(t){if(t)return this.models()[t.id]},e.prototype.strippedData=function(t){return s.transform(this.models(),function(e,r,n){return e[n]=r.strippedData(t),e},{})},e.prototype.diffsyncData=function(){return s.transform(this.models(),function(t,e,r){return t[r]=e.diffsyncData(),t},{})},e}(i)},function(t,e,r){var n,i;i=r(16),n=function(){function t(){}return t.prototype.resolved=function(){var t;return t=i.deferred(),t.resolve(),t.promise},t}(),t.exports=new n},function(t,e,r){var n,i,o,s,a,p=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=r(16),s=r(24),o=r(23),n={Pillager:r(98),Test:r(99),Tests:{ArticleImage:r(100),Newsletter:r(101)}},i=function(t){function e(){this.getArm=p(this.getArm,this),this.fetchArm=p(this.fetchArm,this),e.__super__.constructor.apply(this,arguments),s.assign(this,{arms:{},model:this.m(n.Pillager)}),s.forEach(n.Tests,function(t){return function(e){var r;return r=t.m(e),t.arms[r.name]=r}}(this))}return c(e,t),e.cache_key="pillager",e.prototype.fetchArm=function(t,e){var r,n;return r=this.getArm(t),n=a.deferred(),null!=e&&r.setContext(e),this.server||r.fetching()||r.fetched()?n.resolve(r):(r.fetching(!0),r.setControl(),this.model.get(r.name,r.context).then(function(t){return r.onfetch(t.data),n.resolve(r)},function(t){return r.error(!0),console.error(t),n.reject(t)})),n.promise},e.prototype.fetched=function(t){return this.getArm(t).fetched()},e.prototype.getArm=function(t){var e;return(e=this.arms[t])?e:this.m(n.Test)},e}(o),t.exports=o.export(i)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),i=r(64),n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.remote={test_path:"arm/draw"}}return a(e,t),e.prototype.type="pillager",e.prototype.is_json_api=!1,e.prototype.api=function(){return this.domain("pillager")},e.prototype.get=function(t,r,n){return null==n&&(n={}),e.__super__.get.call(this,o.assign({},n,{url:this.getURL({test:t,context:r})}))},e.prototype.getURL=function(t){var e,r,n;return n=t.test,e=t.context,r={test:n,context:e,session_id:this.sessionId(),visit_id:this.visit_id},r=s.route.buildQueryString(r),this.remote.test_path+"?"+r},e.prototype.sessionId=function(){return this.server?"server_side":e.__super__.sessionId.apply(this,arguments)},e}(i),t.exports=n},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),i=r(24),n=r(51),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.defaults(this,{id:0,name:"",ucb:!0,context:"none",state:"unfetched",value:{}})}return s(e,t),e.prototype.no_default_id=!0,e.prototype.isControl=function(){var t;return(t=this.control)===this.widget()||t===this.text()},e.prototype.setControl=function(){return this.control=this.widget()||this.text()},e.prototype.setContext=function(t){return this.context=t},e.prototype.onfetch=function(t){
return this.fetched(!0),this.update(t)},e.prototype.update=function(t){return i.assign(this,t)},e.prototype.text=function(){return this.value.text},e.prototype.widget=function(){return this.value.widget},e.prototype.error=function(t){return this.updateAndReturnState("error",t)},e.prototype.fetched=function(t){return this.updateAndReturnState("fetched",t)},e.prototype.fetching=function(t){return this.updateAndReturnState("fetching",t)},e.prototype.updateAndReturnState=function(t,e){return this.changeState(t,e),this.state===t},e.prototype.changeState=function(t,e){if(null!=e)return e?(this.previous_state=this.state,this.state=t):this.state=this.previous_state},e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(99),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.assign(this,{name:"article_image_crop"}),i.defaults(this.value,{widget:"2:1"})}return o(e,t),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(99),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.assign(this,{name:"newsletter_overlay_modal_layout"}),i.defaults(this.value,{widget:"default"})}return o(e,t),e.prototype.parseTests=function(){var t;if(!this.isControl())return t=this.widget().split("_"),i.forEach(t,function(t){return function(e){return t[e]=!0}}(this))},e.prototype.shouldShow=function(t){return!!this.isControl()||this[t]},e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),i=r(23),o={App:r(48)},n=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.assign(this,{rendered:!1,page:a.prop(1),data:a.prop(null),component:a.prop(null),app:o.App.get(this.server)})}return p(e,t),e.cache_key="modal",e.prototype.reset=function(){return this.toggleLock(!1),this.page(1),this.data(null),this.component(null),this.rendered=!1},e.prototype.setComponent=function(t,e,r){return r||this.component()||this.toggleLock(!0,0),this.data(e),this.component(new t)},e.prototype.setRenderedComponent=function(t,e){return this.rendered=!0,this.component(t)},e.prototype.renderComponent=function(){var t;if(t=this.component())return this.rendered?t:t.render()},e.prototype.toggleLock=function(t,e){return t||(e=null),this.app.toggleLockAndOverlay(t,e)},e}(i),t.exports=i.export(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=r(16),s=r(24),n=r(104),i={BodyList:r(105),Topic:r(107),Search:r(108),Stream:r(106)},o=function(t){function e(){this.afterSearch=p(this.afterSearch,this),e.__super__.constructor.apply(this,arguments),s.assign(this,{searching:a.prop(!1)})}return c(e,t),e.cache_key="stream",e.prototype.setTopic=function(t){return this.setStream({type:"topic",loaded:t})},e.prototype.setSearch=function(t){return this.featured(this.newStream("featured")),this.setStream({type:"search",loaded:t,cache:"stream"})},e.prototype.setUser=function(t){return this.setStream({type:"user",loaded:t,cache:"stream"})},e.prototype.setLabs=function(t){return this.setStream({type:"labs",loaded:t,cache:"stream"})},e.prototype.fetchTopic=function(t,e){var r;return this.featured(this.newStream("featured")),r=this.m(i.Topic,{label:{permalink:t}}),r.setOffset(e),this.fetch(r,"stream","topic").then(function(t){return function(e){var r,n;return n=e[0],r=e[1],t.server&&(t.json=s.omit(t.json,["stream"]),t.json.topic=n),e}}(this))},e.prototype.fetchSearch=function(t,e){var r;return null==t&&(t=""),this.resetStream("search"),this.searching(!0),this.stream().setPage(e),null!=e&&(r=this.searchProps(t),r.page=s.assign({},this.stream().page)),this.fetchStream(r).then(this.afterSearch,this.afterSearch)},e.prototype.searchProps=function(t){return{sort:"score",model:i.Search,filters:{state:null,query:t,published:!0}}},e.prototype.afterSearch=function(t){var e,r;return this.server&&(r=this.m(i.Stream),e=r.jsonData(t[0],{taxonomy:!1,omits:["abstracts"]}),this.json.stream={links:e.links,data:s.map(e.data,function(t){return t.body})}),this.searching(!1),t},e.prototype.resetStream=function(t){var r;return r=t,"search"===r&&(r="stream"),e.__super__.resetStream.call(this,t,r)},e.prototype.newStream=function(t,r){return null==r&&(r={}),"topic"===t?this.m(i.Topic,r):"labs"===t?this.m(i.BodyList):"user"===t||"search"===t?this.m(i.Search):e.__super__.newStream.apply(this,arguments)},e}(n),t.exports=n.export(o)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),i=r(23),n={BodyList:r(105),Stream:r(106)},t.exports=function(t){function e(){var t,r,n;e.__super__.constructor.apply(this,arguments),r=this.newStream("recent"),n=this.newStream("stream"),t=this.newStream("billboard"),this.server||(r.add(isomithric.recent),n.add(isomithric.stream),t.add(isomithric.featured)),o.assign(this,{json:{},recent:s.prop(r),stream:s.prop(n),featured:s.prop(t)})}return a(e,t),e.cache_key="base_stream",e.prototype.fetchCategoryStream=function(t,e){return null==e&&(e={}),"home"===t?this.fetchHomeStream(e):(e.category=this.slug(t),this.fetchStream(e))},e.prototype.fetchHomeStream=function(t){return null==t&&(t={}),t.category="front",this.fetchStream(t)},e.prototype.fetchCategoryFeatured=function(t,e){return null==e&&(e={}),"home"===t?this.fetchHomeFeatured(e):(e.category=this.slug(t),this.fetchFeatured(e))},e.prototype.fetchHomeFeatured=function(t){return null==t&&(t={}),t.category="front",this.fetchFeatured(t)},e.prototype.fetchCategoryRecent=function(t,e){return null==e&&(e={}),"home"===t?this.fetchHomeRecent(e):(e.category=this.slug(t),this.fetchRecent(e))},e.prototype.fetchHomeRecent=function(t){return null==t&&(t={}),t.category="front",this.fetchRecent(t)},e.prototype.fetchStream=function(t){var e,r;return null==t&&(t={}),t.model?r=t.model:(r=n.Stream,o.defaults(t,{page:{}}),t.page.related={limit:2}),e=this.m(r,o.omit(t,["model","related"])),this.fetch(e,"stream")},e.prototype.fetchFeatured=function(t){var e;return null==t&&(t={}),o.defaults(t,{module:"billboard",page:{bodies:{limit:5}}}),e=this.m(n.Stream,t),this.fetch(e,"featured")},e.prototype.fetchRecent=function(t){var e;return null==t&&(t={}),o.defaults(t,{module:"recent",page:{bodies:{limit:6}},filters:{abstracts:!1}}),e=this.m(n.Stream,t),this.fetch(e,"recent",!1)},e.prototype.fetchLabs=function(t){var e;return null==t&&(t={}),e=this.m(n.BodyList,o.merge({filters:{category:"Labs",publish_at:"<="+(new Date).toISOString()},includes:{sections:["paragraphs"]}},t)),e.labs=!0,this.fetch(e,"stream")},e.prototype.fetch=function(t,e,r,i){return r||(r=e),t.get().then(function(s){return function(a){var p,c;return s[e](t),s.server&&(t.is_user_page?(a=s.m(n.Stream,a).jsonData(a,{user:!0}),a={links:a.links,data:o.map(a.data,function(t){return t.body})}):a=t.jsonData(a,(p={},p[""+e]=!0,p)),s.json[r]=a),c=t.add(a,i).then(function(){var n,i,o;return s.server&&(o=s[e]().taxonomies)&&(t.labs||(n=["labels"]),null!=(i=s.json[r])&&(i.taxonomies=o.strippedData(n))),a}),[a,c]}}(this))},e.prototype.nextPage=function(t,e){var r;if(null==e&&(e={}),r=this[t](),r.nextPage)return r.nextPage(e.limit)},e.prototype.slug=function(t){return t||"home"===t?t:"front"},e.prototype.setStream=function(t){var e,r,n,i;if(i=t.type,r=t.loaded,e=t.cache,null==r&&(r=!1),!r)return e||(e=i),n=this.newStream(i),this.server||"undefined"==typeof isomithric||null===isomithric||n.add(isomithric[e],!1),this.stream(n)},e.prototype.resetStream=function(t,e){return e||(e=t),"billboard"===e&&(e="featured"),this[e](this.newStream(t))},e.prototype.newStream=function(t){var e;return"featured"===t&&(t="billboard"),"recent"!==t&&"billboard"!==t||(e={module:t}),this.m(n.Stream,e)},e}(i)},function(t,e,r){var n,i,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};s=r(16),o=r(24),n=r(94),i={Date:r(72)},t.exports=function(t){function e(){this.previous=a(this.previous,this),this.next=a(this.next,this),e.__super__.constructor.apply(this,arguments),o.defaults(this.filters,this.defaultFilters())}return p(e,t),e.prototype.type="",e.prototype.api=function(t){return this.domain("morgue")+"/bodies/search?"+this.apiQuery(t)},e.prototype.apiQuery=function(t){return t||(t=this.queryParams()),t._format="json-invrs-api-v1",s.route.buildQueryString(t)},e.prototype.defaults=function(){return o.defaults(e.__super__.defaults.apply(this,arguments),{filters:{},count:!1,order:"desc",extra_filters:{},sort:"publish_at"})},e.prototype.defaultPage=function(){return{size:10,number:parseInt(this.page.number,10)||1}},e.prototype.defaultFilters=function(){return{end:"",start:"",labels:{},flag:null,query:null,news:!1,author:null,format:null,channel:null,category:null,original:!1,featured:!1,published:!1,date:"publish_at",article_type:null,facebook_worthy:!1,state:"publication_scheduled"}},e.prototype.pagination=function(){return{pages:this.pages,page:parseInt(this.page.number,10)||1}},e.prototype.setPage=function(t){if(null!=t)return this.page.number=parseInt(t,10)||1},e.prototype.queryParams=function(){var t,r,n,i,s;return n=o.assign(e.__super__.queryParams.apply(this,arguments),{count:this.count,filter:this.filter(),sort:this.sortString()}),o.assign(n.filter,this.queryDate(),this.queryLabels()),this.validPageNumber()||(n.page.number=1),(t=n.filter.flag)&&(n.filter["flags."+t]=!0,n.filter=o.omit(n.filter,["flag"])),r=n.filter.format,"short"===r?n.filter=o.omit(n.filter,["article_type"]):r&&(s=/^(focused|slideshow)_/,n.filter=o.omit(n.filter,["channel"]),(i=r.match(s))&&(i=i[1],"focused"===i&&(i="templated"),n.filter["view_options."+i]=!0,n.filter.format=r.replace(s,""))),n.filter.query&&!this.feed&&(this.sort="score",n.sort=this.sortString()),n},e.prototype.queryDate=function(){var t,e,r;return t=i.Date.getDateRangeString(this.filters.start,this.filters.end),""!==t?(e={},e[""+this.filters.date]=t,e):""===t&&(r="publication_scheduled"===this.filters.state,r&&!this.filters.publish_at)?{published:!0}:void 0},e.prototype.queryLabels=function(){var t;if(t=this.filterLabels())return{labels:t}},e.prototype.filter=function(){var t,e;return e=[null,void 0,!1,""],t=["end","date","start","labels","sponsored","syndicated"],o.omit(this.filters,function(r,n){return u.call(e,r)>=0||u.call(t,n)>=0})},e.prototype.filterLabels=function(){var t;if(t=[],o.each(this.filters.labels,function(e,r){var n;return n=e?"":"!","sponsored"===r&&(r="sponsored-content"),t.push(""+n+r)}),t.length)return t.join(",")},e.prototype.sortString=function(){var t;return t=this.sort,"score"===this.sort&&(t="_"+this.sort),""+this.sortOrder()+t},e.prototype.sortOrder=function(){return"asc"===this.order?"+":"-"},e.prototype.bustCache=function(){return this.post({url:this.domain("morgue")+"/bust_cache"})},e.prototype.pageUrl=function(t,e){return e+"/page/"+t},e.prototype.next=function(t){return this.replaceSize(e.__super__.next.apply(this,arguments),t)},e.prototype.previous=function(t){return this.replaceSize(e.__super__.previous.apply(this,arguments),t)},e.prototype.gotoPage=function(t,e){var r;if(!(this.fetching()||t>this.pages))return r=this.paginationLink("first",e),r=r.replace(/page\[number\]=\d+/,"page[number]="+t),this.get({url:r},this.should_add_pagination)},e.prototype.replaceSize=function(t,e){return t&&e&&(t=t.replace(/page\[size\]=\d+/,"page[size]="+e)),t},e.prototype.download=function(){var t,e;return t=this.queryParams(),t.page.size=1500,e=this.api(t)+"&_format=csv",window.location=e},e.prototype.validPageNumber=function(){if(null!=this.page.number&&0!==this.page.number&&!o.isNaN(this.page.number))return!0},e.prototype.add=function(t,r){return null==r&&(r=!0),e.__super__.add.call(this,t,r)},e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(93),i={Bodies:r(70)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.api=function(){var t;return t=s.route.buildQueryString(this.queryParams()),this.domain("diplomat")+"/list/"+this.list()+"?"+t},e.prototype.queryParams=function(){return{page:this.page,include:this.include}},e.prototype.defaultPage=function(){return{bodies:{},related:{}}},e.prototype.defaultPages=function(){var t;return t={},null!=this.page.related.limit&&(t.related=this.page.related.limit),e.__super__.defaultPages.apply(this,arguments),o.assign(this.page.related,{limit:t.related||0})},e.prototype.defaults=function(){return o.defaults(e.__super__.defaults.apply(this,arguments),{category:"front"})},e.prototype.bustCache=function(){return this.post({url:this.domain("sorta")+"/bust_cache"})},e.prototype.list=function(){var t;return t=""+this.category,this.module?t+"/"+this.module:t},e.prototype.addBody=function(t){var e;return e=this.m(i.Bodies,t.body),e.related.add({data:t.related}),e},e.prototype.strippedData=function(t,e){var r,n,s,a,p,c,u,h;if(null==e&&(e={}),h=["labels"],s=["4:3","2:1","3:1"],c={titles:["large"],body_widgets:["banner","primary"]},n={crops:{banner:s,primary:s},overrides:["link","credit","source"]},e.recent?h.push(["primary_label"]):(c.abstracts=["dek"],p=["3:4","2:1"],n.crops.banner=n.crops.banner.concat(p),n.crops.primary=n.crops.primary.concat(p)),r=t.body?o.assign({},t.body,{related:{bodies:t.related}}):t,u=this.m(i.Bodies,r),!e.user||!u.differentAuthor())return a=u.strippedData({includes:c,taxonomy:h,body_widgets:n,omits:["flags","sections","updated_at"].concat(e.omits||[])}),e.taxonomy===!1?a=o.omit(a,["taxonomy"]):a.taxonomy||(a.taxonomy=this.m(i.Taxonomy,r.taxonomy).strippedData()),{related:a.related.bodies,body:o.omit(a,["related"])}},e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(93),i={Paragraphs:r(66),Bodies:r(70),Label:r(83),Image:r(67)},o={Image:r(57),String:r(58)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.update({label:this.label,evergreen_bodies:this.evergreen_bodies})}return p(e,t),e.prototype.type="topic",e.prototype.published=!0,e.prototype.api=function(){var t;return t=a.route.buildQueryString(this.queryParams()),this.domain("diplomat")+"/labels/"+this.permalink()+"/bodies?"+t},e.prototype.add=function(){return e.__super__.add.apply(this,arguments).then(function(t){return function(e){return s.defaults(e,{data:{}}),t.update(s.pick(e.data,["label","evergreen_bodies"])),e}}(this))},e.prototype.update=function(t){var e;return null==t&&(t={}),(e=t.label)&&(this.setImage(e.widget),this.setLabel(e)),this.addEvergreens(t.evergreen_bodies)},e.prototype.defaults=function(){return s.defaults(e.__super__.defaults.apply(this,arguments),{label:{},evergreen_bodies:[]})},e.prototype.defaultPage=function(){return{bodies:{},evergreen_bodies:{}}},e.prototype.defaultPages=function(){var t;return null!=this.page.evergreen_bodies.limit&&(t=this.page.evergreen_bodies.limit),e.__super__.defaultPages.apply(this,arguments),s.assign(this.page.evergreen_bodies,{limit:t||5})},e.prototype.getLinks=function(){return this.links},e.prototype.setLabel=function(t){var e,r;if(this.label=this.m(i.Label,t),!this.widget().url.length&&(r=s.random(0,this.bodies.length-1),e=this.bodies[r]))return this.label.widget=e.primaryPhoto().widget},e.prototype.addEvergreens=function(t){return null==t&&(t=[]),this.evergreen_bodies=s.uniq(this.evergreen_bodies.concat(s.map(t,function(t){return function(e){return t.addBody(e)}}(this),"id")))},e.prototype.addBody=function(t){return this.m(i.Bodies,this.strippedData(t))},e.prototype.meta=function(t){var e;return e=this.pageUrl(),s.assign(this.label.meta(t),{url:e,canonical:e,pagination:this.pagination()})},e.prototype.breadcrumbs=function(){var t,e,r;return r="/topics",t=this.permalink()[0],(null!=t?t.match(/[0-9]/):void 0)&&(t="0-9"),s.without([{href:r+"/a",text:"All Topics"},t?{href:this.letterLink(t),text:t.toUpperCase()}:void 0,(e=this.title())?{href:this.url(),text:e}:void 0],null,void 0)},e.prototype.letterLink=function(t){return t||(t=this.permalink()[0],(null!=t?t.match(/[0-9]/):void 0)&&(t="0-9")),"/topics/"+t},e.prototype.socialTitle=function(){return this.title()},e.prototype.socialDescription=function(){return this.description()},e.prototype.socialImage=function(t){var e,r;return null==t&&(t={}),r=this.widget(),e=r.crop("2:1")||r.crop(),o.Image.robotsImage(e,t)},e.prototype.pageUrl=function(t){var e;return null==t&&(t=this.getPage()),e=this.url(),1===t?e:e+"/page/"+t},e.prototype.pagination=function(){return e.__super__.pagination.call(this,"bodies")},e.prototype.nextPage=function(){return this.next()},e.prototype.previousPage=function(){return this.previous()},e.prototype.url=function(){return this.canonical()},e.prototype.canonical=function(){return this.label.canonical()},e.prototype.setImage=function(t){return t instanceof i.Image||(t=this.m(i.Image,t)),this.label.widget=t},e.prototype.widget=function(){return this.label.widget},e.prototype.title=function(){return this.label.name},e.prototype.keywords=function(){return this.label.meta_keywords},e.prototype.section=function(){return this.graph()},e.prototype.graph=function(){return{children:function(t){return function(){var e,r,n;return n=t.description(),r=t.label.description_html.split("<br>"),e=r.length-1,s.map(r,function(r,o){var s,a;return a="<p>",s="</p>",0===o&&(a=""),o===e&&(s=""),t.m(i.Paragraphs,{position:o,content_md:n,content_html:""+a+r+s})})}}(this)}},e.prototype.description=function(t){return null==t&&(t=!1),t&&this.label.meta_description?this.label.meta_description:this.label.description},e.prototype.descriptionHtml=function(){return o.String.stripIllegals(this.label.description_html)},e.prototype.permalink=function(){return this.label.permalink},e.prototype.jsonBodies=function(t){return null==t&&(t={}),s.defaults(t,{data:{}}),e.__super__.jsonBodies.call(this,{data:t.data.bodies||t.data})},e.prototype.jsonData=function(t){var r,n;return r=e.__super__.jsonData.call(this,{links:t.links,data:t.data.bodies}),n=t.data.label,n instanceof i.Label||(n=this.m(i.Label,n)),n.widget=this.widget(),r.data={bodies:r.data,label:n.strippedData(),evergreen_bodies:this.diffsyncData(t.data.evergreen_bodies,!0)},r},e.prototype.strippedData=function(t,e){var r,n;return t instanceof i.Bodies||(r=this.m(i.Bodies,t)),n=["flags","sections","article_type"],e&&n.push("taxonomy"),r.strippedData({omits:n,body_widgets:{crops:{banner:["4:3","2:1","3:1"]},overrides:["link","credit","source"]},includes:{titles:["large"],body_widgets:["banner","primary"]}})},e.prototype.noads=s.noop,e.prototype.pixel=s.noop,e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(105),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.api=function(t){return this.domain("diplomat")+"/bodies/search?"+this.apiQuery(t)},e.prototype.add=function(t){return e.__super__.add.call(this,t,!1)},e.prototype.defaultPage=function(){return i.defaults(this.page,{bodies:{}}),i.defaults(this.page.bodies,{limit:10,offset:parseInt(this.page.bodies.offset,10)||0}),{}},e.prototype.setPages=function(t){return null==t&&(t={}),e.__super__.setPages.call(this,i.assign(t,{key:"bodies"}))},e.prototype.pagination=function(){var t,e;return t=parseInt(this.page.bodies.offset,10)||0,e={pages:this.pages,page:Math.floor(t/this.page.bodies.limit)+1}},e.prototype.setPage=function(t){var e;if(null!=t)return e=parseInt(t,10)||1,this.page.bodies.offset=(e-1)*this.page.bodies.limit},e.prototype.queryParams=function(){var t;return t=e.__super__.queryParams.apply(this,arguments),t.page=i.omit(t.page,["number"]),this.validPageNumber()||(t.page.bodies.offset=0),t},e.prototype.gotoPage=function(t,e){var r,n,i;if(!(this.fetching()||t>this.pages))return null==e&&(e=this.page.bodies.limit),i=this.paginationLink("first",e),r=(t-1)*e,n="page[bodies][offset]="+r,i=i.replace(/page\[bodies\]\[offset\]=\d+/,n),this.get({url:i},this.should_add_pagination)},e.prototype.replaceSize=function(t,e){var r;return t&&e&&(r="page[bodies][limit]="+e,t=t.replace(/page\[bodies\]\[limit\]=\d+/,r)),t},e.prototype.validPageNumber=function(){if(null!=this.page.bodies.offset&&!i.isNaN(this.page.bodies.offset))return!0},e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;p=r(16),a=r(24),o=r(23),i={Channel:r(110)},s={Authors:r(111)},n=function(t){function e(){this.reset=c(this.reset,this),this.getAuthors=c(this.getAuthors,this);var t;e.__super__.constructor.apply(this,arguments),t=this.m(i.Channel),this.server||(t.add(isomithric.channel,!1),t.addAuthors(isomithric.authors)),a.assign(this,{json:{},model:t,stores:{authors:s.Authors.get(this.server)}})}return u(e,t),e.cache_key="channel",e.prototype.get=function(t){return this.model=this.m(i.Channel,t),this.model.get().then(function(t){return function(e){return t.getAuthors(),t.server&&(t.json=t.model.jsonData(e)),e}}(this))},e.prototype.nextPage=function(){var t;return null!=(t=this.model.nextPage())?t.then(this.getAuthors):void 0},e.prototype.getAuthors=function(){var t;return t=a.map(this.model.bodies,function(t){return function(e){var r;return r=e.author().id,t.stores.authors.fetch({id:r}).then(function(){return e.author(t.stores.authors.models[r])})}}(this)),p.sync(t).then(p.redraw)},e.prototype.reset=function(){return this.model=this.m(i.Channel)},e}(o),t.exports=o.export(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(93),i={Bodies:r(70),Channel:r(89)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.channel=this.m(i.Channel,this.channel),o.defaults(this,{related_type:"top_by_facebook"})}return a(e,t),e.prototype.type="channel",e.prototype.api=function(){var t;return t=s.route.buildQueryString(this.queryParams()),this.domain("diplomat")+"/channels/"+this.permalink()+"/bodies?"+t},e.prototype.defaultPage=function(){return{bodies:{},related:{}}},e.prototype.defaultPages=function(){var t;return t={},null!=this.page.bodies.limit&&(t.body=this.page.bodies.limit),null!=this.page.related.limit&&(t.related=this.page.related.limit),e.__super__.defaultPages.apply(this,arguments),o.assign(this.page.bodies,{limit:t.body||1}),o.assign(this.page.related,{limit:t.related||8})},e.prototype.addBody=function(t){return this.m(i.Bodies,this.strippedData(t))},e.prototype.getLink=function(t,r){var n;return n=e.__super__.getLink.call(this,t,r),n.replace(/related_type=([^&]*)/,"related_type="+this.related_type)},e.prototype.url=function(){return this.channel.url()},e.prototype.permalink=function(){return this.channel.permalink},e.prototype.canonical=function(){return this.channel.canonical()},e.prototype.queryParams=function(){return o.assign(e.__super__.queryParams.apply(this,arguments),{related_type:this.related_type})},e.prototype.strippedData=function(t){return t.body&&(t=o.assign({},t.body,o.omit(t,["body"]))),t.related.bodies||(t.related={bodies:t.related}),t instanceof i.Bodies||(t=this.m(i.Bodies,t)),t.strippedData({article:!0})},e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};p=r(16),a=r(24),o=r(23),i={Person:r(63),People:r(112)},s={Deferred:r(96)},n=function(t){function e(){var t,r,n;e.__super__.constructor.apply(this,arguments),this.server||(t=isomithric.authors||{},r=a.mapValues(t,function(t){return function(e){return t.m(i.Person,e)}}(this)),(n=t.order)&&(this.order=n)),a.assign(this,{fetched_all:!1,models:r||{}})}return c(e,t),e.cache_key="author",e.prototype.guest_authors=["58-van-winkle-s","63-wait-but-why","64-inverse-staff","65-zerply","67-dylan-love","131-benjamin-kratsch","206-the-conversation","274-evannex-dot-com"],e.prototype.fetchAll=function(t){var e;return null==t&&(t=!0),this.fetched_all?s.Deferred.resolved():(e=this.m(i.People,{guests:t}),e.get().then(function(t){return function(){return t.fetched_all=!0,a.each(e.models,function(e){return t.models[e.id]=e}),p.redraw(!0)}}(this)))},e.prototype.fetch=function(t){var e,r;return e=p.deferred(),t instanceof i.Person||(t=this.m(i.Person,t)),this.models[t.id]?this.models[t.id].fetch_promise?this.models[t.id].fetch_promise.then(function(t){return function(t){return e.resolve(t),t}}(this)):e.resolve(this.models[t.id]):(r=t.get(),t.fetch_promise=r,this.models[t.id]=t,null!=r&&r.then(function(r){return function(n){return t=r.m(i.Person,n.data),r.models[t.id]=t,e.resolve(t),t}}(this))),e.promise},e.prototype.fetchAuthors=function(t){var e,r;if(null!=t?t.length:void 0)return e=this.m(i.Person),null!=(r=e.get({ids:t}))?r.then(function(t){return function(e){return a.forEach(e.data,function(e){var r;return r=t.m(i.Person,e),t.models[r.id]=r}),e}}(this)):void 0},e.prototype.jsonData=function(t){return a.mapValues(this.models,function(e){return e.strippedData(t)})},e.prototype.get=function(t){var e;if(e=this.models[t])return e},e.prototype.authors=function(){return a.reject(this.models,function(t){return function(e){var r;return e.robot&&(r=e.id,h.call(t.guest_authors,r)<0)}}(this))},e}(o),t.exports=o.export(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r(24),a=r(16),o=r(64),n={Person:r(63)},t.exports=i=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{guests:!1,section:"Staff,Writers",filter:"Admin,Editor,Writer"}),this.params={filter:{role:this.filter,section:this.section,deleted:this.deleted||!1}},this.guests||(this.params.filter.robot=this.robot||!1)}return p(e,t),e.prototype.type="people",e.prototype.api=function(){return this.domain("diplomat")+"/users?"+a.route.buildQueryString(this.params)},e.prototype.get=function(){return e.__super__.get.call(this).then(function(t){return function(e){var r;return r=s.sortBy(e.data,"first_name"),t.models=s.map(r,function(e){return t.m(n.Person,e)})}}(this))},e}(o)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;p=r(16),a=r(24),o=r(23),n={Article:r(70)},s={Authors:r(111)},i=function(t){function e(){this.reset=c(this.reset,this),e.__super__.constructor.apply(this,arguments),a.assign(this,{models:[],fetching:p.prop(!1),stores:{authors:s.Authors.get(this.server)}})}return u(e,t),e.cache_key="related",e.prototype.reset=function(){return this.models=[],this.fetching(!1)},e.prototype.get=function(t){var e;return null==t&&(t={}),this.fetching(!0),e=this.m(n.Article,t),this.models.push(e),e.get().then(function(t){return function(r){return t.fetching(!1),t.getAuthor(e),r}}(this),function(t){return function(e){return t.fetching(!1),e}}(this))},e.prototype.getAuthor=function(t){var e;return e=t.author().id,this.stores.authors.fetch({id:e}).then(function(r){return function(){return t.author(r.stores.authors.models[e]),p.redraw()}}(this))},e}(o),t.exports=o.export(i)},function(t,e,r){var n,i,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r(16),o=r(24),i=r(23),n=function(t){function e(){this.jwplayer=a(this.jwplayer,this);var t;e.__super__.constructor.apply(this,arguments),t={},this.server||(o.forEach(isomithric.scripts,function(e,r){return t[r]=e}),window[this.onloadName("jwplayer")]=this.jwplayer),o.assign(this,{callbacks:{},sources:t})}return p(e,t),e.cache_key="scripts",e.prototype.json=function(){return this.sources},e.prototype.loadFromModel=function(t,e){var r;return e=e||t.script(),r=t.provider(),t.isRedditComment()&&(r="reddit-comments"),this.load(e,r+"-script")},e.prototype.load=function(t,e){var r,n,i;if(null==e&&(e=""),t&&(r=(null!=(n=t.match(/id=['"]([^'"]*)['"]/))?n[1]:void 0)||e.toLowerCase(),!this.sources[r]&&!r.match(/^facebook/)&&(i=t.match(/src=['"]([^'"]*)['"]/)[1])&&(this.sources[e]=i,!this.server)))return this.insert(i,r)},e.prototype.insert=function(t,e){var r,n;if(!this.server&&!document.getElementById(e))return n=e.replace(/-script/,""),r=document.createElement("script"),r.id=e,document.body.appendChild(r),r.onload=function(t){return function(){if("function"==typeof t[n])return t[n]()}}(this),r.src=t},e.prototype.onload=function(t,e){var r;if("function"==typeof e)return(r=this.callbacks)[t]||(r[t]=[]),this.callbacks[t].push(e)},e.prototype.jwplayer=function(){return this.runCallbacks("jwplayer")},e.prototype.runCallbacks=function(t){return o.forEach(this.callbacks[t],function(t){return t()})},e.prototype.onloadName=function(t){return"inverse-"+t+"-onload"},e}(i),t.exports=i.export(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),o=r(23),n={Channels:r(116),Categories:r(117)},i=function(t){function e(){var t,r;e.__super__.constructor.apply(this,arguments),this.server||(r={models:isomithric.channels},t={models:isomithric.categories}),s.defaults(this,{json:{},section:null,loaded:!1,callbacks:[],fetching:!1,menu:a.prop(null),channels:this.m(n.Channels,r),categories:this.m(n.Categories,t)})}return p(e,t),e.cache_key="navigation",e.prototype.onload=function(t){if("function"==typeof t)return this.loaded?t():this.callbacks.push(t)},e.prototype.get=function(){var t,e,r;return e=[],t=a.deferred(),r=function(e){return function(){return e.loaded=!0,s.each(e.callbacks,function(t){return t()}),t.resolve()}}(this),this.server?(e=[this.getChannels(),this.getCategories()],a.sync(e).then(r,t.reject)):r(),t.promise},e.prototype.updateChannels=function(){if(!this.updated)return this.updated=!0,this.getChannels(!0).then(a.redraw)},e.prototype.getChannels=function(t){return this.fetching=!0,this.channels.get(t).then(function(t){
return function(e){return t.fetching=!1,e=t.channels.jsonData(e),t.server&&(t.json.channels=e.data),e}}(this))},e.prototype.getCategories=function(){return this.categories.get().then(function(t){return function(e){return e=t.categories.jsonData(),t.server&&(t.json.categories=e),e}}(this))},e.prototype.reset=function(){return this.menu(null),this.section=null},e.prototype.meta=function(t,e){return e?this.channels.meta(t):this.categories.meta(t)},e.prototype.social=function(t,e){return e?this.channels.social(t):this.categories.social(t)},e.prototype.redirect=function(t){var e;return(e=this.categories.redirect(t))?e:this.channels.redirect(t)},e.prototype.setSection=function(t){if(t)return t.permalink&&(t=t.permalink),this.section=this.categories.section(t,!1)||this.channels.find(t)},e}(o),t.exports=o.export(i)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};o=r(24),n=r(87),i={Bodies:r(71),Channel:r(89)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{include_bodies:!1}),this.channels&&(this.add(this.channels),this.channels=null)}return s(e,t),e.prototype.api=function(){return e.__super__.api.apply(this,arguments)+"/channels?include_bodies="+this.include_bodies},e.prototype.diffsyncData=function(){return{channels:e.__super__.diffsyncData.apply(this,arguments)}},e.prototype.model=function(){return i.Channel},e.prototype.get=function(t){return this.include_bodies=t,e.__super__.get.apply(this,arguments)},e.prototype.modelData=function(t){var e;return t.body?(e=this.strippedData(t),e.body=this.m(i.Bodies,t.body),e):t},e.prototype.jsonData=function(t){return t.links?{links:t.links,data:o.map(t.data,function(t){return function(e){return t.strippedData(e)}}(this))}:t},e.prototype.strippedData=function(t){var e,r;return r=this.m(i.Channel,t.channel||t),t.body&&(e=this.m(i.Bodies,t.body)),t={channel:r.strippedData()},e&&(t.body=e.strippedData({omits:["labels","sections","abstracts"],includes:{titles:["large"],body_widgets:["banner","primary"]}})),t},e.prototype.add=function(t){return e.__super__.add.apply(this,arguments),this.models(this.sorted())},e.prototype.sorted=function(t){var e,r;return null==t&&(t=this.models()),e=!1,r=o.sortBy(t,function(t){return t.body?(e=!0,new Date(t.body.publish_at)):t.name}),e?r.reverse():r},e.prototype.sections=function(){return o.reject(this.models(),function(t){return function(e){var r;return r=e.permalink,p.call(t.deprecated,r)>=0}}(this))},e.prototype.archived=function(){return o.filter(this.models(),function(t){return function(e){var r;return r=e.permalink,p.call(t.deprecated,r)>=0}}(this))},e.prototype.deprecated=["skunkworks"],e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(87),i={Category:r(91)},t.exports=function(t){function e(t){var r;null==t&&(t={}),r=t.categories,t=o.omit(t,["categories"]),e.__super__.constructor.apply(this,arguments),this.add(r),o.assign(this.redirects,{news:"miscellaneous",none:"miscellaneous","life-work":"culture","science-tech":"innovation"})}return s(e,t),e.prototype.api=function(){return e.__super__.api.apply(this,arguments)+"/categories"},e.prototype.section=function(t,e){var r;if(null==e&&(e=!0),t)return e&&(r=this.static(t))?r:("news"!==t&&"miscellaneous"!==t||(t="none"),this.find(t))},e.prototype.sections=function(t){return o.reject(this.models(),function(t){return t.hidden()})},e.prototype.categories=function(){return o.reject(this.models(),function(t){return"labs"===t.permalink})},e.prototype.diffsyncData=function(){return{categories:e.__super__.diffsyncData.apply(this,arguments)}},e.prototype.meta=function(t){var r;if(t)return(r=this.static(t))?r:e.__super__.meta.call(this,t)},e.prototype.static=function(t){return"labs"===t||t.labs?this.labs():"home"===t||t.home?this.home():void 0},e.prototype.model=function(){return i.Category},e.prototype.labs=function(){return o.assign({},this.home("/labs","Inverse Labs"),{labs:!0,keywords:"inverse, news, TV, movies, music, digital culture, science, tech",description:"Where the Inverse staff talks about the future of media and tech."})},e.prototype.home=function(t,e){return t||(t="/"),e||(e="Inverse"),{url:t,home:!0,name:e,title:e,canonical:t,permalink:t,image:this.ogImage(),keywords:"science, innovation, movies, music, technology, entertainment, video games, space, superheroes, comics, future",description:"Inverse covers the latest news on science, innovation, entertainment, technology and culture by asking: What could happen next?"}},e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};p=r(16),a=r(24),o=r(23),n={Newsletter:r(119)},s={Cookies:r(32)},i=function(t){function e(){var t,r,i,o;e.__super__.constructor.apply(this,arguments),a.assign(this,{json:{},list:null,full:!1,callbacks:[],submitted:p.prop(!1),model:this.m(n.Newsletter),cookies:{lists:[],closed:!1,prefix:"newsletter"}}),this.server||(i=isomithric.newsletter||{},this.full=i.full,this.model.newsletters=i.newsletters||[],r=new s.Cookies,t=r.get(this.cookie("closed")),o=r.get(this.cookie("lists"))||"",a.assign(this.cookies,{lists:o.split(","),closed:"true"===t}),a.assign(this,{default_list:i.id||"",default_list_name:i.name||""}))}return c(e,t),e.cache_key="newsletter",e.prototype.defaultList=function(t){return null!=t&&(this.default_list_name=this.model.defaultList(t),this.default_list=this.model.defaultID(this.default_list_name),this.server&&a.assign(this.json,{id:this.default_list,name:this.default_list_name})),this.default_list},e.prototype.resetLists=function(){if(this.model.newsletters.length&&null==this.model.newsletters[0].description)return this.model.newsletters=[],this.promise=null},e.prototype.reset=function(){return this.submitted(!1),a.assign(this,{list:null,default_list:"",default_list_name:""})},e.prototype.get=function(t){var e,r;return r=this.server||t&&!this.full,t&&(this.full=!0),r?this.promise=null:this.promise||(e=p.deferred(),this.promise=e.promise,e.resolve()),this.promise?this.promise:this.promise=this.model.get().then(function(e){return function(){return e.setJson(t)}}(this))},e.prototype.setJson=function(t){var e;if(this.server)return e=t?this.model.newsletters:a.map(this.model.newsletters,function(t){return a.pick(t,["id","title","permalink"])}),a.assign(this.json,{full:t,newsletters:e})},e.prototype.newsletters=function(){return this.model.newsletters},e.prototype.cookied=function(t){return t||(t=this.list||this.default_list),!!this.cookies.closed||(t?h.call(this.cookies.lists,t)>=0:void 0)},e.prototype.setCookie=function(t,e){var r,n,i,o;if(r=this.cookie(t)){if(o=86400,"closed"===t)i=14,n=!0,this.cookies.closed=n;else if("lists"===t){if(!e)return;i=365,this.cookies.lists=this.uniqueLists(e),n=this.cookies.lists.join(",")}return(new s.Cookies).set(r,n,o*i,"/")}},e.prototype.uniqueLists=function(t){return a.uniq(a.without(this.cookies.lists.concat(t),"",null,void 0))},e.prototype.cookie=function(t){if("prefix"!==t)return this.cookies.prefix+"_"+t},e.prototype.title=function(){switch(this.default_list_name){case"musk-reads":return["Get a weekly round-up of the most essential","Elon Musk news sent to your inbox."].join(" ");case"streaming":return["Stop scrolling endlessly through Netflix.","Get our streaming recommendations sent to your inbox."].join(" ");case"science-innovation":return"Get stories that spark curiosity sent straight to your inbox.";default:return["The revolution will not be televised.","It'll be sent to your inbox by us."].join(" ")}},e}(o),t.exports=o.export(i)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),i=r(24),n=r(64),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.email=o.prop(this.email||""),i.defaults(this,{newsletters:[]})}return s(e,t),e.prototype.type="lists",e.prototype.private=!1,e.prototype.email_regex=/^.+@.+\..+$/,e.prototype.api=function(){return this.makeOrigin(this.domain("mailman")+"/lists")},e.prototype.postApi=function(){var t;return t=this.makeOrigin(this.domain("mailman")+"/subscribers"),t.match(/^http:/)?t.replace(/^http:/,""):t},e.prototype.makeOrigin=function(t){return t.replace(/(\.origin)?(\.stage\d*)?\.inverse/i,".origin$2.inverse")},e.prototype.get=function(){return e.__super__.get.apply(this,arguments).then(function(t){return function(e){return null==e&&(e={}),t.newsletters=i.sortBy(e.data,function(t){return t.title.length}),e}}(this))},e.prototype.valid=function(){return this.email_regex.test(this.email())},e.prototype.params=function(){var t;return t={email:this.email()},this.lists&&(t.lists=this.lists),t},e.prototype.newsletterIds=function(t){var e;return e=i.map(t,function(t){return function(e){var r;if(r=i.find(t.newsletters,function(t){return e===t.id||e===t.permalink}))return r.id}}(this)),i.without(e,null)},e.prototype.defaultID=function(t){var e;return e=this.newsletter(t),e||(e=this.newsletter(this.defaultList())),e?e.id:"c95f0ce2b010b75f61149fb4a91dc948"},e.prototype.defaultList=function(t){return t?t:"science-innovation"},e.prototype.newsletter=function(t){return i.find(this.newsletters,function(e){return e.permalink===t})},e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;p=r(16),a=r(24),n=r(121),"undefined"!=typeof document&&null!==document||(c=r(125).versions),o={Ads:r(39),Banner:r(126),Stream:r(103),Archive:r(127),Authors:r(111),Channel:r(109),Related:r(113),Scripts:r(114),Bootstrap:r(128),Dashboard:r(129),Navigation:r(115),Newsletter:r(118)},i={Parsely:r(130)},s={String:r(58)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),a.forEach(this.stores,function(t){return function(e){return t[e]=o[a.capitalize(e)].get(t.server)}}(this))}return u(e,t),e.prototype.stores=["ads","banner","stream","archive","authors","channel","related","bootstrap","dashboard","navigation","newsletter"],e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.www_domain=this.domain().urlShouldBe("www"),a.forEach(this.state.stores,function(t){return function(e){return t[e]=t.state[e]}}(this))}return u(e,t),e.prototype.render=function(){return[this.doctype(),HTML({lang:"en"},[HEAD([this.common(!0),this.icons(),this.rss(),this.robots(),this.preconnect(),this.preload(),this.styles(),this.schema()]),BODY([this.fbDiv(),this.layout(),this.analytics(),new i.Parsely(this.server).render(),this.javascripts()])])]},e.prototype.preconnect=function(){var t;return t=[this.imgix(),"//www.google-analytics.com","//sb.scorecardresearch.com","//secure.quantserve.com","//connect.facebook.net","//"+this.accounts.parsely.script,this.accounts.keywee.domain,this.accounts.simplereach.domain],a.map(t,function(t){return function(e){return t.crossoriginLink({href:e,rel:"preconnect"})}}(this))},e.prototype.preload=function(){var t,e,r,n;return e=this.isCms()?"cms":"inline",n=a.map(this.jsPreloads(),function(t){return LINK(t)}),r=a.map(this.fontPreloads(),function(t){return function(e){return t.crossoriginLink(e)}}(this)),e=c["css/"+e+".css"],t=LINK({as:"style",rel:"preload",href:""+this.www_domain+e}),n.concat(r).concat([t])},e.prototype.jsPreloads=function(){var t,e,r;return e=this.www_domain,t={as:"script",rel:"preload"},r=a.without(["head.js",this.isCms()?void 0:"ads.client.js",this.clientFile()],void 0),a.map(r,function(r){return a.assign({},t,{href:""+e+c[r]})})},e.prototype.fontPreloads=function(t){var e,r,n;return n=this.www_domain+"/fonts/",e=this.isCms()?"cms.":"",r=a.without(["oswald-v13-latin-300.woff2",this.app.articlePage()?"oswald-v13-latin-regular.woff2":void 0,e+"icomoon.woff2?"+this.fontVersion()],void 0),a.map(r,function(t){return{as:"font",rel:"preload",type:"font/woff2",href:""+n+t}})},e.prototype.fontVersion=function(){return this.isCms()?"pjll02":"8ek5uy"},e.prototype.crossoriginLink=function(t){var e;return null==t&&(t={}),e=a.map(t,function(t,e){return e+'="'+t+'"'}),p.trust("<link "+e.join(" ")+" crossorigin>")},e.prototype.fbDiv=function(){return DIV({id:"fb-root"})},e.prototype.icons=function(){return[this.favico(),this.favs(),this.appleTouch()]},e.prototype.favico=function(){return LINK({rel:"shortcut icon",type:"image/x-icon",href:this.iconsPath()+"favicon.ico"})},e.prototype.favs=function(){var t,e;return t=this.iconsPath(),e=["16x16","32x32","96x96"],a.map(e,function(e){return LINK({rel:"icon",sizes:e,type:"image/png",href:""+t+e+".png"})})},e.prototype.appleTouch=function(){var t,e,r;return r="120x120",t=this.iconsPath(),e=["","152x152","167x167","180x180"],a.map(e,function(e){var n;return n={},e.length&&(n.sizes=e),e.length||(e=r),a.assign(n,{rel:"apple-touch-icon",href:""+t+e+".png"}),LINK(n)})},e.prototype.rss=function(){var t,e;return e=this.www_domain+"/feed/",t=["articles/1.rss","channels/1.rss","editors_picks.rss"],a.map(t,function(t){return LINK({rel:"alternate",type:"application/atom+xml",href:""+e+t})})},e.prototype.robots=function(){var t;if(t=this.robotsRules())return META({name:"robots",content:t})},e.prototype.robotsRules=function(){var t,e;if(e=this.domain().isOrigin()||!this.isProduction(),t=["noindex","nofollow"],this.app.no_index||e)return e?t.join(","):t[0]},e.prototype.styles=function(){var t,e,r,n,i;return t=this.isCms(),n="main",t&&(n="cms"),r=this.www_domain+"/css/",i=c["css/"+n+".css"],n=this.stylesheet(""+this.www_domain+i,!t),t?n:(e=c["css/inline.css"],[this.stylesheet(""+this.www_domain+e,!1),this.noscriptStyles(),n])},e.prototype.noscriptStyles=function(){return NOSCRIPT([p.trust("<style>.nojs-none{display: none;}</style>")])},e.prototype.headScript=function(){var t;return t="head.js",[p.trust('<script>document.createElement("picture");</script>'),this.script(""+this.www_domain+c[t])]},e.prototype.javascripts=function(){return[this.headScript(),this.adScripts(),this.bootstraps(),this.inverseScripts(),this.fbScript(),this.scriptBootstraps(),this.parselyScript(),this.skimlinksScript(),this.stackCommerce()]},e.prototype.adScripts=function(){var t,e,r;if(!this.isCms())return t="ads.client.js",r={page:this.app.page,platform:"site",production:this.isProduction(),section:null!=(e=this.navigation.section)?e.permalink:void 0},this.ads.update(r),[this.script(this.biddingScript()),this.script("https://www.googletagservices.com/tag/js/gpt.js"),p.trust("<script>var googletag = googletag || {};googletag.cmd = googletag.cmd || [];window.ad_targets = "+JSON.stringify(this.ads.targeting)+";</script>"),this.script(""+this.www_domain+c[t])]},e.prototype.biddingScript=function(){return"//js-sec.indexww.com/ht/p/185421-36683122433496.js"},e.prototype.inverseScripts=function(){return a.map(this.inverseFiles(),function(t){return function(e){return t.script(e)}}(this))},e.prototype.inverseFiles=function(){var t,e,r;return t=this.isCms(),e=this.www_domain,r=a.without([t?"vendor.js":void 0,this.clientFile()],void 0),a.map(r,function(t){return""+e+c[t]})},e.prototype.clientFile=function(){var t;return t="client",this.isCms()?t+".cms.js":t+".js"},e.prototype.analytics=function(){return this.analyticsCode()},e.prototype.scriptBootstraps=function(){return a.map(this.scripts.sources,function(t){return function(e,r){return t.script(e,r,t.scripts[r.replace(/-script/,"")])}}(this))},e.prototype.bootstraps=function(){var t,e,r,n;return n=a.without(this.state.stores,"ads","stream","article","authors","navigation"),t={referrer:this.app.referrer,scripts:this.scripts.json(),topic:this.stream.json.topic,error:this.app.error||!1,article:this.article.jsonData(),recent:this.stream.json.recent,stream:this.stream.json.stream,featured:this.stream.json.featured,path:this.server.req.originalUrl,channels:this.navigation.json.channels,categories:this.navigation.json.categories,authors:this.authors.jsonData(this.app.user_page),ads:a.pick(this.ads.targeting,["platform","production"])},(r=this.authors.order)&&(t.authors.order=r),a.forEach(n,function(e){return function(r){return t[r]=e[r].json}}(this)),e=JSON.stringify(t).replace(/<script[^<]*<\/script>/g,""),p.trust("<script>window.isomithric="+s.String.stripIllegals(e)+"</script>")},e.prototype.fbScript=function(){var t;return t="follow"===this.app.static,[p.trust('<script>window.fbAsyncInit=function(){FB.init({appId:"'+this.accounts.facebook.app+'",xfbml:false,version:"v2.12"});window.inverse_fb_init=true; if('+t+") { FB.XFBML.parse(); }};(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = \"//connect.facebook.net/en_US/sdk.js\";fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script>")]},e.prototype.parselyScript=function(){if(!this.isCms()&&this.isProduction())return p.trust('<script>(function(s, p, d) {var h=d.location.protocol, i=p+"-"+s,e=d.getElementById(i), r=d.getElementById(p+"-root"),u=h==="https:"?"'+this.accounts.parsely.script+'":"static."+p+".com";if (e) return;e = d.createElement(s); e.id = i; e.async = true;e.src = h+"//"+u+"/p.js"; r.appendChild(e);})("script", "parsely", document);</script>')},e.prototype.skimlinksScript=function(){return this.script("https://s.skimresources.com/js/114004X1572850.skimlinks.js")},e.prototype.stackCommerce=function(){return"<script>(function (s,o,n,a,r,i,z,e) {s['StackSonarObject']=r;s[r]=s[r]||function(){(s[r].q=s[r].q||[]).push(arguments)},s[r].l=1*new Date();i=o.createElement(n),z=o.getElementsByTagName(n)[0];i.async=1;i.src=a;z.parentNode.insertBefore(i,z)})(window,document,'script','https://www.stack-sonar.com/ping.js','stackSonar');stackSonar('stack-connect-a', '<4848>');</script>"},e.prototype.analyticsCode=function(){var t,e,r,n,i,o,s,a;if(!this.isCms())return o=this.queryString(),s=this.isProduction(),n=this.app.articlePage(),a=this.state.navigation.section,r=!s&&o.ga_debug,n&&(t=this.article.model().gaDimensions()),e=this.accounts.gaCode(t,r),s||o.analytics?(n?i=this.article.model().quantcastLabels():a&&(i=a.displayName().replace(/\s*/g,"")),e.concat([this.accounts.comscoreCode(),this.accounts.quantcastCode(i),this.facebookPixel(),this.keyweePixel(),this.redditPixel(),this.linkedinAnalytics(),this.simplereachCode()])):e},e.prototype.facebookPixel=function(){return p.trust("<!-- Facebook Pixel Code --><script>!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','//connect.facebook.net/en_US/fbevents.js');fbq('init', '"+this.accounts.facebook.pixel+"');fbq('track', 'PageView');fbq('track', 'ViewContent');</script><noscript><img alt=\"Facebook Pixel\" height=\"1\" width=\"1\" style=\"display:none\" src=\"https://www.facebook.com/tr?id="+this.accounts.facebook.pixel+'&amp;ev=PageView&amp;noscript=1"/></noscript><!-- End Facebook Pixel Code -->')},e.prototype.keyweePixel=function(){return p.trust('<script>(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = "'+this.accounts.keywee.domain+this.accounts.keywee.script+"\";fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'keywee-script'));</script>")},e.prototype.redditPixel=function(){return p.trust('<!-- Reddit Conversion Pixel --><script>var i=new Image();i.src="https://alb.reddit.com/snoo.gif?q=CAAHAAABAAoACQAAAAACWQ1QAA==&s=XEpByt_R434fqqGl0DfctKqGILDzrA7eDqfNEeDOv7E=";</script><noscript><img height="1" width="1" style="display:none" src="https://alb.reddit.com/snoo.gif?q=CAAHAAABAAoACQAAAAACWQ1QAA==&s=XEpByt_R434fqqGl0DfctKqGILDzrA7eDqfNEeDOv7E=" alt="reddit pixel"/></noscript><!-- DO NOT MODIFY --><!-- End Reddit Conversion Pixel -->')},e.prototype.linkedinAnalytics=function(){return p.trust('<script type="text/javascript">_linkedin_data_partner_id = "'+this.accounts.linkedin.id+'";</script><script type="text/javascript">(function(){var s = document.getElementsByTagName("script")[0];var b = document.createElement("script");b.type = "text/javascript";b.async = true;b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";s.parentNode.insertBefore(b, s);})();</script><noscript><img height="1" width="1" style="display:none;" alt="linkedin pixel" src="https://dc.ads.linkedin.com/collect/?pid='+this.accounts.linkedin.id+'&fmt=gif" /></noscript>')},e.prototype.simplereachCode=function(){var t;return this.app.articlePage()&&(t=this.article.model().simplereachData()),this.accounts.simplereachCode(t)},e.prototype.isCms=function(){return this.server.req.url.match(/^\/cms/)},e.prototype.isDevelopment=function(){return!1},e.prototype.isProduction=function(){return!0},e.prototype.iconsPath=function(){return"https:"+this.imgix()+"/icons/"},e.prototype.imgix=function(){return"//fsmedia.imgix.net"},e.prototype.stylesheet=function(t,r){return null==r&&(r=!0),r?[LINK({href:t,as:"style",rel:"preload",onload:"this.onload=null;this.rel='stylesheet';"}),NOSCRIPT([e.__super__.stylesheet.apply(this,arguments)])]:e.__super__.stylesheet.apply(this,arguments)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(26),o={App:r(48),Article:r(62),Scripts:r(114)},i={OGTags:r(122)},s={Head:r(56),Fonts:r(123),Schema:r(124),Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.content="",this.app=o.App.get(this.server),this.article=o.Article.get(this.server),this.scripts=o.Scripts.get(this.server)}return c(e,t),e}(n.State),e.View=function(t){function e(t,r){null==r&&(r={}),e.__super__.constructor.apply(this,arguments),this.content=r.content=t.content,this.app=this.state.app,this.article=this.state.article,this.scripts=this.state.scripts,this.accounts=s.Accounts}return c(e,t),e.prototype.doctype=function(){return p.trust("<!doctype html>")},e.prototype.common=function(t){return[this.charset(),this.viewport(),this.referrer(),this.canonical(t),this.rel(),this.metaSEO(),this.ogTags(),this.googlepublisher(),this.fbpages(),this.fbapp(),this.parselyArticleId()]},e.prototype.charset=function(){return META({charset:"utf-8"})},e.prototype.schema=function(){return[this.siteSchema(),this.articleSchema()]},e.prototype.referrer=function(){return META({name:"referrer",content:"unsafe-url"})},e.prototype.googlepublisher=function(){return LINK({rel:"publisher",href:this.accounts.google.page})},e.prototype.fbpages=function(){return META({property:"fb:pages",content:this.accounts.facebook.inverse})},e.prototype.fbapp=function(){return META({property:"fb:app_id",content:this.accounts.facebook.app})},e.prototype.parselyArticleId=function(){if(this.app.articlePage())return META({name:"parsely-post-id",content:this.article.model().id})},e.prototype.viewport=function(){return META({name:"viewport",content:["width=device-width","initial-scale=1","minimum-scale=1"].join(",")})},e.prototype.layout=function(t){return DIV({id:"layout"},[this.content,t])},e.prototype.metaSEO=function(t){var e,r,n,i;return n=this.app.pageData(),i=n.title,r=n.keywords,e=n.description,[t?void 0:TITLE(s.Head.cleanString(i)),META({name:"description",content:s.Head.cleanString(e)}),META({name:"keywords",content:s.Head.cleanString(r)})]},e.prototype.canonical=function(t){var e,r,n;return e=this.app.canonical||""+this.app.www+this.server.req.originalUrl,n=[LINK({rel:"canonical",href:e.replace(/\/page\/1$/,"")})],t&&this.app.canonical&&"article"===this.app.page&&(r=this.app.canonical,r.match(/\/amp\/article\//)||(r=r.replace(/\/article/,"/amp/article")),n.push(LINK({rel:"amphtml",href:r.replace(/\/page\/\d*$/,"")}))),n},e.prototype.rel=function(){if(this.app.rel)return a.map(this.app.rel,function(t,e){if(t)return LINK({rel:e,href:t})})},e.prototype.ogTags=function(){return new i.OGTags(this.server).render()},e.prototype.script=function(t,e,r){var n,i;return null==e&&(e=""),i="",t=' src="'+t+'"',e.length&&(r&&(n=this.scripts.onloadName(e).replace(/-script/,""),i=[' onload="',"if(typeof window['"+n+"'] === 'function') ","{ window['"+n+"'](); }\""].join("")),e='id="'+e+'"'),p.trust("<script async defer "+e+i+t+"></script>")},e.prototype.fonts=function(){var t,e;return e=s.Fonts.fonts,t=a.map(e,function(t){var e;return e=a.map(t.attributes,function(t){return a.without([t.weight,t.style?t.style[0]:void 0],void 0).join("")}),t.name.replace(/\s/g,"+")+":"+e.join(",")}),this.stylesheet("https://fonts.googleapis.com/css?family="+t.join("%7C"))},e.prototype.stylesheet=function(t){return LINK({href:t,type:"text/css",rel:"stylesheet"})},e.prototype.articleSchema=function(){if(this.app.articlePage())return s.Schema.amp=this.app.amp,s.Schema.updateArticle(this.article.model())},e.prototype.siteSchema=function(){return s.Schema.updateSite("/"===this.server.req.originalUrl)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(26),i=r(20),s={Head:r(56),Image:r(57),String:r(58),Markdown:r(59)},o={App:r(48),Article:r(62),Navigation:r(115)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.navigation=o.Navigation.get(this.server),this.article=o.Article.get(this.server).model()}return c(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.article=this.state.article,this.navigation=this.state.navigation}return c(e,t),e.prototype.render=function(){var t,e,r;if(!this.app.no_index){if("function"==typeof(t=this.article).persisted?t.persisted():void 0)r=this.article.socialMeta(),a.assign(r,{url:""+r.base_url+r.url,title:s.Head.cleanString(r.title),description:s.Head.cleanString(r.description)});else if(this.app.social_data)r=this.app.social_data;else{if(!(e=this.navigation.meta(this.app.section)))return;r={url:e.url,title:s.Head.cleanString(e.title),image:s.Image.robotsImage(e.image),description:s.Head.cleanString(e.description)}}return a.flatten(a.map(this.meta(r),function(t){return function(e,r){return a.map(e,function(e,n){if(e)return a.isArray(e)?a.map(e,function(e){return t.metaTag(e,r,n)}):t.metaTag(e,r,n)})}}(this)))}},e.prototype.metaTag=function(t,e,r){var n;return n={content:t},n[e]=r,META(n)},e.prototype.meta=function(t){var e;return e=s.Head.socialProps(t),a.assign(e.property,{"og:site_name":"Inverse"}),t.article&&a.assign(e.property,{"og:type":"article","article:publisher":"https://www.facebook.com/inverse"}),a.assign(e.name,{"twitter:site":"@inversedotcom","twitter:card":"summary_large_image"}),e},e.prototype.url=function(){var t;return t=new i(this.server),[t.urlShouldBe("www"),this.article.url()].join("")},e}(n.View),e}(n)},function(t,e){var r;r=function(){function t(){}return t.prototype.fonts=[{name:"Oswald",attributes:[{weight:300},{weight:400},{weight:700}]},{name:"PT Sans",attributes:[{weight:400},{weight:400,style:"italic"},{weight:700}]}],t}(),t.exports=new r},function(t,e,r){var n,i,o;o=r(24),n={Image:r(57),String:r(58)},i=function(){function t(){}return t.prototype.amp=!1,t.prototype.updateArticle=function(t,e){return[this.article(t,e),this.breadcrumbs(t,e)]},t.prototype.removeArticle=function(){return this.remove("article"),this.remove("breadcrumbs")},t.prototype.updateSite=function(t){return[this.organization(),this.website(t)]},t.prototype.article=function(t,e){return this.update(e,this.articleJson(t),"article")},t.prototype.breadcrumbs=function(t,e){return this.update(e,this.breadcrumbsJson(t),"breadcrumbs")},t.prototype.website=function(t){return this.jsonld(this.websiteJson(t),"website")},t.prototype.organization=function(){return this.jsonld(this.organizationJson(!0),"organization")},t.prototype.articleJson=function(t){var e,r;return e=t.socialWidget(),r=t.canonicalUrl(),{url:r,mainEntityOfPage:r,"@type":"NewsArticle",keywords:t.schemaTags(),publisher:this.organizationJson(),"@context":"http://schema.org",dateModified:t.changedAt(),wordcount:""+t.wordCount(),articleSection:t.categories(),headline:this.cleanString(t.pageTitle()),description:this.cleanString(t.description()),alternativeHeadline:this.cleanString(t.thumbnailTitle()),datePublished:t.publish_at||t.inserted_at,author:this.authorJson(t),image:this.imagesJson(t)}},t.prototype.imagesJson=function(t){var e,r,i;return r=t.socialWidget(),i=this.amp?1200:800,r.persisted()&&r.crop||(r=t.primaryPhoto().widget),r.persisted()&&r.crop?(e=[{width:16,height:9,poi:"entropy"},{width:4,height:3},{width:1,height:1,poi:"entropy"}],o.map(e,function(t){var e,o,s,a;return e=t.width+":"+t.height,s=r.crop(e),o=i*(t.height/t.width),a=n.Image.robotsImage(s,{width:i,format:"jpg"}),t.poi&&(a=a+"&h="+o+"&crop="+t.poi+"&fit=crop"),a})):{}},t.prototype.authorJson=function(t){var e,r;if(r={"@type":"Person"},e=t.guestAuthor())r.name=e;else{if(!(e=t.getAuthor()))return{};o.assign(r,{name:e.fullName(),url:e.canonical()})}return r},t.prototype.organizationJson=function(t){var e;return e={name:"Inverse",foundingDate:"2015","@type":"Organization",url:"https://www.inverse.com","@context":"http://schema.org",logo:{width:"60",height:"241","@type":"ImageObject",url:"https://fsmedia.imgix.net/assets/logo_schema.png"}},t&&o.assign(e,{sameAs:["https://www.facebook.com/inverse","https://www.facebook.com/inversescience","https://www.facebook.com/inverseentertainment","https://www.facebook.com/starwarsoninverse","https://twitter.com/inversedotcom","https://www.instagram.com/inverse/","https://www.instagram.com/inversescience/","https://www.twitch.tv/nextlevelbyinverse","https://www.youtube.com/channel/UCEA0LA7k6hwZM-xocspYQjQ","https://plus.google.com/+Inversedotcom"]}),e},t.prototype.websiteJson=function(t){var e;return e={"@type":"WebSite",name:"Inverse","@context":"http://schema.org",url:"https://www.inverse.com"},t&&o.assign(e,{potentialAction:{"@type":"SearchAction","query-input":"required name=search_term_string",target:"https://www.inverse.com/search/{search_term_string}"}}),e},t.prototype.breadcrumbsJson=function(t){return{"@type":"BreadcrumbList","@context":"http://schema.org",itemListElement:o.map(t.breadcrumbs(),function(t,e){return{"@type":"ListItem",position:e+1,item:{name:t.name,image:t.widget.embed(),"@id":"https://www.inverse.com"+t.url()}}})}},t.prototype.update=function(t,e,r,n){return t?this.updateJson(e,r,n):this.jsonld(e,r)},t.prototype.updateJson=function(t,e){var r,n,i;return i=this.script(e),r=JSON.stringify(t),i?i.innerHTML=r:(n=document.createElement("script"),n.setAttribute("id","jsonld-"+e),n.setAttribute("type","application/ld+json"),
n.innerHTML=this.stripIllegals(r),document.head.appendChild(n))},t.prototype.jsonld=function(t,e){return SCRIPT({id:"jsonld-"+e,type:"application/ld+json"},this.stripIllegals(JSON.stringify(t)))},t.prototype.stripIllegals=function(t){return n.String.stripIllegals(t)},t.prototype.cleanString=function(t){return n.String.cleanString(t)},t.prototype.remove=function(t){var e;if(e=this.script(t))return document.head.removeChild(e)},t.prototype.script=function(t){return document.querySelector("#jsonld-"+t)},t}(),t.exports=new i},function(t,e){},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(16),s=r(24),o=r(23),i={Person:r(63),Banner:r(71)},n=function(t){function e(){var t,r,n,o,p,c,u;e.__super__.constructor.apply(this,arguments),p=i.Banner,this.server?n=this.m(p,n):(o=isomithric.banner,o&&(o=o.body||(null!=(c=o.data)?c[0]:void 0))&&(r=o.created_by,r||(r=null!=(u=o.links)?u.author.linkage.id:void 0),(t=isomithric.authors[r])&&(o.author=this.m(i.Person,t))),n=this.m(p,o)),s.assign(this,{model:a.prop(n)})}return p(e,t),e.cache_key="banner",e.prototype.reset=function(){return this.model(this.m(i.Banner))},e.prototype.formatJsonData=function(t){var e,r,n,i,o,a;return t.body&&t.included&&(n=s.map(t.body.links,function(t){return s.pluck(t.linkage,"id")}),n=s.without(s.flatten(n),void 0),i=s.filter(t.included,function(t){var e;return e=t.id,u.call(n,e)>=0}),e=s.filter(i,function(t){var e;if("body_widgets"===t.type)return t.is_image&&("banner"===(e=t.purpose)||"primary"===e)}),r=null!=(o=e[0].links.widget)&&null!=(a=o.linkage)?a.id:void 0,r&&i.push(s.find(t.included,{id:r}))),{body:t.body,included:i||[]}},e}(o),t.exports=o.export(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(23),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.cache_key="archive",e}(i),t.exports=i.export(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(23),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.cache_key="bootstrap",e}(i),t.exports=i.export(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(23),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.cache_key="dashboard",e}(i),t.exports=i.export(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return DIV({id:"parsely-root",style:{display:"none"}},[SPAN({id:"parsely-cfg","data-parsely-site":i.Accounts.parsely.apikey})])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),n=r(26),i={Stream:r(132),Banner:r(199)},o={App:r(48),Stream:r(103),Navigation:r(115)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.stream=o.Stream.get(this.server),this.navigation=o.Navigation.get(this.server),this.component("banner",i.Banner),this.component("stream",i.Stream)}return a(e,t),e.prototype.fetchStreams=function(t){if(!this.fetched&&!this.server)return this.navigation.onload(function(t){return function(){return t.fetched=!0,t.stream.fetchHomeRecent(),t.stream.fetchHomeFeatured(),t.stream.fetchHomeStream().then(function(e){var r,n;return n=e[0],r=e[1],r.then(s.redraw),t.app.stopNavigating(),s.redraw()})}}(this))},e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.state.fetchStreams(this.dynamic)}return a(e,t),e.prototype.render=function(){return DIV({class:"404"},[this.state.component("banner").render(this.bannerProps()),this.state.component("stream").render({list_length:4})])},e.prototype.bannerProps=function(){return{dek:this.dek(),preload:!0,article:!1,centered:!1,hide_links:!0,class:"stream-banner",title:"Something Went Wrong!",src:"https://fsmedia.imgix.net/assets/404.gif"}},e.prototype.dek=function(){return["We couldn't find what you're looking for,","but here are some stories you might enjoy:"].join(" ")},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),o={Ads:r(39),App:r(48),Screen:r(40),Stream:r(103),Article:r(62)},i={Ad:r(133),Grid:r(140),List:r(153),Slider:r(154),Package:r(167),Related:r(170),Featured:r(171)},s={GA:r(55),Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),a.assign(this,{iab:{},page:1,reload:p.prop(!1),ads:o.Ads.get(this.server),app:o.App.get(this.server),stream:o.Stream.get(this.server),article:o.Article.get(this.server)})}return c(e,t),e}(n.State),e.View=function(t){function e(){this.track=h(this.track,this),this.reverse=h(this.reverse,this),this.onNextPage=h(this.onNextPage,this),this.unload=h(this.unload,this),this.onscroll=h(this.onscroll,this),this.onresize=h(this.onresize,this),this.config=h(this.config,this),e.__super__.constructor.apply(this,arguments),a.defaults(this,{slider:!1,type:"default",list_length:0,reversed:p.prop(!1),articles:{list:[],stream:[],related:[],featured:[]}}),this.app=this.state.app,this.streams=this.state.stream,this.screen=o.Screen,this.id=this.state.component_id,this.models=this.bodiesWithTaxonomies(),this.setArticles()}return c(e,t),e.prototype.ad_positions=[1],e.prototype.bodiesWithTaxonomies=function(){var t,e;return e=this.streams.stream(),t=e.bodies,e.taxonomies?t=a.map(t,function(t){return function(t){var r;return(r=e.taxonomy(t))&&(t.taxonomy=r),t}}(this)):t},e.prototype.setArticles=function(){var t;if(this.article&&(this.models=this.filterArticle(this.models),(t=this.article.related)&&(this.articles.related=this.filterArticle(t.bodies.slice(3,9)))),this.models=a.uniq(this.models,"id"),this.articles.stream=this.models.slice(this.list_length),this.articles.list=this.models.slice(0,this.list_length),!this.hideFeatured())return this.articles.featured=this.featuredArticles()},e.prototype.render=function(){return DIV({config:this.config,class:this.classes([this.class,"stream"])},[this.list(),this.grid(),this.billboard(),this.default()])},e.prototype.list=function(){if(this.list_length)return this.state.lazyComponent("list",this.id,i.List).render({track:this.track,class:this.childClass(),articles:this.articles.list})},e.prototype.grid=function(){if(this.isGrid())return this.state.lazyComponent("grid",this.id,i.Grid).render({track:this.track,page:this.state.page,section:this.section,gradient:this.gradient,class:this.childClass(),articles:this.articles.stream})},e.prototype.billboard=function(){if(this.isBillboard())return a.map(this.articles.stream,function(t){return function(e,r){return[t.banner(e,r),r===t.ad_positions[0]?t.ad("grid",r):void 0]}}(this))},e.prototype.default=function(){if("default"===this.type)return[this.slider(),this.article?void 0:this.ad("content"),this.related(),this.stream()]},e.prototype.slider=function(){return this.state.lazyComponent("slider",this.id,i.Slider).render({track:this.track,article:this.article,class:this.childClass()})},e.prototype.related=function(){if(this.articles.related.length)return this.state.lazyComponent("related",this.id,i.Related).render({track:this.track,reverse:this.reverse,class:this.childClass(),articles:this.articles.related})},e.prototype.stream=function(){return a.map(this.articles.stream,function(t){return function(e,r){return[t.featured(r),r===t.ad_positions[0]?t.ad("grid"):void 0,t.package(e,r)]}}(this))},e.prototype.featured=function(t){var e;if(e||(e=this.articles.featured[t]),e)return this.banner(e,t,"featured")},e.prototype.banner=function(t,e,r){return null==r&&(r="banner"),this.state.lazyComponent(r,t.id,i.Featured).render({track:this.track,model:t,class:this.childClass(),section:this.isBillboard()})},e.prototype.package=function(t,e){var r;return t.related&&(r=t.related.bodies),this.state.lazyComponent("package",t.id,i.Package).render({model:t,track:this.track,models:r,reverse:this.reverse(),class:this.childClass(),include_promo:0===e})},e.prototype.config=function(t,e,r){var n;if(this.state.el=t,!e)return n=this.state.component_id,this.screen.addCallback(n,"resize",this.onresize),this.screen.addCallback(n,"scroll",this.onscroll),this.onresize(),r.onunload=this.unload},e.prototype.onresize=function(){return this.state.rect=s.Dom.rect(this.state.el)},e.prototype.onscroll=function(){if(!this.app.navigating)return this.article&&!this.state.counted&&this.buffered(this.state.rect.top)&&(this.state.counted=!0,s.GA.event("stream","impression",this.state.page),s.GA.pageview(this.article.url()+"/grid",{both:!1})),this.nextPage()},e.prototype.nextPage=function(){var t,e,r;if(this.state.rect.bottom<=this.screen.scroll.top()+this.screen.threshold()&&(e=[],t=this.isGrid(),r={limit:5},t&&(r.limit=12),e.push(this.streams.nextPage("stream",r)),this.articles.featured.length&&e.push(this.streams.nextPage("featured")),e=a.without(e,void 0,null),e.length))return p.sync(e).then(this.onNextPage)},e.prototype.unload=function(){var t;return t=this.state.component_id,this.screen.removeCallback(t,"resize"),this.screen.removeCallback(t,"scroll")},e.prototype.buffered=function(t){var e;return e=44,t<e},e.prototype.onNextPage=function(t){if(t)return this.state.page+=1,s.GA.event("stream","impression",this.state.page),p.redraw()},e.prototype.filterCurrent=function(t){return this.article?a.reject(t,function(t){return function(e){return e.id===t.article.id}}(this)):t},e.prototype.hideFeatured=function(){return this.isGrid()||this.isBillboard()},e.prototype.isGrid=function(){return"grid"===this.type},e.prototype.isBillboard=function(){return"billboard"===this.type},e.prototype.featuredArticles=function(){var t;return t=this.streams.featured().bodies,t.length?t:this.articles.stream.splice(0,1)},e.prototype.reverse=function(){return this.reversed(!this.reversed())},e.prototype.ad=function(t){var e;return e=this.state.component_id+"-"+t,this.state.lazyComponent("ad",e,i.Ad).render({position:t})},e.prototype.palm=function(){return!!this.server||this.screen.palm()},e.prototype.track=function(){var t,e;return t="click",e=this.app.page,"section"===e&&(e=this.app.section),this.app.event(e,{action:t,category:"grid"})},e.prototype.filterArticle=function(t){return a.reject(t,{id:this.article.id})},e.prototype.childClass=function(){return"stream__child"},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,l=function(t,e){return function(){return t.apply(e,arguments)}};c=r(16),p=r(24),n=r(26),i={Link:r(134),Pixel:r(135),Sticky:r(136),Scrollspy:r(137)},s={Ads:r(39),App:r(48),Screen:r(40)},a={Ga:r(55),Dom:r(46)},o={Lg:r(138)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.server||p.assign(this,{disabled:c.prop(!1),ads:s.Ads.get(this.server),app:s.App.get(this.server),scroll:{top:c.prop(null),bottom:c.prop(null),height:c.prop(null)}})}return u(e,t),e.prototype.sponsorData=function(t){var e;return this.sponsor?this.sponsor:(e=this.m(o[p.capitalize(t)]))?this.sponsor={campaign:t,href:e.href(),pixels:e.pixels()}:{}},e}(n.State),e.View=function(t){function e(){this.onresize=l(this.onresize,this),this.onactivate=l(this.onactivate,this),this.onunload=l(this.onunload,this),this.wrapperConfig=l(this.wrapperConfig,this);var t;e.__super__.constructor.apply(this,arguments),this.server||(p.assign(this,{ads:this.state.ads,app:this.state.app,screen:s.Screen}),this.app.cms||(p.defaults(this,{params:{},scrollspy:!0,oop:this.position.match(/^oop/),title:"story continues below",threshold:this.screen.threshold()||1e3}),this.sponsor&&p.assign(this,this.state.sponsorData(this.sponsor)),this.server||(this.threshold=this.screen.threshold()||this.threshold),(t=this.ads.slots[this.position])&&(this.key=t.name,null!=this.state.index?this.refreshAd():(this.state.index=this.ads.counter,this.ads.counter=Math.max(this.ads.counter,this.state.index+1)))))}return u(e,t),e.prototype.render=function(){if(!(this.server||this.app.navigating||this.app.cms)&&this.ads.render&&this.key)return this.wrapper()(this.wrapperProps(),[this.header?DIV({class:"vert__header"},this.title):void 0,this.ad(),this.trackers()])},e.prototype.wrapperProps=function(){var t,e;return t=this.state.ads.class,e={config:this.wrapperConfig,class:this.classes([t,this.class,t+"--"+this.position,this.oop?t+"--oop":void 0,this.flex?"flex flex-centered":void 0])},this.preload||(this.timespy?this.ontimeout(this.onactivate):this.scrollspy&&p.assign(e,this.state.scroll,{tag:this.el,threshold:this.threshold,onactivate:this.onactivate,disabled:this.state.disabled})),e},e.prototype.ad=function(){var t;return this.fake&&this.href?this.link():(t=this.ads.class+"-div",this.stickyWrapper(DIV({id:this.unitId(),class:this.classes([t,this.section?t+"--section":void 0])})))},e.prototype.stickyWrapper=function(t){var e;return this.sticky?(e=this.state.component_id,this.state.lazyComponent("sticky",e,i.Sticky).render({bottom:this.bottom,top:this.state.scroll.top,disabled:this.stickyDisabled,bottom_offset:this.bottom_offset,no_resize_breakpoint:this.no_resize_breakpoint},[t])):t},e.prototype.link=function(){return new i.Link(this.server).render({href:this.href,class:this.ads.class+"__link"})},e.prototype.wrapper=function(){var t,e;return this.preload||!this.scrollspy?this.el||DIV:(e="scrollspy",t=i.Scrollspy,this.state.lazyComponent(e,this.state.component_id,t).render)},e.prototype.wrapperConfig=function(t,e,r){var n,i;if(this.state.el=t,this.config(t,e,r),this.display(),!this.state.initialized){if(this.state.initialized=!0,i=r.onunload,r.onunload=function(t){return function(){return t.onunload(i)}}(this),this.timespy||this.preload||!this.scrollspy)return;return n=this.state.component_id,this.screen.addCallback(n,"resize",this.onresize),this.onresize(),this.state.disabled(!1),r.onunload=function(t){return function(){return t.onunload(i),t.screen.removeCallback(n,"resize")}}(this)}},e.prototype.onunload=function(t){if(t&&t(),this.state.activated=!1,this.state.initialized=!1,!this.fake&&this.state.displayed)return this.state.displayed=!1,window.inverse.ads.destroy(this.displayProps())},e.prototype.onactivate=function(){if(!this.state.activated)return this.state.activated=!0,this.sticky||this.screen.removeCallback(this.state.component_id,"resize"),this.state.disabled(!0),this.display()},e.prototype.display=function(){var t,e,r;if(!this.state.displayed&&!this.fake&&null!=(r=window.inverse)&&r.ads&&(this.preload||this.state.activated)&&(this.state.displayed=!0,t=this.unitId(),this.displayAd(),this.onrender&&window.inverse.ads.addCallback("render",t,this.onrender),this.onload&&window.inverse.ads.addCallback("load",t,this.onload),this.collect))return e=[this.key,this.params.index,this.screen.device(),"article"+this.params.stream_index].join("_"),this.app.event(this.url,{category:"ad",ga:{label:e},action:"display",params:p.assign({},this.params,{position:this.key})})},e.prototype.refreshAd=function(){if(this.ads.refresh_ads&&this.ads.refresh_ads===this.refresh_id)return this.displayAd()},e.prototype.displayAd=function(){return window.inverse.ads.display(this.displayProps())},e.prototype.displayProps=function(){return{unit:this.key,slide:this.slide,index:this.state.index}},e.prototype.onresize=function(){var t;return t=a.Dom.rect(this.state.el),this.state.scroll.top(t.top),this.state.scroll.bottom(t.bottom),this.state.scroll.height(t.height)},e.prototype.trackers=function(){if(this.state.activated)return p.map(this.pixels,function(t){return(new i.Pixel).render({src:t})})},e.prototype.unitId=function(){return this.key+"-"+this.state.index},e.prototype.bottom=p.noop,e.prototype.config=p.noop,e.prototype.ontimeout=p.noop,e.prototype.bottom_offset=p.noop,e.prototype.stickyDisabled=p.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={App:r(48),Modal:r(102)},o={Dom:r(46),String:r(58)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.View=function(t){function e(t,r){this.onclick=u(this.onclick,this),e.__super__.constructor.call(this,s.omit(t,"onclick"),r),this.app=i.App.get(this.server),this.class=this.classes([this.class,"app-link"]),this.internal()||this.mailto()||this.self||this.macro()||(this.target="_blank"),t.onclick&&(this.onclickcb=t.onclick),"function"!=typeof this.onclickcb&&(this.onclickcb=s.noop),"_blank"===this.target&&(this.rel="noopener")}return p(e,t),e.prototype.render=function(){var t,e;return this.internal()||this.mailto()||this.macro()||(this.href=o.String.cleanHref(this.href)),(null!=(e=this.href)?e.length:void 0)?(t=this.attributes(),t.href=this.linkWithDomain(),this.download&&(t.download=this.download),A(t,this.children)):this.children},e.prototype.linkWithDomain=function(){return this.app.cms||!this.internal()||this.macro()?this.href:this.href.match(/^\/{1}/)?""+this.app.www+this.href:this.href},e.prototype.onclick=function(t){var e;if(t.stopPropagation(),e=o.Dom.metaKeyClick(t),this.onclickcb(t,e),"_blank"!==this.target&&this.internal()&&!e&&!this.download)return this.no_route||this.route(),!1},e.prototype.route=function(){return this.app.reset(),this.app.attachPopstate(),i.Modal.get(this.server).reset(),this.app.route(this.href.replace(this.app.www,""))},e.prototype.mailto=function(){return!!this.href&&this.href.match(/^mailto/)},e.prototype.macro=function(){var t;return"%%VIEW_URL_UNESC%%"===(t=this.href)||"%%CLICK_URL_UNESC%%%%DEST_URL%%"===t},e.prototype.internal=function(){var t;return"string"==typeof this.href&&0===this.href.length||!!this.href&&(!!this.href.match(this.app.www)||(!!this.href.match(/https?:\/\/www\.inverse\.com/)||(""===(t=this.href[0])||"/"===t||"#"===t)&&!this.href.match(/^\/\//)))},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(16),n=r(26),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){var t;if(null!=(t=this.src)?t.length:void 0)return this.amp?this.ampPixel():IMG({width:1,height:1,src:this.src,class:"app-pixel"})},e.prototype.ampPixel=function(){return i("amp-pixel",{src:this.src})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(24),n=r(26),i={Scrollspy:r(137)},s={Dom:r(46)},o={App:r(48),Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.height=0,this.active=!1,this.app=o.App.get(this.server),this.component("scrollspy",i.Scrollspy)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onend=u(this.onend,this),this.onstart=u(this.onstart,this),this.onactivate=u(this.onactivate,this),this.onresize=u(this.onresize,this),this.stickyConfig=u(this.stickyConfig,this),this.isDisabled=u(this.isDisabled,this),e.__super__.constructor.apply(this,arguments),this.screen=o.Screen,a.defaults(this,{no_resize_breakpoint:0})}return p(e,t),e.prototype.render=function(){return this.state.component("scrollspy").render({top:this.top,tag:this.tag,toggle:!0,onend:this.onend,bottom:this.bottom,update:this.update,onstart:this.onstart,onresizecb:this.onresize,config:this.stickyConfig,disabled:this.isDisabled,onactivate:this.onactivate,class:this.classes([this.class,"app-sticky"])},this.children)},e.prototype.isDisabled=function(){return!!this.state.app.navigating||this.disabled()},e.prototype.stickyConfig=function(t,e,r){return this.state.el=t,this.config(t,e,r),this.onresizecb(this.onresize)},e.prototype.onresize=function(){if(this.state.active&&!(this.screen.width()<=this.no_resize_breakpoint))return this.onactivate(!0)},e.prototype.onactivate=function(t){var e,r,n;return this.state.active=!0,n=this.offset()||0,e=s.Dom.rect(this.state.el).left,r=this.state.screen_width,this.state.screen_width=this.screen.width(),t&&(e+=(this.state.screen_width-r)/2),this.state.el.setAttribute("style","top: "+-n+"px;left: "+e+"px;")},e.prototype.onstart=function(){return this.state.active=!1,this.state.el.setAttribute("style","")},e.prototype.onend=function(){var t;return this.state.active=!1,t=this.bottom_offset(),null!=t?this.state.el.setAttribute("style","top: "+t+"px;"):this.state.el.setAttribute("style","")},e.prototype.top=a.noop,e.prototype.config=a.noop,e.prototype.bottom=a.noop,e.prototype.offset=a.noop,e.prototype.disabled=a.noop,e.prototype.onresizecb=a.noop,e.prototype.bottom_offset=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Screen:r(40)},o={Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.assign(this,{status:"above"})}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onscroll=u(this.onscroll,this),this.onresize=u(this.onresize,this),this.spyConfig=u(this.spyConfig,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{tag:DIV,props:{},waypoint:0,threshold:0,toggle:!1,status_class:{},waypoint_offset:5}),this.screen=i.Screen,this.disabled()&&!this.state.disabled&&(this.state.disabled=!0,this.changeStatus("above")),this.disabled()||(this.state.disabled=!1)}return p(e,t),e.prototype.render=function(){var t;return t=s.assign({},this.attributes(),{config:this.spyConfig,class:this.classes([this.class,"scrollspy",this.toggle?this.state.status:void 0,this.status_class[this.state.status]?this.status_class[this.state.status]:void 0])}),this.style&&(t.style=this.style),this.main?a("main",t,this.children):this.tag(t,this.children)},e.prototype.spyConfig=function(t,e,r){var n,i;if(this.config(t,e,r),i=r.onunload,e&&t!==this.state.el&&this.unload(i),this.state.el=t,!this.state.initialized)return n=this.state.component_id,this.state.initialized=!0,this.screen.addCallback(n,"resize",this.onresize),this.screen.addCallback(n,"scroll",this.onscroll),this.onresize(),this.onscroll(),r.onunload=function(t){return function(){return t.unload(i)}}(this)},e.prototype.unload=function(t){var e;return t&&t(),e=this.state.component_id,this.state.disabled=!1,this.state.initialized=!1,this.screen.removeCallback(e,"resize"),this.screen.removeCallback(e,"scroll")},e.prototype.onresize=function(t){if(this.onresizecb(),!this.disabled()&&t)return this.checkWaypoint(),this.setStatus(!0)},e.prototype.onscroll=function(){if(this.onscrollcb(),!this.disabled())return this.checkWaypoint(),this.setStatus()&&this.redraw?{redraw:!0}:void 0},e.prototype.checkWaypoint=function(){var t,e,r;if(this.waypoint&&!this.server&&(r=this.top()-this.screen.height(),e=-r/this.height()*100,e&&(t=e<this.waypoint?this.waypoint-e:e%this.waypoint,t>=0&&t<this.waypoint_offset)))return this.onwaypoint(e)},e.prototype.setStatus=function(t){var e,r;if(e="function"==typeof this.override?this.override():void 0)return this.changeStatus(e);if(null!=("function"==typeof this.top?this.top():void 0))return r=this.screen.scroll.top(),("function"==typeof this.bottom?this.bottom():void 0)+this.threshold<r?this.changeStatus("below",t):this.top()-this.threshold<r?this.changeStatus("active",t):this.changeStatus("above",t)},e.prototype.changeStatus=function(t,e){var r;return this.state.status!==t?(r=this.state.status,this.state.status=t,this.onStatusChange(t,r)):e?this.statusFunction(t):void 0},e.prototype.onStatusChange=function(t,e){return this.statusFunction(t),this.toggle&&(o.Dom.removeClass(this.state.el,e,this.status_class[e]),o.Dom.addClass(this.state.el,t,this.status_class[t])),!0},e.prototype.statusFunction=function(t){var e;return(e=function(){switch(t){case"below":return this.onend;case"above":return this.onstart;case"active":return this.onactivate}}.call(this))(this.style)},e.prototype.resized=function(){return!this.server&&(this.screen.resized.width()||this.screen.resized.height())},e.prototype.onend=s.noop,e.prototype.config=s.noop,e.prototype.onstart=s.noop,e.prototype.disabled=s.noop,e.prototype.onactivate=s.noop,e.prototype.onresizecb=s.noop,e.prototype.onscrollcb=s.noop,e.prototype.onwaypoint=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(139),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.assign(this,{name:"lg"})}return o(e,t),e.prototype.logo={small:"lg-cta-mobile.png",large:"lg-cta-desktop.png"},e.prototype.background={small:"MrRobotS3_Inverse_SKIN_v3.jpg",large:"MrRobotS3_Inverse_SKIN_v3.jpg"},e.prototype.image=function(t,e){var r,n,i;if(n=this[t])return i=n[e],r="https://fsmedia.imgix.net/assets","background"===t?r+"/green/mr_robot/"+i:r+"/ads/"+i},e.prototype.href=function(){return"https://www.inverse.com"},e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(51),i={Image:r(67)},t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.assign(this,{device:"mobile",timestamp:(new Date).toISOString()}),o.defaults(this,{name:"",position:""})}return s(e,t),e.prototype.title=function(){return o.startCase(this.name)},e.prototype.setDevice=function(t){return t?this.device="mobile":this.device="desktop"},e.prototype.widget=function(){return this.m(i.Image,{url:this.src(),oembed_data:this.widgetOembedData(this.width(),this.height())})},e.prototype.widgetOembedData=function(t,e){return{url:this.src(),width:t,type:"photo",height:e,version:"1.0",provider_url:"inverse.com",provider_name:"Inverse.com"}},e.prototype.src=function(){return""},e.prototype.pixels=function(t){return o.without([this.pixel(t)],null,void 0)},e.prototype.href=o.noop,e.prototype.color=o.noop,e.prototype.pixel=o.noop,e.prototype.width=o.noop,e.prototype.height=o.noop,e.prototype.scripts=o.noop,e.prototype.logoHref=o.noop,e.prototype.skinHref=o.noop,e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Ad:r(133),Thumbnail:r(141)},o={Ads:r(39),Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.ads=o.Ads.get(this.server),this.component("ad-list1",i.Ad),this.component("ad-content",i.Ad)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{ad_row:4,gradient:{left:!0}}),s.assign(this,{ads:this.state.ads,screen:o.Screen,position:"stream-grid"})}return a(e,t),e.prototype.render=function(){var t;return t=this.adIndex(),DIV({class:this.position},[this.grid(this.articles.slice(0,t),this.ad("content")),s.map(s.chunk(this.articles.slice(t),t),function(t){return function(e,r){return[t.grid(e),0===r?t.ad("list1"):void 0]}}(this))])},e.prototype.grid=function(t,e){return UL({class:"layout"},[s.map(t,function(t){return function(e){var r,n;return n=e.id,r=i.Thumbnail,LI({class:"layout__item"},[t.state.lazyComponent("article",n,r).render({tiny:!0,retina:!0,ratio:"16:9",hanging:!0,model:e,position:"grid",transparent:!0,gradient:t.gradient,label:t.label(e),track:function(){return t.track(t.position)},onlabelclick:function(){return t.track(t.position+"-label")}})])}}(this)),e?LI({class:"layout__item"},e):void 0])},e.prototype.label=function(t){var e;if(e=t.taxonomy)return this.section?e.section():e.tag()},e.prototype.adIndex=function(){return this.server||this.screen.palm()?this.ad_row:this.screen.lap()?2*this.ad_row:3*this.ad_row},e.prototype.ad=function(t){return this.state.component("ad-"+t).render({position:t})},e.prototype.track=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),o={Banner:r(126),Article:r(62)},i={Icon:r(142),Link:r(134),Time:r(143),Button:r(144),Sponsor:r(146),Highlight:r(150),Thumbnail:r(151)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.banner=o.Banner.get(this.server),this.article=o.Article.get(this.server),this.component("thumbnail",i.Thumbnail)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onclick=u(this.onclick,this);var t;e.__super__.constructor.apply(this,arguments),s.defaults(this,{ratio:!0}),this.sponsor=("function"==typeof(t=this.model).sponsor?t.sponsor():void 0)||this.sponsor}return p(e,t),e.prototype.render=function(){var t;return this.state.component("thumbnail").render({el:this.el,alt:this.alt,crop:this.crop,flex:this.flex,spin:this.spin,ratio:this.ratio,height:this.height,retina:this.retina,onclick:this.onclick,overlay:this.overlay,preload:this.preload,srcsets:this.srcsets,href:this.model.url(),
gradient:this.gradient,hide_image:this.hide_image,full_screen:this.full_screen,image_classes:this.image_classes,play_centered:this.play_centered,image_centered:this.image_centered,play_button:"function"==typeof(t=this.model).leadVideo?t.leadVideo():void 0,image:this.widget||this.model.primaryPhoto().widget,class:this.classes([this.class,"article-thumbnail",this.sponsor?"article-thumbnail--sponsored":void 0,this.top?"-top":void 0,this.right?"-right":void 0,this.hanging?"-hanging":void 0])},this.info())},e.prototype.info=function(){return[this.tag(),this.title(),this.dek(),this.footer()]},e.prototype.tag=function(){if(this.label)return new i.Button(this.server).render({icon:"raquo",reverse:!0,text:this.label.name,href:this.label.url(),onclick:this.onlabelclick,class:this.classes(["label",this.highlight?"-highlight":void 0])})},e.prototype.title=function(){var t;return t=this.title_text||this.model.thumbnailTitle(this.title_type),this.max_length&&(t=s.trunc(t,this.max_length)),this.state.lazyComponent("title",this.model.id,i.Highlight).render({big:this.big,tiny:this.tiny,small:this.small,class:"title",onclick:this.onclick,href:this.model.url()},a.trust(t))},e.prototype.dek=function(){var t;if(!this.sponsor&&this.show_dek&&(t=this.model.abstract("dek")))return DIV({class:"dek"},this.articleLink(a.trust(t.styledText())))},e.prototype.footer=function(){var t,e;if(e=this.time(),t=this.sponsorTag(),e||t)return DIV({class:"footer"},[this.time(),this.sponsorTag()])},e.prototype.time=function(){if(this.show_time)return this.articleLink([this.state.lazyComponent("time",this.model.id,i.Time).render({ago:!0,date:this.model.publish_at})])},e.prototype.sponsorTag=function(){if(this.sponsor)return this.state.lazyComponent("sponsor",this.model.id,i.Sponsor).render({model:this.sponsor,preload:this.preload,url:this.model.canonicalUrl()})},e.prototype.articleLink=function(t){return new i.Link(this.server).render({onclick:this.onclick,href:this.model.url()},t)},e.prototype.onclick=function(t,e){if(this.track(this.model),!e)return this.state.article.model(this.model),this.state.banner.model(this.model)},e.prototype.track=s.noop,e.prototype.onlabelclick=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(16),n=r(26),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.text_icons={plus:"&plus;",close:"&times;",laquo:"&laquo;",raquo:"&raquo;"},e.prototype.render=function(){var t;return t=this.textIcon(),SPAN({class:this.classes(["icon",this.class,this.faClasses(),t?"-text-icon":void 0])},i.trust(t||""))},e.prototype.faClasses=function(){var t;if(!this.textIcon())return t="ii ii-"+this.icon,this.spin&&(t+=" ii-spin"),t},e.prototype.textIcon=function(){return this.text_icons[this.icon]},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Icon:r(142),Link:r(134)},o={Date:r(72)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{icon:!0})}return a(e,t),e.prototype.render=function(){return TIME({datetime:this.date,class:"app-time"},[this.clock(),this.time()])},e.prototype.clock=function(){if(this.icon)return(new i.Icon).render({icon:"clock-o"})},e.prototype.time=function(){var t;return t=this.timestamp(),this.href?new i.Link(this.server).render({href:this.href},t):t},e.prototype.timestamp=function(){return this.state.time?this.state.time:this.ago?this.state.time=o.Date.timeFromNow(this.date)+" ago":this.state.time=o.Date.formatted(o.Date.utcToEt(this.date),!1)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Icon:r(142),Link:r(134),Spinner:r(145)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(){var t;return t=o.assign({},this.attributes(),{class:this.buttonClasses()}),this.on&&(t.on=this.on),this.class_toggle&&(t["[class]"]=this.classToggle(t)),this.linkOrButton(t)},e.prototype.linkOrButton=function(t){return this.href?this.link(t):this.button(t)},e.prototype.buttonClasses=function(){return this.classes(["btn",this.class,this.fake?"btn--fake":void 0,this.small?"btn--small":void 0,this.plain?"btn--plain":void 0,this.rounded?"btn--rounded":void 0,this.social?"btn--schmocial":void 0])},e.prototype.link=function(t){return o.assign(t,{self:this.self,no_route:this.no_route}),this.download&&(t.download=this.download),new i.Link(this.server).render(t,this.components())},e.prototype.button=function(t){var e;return e=this.components(),t=o.omit(t,"href"),this.fake?DIV(t,e):BUTTON(t,e)},e.prototype.components=function(){return[this.label(),this.children,this.spinner()]},e.prototype.classToggle=function(t){return[this.class_toggle.state+" == true ?","'"+this.class_toggle.class+" "+t.class+"' : '"+t.class+"'"].join(" ")},e.prototype.label=function(){if(!this.show_spinner)return[this.iconTag(1),this.textTag(),this.iconTag(2)]},e.prototype.spinner=function(){if(this.show_spinner)return(new i.Spinner).render()},e.prototype.iconTag=function(t){if(this.icon&&(!this.reverse||1!==t)&&(this.reverse||2!==t))return(new i.Icon).render({spin:this.spin,icon:this.icon,class:this.icon_class})},e.prototype.textTag=function(){var t;if(this.text)return t="string"==typeof this.text?s.trust(this.text):this.text,SPAN({class:"text"},t)},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Icon:r(142)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return SPAN({class:this.classes([this.class,"app-spinner",this.active?"active":void 0,this.centered?"centered":void 0])},[(new i.Icon).render({spin:!0,icon:"spinner"})])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),i={Link:r(134),Image:r(147)},o={App:r(48),Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{widget:this.model.widget})}return p(e,t),e.prototype.render=function(){var t,e,r,n;if(null!=(r=this.widget)?r.persisted():void 0)return e={class:this.classes([this.class,"app-sponsor",this.sponsor?"app-sponsor--"+s.kebabCase(this.sponsor):void 0])},(t=this.href())?(e.href=t,n=new i.Link(this.server).render):n=DIV,n(e,[this.image()])},e.prototype.image=function(){var t;return t=this.state.component_id,this.state.lazyComponent("image",t,i.Image).render({retina:!0,model:this.widget,width:this.width(),height:this.height(),preload:this.preload})},e.prototype.width=function(){return this.widget.width()},e.prototype.height=function(){return this.widget.height()},e.prototype.href=function(){var t;return(t=this.widget.link())?t:this.url},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,l=function(t,e){return function(){return t.apply(e,arguments)}};c=r(16),p=r(24),n=r(26),s={App:r(48),Screen:r(40)},a={Dom:r(46),Head:r(56),Image:r(57)},o={Image:r(67)},i={AmpImage:r(148)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),p.assign(this,{breakpoint:750,default_width:375,loaded:c.prop(!1),screen:s.Screen,disabled:c.prop(!1),app:s.App.get(this.server)})}return u(e,t),e.prototype.loadSource=function(t,e,r,n){if(this.el)return t&&!this.loaded()?(this.loaded(!0),this.src(t),e?p.forEach(r,function(t){return function(e){var r;return r=t.el.querySelector(".-srcset-"+e.key),t.updateEl(r,e.srcset,n)}}(this)):this.updateEl(this.el,r,n)):void 0},e.prototype.updateEl=function(t,e,r){if(t)return t.src&&(this.onload&&(t.onload=this.onload),t.src=this.src()),e&&t.setAttribute("srcset",e),r?void 0:t.className=t.className.replace("middle","")},e}(n.State),e.View=function(t){function e(){this.checkLoadSource=l(this.checkLoadSource,this),this.onresize=l(this.onresize,this),this.imageConfig=l(this.imageConfig,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=this.state.screen,this.state.onload=this.onload,p.defaults(this,{dpr:!0,query:"",crops:{},crop:"4:3",retina:!1,internal:!0,disabled:!1,default_width:this.state.default_width}),this.modelDefaults(),this.initializeNoCrop(),this.srcsetDefaults(),p.defaults(this,{src:this.modelSrc(this.crop),width:this.default_width}),p.defaults(this,{height:this.defaultHeight()}),this.state.src||(this.state.src=c.prop(this.placeholder(this.crop))),this.loadPreloadImages(),this.loadDisabledImages(),this.reloadImage(),this.setState()}return u(e,t),e.prototype.initializeNoCrop=function(){var t,e;if(this.nocrop())return this.crop=null,t=this.screen.sizes,e=this.model.width(),e<=t.small&&(this.retina=!0),e<t.content?(this.width=e,this.height=this.model.height()):(this.width=t.content,this.height=t.content/(e/this.model.height()))},e.prototype.defaultHeight=function(){var t;return this.crop?(t=this.crop.split(":"),this.width*parseInt(t[1],10)/parseInt(t[0],10)):this.width/(this.model.width()/this.model.height())},e.prototype.modelDefaults=function(){return p.defaults(this,{model:{}}),p.defaults(this.model,{id:1,query:"",crop:p.noop,embed:p.noop,noCrop:p.noop,caption:p.noop,internalImage:function(){return!0}})},e.prototype.srcsetDefaults=function(){var t,e;return e=this.screen.sizes,t=this.screen.breakpoints,p.defaults(this,{srcsets:{}}),p.defaults(this.srcsets,{sizes:{},img:"large",palm:!1,picture:!this.retina,sets:this.defaultSets(e)}),p.defaults(this.srcsets.sizes,{small:"(max-width:"+t.phone+"px)",large:"(max-width:"+e.large+"px)",xlarge:"(min-width:"+e.large+"px)",medium:"(max-width:"+this.mediumBreakpoint(t)+"px)"})},e.prototype.mediumBreakpoint=function(t){return this.srcsets.palm?t.palm:t.lap},e.prototype.defaultSets=function(t){var e,r;return this.retina?[]:this.nocrop()?(r=this.model.width(),e={small:t.small,large:t.content},r<=t.content&&(e.large=r),[{sizes:e}]):[{crop:"4:3",sizes:{small:t.small,medium:t.medium}},{crop:"2:1",sizes:{large:t.large}}]},e.prototype.setState=function(){return this.state.id=this.model.id,this.state.url=this.model.url,this.state.embed=this.model.embed()},e.prototype.render=function(){var t,e,r;return t=this.isPlaceholder()&&this.ratio&&!this.app.amp,r={alt:this.altText(),class:this.classes([this.class,"media-image",this.displayMode(),this.centered||t?"middle":void 0])},this.app.amp?this.ampImage(r):(this.server&&!this.preload&&(e=NOSCRIPT([this.pictureOrImage(p.assign({},r),!0)]),r.class=this.classes(["nojs-none",r.class])),[this.pictureOrImage(p.assign({},r,{config:this.imageConfig})),e])},e.prototype.altText=function(){var t;return a.Head.cleanString(this.alt||("function"==typeof(t=this.model).alt?t.alt():void 0)||"")},e.prototype.ampImage=function(t){var e,r,n,o,s,a,c;return n="ampimage",e=i.AmpImage,t={model:this.model,alt:t.alt,class:t.class},this.srcsets.picture?(s=p.sortBy(p.flatten(p.map(this.srcsets.sets,function(t){return p.map(t.sizes,function(t,e){var r;return r={},r[""+e]=t,r})}))),a=s.length,r=Object.keys(s[a-1])[0],p.map(this.srcsets.sets,function(i){return function(o){var c,u,h;return c=o.crop,u=i.max(c),h=i.loadedSrc(o,!0),p.map(o.sizes,function(o,l){var d,f,m,y,g,_,v,w;return w=o.width||o||i.width,w>u&&(w=u),c?(_=c.split(":"),f=w*_[1]/_[0]):(f=o.height,f||(_=i.width/i.height,f=w/_)),a>1&&(l===r?(v=Object.keys(s[a-2])[0],m=i.srcsets.sizes[v].replace(/max/,"min")):(m=i.srcsets.sizes[l],a>2&&(g=l,p.find(s,function(t,e){var r;return r=Object.keys(t)[0],r===l||(g=r)}),g!==l&&(y=i.srcsets.sizes[g].replace(/max/,"min"),m=y+" and "+m)))),d=p.assign({},t,{crop:c,media:m,width:w,height:f,src:i.sourceWithQuery(h,{width:w,dpr:!0}),class:i.classes([l,c,t.class])}),i.state.lazyComponent(n,l,e).render(d)})}}(this))):(this.nocrop()||(o={crop:this.crop}),c=this.loadedSrc(o||{},!0),p.assign(t,{width:this.width,height:this.height,responsive:this.responsive,src:this.sourceWithQuery(c,{width:this.width,dpr:!0})}),this.state.lazyComponent(n,this.model.id,e).render(t))},e.prototype.pictureOrImage=function(t,e){var r,n;return this.srcsets.picture?this.picture(t,e):(r=this.loadedSrc({crop:this.crop},e),(n=this.srcset(e))&&(t.srcset=n),(this.style||this.styles())&&(t.style=p.assign({},this.style,this.styles())),this.onload&&(t.onload=this.onload),IMG(p.assign(t,{src:this.sourceWithQuery(r,{width:this.width}),class:this.classes([t.class,this.wrapper_class])})))},e.prototype.picture=function(t,e){var r,n;return n={class:this.classes([this.wrapper_class,"media-picture"])},null!=t.config&&(n.config=t.config),(this.style||this.styles())&&(n.style=p.assign({},this.style,this.styles())),r=this.pictureImages(t,e),c("picture",n,[r.sources,r.img])},e.prototype.pictureImages=function(t,e){return p.transform(this.pictureSrcset(e),function(e){return function(r,n){var i,o;return i={srcset:n.srcset,class:"-srcset-"+n.key},n.key===e.srcsets.img?(o=e.sourceWithQuery(n.src,{width:n.width}),e.onload&&(i.onload=e.onload),r.img=IMG(p.assign(i,{src:o,alt:t.alt,class:e.classes([t.class,i.class])}))):(r.sources||(r.sources=[]),r.sources=r.sources.concat([c("source",p.assign(i,{media:e.srcsets.sizes[n.key]}))])),r}}(this),{})},e.prototype.pictureSrcset=function(t){var e;return e=p.flatten(p.map(this.srcsets.sets,function(e){return function(r){var n,i,o;return i=!1,n=e.max(r.crop),o=e.loadedSrc(r,t),p.map(r.sizes,function(s,a){var p;if(!i||a===e.srcsets.img)return p=s.width||s,p>n&&(p=n,i=!0),{key:a,width:p,src:e.loadedSrc(r,!0),srcset:e.srcsetArray(o,p,t).join(", ")}})}}(this))),p.without(e,null,void 0)},e.prototype.srcset=function(t){var e;if(this.model.internalImage())return e=this.loadedSrc({crop:this.crop},t),this.srcsetArray(e,this.width,t).join(", ")},e.prototype.srcsetArray=function(t,e,r){return[this.srcsetString(t,e,!1,r),this.srcsetString(t,e,!0,r)]},e.prototype.loadedSrc=function(t,e){return this.state.loaded()||e?t.src||this.modelSrc(t.crop)||this.src||this.placeholder(t.crop):this.placeholder(t.crop)},e.prototype.modelSrc=function(t){return null!=t?this.model.crop(t):this.model.embed()},e.prototype.srcsetString=function(t,e,r,n){var i,o;return i={dpr:r,width:e},this.isPlaceholder()&&!n&&p.assign(i,{width:375}),o="",r&&(o=" 2x"),""+this.sourceWithQuery(t,i)+o},e.prototype.sourceWithQuery=function(t,e){var r,n;return null==e&&(e={}),this.internal||this.model.internalImage()?(n="",this.mono&&(n="function"==typeof(r=this.model).mono?r.mono(this.mono):void 0),t=a.Image.sourceWithQueryString(t,e),""+t+this.model.query+this.query+n):t},e.prototype.imageConfig=function(t,e,r){var n,i,o;if(n=t!==this.state.el,this.state.el=t,this.config(t,e,r),this.state.initialized&&(this.differentImage()||n)&&(this.unload(),this.reloadImage()),!this.state.loaded()&&!this.state.initialized)return this.state.initialized=!0,i=this.state.component_id,this.runUpdate(),this.state.loaded()||this.preload?this.size_classes&&this.screen.addCallback(i,"resize",this.onresize):(this.screen.addCallback(i,"resize",this.onresize),this.screen.addCallback(i,"scroll",this.checkLoadSource)),o=r.onunload,r.onunload=function(t){return function(){return o&&o(),t.unload()}}(this)},e.prototype.runUpdate=function(){return this.onresize(),this.checkLoadSource()},e.prototype.onresize=function(){var t,e,r;if(this.state.rect=a.Dom.rect(this.state.el),this.size_classes)return this.state.wide=this.state.rect.width>this.state.rect.height,e="media-image--tall",r="media-image--wide",t=this.state.el.className.split(" "),t=p.without(t,e,r),this.state.wide?t.push(r):t.push(e),this.state.el.className=t.join(" ")},e.prototype.checkLoadSource=function(){var t,e;if(!(this.state.loaded()||this.state.disabled()||this.preload))return e=this.state.rect.top,t=this.screen.threshold()||this.state.breakpoint,Math.abs(e)<=this.screen.scroll.top()+t?this.loadSource():void 0},e.prototype.loadSource=function(){if(!this.state.loaded())return this.state.loadSource(this.src,this.srcsets.picture,this.dynamicSrcset(),this.centered),this.state.loaded()?this.unload():void 0},e.prototype.dynamicSrcset=function(){return this.srcsets.picture?this.pictureSrcset(!0):this.srcset(!0)},e.prototype.displayMode=function(){return this.nocrop()?"inline":"full-width"},e.prototype.loadPreloadImages=function(){if(this.preload)return this.state.src(this.src),this.state.loaded(!0)},e.prototype.loadDisabledImages=function(){var t;if(t=this.state.disabled(),this.state.disabled(this.disabled),t&&!this.disabled)return this.runUpdate()},e.prototype.reloadImage=function(){if(this.state.loaded())return this.differentImage()&&(this.state.src(this.src),this.state.el)?(this.state.loaded(!1),this.loadSource()):void 0},e.prototype.differentImage=function(){return!this.state.src()||(this.state.id!==this.model.id||(this.state.url!==this.model.url||this.state.embed!==this.model.embed()))},e.prototype.isPlaceholder=function(){return this.state.src()===this.placeholder(this.crop)},e.prototype.placeholder=function(t){switch(t){case"3:4":return o.Image.TALL_PLACEHOLDER;case"2:1":case"3:1":return o.Image.WIDE_PLACEHOLDER;default:return o.Image.CROPPED_PLACEHOLDER}},e.prototype.nocrop=function(){return this.model.noCrop()},e.prototype.max=function(t){var e;return("function"==typeof(e=this.model).width?e.width(t):void 0)||this.width},e.prototype.unload=function(){var t;return this.state.initialized=!1,t=this.state.component_id,this.screen.removeCallback(t,"resize"),this.screen.removeCallback(t,"scroll")},e.prototype.config=p.noop,e.prototype.styles=p.noop,e.prototype.initializeSrcsets=p.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Amp:r(149)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.store=i.Amp.get(this.server),o.defaults(this,{responsive:!0})}return a(e,t),e.prototype.render=function(){var t;return("function"==typeof(t=this.model).isGif?t.isGif():void 0)?(this.store.add("anim"),this.gif()):this.image()},e.prototype.gif=function(){return s("amp-anim",this.defaults(),[s("amp-img",{layout:"fill",placeholder:!0,src:this.getSrc().replace(/format=auto((,|%2C)compress)?/i,"fm=png")})])},e.prototype.image=function(){var t;return t=this.defaults({placeholder:!0}),this.srcset&&o.assign(t,{srcset:this.srcset}),s("amp-img",t)},e.prototype.defaults=function(t){return null==t&&(t={}),o.defaults(t,{alt:this.alt,src:this.getSrc(),width:this.getWidth(),height:this.getHeight(),class:this.classes([this.class])}),this.media&&(t.media=this.media),this.responsive&&(t.layout="responsive"),t},e.prototype.getWidth=function(){return this.width||this.model.width(this.crop)},e.prototype.getHeight=function(){return this.height||this.model.height(this.crop)},e.prototype.getSrc=function(){return this.src?this.src:this.model.noCrop()?this.model.embed():this.model.crop(this.crop)},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};i=r(23),n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.scripts=[],this.templates=[]}return o(e,t),e.cache_key="amp",e.prototype.add=function(t,e){var r;if(r=this.scripts,e&&(r=this.templates),!(a.call(r,t)>=0))return r.push(t)},e}(i),t.exports=i.export(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Link:r(134)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{el:DIV})}return s(e,t),e.prototype.render=function(){return this.el({class:this.classes([this.class,"app-highlight",this.big?"-big":void 0,this.tiny?"-tiny":void 0,this.light?"-light":void 0,this.small||this.tiny?"-small":void 0])},[this.linkOrChildren()])},e.prototype.linkOrChildren=function(){var t;return t="app-highlight__text",this.href?new i.Link(this.server).render({href:this.href,onclick:this.onclick,class:t},this.children):DIV({class:t},this.children)},e.prototype.onclick=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Link:r(134),Play:r(152),Spinner:r(145),Image:r(147)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("image",i.Image)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{el:DIV,flex:!0,gradient:!1,play_button:!1})}return a(e,t),e.prototype.render=function(){return this.el({class:this.classes([this.class,"app-thumbnail",this.play_button?"app-thumbnail--play":void 0,this.centered?"center":void 0])},[this.thumbnail(),this.info()])},e.prototype.thumbnail=function(){var t,e,r,n;if(!this.hide_image)return e=this.state.component("image").render({alt:this.alt,crop:this.crop,ratio:this.ratio,model:this.image,width:this.width,height:this.height,retina:this.retina,preload:this.preload,srcsets:this.srcsets,full_screen:this.full_screen,centered:this.image_centered,class:this.classes([this.image_classes])}),r={class:this.classes(["background",this.gradients(),this.ratio?"ratio":void 0,this.overlay?"overlay":void 0,"string"==typeof this.ratio?this.ratio:void 0])},t=[e,this.play_centered||!(null!=(n=this.children)?n.length:void 0)?this.playButton():void 0,this.spinner()],this.linkOrDiv(r,t,this.linked)},e.prototype.spinner=function(){if(this.spin)return(new i.Spinner).render({active:!0,centered:!0})},e.prototype.gradients=function(){if(this.gradient)return this.classes(["gradient",this.gradient.big?"gradient--big":void 0,this.gradient.left?"gradient--left":void 0,this.gradient.right?"gradient--right":void 0,this.gradient.small?"gradient--small":void 0])},e.prototype.info=function(){var t,e;if(this.children)return e={class:this.classes(["info",this.info_classes,this.centered?"flex flex-centered":void 0,this.flex&&!this.play_centered&&this.play_button?"flex flex-column":void 0])},t=[this.play_centered?void 0:this.playButton(!0),this.children],this.linkOrDiv(e,t,!this.linked)},e.prototype.linkOrDiv=function(t,e,r){var n,i;return i=this.linkOrDivComponent(r),n=this.linkOrDivAttributes(t,r),i(n,e)},e.prototype.linkOrDivComponent=function(t){return this.href&&!t?new i.Link(this.server).render:DIV},e.prototype.linkOrDivAttributes=function(t,e){return t.onclick=this.onclick,this.href&&!e&&o.assign(t,{href:this.href,class:this.classes([t.class,this.centered?void 0:"block"])}),t},e.prototype.playButton=function(t){var e;if(this.play_button)return e={},t&&o.assign(e,{middle:!1,wrapper:!0,wrapper_class:this.classes([this.flex?"flex-1":void 0])}),this.href&&!this.linked&&o.assign(e,{href:this.href,onclick:this.onclick}),new i.Play(this.server).render(e)},e.prototype.onclick=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Link:r(134),Button:r(144)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{fake:!0,middle:!0,wrapper:!1})}return s(e,t),e.prototype.render=function(){var t,e,r;return t=this.button(),this.wrapper?(e={onclick:this.onclick,class:this.classes([this.wrapper_class,"app-play__wrapper"])},this.href?(e.href=this.href,r=new i.Link(this.server).render):r=DIV,r(e,[t])):t},e.prototype.button=function(){var t;return t={fake:this.fake,text:this.text,icon:"play",class:this.classes([this.class,this.middle?"middle":void 0,"app-play brand-background zeus"])},this.wrapper||o.assign(t,{href:this.href,onclick:this.onclick}),new i.Button(this.server).render(t)},e.prototype.onclick=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Ad:r(133),Thumbnail:r(141)},o={App:r(48),Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.component("promo",i.Ad)}return a(e,t),e}(n.State),e.View=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.position="stream-list",this.screen=o.Screen,t=this.screen.sizes,s.defaults(this,{srcsets:{},ratio:"16:9 palm-2:1"}),s.defaults(this.srcsets,{sets:[{crop:"2:1",sizes:{small:this.screen.sizes.small}},{crop:"4:3",sizes:{large:400,medium:600}}]})}return a(e,t),e.prototype.render=function(){if(this.articles)return UL({config:this.config,class:this.classes([this.class,this.position,"flex palm-flex-column list-bare"])},[this.thumbnails(),this.promo()])},e.prototype.config=function(t,e,r){if(!e)return r.onunload=function(){return t.innerHTML=""}},e.prototype.promo=function(){return this.state.component("promo").render({el:LI,preload:!0,position:"oop_section_list"})},e.prototype.thumbnails=function(){var t,e,r,n,o;return n=!this.palm(),e=this.state.component_id,t=i.Thumbnail,r=this.articles.length-1,o={track:function(t){return function(){return t.track(t.position)}}(this),onlabelclick:function(t){return function(){return t.track(t.position+"-label")}}(this)},s.map(this.articles,function(i){return function(a,p){var c,u;return c=a.id+"-"+e,u=s.assign({},o,{el:LI,tiny:!0,ratio:i.ratio,model:a,preload:i.preload,srcsets:i.srcsets,transparent:!0,position:i.position,label:i.label(a),play_centered:n,class:i.classes(["1/4 palm-1/1",p===r?"stream-list__last":void 0])}),i.state.lazyComponent("thumbnail",c,t).render(u)}}(this))},e.prototype.label=function(t){var e;if(e=t.taxonomy)return"home"===this.state.app.section?e.section():e.tag()},e.prototype.palm=function(){if(!this.server)return this.screen.palm()},e.prototype.track=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Slider:r(155)},o={Stream:r(103)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.stream=o.Stream.get(this.server),this.component("slider",i.Slider)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position="stream-slider"}return a(e,t),e.prototype.render=function(){return this.state.component("slider").render({track:this.track,article:this.article,model:this.state.stream.recent(),class:this.classes([this.class,this.position])})},e.prototype.track=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Slider:r(156),Mediaobj:r(162)},o={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.toggleLoading=a.prop(s.noop),this.component("slider",i.Slider)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onnext=u(this.onnext,this),this.items=u(this.items,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{width:170,crop:"4:3",ratio:"4:3",retina:!0,height:127.5,position:"article-slider"})}return p(e,t),e.prototype.render=function(){return this.state.component("slider").render({items:this.items,onnext:this.onnext,models:this.bodies(),position:this.position,per_page:this.perPage(),loadingToggle:this.state.toggleLoading,class:this.classes([this.class,"article-slider"])})},e.prototype.items=function(t,e,r,n){var i;return i=t.length-1,UL({class:"list-bare flex palm-flex-column"},[s.map(t,function(t){return function(o,s){return t.item(o,e+s+1,n,r,s===i)}}(this))])},e.prototype.item=function(t,e,r,n,o){var s;return s=this.position+"-"+r,this.state.lazyComponent("article",e,i.Mediaobj).render({el:LI,crop:this.crop,header:!0,model:t,ratio:this.ratio,width:this.width,max_length:78,height:this.height,retina:this.retina,position:"slider",disabled:n,track:function(t){return function(){return t.track(s)}}(this),onlabelclick:function(t){return function(){return t.track(s+"-label")}}(this),class:this.classes([o?"-last":void 0])})},e.prototype.onnext=function(t,e){var r;if(t===e&&(r=this.model.nextPage()))return r.then(function(t){return function(){return t.state.toggleLoading()(!0),a.redraw()}}(this))},e.prototype.perPage=function(){var t;if(t=o.Screen,!this.server&&!t.palm())return t.width()<1e3?2:void 0},e.prototype.bodies=function(){return this.article?s.reject(this.model.bodies,{id:this.article.id}):this.model.bodies},e.prototype.track=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Button:r(144),AmpAd:r(157),Carousel:r(158),Pagination:r(159)},o={App:r(48),Screen:r(40)
},s={Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.page=1,this.started=p.prop(!1),this.app=o.App.get(this.server)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.unload=h(this.unload,this),this.toggleLoading=h(this.toggleLoading,this),this.onpreviouscb=h(this.onpreviouscb,this),this.onnextcb=h(this.onnextcb,this),this.onscroll=h(this.onscroll,this),this.onresize=h(this.onresize,this),this.config=h(this.config,this),e.__super__.constructor.apply(this,arguments),a.defaults(this,{index:0,models:[],per_page:3,position:"app-slider"}),this.ad_index=0,this.app=this.state.app,this.page=this.state.page,this.screen=o.Screen,this.initIntro(),this.slides=a.chunk(this.models,this.per_page),this.pages=this.slides.length,this.intro&&(this.pages+=1),this.loadingToggle(this.toggleLoading)}return c(e,t),e.prototype.initIntro=function(){if(this.intro)return this.intro_slide=this.models.shift(0)},e.prototype.render=function(){if(this.models.length)return DIV({config:this.config,class:this.classes([this.class,"app-slider",this.looped?"app-slider--looped":void 0])},[this.slider(),this.pagination("slide"),this.children])},e.prototype.config=function(t,e,r){var n;if(this.state.el=t,this.state.loading&&this.toggleLoading(!1),this.parentConfig(t,e,r),!e)return n=this.state.component_id,this.screen.addCallback(n,"resize",this.onresize),this.screen.addCallback(n,"scroll",this.onscroll),this.onresize(),this.onscroll(),r.onunload=this.unload},e.prototype.onresize=function(){if(this.state.el)return this.state.top=s.Dom.rect(this.state.el).top},e.prototype.onscroll=function(){if(this.screen.onscreen(this.state.top))return this.impression(),this.unload()},e.prototype.slider=function(){var t,e,r;return e={class:this.classes([this.slides_class,"app-slider__slides"])},r=this.intro?[[this.intro_slide]].concat(this.slides):this.slides,t=a.map(r,function(t){return function(e,r){var n;return n=r*t.per_page,e=t.slide(e,n,r),t.app.amp&&t.show_ads?[e,(r+1)%3===0?t.slide([{ad:t.ampAd()}],"ad-"+n,r):void 0]:e}}(this)),this.app.amp?(this.intro&&a.assign(e,{id:this.state.component_id,amp_state:"carousel_started"+this.index}),new i.Carousel(this.server).render(e,a.flatten(t))):(e.style=this.sliderStyle(),DIV(e,[t]))},e.prototype.ampAd=function(){var t;return null!=this.index&&(t=this.index*this.ad_index),this.ad_index+=1,new i.AmpAd(this.server).render({slide:!0,index:t,position:"content"})},e.prototype.slide=function(t,e,r){var n,i,o;return n=this.page-1,i=r!==n,o={class:this.classes([this.slideClass(t),"app-slider__slide"])},this.app.amp||(o.style=this.slideStyle()),t=DIV(o,[this.items(t,e,i,r,n)]),this.app.amp?DIV({class:"flex flex-centered"},t):t},e.prototype.sliderStyle=function(){return this.app.amp?{}:{width:100*this.pages+"%",transform:"translateX(-"+this.slideWidth(this.page-1)+")"}},e.prototype.slideStyle=function(){return this.app.amp?{}:{width:this.slideWidth()}},e.prototype.slideWidth=function(t){return null==t&&(t=1),1/this.pages*100*t+"%"},e.prototype.pagination=function(t){var e,r;return e=this.state.component_id,r="pagination-"+t,this.state.lazyComponent(r,e,i.Pagination).render({id:e,dots:this.dots,index:this.index,pages:this.pages,looped:this.looped,slides:this.slides,onnext:this.onnextcb,position:t,cateogry:this.position,tracking:this.tracking,onnavigate:this.onnavigate,onprevious:this.onpreviouscb,play_buttons:this.play_buttons,circle_buttons:"slide"===t,show_start:this.intro&&"slide"===t})},e.prototype.onnextcb=function(t,e){return this.state.page=t,this.onnext(t,e)},e.prototype.onpreviouscb=function(t,e){return this.state.page=t,this.onprevious(t,e)},e.prototype.toggleLoading=function(t){return this.state.loading=t,t?s.Dom.addClass(this.state.el,this.loadingClass()):s.Dom.removeClass(this.state.el,this.loadingClass())},e.prototype.loadingClass=function(){return"app-slider--loading"},e.prototype.impression=function(){var t;return t="",null!=this.index&&(t=this.index),this.app.event(document.location.href,{ga:{label:t},params:this.tracking,category:this.position,action:"impression"})},e.prototype.unload=function(){var t;return t=this.state.component_id,this.screen.removeCallback(t,"resize"),this.screen.removeCallback(t,"scroll")},e.prototype.items=a.noop,e.prototype.onnext=a.noop,e.prototype.onnavigate=a.noop,e.prototype.onprevious=a.noop,e.prototype.slideClass=a.noop,e.prototype.parentConfig=a.noop,e.prototype.loadingToggle=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Ads:r(39)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{position:"article"}),"article"===this.position&&this.index>6||(this.ads=i.Ads.get(this.server),this.updateTargeting(),this.setJson())}return a(e,t),e.prototype.updateTargeting=function(){return this.ads.update({platform:"amp",production:!0}),this.ads.updateArticle(this.model)},e.prototype.setJson=function(){return this.json=JSON.stringify({targeting:this.ads.targetMap()}).replace(/'/g,"&#39;")},e.prototype.render=function(){var t,e,r,n;return n=300,t=250,r=this.slide?"/slide":"",e=["type='doubleclick'","data-slot='/21054826/AMP_"+n+"x"+t+"_"+this.index+r+"'","width='"+n+"'","height='"+t+"'","json='"+this.json+"'"],DIV({class:this.classes([this.class,"amp-ad vert"])},[DIV({class:this.classes(["vert-div",this.section?"vert-div--section":void 0])},[s.trust("<amp-ad "+e.join(" ")+"></amp-ad>")])])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Amp:r(149)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.store=i.Amp.get(this.server)}return a(e,t),e.prototype.render=function(){var t,e;return this.store.add("bind"),this.store.add("carousel"),t={type:"slides",layout:"flex-item",class:this.classes([this.class])},this.id&&(t.id=this.id),this.amp_state&&(t.on="slideChange:AMP.setState({ "+this.amp_state+": true })"),e=o.map(t,function(t,e){return e+'="'+t+'"'}),DIV({class:"ratio 5:3"},[s.trust("<amp-carousel "+e.join(" ")+" loop controls>"),this.children,s.trust("</amp-carousel>")])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Start:r(160),Button:r(144),Pagination:r(161)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.page=1,this.started=a.prop(!1),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.previousPage=u(this.previousPage,this),this.nextPage=u(this.nextPage,this),this.track=u(this.track,this),this.update=u(this.update,this),this.previous=u(this.previous,this),this.next=u(this.next,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{el:DIV,index:0,pages:0,tracking:{},no_scroll:!0,position:"app-slider"}),null!=this.page&&(this.state.page=this.page),this.app=this.state.app,this.page=this.state.page}return p(e,t),e.prototype.render=function(){return this.el({class:this.classes([this.class,"clearfix slider-pagination",this.position?"slider-pagination--"+this.position:void 0,this.circle_buttons&&!this.showStart()?"slider-pagination--circles":void 0])},[this.buttons()])},e.prototype.buttons=function(){return this.showStart()?this.startButton():this.pagination()},e.prototype.startButton=function(){var t,e;return t=this.state.component_id,e={id:this.id,index:this.index,track:this.track,update:this.update,middle:this.center_start,onclick:function(t){return function(){return t.state.started(!0)}}(this)},this.href&&(e.href=this.pageUrl(2)),this.state.lazyComponent("start",t,i.Start).render(e)},e.prototype.pagination=function(){var t;return t=this.state.component_id,this.state.lazyComponent("pagination",t,i.Pagination).render({dots:this.dots,href:this.href,no_intro:!0,looped:this.looped,numbered:!1,set_rel:this.set_rel,no_scroll:this.no_scroll,onnavigate:this.onnavigate,icon_class:this.classes([this.icon_class,this.circle_buttons&&this.play_buttons?"app-play brand-background":void 0]),model:{next:this.next,page:this.page,pages:this.pages,pageUrl:this.pageUrl,previous:this.previous,nextPage:this.nextPage,previousPage:this.previousPage}})},e.prototype.next=function(t){if(this.update("next"),this.track("next"),t)return t()},e.prototype.previous=function(t){if(this.update("previous"),this.track("previous"),t)return t()},e.prototype.update=function(t){return"next"===t?(this.state.page+=1,this.looped&&this.state.page>this.pages&&(this.state.page=1),this.onnext(this.state.page,this.pages)):(this.state.page-=1,this.looped&&this.state.page<1&&(this.state.page=this.pages),this.onprevious(this.state.page,this.pages))},e.prototype.track=function(t){var e;return e={pages:this.pages,button:t,page:this.state.page},null!=this.index&&(e.index=this.index),this.app.event(document.location.href,{action:"click",ga:{label:t},category:this.category,params:s.assign({},this.tracking,{slider:e})})},e.prototype.nextPage=function(){return!!this.looped||this.page<this.pages},e.prototype.previousPage=function(){return!!this.looped||this.page>1},e.prototype.showStart=function(){return this.show_start&&!this.state.started()},e.prototype.onnext=s.noop,e.prototype.pageUrl=s.noop,e.prototype.onnavigate=s.noop,e.prototype.onprevious=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Button:r(144)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onintro=u(this.onintro,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{middle:!0,text:"START SLIDESHOW"})}return p(e,t),e.prototype.render=function(){var t,e;return e=this.ampState(),t={text:this.text,onclick:this.onintro,class:this.classes(["slider-start brand-background zeus",this.middle?"middle":void 0])},this.href&&s.assign(t,{href:this.href,no_route:!this.navigate}),this.state.app.amp&&s.assign(t,{class_toggle:{state:e,class:"display_none"},on:["tap:AMP.setState({ "+e+": true })","tap:"+this.id+".goToSlide(index=1)"].join(";")}),new i.Button(this.server).render(t)},e.prototype.ampState=function(){return"carousel_started"+this.index},e.prototype.onintro=function(){return this.update("next"),this.track("start"),this.onclick()},e.prototype.track=s.noop,e.prototype.update=s.noop,e.prototype.onclick=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Link:r(134),Button:r(144)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.View=function(t){function e(){this.onnumberclick=u(this.onnumberclick,this),this.onlinkclick=u(this.onlinkclick,this);var t,r,n;e.__super__.constructor.apply(this,arguments),s.defaults(this,{limit:10,numbered:!0,lettered:!1}),this.lettered&&(this.numbered=!1),this.app=o.App.get(this.server),this.model.pagination?(n=this.model.pagination()||{page:0,pages:0},this.page=n.page,this.pages=n.pages):(this.page=this.model.page,this.pages=this.model.pages),(this.set_rel||this.navigate)&&!this.lettered&&this.model.pageUrl&&(this.hasPage("next")&&(t=this.model.pageUrl(this.page+1,this.base_url)),this.hasPage("previous")&&(r=this.model.pageUrl(this.page-1,this.base_url)),this.app.setRel(r,t))}return p(e,t),e.prototype.render=function(){if(!(this.pages<=1)||this.lettered)return DIV({config:this.config,class:this.classes([this.class,"app-pagination"])},[this.intro(),this.app.amp?void 0:this.link("previous"),this.pageLinks(),this.letterLinks(),this.app.amp?void 0:this.link("next"),this.children])},e.prototype.intro=function(){if(!this.no_intro)return SPAN({class:"intro"},SPAN("View more: "))},e.prototype.link=function(t){var e,r;if(!this.lettered)return e=this.pageNumber(t),r={icon:this.icon(t),reverse:"next"===t,text:s.capitalize(t),icon_class:this.icon_class,class:"pagination-"+t},this.looped||e&&this.hasPage(t)?((this.navigate||this.href)&&(r.href=this.model.pageUrl(e,this.base_url)),this.navigate||s.assign(r,{no_route:!0,onclick:function(e){return function(){return e.onlinkclick(t)}}(this)})):r.fake=!0,new i.Button(this.server).render(r)},e.prototype.hasPage=function(t){var e,r;return e=t+"Page",(r=this[e])?r():this.model[e]?this.model[e]():void 0},e.prototype.letterLinks=function(){var t;if(this.lettered)return t=["0-9"].concat("abcdefghijklmnopqrstuvwxyz".split("")),UL({class:this.classes(["letters","list-bare","list-inline"])},[s.map(t,function(t){return function(e,r){return LI({class:t.classes(["pagination-letter",0===r?"pagination-letter--numbers":void 0])},new i.Link(t.server).render({href:t.model.url(e),class:t.classes([e===t.page?"active":void 0])},s.capitalize(e)))}}(this))])},e.prototype.pageLinks=function(){var t,e,r,n;if(this.numbered)return e=this.limit/2,n=1,t=this.pages,this.pages<=this.limit||(this.page<=e?t=this.limit:this.page>e&&this.page<this.pages-e+1?(n=this.page-e,t=this.page+e-1):n=this.pages-this.limit+1),UL({class:this.classes(["numbers","list-bare","list-inline"])},[s.map(function(){r=[];for(var e=n;n<=t?e<=t:e>=t;n<=t?e++:e--)r.push(e);return r}.apply(this),function(e){return function(r,n){var o,s;return s={class:e.classes([r===e.page?"active":void 0])},e.navigate?(s.href=e.model.pageUrl(r,e.base_url),o=new i.Link(e.server).render(s,r)):(s.text=r,s.onclick=function(){return e.onnumberclick(r)},o=new i.Button(e.server).render(s)),LI({class:e.classes(["pagination-number",n===t-1?"-last":void 0])},o)}}(this))])},e.prototype.onlinkclick=function(t){return this.model[t](function(t){return function(){return t.onnavigate(t.page)}}(this)),this.scroll()},e.prototype.onnumberclick=function(t){var e;return"function"==typeof(e=this.model).goto&&e.goto(t,this.onnavigate),this.scroll()},e.prototype.scroll=function(){if(!this.no_scroll)return this.parent?this.parent.scrollTop=0:window.scrollTo(0,0)},e.prototype.pageNumber=function(t){return"next"===t?this.page+1:this.page-1},e.prototype.icon=function(t){var e;return e="angle-left","next"===t&&(e="angle-right"),e},e.prototype.config=s.noop,e.prototype.onnavigate=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Info:r(163),Icon:r(142),Link:r(134),Time:r(143),Button:r(144),Sponsor:r(146),Mediaobj:r(166)},s={Dom:r(46)},o={Banner:r(126),Article:r(62)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.banner=o.Banner.get(this.server),this.article=o.Article.get(this.server),this.component("mediaobj",i.Mediaobj)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.onclick=h(this.onclick,this);var t;e.__super__.constructor.apply(this,arguments),this.sponsor!==!1&&(this.sponsor=("function"==typeof(t=this.model).sponsor?t.sponsor():void 0)||this.sponsor),this.max_length||(this.max_length=80),a.defaults(this,{ago:!0,show_tag:!0})}return c(e,t),e.prototype.render=function(){return this.state.component("mediaobj").render({el:this.el,body:this.body(),ratio:this.ratio,onclick:this.onclick,href:this.model.url(),outlined:this.outlined,play_button:this.model.leadVideo(),class:this.classes([this.class,"article-mediaobj",this.stacked?"media--stacked":void 0,this.stacked?void 0:"media--small"]),image:{crop:this.crop,width:this.width,height:this.height,retina:this.retina,preload:this.preload,srcsets:this.srcsets,disabled:this.disabled,model:this.model.primaryPhoto().widget}})},e.prototype.body=function(){return[this.head(),this.title(),this.teaser(),this.tag(),this.info(),this.sponsorTag()]},e.prototype.head=function(){if(this.header)return DIV({class:"header"},[this.link([this.state.lazyComponent("time",this.model.id,i.Time).render({ago:this.ago,date:this.model.publish_at})])])},e.prototype.title=function(){var t;return t=this.model.thumbnailTitle(this.title_type||this.social),DIV({class:"title"},this.link([p.trust(a.trunc(t,this.max_length)),this.model.presented_by?p.trust(this.model.presented_by):void 0]))},e.prototype.teaser=function(){var t;if(this.include_teaser)return t="Read More",this.model.leadVideo()&&(t="Watch Video"),[DIV({class:"media__teaser"},[this.link([p.trust(this.model.socialDescription())])]),DIV({class:"media__more"},[this.link([SPAN({class:"inverse-mini-logo"}),t,p.trust("&nbsp;"),new i.Icon(this.server).render({icon:"raquo"})])])]},e.prototype.info=function(){var t;if(this.show_info)return t=this.state.component_id,this.state.lazyComponent("info",t,i.Info).render({model:this.model,show_labels:!1,show_author:this.show_author,hide_intro:this.hide_info_intro})},e.prototype.tag=function(){var t,e;if(this.show_tag&&(t=null!=(e=this.model.taxonomy)?e.section():void 0))return new i.Button(this.server).render({class:"tag",icon:"raquo",reverse:!0,href:t.url(),onclick:this.onlabelclick,text:t.displayName()})},e.prototype.sponsorTag=function(){if(this.sponsor)return this.state.lazyComponent("sponsor",this.model.id,i.Sponsor).render({model:this.sponsor,url:this.model.canonicalUrl()})},e.prototype.link=function(t){return new i.Link(this.server).render({onclick:this.onclick,href:this.model.url()},t)},e.prototype.onclick=function(t){if(this.track(this.model),!s.Dom.metaKeyClick(t))return this.state.article.model(this.model),this.state.banner.model(this.model)},e.prototype.track=a.noop,e.prototype.onlabelclick=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(24),n=r(26),i={Dot:r(164),Link:r(134),Time:r(143),Author:r(165)},o={App:r(48)},s={Date:r(72)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=this.state.app,a.defaults(this,{show_author:!0,show_labels:!0}),null==this.date&&(this.date=this.model.publish_at||this.model.inserted_at)}return p(e,t),e.prototype.render=function(){var t,e;if(!this.model.isCustom()&&!this.model.secondarySlide()&&(e=this.pageInfo(),t=this.labelsInfo(),e||t))return DIV({class:this.classes([this.class,"article-info",this.model.long()?void 0:"flex palm-flex-column"])},[e,t])},e.prototype.pageInfo=function(){var t;if(t=this.byline())return DIV({class:"article-info__page"},[t])},e.prototype.labelsInfo=function(){var t;if(t=this.labels())return DIV({class:this.classes(["article-info__labels",this.model.long()?void 0:"flex-1"])},t)},e.prototype.dot=function(){return(new i.Dot).render()},e.prototype.byline=function(){return a.without([this.author(),this.timestamp()],void 0,null)},e.prototype.author=function(){if(!this.model.hideAuthor()&&this.show_author)return new i.Author(this.server).render({model:this.model.author(),guest:this.model.guestAuthor(),cms_components:this.cms_components})},e.prototype.timestamp=function(){var t,e,r;if(this.date)return e=this.state.component_id,t=this.model.short()&&!s.Date.dayOld(this.date),this.model.hideAuthor()||t||this.hide_intro||(r=" on "),[r||" ",this.state.lazyComponent("time",e,i.Time).render({ago:t,date:this.date,icon:!1,href:this.model.archive()})]},e.prototype.labels=function(){var t,e,r,n;if(this.show_labels&&(r=this.tags||this.model.safeLabels(),r.length))return r=r.slice(0,10),e=r.length,t=e-1,n=t-1,["Filed Under ",a.map(r,function(e){return function(r,o){return[new i.Link(e.server).render({href:r.url()},r.text()),e.joiner(t,n,o)]}}(this))]},e.prototype.joiner=function(t,e,r){return r===t?"":r===e?" & ":", "},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(16),n=r(26),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){var t;return t=i.trust("&#8226;"),this.yahoo?t:SPAN({class:"app-dot"},t)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Link:r(134)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{intro:"By"})}return s(e,t),e.prototype.render=function(){var t,e,r,n;if(this.model){if(r={class:"article-author"},!this.guest&&(t=null!=(n=this.cms_components)?n.authors:void 0))return[this.intro+" ",ADDRESS(r,t(this.model))];if(e=this.getName(),null!=e?e.length:void 0)return this.yahoo?this.name(e):ADDRESS(r,[this.name(e)])}},e.prototype.getName=function(){return this.guest?this.guest:this.short?this.model.displayName():this.model.fullName()},e.prototype.name=function(t){var e,r;return e=this.guestEl(),r=this.intro.length,[!r||!this.guest&&this.link_intro?void 0:this.intro+" ",e||this.link(t,r)]},e.prototype.guestEl=function(){if(this.guest)return this.guest.match(/inverse loot/i)?new i.Link(this.server).render({href:"/topic/inverse-loot"},this.guest):this.yahoo?this.guest:SPAN({class:"article-author__name"},this.guest)},e.prototype.link=function(t,e){var r;if(!this.guest)return r=t,e&&this.link_intro&&(r=this.intro+" "+t),new i.Link(this.server).render({href:this.model.url()},r)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Link:r(134),Play:r(152),Image:r(147)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("image",i.Image)}return s(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{el:DIV,image:{}}),o.defaults(this.image,{model:null,default_width:300,play_button:!1})}return s(e,t),e.prototype.render=function(){return this.el({class:this.classes([this.class,"media"])},this.wrapperAndChildren())},e.prototype.wrapperAndChildren=function(){var t,e;return e=this.imageAndBody(),this.onclick&&!this.href?(t={class:"media__btn btn--plain",onclick:this.onclick},BUTTON(t,e)):e},e.prototype.imageAndBody=function(){return[DIV({class:this.classes(["media__img",this.outlined?"outlined":void 0])},[this.imageComponent(),this.image.children,this.playButton()]),DIV({class:this.classes([this.body_class,"media__body"])},this.body),this.children]},e.prototype.imageComponent=function(){var t,e;if(this.image.model)return e=o.assign(o.omit(this.image,"children"),{ratio:this.ratio}),t=this.state.component("image").render(e),this.link(t,{class:this.classes([this.ratio?"block ratio "+this.ratio:void 0])})},e.prototype.link=function(t,e){return null==e&&(e={}),this.href?(e.href=this.href,this.onclick&&(e.onclick=this.onclick),new i.Link(this.server).render(e,t)):this.ratio&&this.ratio_wrap?DIV({class:"ratio "+this.ratio},t):t},e.prototype.playButton=function(){if(this.play_button)return new i.Play(this.server).render()},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Ad:r(133),Flag:r(168),Thumbnail:r(141)},o={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("flag",i.Flag),this.component("main",i.Thumbnail)}return a(e,t),e}(n.State),e.View=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.screen=o.Screen,t=this.screen.sizes,this.position="stream-package",s.defaults(this,{models:[],srcsets:{},list_ratio:"16:9 palm-2:1",list_right:!(this.palm()&&this.reverse)}),s.defaults(this.srcsets,{main:{sets:[{crop:"4:3",sizes:{small:t.small,medium:t.medium,large:550}}]},list:{sets:[{crop:"4:3",sizes:{small:t.small,medium:600,large:400}}]}})}return a(e,t),e.prototype.render=function(){return DIV({class:this.classes([this.class,this.position,this.reverse?"-reverse":void 0])},[this.flag(),DIV({class:"wrapper flex palm-flex-column"},[this.main(),this.list()])])},e.prototype.flag=function(){if(this.model)return this.state.component("flag").render({model:this.model,track:this.track,position:this.position})},e.prototype.main=function(){if(this.model)return this.state.component("main").render({ratio:"4:3",model:this.model,gradient:!0,show_dek:!0,position:this.position,title_type:"social",srcsets:this.srcsets.main,right:this.palm()&&!this.reverse,class:"stream-package__main",track:function(t){return function(){return t.track(t.position+"-main")}}(this)})},e.prototype.list=function(){if(this.models.length)return UL({config:this.listConfig,class:"list-bare package-list"},[this.listItems(),this.promo()])},e.prototype.listConfig=function(t,e,r){if(!e)return r.onunload=function(){return t.innerHTML=""}},e.prototype.listItems=function(){var t;return t=i.Thumbnail,s.map(this.models,function(e){return function(r){return e.state.lazyComponent("thumbnail",r.id,t).render({el:LI,small:!0,model:r,hanging:!0,right:e.list_right,preload:e.preload,ratio:e.list_ratio,position:e.position,title_type:"social",srcsets:e.srcsets.list,class:e.thumbnail_class,track:function(){return e.track(e.position+"-list")},onlabelclick:function(){return e.track(e.position+"-list-label")}})}}(this))},e.prototype.promo=function(){var t;if(this.include_promo)return t=this.state.component_id,this.state.lazyComponent("promo",t,i.Ad).render({el:LI,preload:!0,position:"oop_package"})},e.prototype.palm=function(){return!!this.server||this.screen.palm()},e.prototype.track=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Flag:r(169)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("flag",i.Flag)}return s(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){var t;if(t=this.tag())return this.state.component("flag").render({track:this.track,href:t.url(),text:t.text(),position:this.position,class:"article-flag"})},e.prototype.tag=function(){var t;if(t=this.model.taxonomy)return this.section?t.section():t.tag()},e.prototype.track=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Button:r(144)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("button",i.Button)}return s(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{position:"default",icon:"angle-right"})}return s(e,t),e.prototype.render=function(){return this.state.component("button").render({fake:this.fake,href:this.href,icon:this.icon,text:this.text,reverse:!0,icon_class:"flex",onclick:function(t){return function(){return t.track(t.position+"-flag")}}(this),class:this.classes([this.class,"app-flag",this.middle?"-middle":void 0])})},e.prototype.track=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,p=function(t,e){return function(){return t.apply(e,arguments)}};o=r(24),n=r(26),i={Flag:r(169),Package:r(167)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("flag",i.Flag)}return s(e,t),e}(n.State),e.View=function(t){function e(){this.flag=p(this.flag,this),e.__super__.constructor.apply(this,arguments),this.position="stream-related"}return s(e,t),e.prototype.render=function(){return DIV({class:this.classes([this.class,this.position])},[o.map(o.chunk(this.articles,3),function(t){return function(e,r){var n,s;return s=e[0],0===r&&(n=t.flag),t.state.lazyComponent("package",s.id,i.Package).render({model:s,track:t.track,position:t.position,flag:n||o.noop,models:e.slice(1)})}}(this))])},e.prototype.flag=function(){return this.state.component("flag").render({fake:!0,icon:!1,text:"Related"})},e.prototype.track=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Flag:r(168),Banner:r(172)},o={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("flag",i.Flag),this.component("article",i.Banner)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position="stream-featured"}return a(e,t),e.prototype.render=function(){return DIV({class:this.classes([this.class,this.position,null!=this.ad?"-special":void 0])
},[this.state.component("flag").render({model:this.model,track:this.track,section:this.section,position:this.position}),this.content()])},e.prototype.content=function(){var t;return t=this.article(),null==this.ad?t:DIV({class:"flex palm-flex-column"},[t,this.ad])},e.prototype.article=function(){var t;return t=null!=this.ad,this.state.component("article").render({url:!0,big:!1,date:!1,model:this.model,active:!1,dynamic:!0,preload:!1,position:"featured",track:function(t){return function(){return t.track(t.position)}}(this),centered:t&&!this.palm(),class:this.classes([t?"flex-1":void 0])})},e.prototype.palm=function(){return!!this.server||o.Screen.palm()},e.prototype.track=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(24),n=r(26),i={Banner:r(173),Pagination:r(198)},s={App:r(48),Banner:r(126),Screen:r(40),Article:r(62),Pillager:r(97)},o={Image:r(67)},a={Image:r(100)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=s.App.get(this.server),this.banner=s.Banner.get(this.server),this.article=s.Article.get(this.server),this.pillager=s.Pillager.get(this.server),this.arm=this.pillager.getArm(this.m(a.Image).name),this.component("banner",i.Banner)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.onclick=h(this.onclick,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,p.defaults(this,{preload:!0,model:this.state.banner.model()})}return c(e,t),e.prototype.render=function(){var t;if(this.model)return t=this.defaultProps(),this.article?p.assign(t,this.articleProps()):p.assign(t,this.largeProps()),this.state.component("banner").render(t)},e.prototype.defaultProps=function(){var t,e;return{big:this.big,cms:this.cms,class:this.class,id:this.model.id,parent:this.model,active:this.active,dynamic:this.dynamic,preload:this.preload,amp_image:this.amp_image,changed_at:"function"==typeof(t=this.model).changedAt?t.changedAt():void 0,cms_components:this.cms_components,color_reversal:this.color_reversal,model:this.widget||(null!=(e=this.model.primaryPhoto())?e.widget:void 0)}},e.prototype.largeProps=function(){var t,e;return this.url&&(e=this.model.url()),{url:e,onclick:this.onclick,auto:this.full_screen,centered:this.centered,full_screen:this.full_screen,play_button:this.model.leadVideo(),sponsor:this.sponsor||this.model.sponsor(),dek:null!=(t=this.model.abstract("dek"))?t.styledText():void 0,title:this.model.title("large").styledText()}},e.prototype.articleProps=function(){var t,e,r,n,i,s,a;return t=this.app.articlePage(),n="function"==typeof(e=this.model).slideshow?e.slideshow():void 0,i=this.widget||(null!=(a=this.model.bodyWidget("banner"))?a.widget:void 0),n&&this.model.slideshow_page>1&&(i=this.model.currentSlide().widget),i||(i=this.m(o.Image)),s=this.articleDefaultProps(i),n&&this.addSlideshowProps(s),(t||this.app.cms)&&("function"==typeof(r=this.model).long?r.long():void 0)?this.addLongProps(s):(p.assign(s,{short:!0}),t&&this.noCrop(i)?this.addNocropProps(s):this.addRatio(s)),s},e.prototype.articleDefaultProps=function(t){return{model:t,article:!0,gradient:!1,auto_play:this.first,width:s.Screen.sizes.content,class:this.classes([this.class,"article-banner",t.is_image?"outlined":void 0])}},e.prototype.addSlideshowProps=function(t){return p.assign(t,{pagination:this.pagination(),page:this.model.slideshow_page,url:t.model.overrides.affiliate_link})},e.prototype.addLongProps=function(t){return p.assign(t,{mono:!0,centered:!0,featured:!0,full_screen:!0,crops:{large:"4:3"}})},e.prototype.addNocropProps=function(t){return p.assign(t,{crop:!1,dynamic:!1,ratio_class:!1,not_background:!0})},e.prototype.addRatio=function(t){var e,r;return e=this.state.arm.widget(),r=e,t.model.is_image||(r="16:9"),p.assign(t,{crop:e,ratio_class:r})},e.prototype.noCrop=function(t){if(t)return t.noCrop()||!(t.is_image||t.isVideo())},e.prototype.onclick=function(t,e){if(this.track(this.model),!e)return this.state.banner.model(this.model),this.state.article.model(this.model)},e.prototype.pagination=function(){var t,e;if(!this.cms&&("function"==typeof(t=this.model).slideshow?t.slideshow():void 0))return e=this.state.component_id,this.state.lazyComponent("pagination",e,i.Pagination).render({top:this.top,model:this.model,position:"top",container:this.container})},e.prototype.top=p.noop,e.prototype.track=p.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),o={App:r(48),Screen:r(40),Authors:r(111)},i={Link:r(134),Play:r(152),Header:r(174),Image:r(147),Widget:r(175),Background:r(197)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.authors=o.Authors.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen,s.defaults(this,{page:"",ratio:!0,play_button:!1,gradient:{big:!0}})}return p(e,t),e.prototype.render=function(){var t;if(this.model)return t=DIV,this.article&&(t=FIGURE),t({class:this.classes([this.class,"app-banner",this.play_button?"app-banner--play":void 0])},[this.imageOrWidget(),this.content(),this.pagination])},e.prototype.content=function(){var t,e,r,n,o;if(r=this.state.component_id,t=this.state.lazyComponent("header",r,i.Header),e=t.render({id:this.id,big:this.big,cms:this.cms,dek:this.dek,url:this.url,title:this.title,active:this.active,onclick:this.onclick,preload:this.preload,sponsor:this.sponsor,featured:this.featured,class:this.header_class,title_url:this.title_url,cms_components:this.cms_components,color_reversal:this.color_reversal},[this.info]),e||this.children)return o={class:this.classes(["wrapper banner-wrapper",this.play_button?"flex flex-column":void 0])},(n=this.style())&&(o.style=n),DIV(o,[this.playButton(),e,this.children])},e.prototype.style=function(){if(this.url)return{cursor:"pointer"}},e.prototype.imageOrWidget=function(){return this.model.is_image||null!=this.model.crop?this.image():this.widget()},e.prototype.widget=function(){var t,e;return t=this.state.component_id,e=this.state.lazyComponent("widget",t,i.Widget).render({model:this.model,preload:this.preload,auto_play:this.auto_play}),this.cmsCheck("buttons")?[e,this.cms_components.buttons()]:e},e.prototype.image=function(){var t,e,r;return e={class:this.classes([this.ratios(),this.gradients()])},e.class||(e={}),r={auto:this.auto,crop:this.crop,mono:this.mono,model:this.model,width:this.width,short:this.short,preload:this.preload,srcsets:this.srcsets,centered:this.centered,full_screen:this.full_screen},t=this.banner({image_props:r,child_props:e}),this.cmsCheck("buttons")?[t,this.cms_components.buttons()]:t},e.prototype.banner=function(t){var e,r,n,o,a,p,c;return a=t.image_props,e=t.child_props,n=this.model.id||this.state.component_id,this.not_background?(p="image",o=i.Image):(p="background",o=i.Background),r=this.state.lazyComponent(p,n,o).render(a),this.cmsCheck("photo")&&(r=this.cms_components.photo(r)),c=this.linkOrDiv(),this.url&&s.assign(e,{href:this.url,onclick:this.onclick}),s.isEmpty(e)?r:c(e,[r])},e.prototype.ratios=function(){if(this.ratio_class!==!1&&(!this.full_screen||this.dynamic))return this.classes(["ratio",this.ratioClass()])},e.prototype.ratioClass=function(){return this.ratio_class?this.ratio_class:"dynamic"},e.prototype.linkOrDiv=function(t){return this.url?new i.Link(this.server).render:DIV},e.prototype.cmsCheck=function(t){var e;return this.cms&&(null!=(e=this.cms_components)?e[t]:void 0)},e.prototype.gradients=function(){if(this.gradient)return this.classes(["gradient",this.gradient.big?"gradient--big":void 0])},e.prototype.playButton=function(){var t;if(this.play_button)return t={middle:!1,wrapper:!0,wrapper_class:"flex-1"},this.url&&s.assign(t,{href:this.url,onclick:this.onclick}),new i.Play(this.server).render(t)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),i={Link:r(134),Sponsor:r(146),Highlight:r(150)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=this.state.app,s.defaults(this,{dek:"",big:!0,el:HEADER,highlight:!0})}return p(e,t),e.prototype.render=function(){var t,e,r,n;if(e=this.dekTag(),n=this.titleTag(),r=this.sponsorTag(),t=s.without(this.children||[],[],"",null,void 0),n||e||r||t.length||this.podcast)return this.el({class:this.classes([this.class,"app-banner-header",this.color_reversal?"app-banner-header--reversed":void 0,this.featured?"middle":void 0])},[this.intro(n,e,r),t])},e.prototype.intro=function(t,e,r){if(t||e||r||this.podcast)return DIV({class:"banner-intro"},[t,e,this.podcast,r])},e.prototype.titleTag=function(){var t,e,r,n;if(this.cms){if(!(null!=(e=this.cms_components)?e.title:void 0))return;return r=this.cms_components.title()}if(this.title)return t=this.titleEl(),n=this.title_url||this.url,this.highlight?new i.Highlight(this.server).render({el:t,big:this.big,href:n,onclick:this.onclick},[a.trust(this.title)]):t({class:"banner-title"},this.linkOrComponent(a.trust(this.title),n))},e.prototype.titleEl=function(){return this.primary()?H1:H2},e.prototype.dekTag=function(){var t,e,r,n;if(!this.short){if(n=this.url,this.cms){if(!(null!=(t=this.cms_components)?t.dek:void 0))return;r=this.cms_components.dek()}else{if(!this.dek)return;if("object"==typeof this.dek){if(!(r=this.dek.components))return;n=null}else{if(!this.dek.length)return;r=a.trust(this.dek)}}return(e=this.primary()?H2:P)({class:"banner-dek"},[this.linkOrComponent(r,n)])}},e.prototype.linkOrComponent=function(t,e){return e&&!this.app.cms?new i.Link(this.server).render({href:e,onclick:this.onclick},t):t},e.prototype.sponsorTag=function(){var t;if(this.sponsor)return t=this.state.component_id,this.state.lazyComponent("sponsor",t,i.Sponsor).render({url:this.url,model:this.sponsor,preload:this.preload})},e.prototype.primary=function(){return null==this.active||this.active===!0},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Pdf:r(176),Link:r(190),Rich:r(191),Vine:r(192),Embed:r(177),Vimeo:r(193),Github:r(194),Itunes:r(195),Soundcloud:r(196)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){var t,e,r,n;if("function"==typeof this.model.name)return n=this.model.name(),r=this.state.component_id,e=i[o.capitalize(n)],e||(n=this.model.oembedData("type"),e=i[o.capitalize(n)]),e||(n="embed",e=i.Embed),this.model.isPDF()&&(n="pdf",e=i.Pdf),this.model.isItunes()&&(n="itunes",e=i.Itunes),t=o.assign({},this.attributes(),{model:this.model,reset:this.reset,preload:this.preload,activate:this.activate,disabled:this.disabled,fetching:this.fetching,auto_play:this.auto_play}),this.state.lazyComponent("embed-"+n,r,e).render(t)},e.prototype.activate=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Embed:r(177)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("embed",i.Embed)}return o(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.state.component("embed").render({model:this.model,ratio:"17:22"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r(24),a=r(16),n=r(26),i={AmpWidgets:r(178)},o={App:r(48),Scripts:r(114)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.scripts=o.Scripts.get(this.server)}return p(e,t),e.prototype.loadScript=function(t){var e;if(!(this.app.navigating||this.scripted&&!this.app.cms)&&(this.scripted=!0,e=t.script())){if(this.app.cms){if(this.scripted===e)return;this.scripted=e}return this.scripts.loadFromModel(t,e)}},e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),null==this.ratio&&(this.ratio="16:9"),this.state.loadScript(this.model)}return p(e,t),e.prototype.render=function(){var t,e;if(t=this.embed())return e={config:this.config,class:this.classes()},this.state.app.amp||(e.id=this.model.id),DIV(e,t)},e.prototype.embed=function(){return this.state.app.amp?this.state.lazyComponent("amp",this.model.id,i.AmpWidgets).render({model:this.model,ratio:this.ratio}):this.children||a.trust(this.model.embed()||"")},e.prototype.classes=function(){var t;return t=this.model.name(),e.__super__.classes.call(this,[this.class,"media-embed",t?"media-"+t:void 0,this.ratio?"ratio "+this.ratio:void 0])},e.prototype.config=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Vine:r(179),Art19:r(181),Video:r(183),Iframe:r(182),Itunes:r(184),Reddit:r(185),Twitter:r(186),Facebook:r(187),Jwplayer:r(188),Instagram:r(189)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){var t,e;return e=this.model.name(),t=i[o.capitalize(e)],this.model.isItunes()&&(t=i.Itunes),this.model.isIframe()&&(t=i.Iframe),t||(e=this.model.oembedData("type"),("video"!==e||this.model.isVideo())&&(t=i[o.capitalize(e)])),t||(t=this.model.isVideo()?i.Video:i.Iframe),new t(this.server).render({model:this.model,ratio:this.ratio})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(16),n=r(180),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.store.add("vine"),i("amp-vine",this.defaults({"data-vineid":this.id()}))},e.prototype.id=function(){var t,e;return e=this.model.url.replace(/\/simple\/?/,""),e=e.replace(/\/embed\/?/,""),e=e.replace(/\/$/,""),t=e.split("/"),t[t.length-1]},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Amp:r(149)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.store=i.Amp.get(this.server),"string"==typeof this.ratio&&this.ratio.match(/^\d{1,2}:\d{1,2}$/)&&(this.ratio_dimensions=this.ratio.split(":"))}return s(e,t),e.prototype.id=function(){var t,e;return e=this.model.url.replace(/\/$/,""),t=e.split("/"),t[t.length-1].replace(/\?.*/,"")},e.prototype.defaults=function(t){var e,r,n;return null==t&&(t={}),e={layout:"responsive"},(n=this.width())&&(e.width=n),(r=this.height())&&(e.height=r),o.merge(e,t)},e.prototype.width=function(){var t;return this.ratio_dimensions?this.ratio_dimensions[0]:(this.thumbnail&&(t=this.thumbnailWidth()),t||this.model.width())},e.prototype.height=function(){var t;return this.ratio_dimensions?this.ratio_dimensions[1]:(this.thumbnail&&(t=this.thumbnailHeight()),t||this.model.height())},e.prototype.ensureDimensions=function(t){var e,r;return r=t.width,e=t.height,r||(t.width=this.thumbnailWidth()),e||(t.height=this.thumbnailHeight()),t.height||(t.height=t.width),o.defaults(t,this.defaultDimensions())},e.prototype.thumbnailWidth=function(){return this.model.oembedData("thumbnail_width")},e.prototype.thumbnailHeight=function(){return this.model.oembedData("thumbnail_height")},e.prototype.defaultDimensions=function(){return{width:100,height:100}},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(182),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.defaults=function(){return i.assign(e.__super__.defaults.apply(this,arguments),{height:220,width:"auto",layout:"fixed-height"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(180),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){var t,e;if(e=this.src())return this.store.add("iframe"),t=i.map(this.defaults(e),function(t,e){return e+'="'+t+'"'}),"<amp-iframe "+t.join(" ")+" allowfullscreen>"},e.prototype.defaults=function(t){var r;return r=e.__super__.defaults.call(this,{src:t,frameborder:0,sandbox:this.sandbox()}),this.model.isYoutube()&&(r.scrolling="no"),this.ensureDimensions(r)},e.prototype.src=function(t){var e,r;if(this.model.isIframe()&&(t=!0),t){if(e=this.model.embed().match(/src="([^"]*)"/),!(null!=e?e[1].length:void 0))return;if(e)return"https:"+e[1]}if(r=this.model.secureUrl(),r.length)return r},e.prototype.sandbox=function(){return["allow-scripts","allow-same-origin","allow-popups","allow-popups-to-escape-sandbox"].join(" ")},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(180),i={Image:r(67)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(){return this.store.add("video"),s("amp-video",this.defaults({src:this.model.secureUrl(),poster:this.model.oembedData("thumbnail_url")}))},e.prototype.defaults=function(t){var r;return null==t&&(t={}),r=e.__super__.defaults.call(this,o.defaults(t,{poster:i.Image.WIDE_PLACEHOLDER})),this.ensureDimensions(r)},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(182),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.src=function(){return"itunes"!==this.model.provider()?this.model.url:e.__super__.src.call(this,!0)},e.prototype.defaults=function(){return i.assign(e.__super__.defaults.apply(this,arguments),{height:104})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),i=r(24),n=r(180),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){var t;if(t=this.model.url)return this.store.add("reddit"),o("amp-reddit",this.defaults(t))},e.prototype.defaults=function(t){var r;return r=e.__super__.defaults.call(this,{"data-src":t}),i.assign(r,this.redditOptions()),this.ensureDimensions(r)},e.prototype.redditOptions=function(){var t,e,r,n,i,o;return this.model.isRedditComment()&&(e=this.model.embed(),o=null!=(n=e.match(/data-embed-uuid="([^"]*)"/))?n[1]:void 0,t=null!=(i=e.match(/data-embed-created="([^"]*)"/))?i[1]:void 0,o&&t&&(r={"data-uuid":o,"data-embedlive":"true","data-embedparent":"true","data-embedtype":"comment","data-embedcreated":t})),r||(r={"data-embedtype":"post"}),r},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(16),n=r(180),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.store.add("twitter"),i("amp-twitter",this.defaults({"data-tweetid":this.id(),height:this.model.width()}))},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(16),n=r(180),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.thumbnail=!0}return o(e,t),e.prototype.render=function(){return this.store.add("facebook"),i("amp-facebook",this.defaults())},e.prototype.defaults=function(){var t;return t={"data-href":this.model.url},this.video()&&(t["data-embed-as"]="video"),this.ensureDimensions(e.__super__.defaults.call(this,t))},e.prototype.video=function(){return this.model.url.match(/\/videos\//)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),n=r(180),i={Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){var t;if(t=this.model.oembedData("mediaid"))return this.store.add("jwplayer"),o("amp-jwplayer",this.defaults(t))},e.prototype.defaults=function(t){return{width:16,height:9,layout:"responsive","data-media-id":t,"data-player-id":i.Accounts.jwplayer.id}},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(16),n=r(180),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.thumbnail=!0}return o(e,t),e.prototype.render=function(){return this.store.add("instagram"),i("amp-instagram",this.defaults({"data-shortcode":this.id()}))},e.prototype.defaults=function(t){return null==t&&(t={}),this.ensureDimensions(e.__super__.defaults.call(this,t))},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Embed:r(177)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("embed",i.Embed)}return o(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.state.component("embed").render({model:this.model,ratio:this.ratio(),class:"media-link"},this.component())},e.prototype.ratio=function(){switch(this.model.name()){case"libsyn":return!1;case"knightlab":return"4:3 palm-1:1 phone-17:22";case"cdc":return"25:38";case"art19":return!1}},e.prototype.component=function(){var t;return t=this.model.secureUrl(),this.model.isVideo()?VIDEO({src:t,controls:!0,autoplay:!1}):IFRAME({src:t})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Embed:r(177)},o={App:r(48),Ads:r(39),Modal:r(102),Screen:r(40),Scripts:r(114)},s={Dom:r(46),Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.ads=o.Ads.get(this.server),this.modal=o.Modal.get(this.server),this.scripts=o.Scripts.get(this.server),this.component("embed",i.Embed)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.unload=h(this.unload,this),this.unloadAndDeinit=h(this.unloadAndDeinit,this),this.processScript=h(this.processScript,this),this.onscroll=h(this.onscroll,this),this.onresize=h(this.onresize,this),this.config=h(this.config,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen,a.defaults(this,{ratio:!1,reset:a.noop,disabled:!1}),this.activate(this.processScript),this.process=this.model.oembed_data&&this[this.model.name()],(this.model.isJwplayer()||this.model.twitterVideo())&&(this.ratio="16:9"),this.checkModalReset(),this.checkReset(),this.state.initialized||this.addJWCallback()}return c(e,t),e.prototype.checkModalReset=function(){var t;if(this.app.cms)return t=this.state.has_modal,this.state.has_modal=null!=this.state.modal.component(),t&&!this.state.has_modal?this.reset(!0):void 0},e.prototype.checkReset=function(){if(this.app.cms)return this.reset()||this.state.loaded&&this.state.url!==this.model.url?(this.reset(!1),this.deinitialize(this.state.url===this.model.url)):void 0},e.prototype.render=function(){return this.state.component("embed").render({model:this.model,ratio:this.ratio,config:this.config,class:"media-rich"})},e.prototype.config=function(t,e,r){var n;if(t!==this.state.el&&this.unloadAndDeinit(),this.state.el=t,this.process&&(this.state.initialized||(this.state.initialized=!0,n=this.state.component_id,this.screen.addCallback(n,"resize",this.onresize),this.screen.addCallback(n,"scroll",this.onscroll),this.update(),r.onunload=this.unloadAndDeinit),this.app.cms||this.preload))return this.update()},e.prototype.update=function(){return this.onresize(),this.onscroll()},e.prototype.onresize=function(){if(!this.preload)return this.state.rect=s.Dom.rect(this.state.el)},e.prototype.onscroll=function(){var t;if(!this.fetching&&(this.app.loaded||this.process)&&(!this.state.loaded||!(t=this.state.url===this.model.url)))return this.processScript(!t)},e.prototype.processScript=function(t){var e,r;if(r=this.preload&&!this.state.loaded,e=this.state.loaded&&t||this.inBounds(),(r||e)&&(this.addJWCallback(),!this.disabled&&this[this.model.name()](this.state.el)))return this.ondone(),this.unload()},e.prototype.twitter=function(t){return s.Accounts.loadTwitter(t)},e.prototype.instagram=function(t){return s.Accounts.processInstagrams(t)},e.prototype.facebook=function(t){return s.Accounts.parseFacebook(t,!1)},e.prototype.reddit=function(){if("undefined"!=typeof rembeddit&&null!==rembeddit)return rembeddit.init()},e.prototype.addJWCallback=function(){if(!this.state.added&&"jwplayer"===this.model.name()){if(this.server){if(!this.preload)return}else if(!this.inBounds())return;return this.state.added=!0,this.state.scripts.onload(this.model.name(),this.processScript)}},e.prototype.jwplayer=function(){var t,e,r,n;if("function"==typeof window.jwplayer&&(this.app.cms||!this.state.player)&&(e=this.model.oembedData("mediaid"),n=window.jwplayer("jw-"+e+"-"+this.model.id),"function"==typeof n.setup))return this.state.player=n,this.app.cms&&"function"==typeof(t=this.state.player).remove&&t.remove(),r={playlist:"//content.jwplatform.com/feeds/"+e+".json"},this.state.ads.preroll||a.assign(r,{related:{oncomplete:"show"},advertising:{tag:"",client:"vast"}}),this.app.navigated&&this.auto_play&&a.assign(r,{autostart:!0}),this.state.player.setup(r),this.app.navigate_cbs[this.state.component_id]=this.unloadAndDeinit,!0},e.prototype.unloadAndDeinit=function(){return this.unload(),this.deinitialize()},e.prototype.ondone=function(){return this.state.loaded=!0,this.state.url=this.model.url},e.prototype.unload=function(){var t;return t=this.state.component_id,this.screen.removeCallback(t,"resize"),this.screen.removeCallback(t,"scroll")},e.prototype.deinitialize=function(t){var e,r,n;if(null!=(e=this.state.player)&&"function"==typeof e.remove&&e.remove(),this.state.player=null,null!=(r=this.state.el)&&(r.innerHTML=""),this.state.loaded=!1,this.state.initialized=!1,t&&this[this.model.name()])return null!=(n=this.state.el)?n.innerHTML=this.model.embed():void 0},e.prototype.inBounds=function(){var t;if(this.preload)return!0;if(null!=(null!=(t=this.state.rect)?t.top:void 0))return Math.abs(this.state.rect.top)<=this.screen.scroll.top()+this.screen.threshold()},e.prototype.activate=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Embed:r(177)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("embed",i.Embed)}return o(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.state.component("embed").render({ratio:"1:1",model:this.model})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),
i={Embed:r(177)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("embed",i.Embed)}return o(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.state.component("embed").render({ratio:"8:5",model:this.model},this.video())},e.prototype.video=function(){if("link"===this.model.oembedData("type"))return IFRAME({src:this.model.secureUrl()})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),n=r(26),i={Embed:r(177)},s={Window:r(47)},o={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("embed",i.Embed)}return p(e,t),e}(n.State),e.View=function(t){function e(){return this.config=u(this.config,this),e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.render=function(){return this.state.component("embed").render({model:this.model,ratio:this.ratio()},this.body())},e.prototype.ratio=function(){if(!this.server)return!1},e.prototype.body=function(){return IFRAME({id:this.id(),config:this.config})},e.prototype.config=function(t){var e;if(o.Screen.resized.width()||this.state.embed!==this.model.embed()){if(!(e=this.frameDoc(t)))return;return this.state.embed=this.model.embed(),window.adjustInverseIframeHeight||(window.adjustInverseIframeHeight=s.Window.adjustIframeHeight),e.open(),e.writeln(this.html()),e.close()}},e.prototype.frameDoc=function(t){var e;return e=t.document,t.contentDocument?e=t.contentDocument:t.contentWindow&&(e=t.contentWindow.document),e},e.prototype.html=function(){return"<html><head>"+this.head()+'</head><body onload="'+this.onload()+'">'+this.script()+"</body></html>"},e.prototype.onload=function(){return"parent.adjustInverseIframeHeight('"+this.id()+"', document)"},e.prototype.id=function(){return"media-iframe-"+this.model.component_id},e.prototype.script=function(){return'<script src="'+this.model.embed()+'.js"></script>'},e.prototype.head=function(){return""+this.utf()+this.content()+this.viewport()+this.base()+this.style()},e.prototype.utf=function(){return'<meta charset="utf-8">'},e.prototype.content=function(){return'<meta http-equiv="X-UA-Compatible" content="IE=edge">'},e.prototype.viewport=function(){return'<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,user-scalable=no,width=device-width">'},e.prototype.base=function(){return'<base target="_blank">'},e.prototype.style=function(){return"<style>body{margin: 0;max-width:"+(o.Screen.width()-40)+"px;overflow: auto;}</style>"},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Embed:r(177)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("embed",i.Embed)}return o(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.state.component("embed").render({model:this.model},this.embed())},e.prototype.embed=function(){if("link"===this.model.oembedData("type"))return IFRAME({src:this.model.secureUrl()})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Embed:r(177)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("embed",i.Embed)}return o(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.state.component("embed").render({ratio:!1,model:this.model})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(147),i={Pillager:r(97)},o={Image:r(100)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.default_width=this.screen.sizes.large,this.pillager=i.Pillager.get(this.server),this.arm=this.pillager.getArm(this.m(o.Image).name)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{threshold:75}),s.assign(this,{wrapper_class:this.wrapperClass()}),this.app.amp&&(this.srcsets.sets=s.uniq(this.srcsets.sets,"crop"))}return a(e,t),e.prototype.wrapperClass=function(){var t;return t=this.classOptions(),this.classes([this.wrapper_class,"media-background",this.fixed?"fixed":void 0,this.ratio?"ratio":void 0,t.overlay?"overlay":void 0,this.full_screen?"full-screen":void 0,t.static_background?"static-background":void 0,this.background?"-background":void 0])},e.prototype.classOptions=function(){var t;return t={overlay:this.overlay&&!this.no_overlay,static_background:this.mono&&!(this.overlay||this.no_overlay)},t.static_background&&this.overrideMono()&&s.assign(t,{overlay:!0,static_background:!1}),t},e.prototype.overrideMono=function(){if(this.model.mono,1)return 0===this.model.mono().length},e.prototype.ampImage=function(){return DIV({class:this.wrapper_class},[e.__super__.ampImage.apply(this,arguments)])},e.prototype.defaultSets=function(t){return this.short?[{crop:this.state.arm.widget(),sizes:{small:t.small,large:t.medium}}]:[{crop:this.crops.small||"3:4",sizes:{small:t.small}},{crop:this.crops.medium||"4:3",sizes:{medium:t.medium}},{crop:this.crops.large||"2:1",sizes:{large:t.large,xlarge:t.xlarge}}]},e.prototype.styles=function(){if(!this.server&&!this.auto&&this.full_screen)return this.state.height&&!this.screen.heightResize(this.state.height)||(this.state.height=this.screen.height()+this.threshold),{height:this.state.height+"px"}},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),o={Ads:r(39),App:r(48),Screen:r(40)},i={Pagination:r(159)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.ads=o.Ads.get(this.server),this.app=o.App.get(this.server),this.component("pagination",i.Pagination)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.pageUrl=u(this.pageUrl,this),this.transitionEnd=u(this.transitionEnd,this),this.transition=u(this.transition,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen,this.model.slideshow_page>1&&(this.state.show_start=!1),null==this.state.show_start&&(this.state.show_start=1===this.model.slideshow_page,this.state.show_start&&this.app.setRel(null,this.model.pageUrl(2)))}return p(e,t),e.prototype.render=function(){var t;return t="top"===this.position,this.state.component("pagination").render({el:NAV,href:!0,class:this.class,set_rel:!0,pageUrl:this.pageUrl,play_buttons:!0,onnext:this.transition,position:this.position,circle_buttons:t,onprevious:this.transition,center_start:this.center_start,page:this.model.slideshow_page,category:"article-slideshow",show_start:this.state.show_start,tracking:this.model.skreemrParams(),pages:this.model.contentSections().length,start_wrapper_class:this.start_wrapper_class})},e.prototype.transition=function(t){var e,r;if(this.transitionListener(!0),this.state.page=t,this.app.header_up=!0,this.model.slideshow_transition=!0,r=this.model.pageUrl(t),!this.app.cms)return this.track(r),this.app.updateAndToggleCanonical(this.model),this.state.ads.refresh(this.model.id),window.history.replaceState({},"",r),e=this.top(),this.screen.rail()&&(e-=40),window.scrollTo(0,e)},e.prototype.transitionEnd=function(){if(this.model.slideshow_transition)return this.state.show_start=!1,this.app.header_up=!1,this.model.slideshow_transition=!1,this.model.slideshow_page=this.state.page,this.transitionListener(!1),a.redraw()},e.prototype.transitionListener=function(t){var e,r;if((e=this.container())&&(!t||!this.state.listening))return this.state.listening=t,r="removeEventListener",t&&(r="addEventListener"),e[r]("transitionend",this.transitionEnd)},e.prototype.pageUrl=function(t){return this.model.pageUrl(t)},e.prototype.track=function(t){return this.app.track(t,{slideshow:!0,dimensions:this.model.gaDimensions(),params:s.assign({},this.model.skreemrParams())})},e.prototype.top=function(){return 0},e.prototype.container=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Banner:r(173),Links:r(200)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("banner",i.Banner)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{article:!0,centered:!0})}return a(e,t),e.prototype.render=function(){return this.state.component("banner").render({dek:this.dek,preload:!0,retina:this.retina,centered:this.centered,gradient:this.gradient,title:this.titleText(),ratio_class:this.ratio_class,color_reversal:this.color_reversal,class:this.classes([this.class,this.article?"article-banner":void 0]),header_class:this.classes([this.centered?"centered":void 0]),model:{id:"generic-image",embed:s.prop(this.src||"https://fsmedia.imgix.net/assets/generic.jpg"),crop:function(t){return function(e){if(t.src)return t.src;switch(e){case"2:1":return"https://fsmedia.imgix.net/assets/generic_2x1.jpg";case"3:4":return"https://fsmedia.imgix.net/assets/generic_3x4.jpg";default:return"https://fsmedia.imgix.net/assets/generic_4x2.jpg"}}}(this)}},[this.info()])},e.prototype.info=function(){var t;if(t=o.without([this.children,this.links()],null,void 0),t.length)return DIV({class:"info"},t)},e.prototype.links=function(){if(!this.hide_links)return new i.Links(this.server).render()},e.prototype.titleText=function(){if(!this.no_title)return this.title||this.defaultText()},e.prototype.defaultText=function(){return"The future is already here, its just not very evenly distributed."},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Link:r(134),Button:r(144)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{www:"",inline:!0}),this.app=o.App.get(this.server)}return a(e,t),e.prototype.render=function(){return UL({class:this.classes([this.class,"statics-links",this.inline?"list-inline":void 0,this.inline?void 0:"list-bare"])},[this.title,this.include_about?this.about():void 0,this.extraLinks(),s.map(this.LINKS,function(t){return function(e){return t.link(e)}}(this)),this.logout(),this.copy()])},e.prototype.logout=function(){if(this.app.fb.connected)return LI({class:"static-link"},[A({onclick:this.app.logoutFb,href:"javascript:void(0);"},["Logout"])])},e.prototype.extraLinks=function(){if(this.extra)return[this.about(),this.link({text:"Newsletter",href:"/newsletter"})]},e.prototype.about=function(){return this.link({text:"About",href:"/about"})},e.prototype.link=function(t){var e,r;if(e=t.href,r=t.text,"/labs"!==e||!this.skip_labs)return LI({class:"static-link"},[new i.Link(this.server).render({href:""+this.www+e,onclick:this.onclick,class:this.classes([this.path()===e?"active":void 0])},r)])},e.prototype.copy=function(){if(this.copyright)return LI({class:"copyright static-link"},(new Date).getFullYear())},e.prototype.LINKS=[{text:"Labs",href:"/labs"},{text:"Advertise",href:"/advertise"},{text:"Archive",href:"/archive"},{text:"Browse",href:"/browse"},{text:"Privacy",href:"/privacy-policy"},{text:"Commerce",href:"/commerce-policy"},{text:"Terms",href:"/terms-of-service"},{text:"DMCA",href:"/dmca"}],e.prototype.onclick=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,l=function(t,e){return function(){return t.apply(e,arguments)}};c=r(16),p=r(24),n=r(26),o=r(44),i={Ad:r(133)},s={Ads:r(39),App:r(48),Screen:r(40),Navigation:r(115)},a={Dom:r(46),Cookies:r(32)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),p.assign(this,{timeout:0,lock_ad:!0,rendered:!1,onactivate:c.prop(p.noop),ads:s.Ads.get(this.server),app:s.App.get(this.server),navigation:s.Navigation.get(this.server)}),this.component("ad",i.Ad)}return u(e,t),e}(n.State),e.View=function(t){function e(){this.toggleListener=l(this.toggleListener,this),this.transitionEnd=l(this.transitionEnd,this),this.ontimeout=l(this.ontimeout,this),this.onload=l(this.onload,this),this.onunload=l(this.onunload,this),this.onresize=l(this.onresize,this),this.onscroll=l(this.onscroll,this),this.config=l(this.config,this),e.__super__.constructor.apply(this,arguments),p.assign(this,{fixed:!1,position:"top",ads:this.state.ads,app:this.state.app,screen:s.Screen}),this.ads.render||this.deactivate()}return u(e,t),e.prototype.render=function(){return this.state.component("ad").render({preload:!0,timespy:!0,config:this.config,onload:this.onload,onrender:this.onrender,position:this.position,ontimeout:this.state.onactivate})},e.prototype.config=function(t,e,r){var n;return this.state.el=t,e||(n=this.state.component_id,this.state.sensor=new o(t,this.onresize),this.onresize(),this.sticky()||this.screen.addCallback(n,"scroll",this.onscroll),r.onunload=function(t){return function(){return t.onunload(),t.screen.removeCallback(n,"scroll")}}(this)),this.checkDisabled()},e.prototype.onscroll=function(){if(this.state.rect&&this.ads.animated())return this.updateParent()},e.prototype.checkDisabled=function(){return!this.state.disabled&&this.state.navigation.menu()?(this.state.disabled=!0,this.state.activated=!0,this.transitionEnd()):this.state.disabled=!1},e.prototype.onresize=function(){if(this.state.rect=a.Dom.rect(this.state.el),this.ads.inactive()&&this.ads.rendered(!0),this.state.transitioned)return this.setOffset()},e.prototype.onunload=function(){return this.deactivate(),this.toggleListener(),this.state.sensor.detach(this.state.el)},e.prototype.deactivate=function(){return this.ads.reset(),this.app.header.top=null},e.prototype.onload=function(){if(!this.state.lock_ad)return this.activate();if(!this.state.timeout)return this.setOffset(!0),this.state.timeout=window.setTimeout(function(t){return function(){return t.activate()}}(this),2500)},e.prototype.activate=function(){return this.state.activated=!0,this.ontimeout(),this.state.onactivate()},e.prototype.ontimeout=function(){var t,e;return this.toggleListener(!0),this.ads.animating(!0),this.setOffset(!0),t=this.top(),e=this.screen.scroll.top(),e>t&&(e=t),e?(this.sticky()||(this.app.header.top=-e,this.updateParent()),this.state.lock_ad?void 0:this.transitionEnd()):this.transitionEnd()},e.prototype.transitionEnd=function(){if(this.state.activated)return this.toggleListener(),this.app.header.top=null,this.state.transitioned=!0,this.ads.animated(!0),this.sticky()?void 0:this.updateParent()},e.prototype.toggleListener=function(t){var e,r;if(this.state.lock_ad&&(e=this.state.el.parentElement))return r="removeEventListener",t&&(r="addEventListener"),e[r]("transitionend",this.transitionEnd)},e.prototype.setOffset=function(t){var e,r,n;if(null!=(r=this.state.el)?r.parentElement:void 0)return e=a.Dom.rect(this.state.el).height,n=e!==this.top(),n&&this.top(e),n||t?this.onresizecb():void 0},e.prototype.sticky=function(){return!this.server&&Modernizr.csspositionsticky},e.prototype.top=function(t){return this.ads.top(t)},e.prototype.animate=p.noop,e.prototype.onrender=p.noop,e.prototype.onresizecb=p.noop,e.prototype.updateParent=p.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),o={Messages:r(203)},i={Message:r(206)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.messages=o.Messages.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.transitionEnd=u(this.transitionEnd,this),this.config=u(this.config,this),e.__super__.constructor.apply(this,arguments),this.messages=this.state.messages.model.messages()}return p(e,t),e.prototype.render=function(){if(!s.isEmpty(this.messages))return DIV({config:this.config,class:this.classes([this.class,"fixed","messages-list"])},[UL({class:"list-bare messages-items"},this.items())])},e.prototype.config=function(t,e,r){if(!e)return r.onunload||(r.onunload=function(){return t.removeEventListener("transitionend",this.transitionEnd)}),t.addEventListener("transitionend",this.transitionEnd)},e.prototype.transitionEnd=function(){return this.state.messages.model.removeClosed(),a.redraw()},e.prototype.items=function(){return s.map(this.messages,function(t){return function(e){var r,n;return r=i.Message,n=e.component_id,t.state.lazyComponent("message",n,r).render({el:LI,model:e,class:"messages-item"})}}(this))},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r(24),a=r(16),o=r(23),i={Messages:r(204)},n=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.assign(this,{model:this.m(i.Messages)})}return p(e,t),e.cache_key="messages",e.prototype.reset=function(){return this.model=this.m(i.Messages)},e}(o),t.exports=o.export(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(51),o={Message:r(205)},t.exports=i=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{singletons:{},messages:a.prop({})})}return p(e,t),e.prototype.templates={connection:{warning:{id:"reconnecting-warning",text:"Reconnecting...",timed:!1},success:{id:"reconnecting-success",text:"Reconnected!"}}},e.prototype.disconnected=function(){return this.addWarningOnce(this.templates.connection.warning)},e.prototype.reconnected=function(){return this.close(this.templates.connection.warning),this.removeClosed(),this.addSuccessOnce(this.templates.connection.success)},e.prototype.addError=function(t){return this.add(t,"error")},e.prototype.addErrorOnce=function(t){return this.addOnce(t,"error")},e.prototype.addSuccess=function(t){return this.add(t,"success")},e.prototype.addSuccessOnce=function(t){return this.addOnce(t,"success")},e.prototype.addWarning=function(t){return this.add(t,"warning")},e.prototype.addWarningOnce=function(t){return this.addOnce(t,"warning")},e.prototype.remove=function(t){return t instanceof Message||(t=this.messages()[t.id]),this.onremove(t),t},e.prototype.close=function(t){var e;return null!=(e=this.messages()[t.id])?e.closed=!0:void 0},e.prototype.removeClosed=function(){return s.forEach(this.messages(),function(t){return function(e){if(e=t.messages()[e.id],e.closed)return t.onremove(e)}}(this))},e.prototype.addOnce=function(t,e){var r,n;return null==e&&(e=""),t=this.create(t,e),n=t.key(),(r=this.singletons[n])?this.messages()[r]:(this.singletons[n]=t.id,this.insert(t),t)},e.prototype.add=function(t,e){return null==e&&(e=""),t=this.create(t,e),this.insert(t),t},e.prototype.insert=function(t){var e;return e={},e[t.id]=t,this.messages(s.assign(this.messages(),e)),t},e.prototype.onremove=function(t){return this.messages(s.omit(this.messages(),[t.id])),this.singletons=s.omit(this.singletons,[t.key()])},e.prototype.create=function(t,e){return null==e&&(e=""),"string"==typeof t&&(t={text:t}),e.length&&(t.type=e),this.m(o.Message,t)},e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),i=r(24),n=r(51),t.exports=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),i.defaults(this,{text:"Add message text to "+this.id,children:null}),(null!=(t=this.type)?t.length:void 0)||(this.type="standard"),this.setIcon(),this.setFunctionality()}return s(e,t),e.prototype.timer=2e3,e.prototype.key=function(){return this.type+"-"+this.closable+"-"+this.timed+"-"+this.text},e.prototype.message=function(){return this.children||o.trust(this.text)},e.prototype.setIcon=function(){if(null==this.icon)switch(this.type){case"success":return this.icon="check-circle";case"error":return this.icon="exclamation-circle"}},e.prototype.setFunctionality=function(){if("error"===this.type&&null==this.timed&&(this.closable=!0),!this.closable&&null==this.timed)return this.timed=!0},e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),a=r(16),n=r(26),o={Messages:r(203)},i={Icon:r(142),Button:r(144)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.messages=o.Messages.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.close=u(this.close,this),this.config=u(this.config,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{el:DIV})}return p(e,t),e.prototype.render=function(){return this.el({config:this.config,class:this.classes([this.class,"messages-message","messages-"+this.model.type,this.state.closing?"closing":void 0])},[this.closeButton(),DIV({class:"body"},[(new i.Icon).render({class:"status",icon:this.model.icon}),this.model.message()])])},e.prototype.config=function(){return this.model.timed&&this.state.id!==this.model.id&&this.setTimer(),this.state.id=this.model.id},e.prototype.setTimer=function(){return window.clearTimeout(this.state.timeout),this.state.timeout=window.setTimeout(this.close,this.model.timer)},e.prototype.closeButton=function(){if(this.model.closable)return new i.Button(this.server).render({icon:"close",onclick:this.close,class:"close"})},e.prototype.close=function(){return this.state.closing=!0,this.state.messages.model.close(this.model),a.redraw()},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(24),n=r(26),o={App:r(48),Stream:r(103)},i={Search:r(208)},s={Ga:r(55)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.stream=o.Stream.get(this.server),this.app.query=this.param("query")||"",this.component("search",i.Search)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onsubmit=u(this.onsubmit,this),this.oninput=u(this.oninput,this),this.config=u(this.config,this),e.__super__.constructor.apply(this,arguments),a.defaults(this,{category:"search"}),this.app=this.state.app,this.stream=this.state.stream}return p(e,t),e.prototype.render=function(){return DIV({config:this.config,class:this.classes([this.class,"consumer-search"])},[DIV({class:"wrapper"},[this.state.component("search").render({focus:this.focus(),oninput:this.oninput,value:this.app.query,onsubmit:this.onsubmit,searching:this.stream.searching()}),this.count()])])},e.prototype.config=function(){return this.focus(!1)},e.prototype.count=function(){},e.prototype.oninput=function(t){return this.app.query=t.target.value},e.prototype.onsubmit=function(t){var e,r;return r=t.value,e="/search",r.length&&(e+="/"+r),s.Ga.event(this.category,"search",r.toLowerCase()),this.app.route(e),!1},e.prototype.focus=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,p=function(t,e){return function(){return t.apply(e,arguments)}};o=r(24),n=r(26),i={Input:r(209),Button:r(144)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){this.onsubmitcb=p(this.onsubmitcb,this),this.inputConfig=p(this.inputConfig,this),e.__super__.constructor.apply(this,arguments),o.defaults(this,{full:!0,icon:"search",placeholder:"Search"})}return s(e,t),e.prototype.render=function(){return FORM(this.attributes(),[this.input(),this.submit()])},e.prototype.attributes=function(){var t;return t=o.assign(e.__super__.attributes.apply(this,arguments),{class:this.classes([this.class,"search-bar"])}),o.omit(t,["placeholder"])},e.prototype.input=function(){var t;return t={full:this.full,class:"text",value:this.value,type:"search",config:this.inputConfig},this.placeholder&&(t.placeholder=this.placeholder),(new i.Input).render(t)},e.prototype.inputConfig=function(t){if(this.state.el=t,this.reset()&&(t.value=""),this.focus)return t.focus()},e.prototype.submit=function(){return new i.Button(this.server).render({icon:this.icon,onclick:this.onsubmitcb,show_spinner:this.searching})},e.prototype.onsubmitcb=function(){return this.onsubmit?(this.onsubmit(this.state.el),this.state.el.value="",this.state.el.focus()):this.oninput({target:this.state.el}),!1},e.prototype.reset=o.noop,e.prototype.oninput=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(26),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return INPUT(this.attributes())},e.prototype.attributes=function(){var t;return t=e.__super__.attributes.apply(this,arguments),t.class=this.classes(["app-input",this.full?"full":void 0,t.class]),null!=this.type&&(t.type=this.type),null!=this.value&&(t.value=this.value),this.amp&&(i.defaults(this,{type:"email",required:!0}),i.assign(t,{type:this.type,required:this.required,name:this.name||this.type})),t},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(26),s={Ads:r(39),App:r(48),Screen:r(40)},i={Ad:r(133),Link:r(134),Background:r(197)},o={Lg:r(138)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.getSponsor=function(t){var e;if(this.sponsor)return this.sponsor;if(e=this.m(o[a.capitalize(t)]))return this.sponsor=e},e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),a.assign(this,{screen:s.Screen,ads:s.Ads.get(this.server),app:s.App.get(this.server)}),a.defaults(this,{mono:!0,threshold:75})}return c(e,t),e.prototype.render=function(){var t,e,r;if(!this.app.no_background&&(t=a.without([this.backgroundImage(),this.children,this.oop("oop_skin")],null,void 0),t.length))return e={config:this.config,class:"consumer-background fixed"},(r=this.style())&&(e.style=r),DIV(e,t)},e.prototype.config=function(t,e,r){return r.onunload=function(){var e;if(e=t.querySelector(".vert--skin"))return e.remove()}},e.prototype.backgroundImage=function(){var t,e,r,n;if(this.model)return n=this.ads.skin(),r={auto:!0,preload:!0,centered:!0,background:!0},n?(e=this.state.getSponsor(n),new i.Link(this.server).render({class:"-"+n,href:e.href(e)},[this.imageComponent(a.assign({},r,this.srcsets(e)))])):(t=this.imageComponent(a.assign({},r,{mono:this.mono,model:this.model})),this.href?new i.Link(this.server).render({href:this.href},t):t)},e.prototype.imageComponent=function(t){var e,r;return r=this.state.component_id,e=i.Background,this.state.lazyComponent("background",r,e).render(t)},e.prototype.oop=function(){var t;if(!this.app.thirdParty()&&!this.app.cms&&this.ads.render)return t=this.state.component_id,this.state.lazyComponent("oop",t,i.Ad).render({preload:!0,position:"oop_skin"})},e.prototype.style=function(){if(!this.server)return this.state.height&&!this.screen.heightResize(this.state.height)||(this.state.height=this.screen.height()+this.threshold),{height:this.state.height+"px"}},e.prototype.srcsets=function(t){var e,r;return e=this.screen.sizes,r=t.image("background","small"),{src:r,srcsets:{sets:[{src:r,sizes:{small:e.small,medium:e.medium}},{src:t.image("background","large"),sizes:{large:e.large}}]}}},e.prototype.routeConfig=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=r(26),o={Screen:r(40),Navigation:r(115)},i={Follow:r(212),Explore:r(239)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.screen=o.Screen,this.navigation=o.Navigation.get(this.server),this.component("follow",i.Follow),this.component("explore",i.Explore)}return s(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){var t,e;return t=this.state.navigation.menu(),e={class:this.classes(["consumer-navigation",t?void 0:"display-none"])
},t&&this.state.screen.lapAndUp()&&(e.style={height:this.state.screen.height()+"px"}),DIV(e,[this.state.component("follow").render(),this.state.component("explore").render()])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(24),n=r(26),i={Link:r(134),Links:r(213),Fullpage:r(214),Newsletter:r(215),Socials:{Twitter:r(218),Youtube:r(220),Snapchat:r(221),Instagram:r(222)},Followers:{Science:r(223),Facebook:r(224),Starwars:r(228),AppleNews:r(229),Flipboard:r(231),Humansplus:r(233)},Podcasts:{Inms:r(234)}},o={Image:r(236)},s={App:r(48),Navigation:r(115)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=s.App.get(this.server),this.navigation=s.Navigation.get(this.server),this.image=this.m(o.Image,{image_size:"full"}),this.component("fullpage",i.Fullpage),this.component("newsletter",i.Newsletter)}return p(e,t),e.prototype.followers=["Facebook","Humansplus","Starwars","Science","Flipboard","AppleNews"],e.prototype.socials=["Twitter","Instagram","Youtube"],e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.category="follow"}return p(e,t),e.prototype.render=function(){return this.state.component("fullpage").render({overlay:!0,centered:!0,hidden:this.hidden(),image:this.state.image,image_centered:!0,class:this.classes([this.class,"flex-column","consumer-follow"])},[DIV({class:"content"},[this.followers(),this.podcasts(),this.newsletter(),this.socials(),this.snapchat()]),new i.Links(this.server).render({category:this.category})])},e.prototype.followers=function(){var t,e,r;return e=this.hidden(),r=this.state.component_id,t=this.state.followers.length-1,UL({class:"panel followers list-bare"},[a.map(this.state.followers,function(n){return function(o,s){return n.state.lazyComponent(o,r,i.Followers[o]).render({el:LI,active:!e,category:n.category,class:n.classes([s===t?"follower-last":void 0])})}}(this))])},e.prototype.podcasts=function(){var t;return t=this.state.component_id,DIV({class:"panel podcasts"},[this.state.lazyComponent("inms",t,i.Podcasts.Inms).render({category:this.category,active:!this.hidden()})])},e.prototype.newsletter=function(){return this.state.component("newsletter").render({class:"panel",label:"follow"})},e.prototype.socials=function(){return UL({class:"panel socials list-bare list-inline"},[a.map(this.state.socials,function(t){return function(e){return LI(new i.Socials[e](t.server).render({hide_text:!0,category:t.category}))}}(this))])},e.prototype.snapchat=function(){return DIV({class:"panel snapchat"},[new i.Socials.Snapchat(this.server).render({category:this.category,active:!this.hidden()})])},e.prototype.hidden=function(){return"follow"!==this.state.app.static&&"follow"!==this.state.navigation.menu()},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),n=r(26),i={Links:r(200)},o={Ga:r(55)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){this.track=c(this.track,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{category:"consumer-links"})}return a(e,t),e.prototype.render=function(){return new i.Links(this.server).render({skip_labs:!0,copyright:!0,onclick:this.track,include_about:!0,class:"consumer-links"})},e.prototype.track=function(t){return o.Ga.event(this.category,"footer",t.target.href)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Image:r(197)},o={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.height=a.prop(0),this.component("image",i.Image)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onresize=u(this.onresize,this),this.config=u(this.config,this),e.__super__.constructor.apply(this,arguments),s.assign(this,{screen:o.Screen}),s.defaults(this,{tag:DIV}),this.setHeight()}return p(e,t),e.prototype.render=function(){var t,e;return t=this.attributes(),t.class=this.classes([this.class,"app-fullpage",this.hidden?"display-none":void 0,this.centered&&!this.hidden?"flex flex-centered flex-column":void 0]),(e=this.styles())&&(t.style=e),this.tag(t,[this.background(),this.children])},e.prototype.background=function(){if(!this.hidden&&this.image)return this.state.component("image").render({model:this.image,fixed:!0,preload:!0,full_screen:!0,overlay:this.overlay,centered:this.image_centered})},e.prototype.styles=function(){if(this.state.height())return{minHeight:this.state.height()+"px"}},e.prototype.config=function(t,e,r){var n;if(this.state.el=t,e)return n=this.state.component_id,this.screen.addCallback(n,"resize",this.onresize),this.onresize(),r.onunload=function(t){return function(){return t.screen.removeCallback(n,"resize")}}(this)},e.prototype.onresize=function(){var t;if(t=this.state.height(),this.setHeight(),this.state.el&&t!==this.state.height())return this.state.el.setAttribute("style","min-height: "+this.state.height()+"px")},e.prototype.setHeight=function(){if(!this.server&&!this.auto)return(!this.state.height()||this.screen.heightResize(this.state.height))&&(this.state.height(this.screen.height()),this.header&&Modernizr.csspositionsticky)?this.state.height(this.state.height()-this.screen.headerHeight()):void 0},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Newsletter:r(216)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("newsletter",i.Newsletter)}return s(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{label:"newsletter-generic"})}return s(e,t),e.prototype.render=function(){return this.state.component("newsletter").render({amp:this.amp,icon:this.icon,text:this.text,label:this.label,wrapper:this.wrapper,cta_text:this.cta_text,long_text:this.long_text,intro_wrapper:this.intro_wrapper,class:this.classes([this.class,"newsletter-generic"])})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=function(t,e){return function(){return t.apply(e,arguments)}};s=r(16),o=r(24),n=r(26),i={Link:r(134),Form:r(217)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.submitted=s.prop(!1),this.component("form",i.Form)}return a(e,t),e}(n.State),e.View=function(t){function e(){this.onsubmit=c(this.onsubmit,this),e.__super__.constructor.apply(this,arguments),o.defaults(this,{icon:!1,wrapper:DIV,intro_wrapper:DIV,submitted:this.state.submitted})}return a(e,t),e.prototype.render=function(){return this.wrapper({config:this.config,class:this.classes([this.class,"newsletter-signup"])},[this.intro(),this.children,this.form()])},e.prototype.intro=function(){if(!this.no_intro)return this.intro_wrapper({class:this.classes(["newsletter-signup__intro",this.contained?"contained -first clearfix":void 0])},[this.displayText()])},e.prototype.displayText=function(){return this.submitted()?this.submitted_text||this.defaultSubmittedText():this.text||this.defaultText()},e.prototype.defaultText=function(){return this.long_text?["The future, delivered straight to your inbox. Select the newsletters","you're interested in and sign up here to receive stories that spark","curiosity."].join(" "):this.cta_text?["The revolution will not be televised.","It'll be sent to your inbox by us."].join(" "):["Sign up for our ",new i.Link(this.server).render({href:"/newsletter"},"newsletter")]},e.prototype.defaultSubmittedText=function(){return this.long_text?["Your future self thanks you. See another newsletter you like?","Select it and sign up here to get more great stories sent straight","to your inbox."].join(" "):"Thank you for subscribing!"},e.prototype.form=function(){return this.state.component("form").render({icon:this.icon,email:this.email,label:this.label,lists:this.lists,text:this.signup_text,onsubmit:this.onsubmit,tracking:this.tracking,submitted:this.submitted(),input_text:this.input_text,set_default:this.set_default,send_subscribe:this.send_subscribe,class:this.classes(["newsletter-signup__form",this.hide_form?"display-none":void 0,this.contained?"contained -last":void 0])})},e.prototype.onsubmit=function(t){return this.onsubmitcb(t),this.submitted(!0),s.redraw()},e.prototype.config=o.noop,e.prototype.onsubmitcb=o.noop,e.prototype.send_subscribe=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Input:r(209),Button:r(144)},s={App:r(48),Screen:r(40),Article:r(62),Navigation:r(115),Newsletter:r(118)},o={Newsletter:r(119)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.model=this.m(o.Newsletter),this.app=s.App.get(this.server),this.article=s.Article.get(this.server),this.newsletter=s.Newsletter.get(this.server),this.navigation=s.Navigation.get(this.server)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.oninput=h(this.oninput,this),this.inputConfig=h(this.inputConfig,this),this.setCookie=h(this.setCookie,this),this.sendSubscribe=h(this.sendSubscribe,this),this.subscribe=h(this.subscribe,this),e.__super__.constructor.apply(this,arguments),a.assign(this,{app:this.state.app,model:this.state.model}),a.defaults(this,{text:"sign up",icon:"envelope",show_button:!0,label:"newsletter-base",placeholder:"Enter your email"}),this.send_subscribe(this.sendSubscribe),this.email||this.state.fb_init||!this.app.fb.email||(this.state.fb_init=!0,this.model.email(this.app.fb.email)),this.state.initialized&&!this.app.amp||(this.initalizeLists(),this.state.initialized=!0,this.email&&this.model.email(this.email),this.submitted&&!this.server&&this.subscribe())}return c(e,t),e.prototype.initalizeLists=function(){var t,e;if(!this.state.lists)return t=[this.state.newsletter.default_list],"function"==typeof this.lists?this.set_default&&this.lists(this.lists().concat(t)):(e=this.lists,this.lists=p.prop([]),e?this.lists(e):this.lists(t)),this.state.lists=this.lists,this.state.newsletter.list=this.state.lists()[0]},e.prototype.render=function(){var t;return t={class:this.classes([this.class,"newsletter-form",this.state.submitted?"newsletter-form--submitted":void 0])},this.app.amp?a.assign(t,{method:"post",target:"_top",id:"newsletter","action-xhr":this.model.postApi()}):a.assign(t,{onsubmit:this.subscribe}),FORM(t,[this.ampMessages(),this.intro(),this.input(),this.submit()])},e.prototype.intro=function(){if(this.input_text)return DIV({class:"newsletter-form__intro"},["Sign up for our newsletter:"])},e.prototype.input=function(){var t;return t={full:!0,type:"email",autocomplete:"email",placeholder:this.placeholder},this.app.amp?a.assign(t,{amp:!0}):a.assign(t,{onblur:this.onblur,onfocus:this.onfocus,oninput:this.oninput,config:this.inputConfig,onkeydown:this.onkeydown,value:this.model.email()}),(new i.Input).render(t)},e.prototype.submit=function(){var t,e;if(this.show_button)return t=this.classes(["submit",this.invalid()?"disabled":void 0]),this.app.amp?this.ampSubmit(t):(e=this.state.component_id,this.state.lazyComponent("submit",e,i.Button).render({icon:this.icon,text:this.text,class:t,onclick:this.subscribe}))},e.prototype.subscribe=function(t){return!this.invalid()&&(null!=t&&t.preventDefault(),this.sendSubscribe())},e.prototype.sendSubscribe=function(t,e){return t&&this.model.email(t),this.state.submitted=!0,this.model.lists=this.state.lists(),this.track(e),this.onsubmit(this.setCookie)},e.prototype.onsubmit=function(t){if("function"==typeof t)return t()},e.prototype.setCookie=function(){return this.state.newsletter.setCookie("lists",this.state.lists())},e.prototype.track=function(t){var e;if(null==t&&(t={}),e={params:this.model.params()},a.assign(e.params,t),this.trackAction(e),window.fbq)return window.fbq("track","Lead")},e.prototype.trackAction=function(t){var e,r,n,i;return null==t&&(t={}),e=t.action,n=t.params,n||(n={}),e||(e="submitted"),r={action:e,category:"newsletter",params:this.trackParams(n),ga:{label:this.label+"_"+s.Screen.device()}},i=this.url,(null!=i?i.length:void 0)||(i=document.location.href),this.app.event(i,r)},e.prototype.trackParams=function(t){return null==t&&(t={}),this.trackers&&a.assign(t,this.trackers),a.assign(t,{promo:this.label,referral:document.referrer})},e.prototype.inputConfig=function(t){return this.state.input=t},e.prototype.oninput=function(){return this.model.email(this.state.input.value)},e.prototype.onkeydown=function(t){if(32===t.keyCode)return!1},e.prototype.invalid=function(){return!this.app.amp&&(0===this.state.lists().length||!this.model.valid())},e.prototype.ampSubmit=function(t){return INPUT({type:"submit",value:"sign up",class:"btn "+t})},e.prototype.ampMessages=function(){var t,e;if(this.app.amp)return(t=this.state.lists())&&(e=a.map(t,function(t,e){return INPUT({value:t,type:"hidden",name:"lists["+e+"]"})})),[e,INPUT({name:"amp",value:!0,type:"hidden"}),p.trust('<div submit-success><template type="amp-mustache">Thank you for subscribing!</template></div>'),p.trust('<div submit-error><template type="amp-mustache">There was an error subscribing. Please try again.</template></div>')]},e.prototype.onblur=a.noop,e.prototype.onfocus=a.noop,e.prototype.send_subscribe=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Page:r(219)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.page="inversedotcom","labs"===this.section&&(this.page="inverse_labs"),o.defaults(this,{text:"@"+this.page})}return s(e,t),e.prototype.render=function(){return new i.Page(this.server).render({page:this.page,text:this.text,icon:"twitter",category:this.category,hide_text:this.hide_text,href:"https://www.twitter.com/"+this.page})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),n=r(26),i={Button:r(144)},o={Ga:r(55)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){this.onclick=c(this.onclick,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{service:this.icon,category:"socials-page"})}return a(e,t),e.prototype.render=function(){var t;return this.hide_text||(t=this.text),new i.Button(this.server).render({text:t,href:this.href,icon:this.icon,target:"_blank",onclick:this.onclick,class:"socials-page-"+this.service},this.children)},e.prototype.onclick=function(){return o.Ga.event(this.category,"page visit",this.service+" "+this.page)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Page:r(219)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.page="youtube",o.defaults(this,{text:"inverse"})}return s(e,t),e.prototype.render=function(){return new i.Page(this.server).render({icon:this.page,text:this.text,page:"inverse",category:this.category,hide_text:this.hide_text,href:"https://www.youtube.com/channel/UCEA0LA7k6hwZM-xocspYQjQ"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Page:r(219),Image:r(147)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.page="inversedotcom"}return s(e,t),e.prototype.render=function(){return new i.Page(this.server).render({page:this.page,text:this.text,target:"_blank",service:"snapchat",category:this.category,hide_text:this.hide_text,href:"https://www.snapchat.com/add/"+this.page},this.image())},e.prototype.image=function(){if(this.active)return new i.Image(this.server).render({width:160,height:160,retina:!0,preload:!0,alt:"Follow Inverse on Snapchat",src:"https://fsmedia.imgix.net/assets/snapchat_badge.png"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Page:r(219)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.page="inverse",o.defaults(this,{text:"@"+this.page})}return s(e,t),e.prototype.render=function(){return new i.Page(this.server).render({page:this.page,text:this.text,icon:"instagram",category:this.category,hide_text:this.hide_text,href:"https://www.instagram.com/"+this.page+"/"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Facebook:r(224)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return new i.Facebook(this.server).render({el:this.el,key:"science",active:this.active,name:"science & chill"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Follow:r(225),Button:r(226)},o={Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{name:"inverse",permalink:"inverse"}),this.href=o.Accounts.facebookPage(this.key||this.name)}return a(e,t),e.prototype.render=function(){return new i.Follow(this.server).render({el:this.el,href:this.href,name:this.name,button:this.button(),organization:"facebook"})},e.prototype.button=function(){return new i.Button(this.server).render({active:this.active,class:"fb-like",data_attributes:{href:this.href,size:"small",share:"false",action:"like",layout:"button",category:this.category,"show-faces":"false"}})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Link:r(134)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{el:DIV,organization:"inverse"})}return s(e,t),e.prototype.render=function(){return this.el({class:"social-follower"},[this.button,this.text()])},e.prototype.text=function(){return SPAN({class:"text"},["Follow ",new i.Link(this.server).render({href:this.href},this.name)," on "+o.startCase(this.organization)])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),n=r(26),i={Vendor:r(227)},o={Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){this.config=c(this.config,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{props:{},data_attributes:{}})}return a(e,t),e.prototype.render=function(){var t;return t=s.assign({},this.props,this.dataAttributes(),{config:this.config,scope:"public_profile,email",class:this.classes([this.class,"socials-vendor-facebookpage"])}),new i.Vendor(this.server).render({el:this.el,props:t},[this.children])},e.prototype.dataAttributes=function(){var t;return t=s.transform(this.data_attributes,function(t,e,r){return t["data-"+r]=e,t},{})},e.prototype.config=function(t){if(!this.state.activated&&this.active)return this.state.activated=o.Accounts.parseFacebook(t)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Vendor:r(227),Icon:r(142),Link:r(134),Image:r(147)},o={Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{el:DIV,props:{},width:25,height:25,active:!0})}return a(e,t),e.prototype.render=function(){var t;return t=s.assign({},this.props,{class:this.classes([this.props.class,"socials-vendor"])}),this.el(t,[this.children||this.iconOrImage()])},e.prototype.iconOrImage=function(){return new i.Link(this.server).render({class:"socials-vendor-image",href:this.href||o.Accounts[this.permalink].page},[this.imageOrIconTag()])},e.prototype.imageOrIconTag=function(){var t;if(t=this.image){if(!this.active)return;return new i.Image(this.server).render({alt:this.name,retina:!0,width:this.width,preload:!0,height:this.height,src:"https://fsmedia.imgix.net/assets/icon_"+t+".png"})}return new i.Icon(this.server).render({icon:this.icon||this.permalink})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Facebook:r(224)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return new i.Facebook(this.server).render({el:this.el,active:this.active,name:"star wars"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Follow:r(225),Button:r(230)},o={Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{name:"inverse"})}return a(e,t),e.prototype.render=function(){return new i.Follow(this.server).render({el:this.el,name:this.name,organization:"apple-news",href:o.Accounts.applenews.page,button:new i.Button(this.server).render({active:this.active,category:this.category})})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Vendor:r(227)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return new i.Vendor(this.server).render({active:this.active,name:"Apple News",image:"apple_news",permalink:"applenews"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Follow:r(225),Button:r(232)},o={Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{name:"inverse"})}return a(e,t),e.prototype.render=function(){return new i.Follow(this.server).render({el:this.el,name:this.name,organization:"flipboard",href:o.Accounts.flipboard.page,button:new i.Button(this.server).render({active:this.active,category:this.category})})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Vendor:r(227)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return new i.Vendor(this.server).render({active:this.active,name:"Flipboard",permalink:"flipboard"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Facebook:r(224)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return new i.Facebook(this.server).render({el:this.el,key:"humans",name:"humans+",active:this.active})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Podcasts:r(235)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{logo:"inms-logo"})}return s(e,t),e.prototype.render=function(){return new i.Podcasts(this.server).render({logo:this.logo,href:this.link(),active:this.active,name:"i need my space"})},e.prototype.link=function(){return"https://itunes.apple.com/us/podcast/i-need-my-space/id1362022472?mt=2"},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,p=function(t,e){return function(){return t.apply(e,arguments)}};o=r(24),n=r(26),i={Link:r(134),Image:r(147)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){this.images=p(this.images,this),e.__super__.constructor.apply(this,arguments),o.defaults(this,{active:!0})}return s(e,t),e.prototype.render=function(){return new i.Link(this.server).render({href:this.href,class:"socials-podcasts"},this.images())},e.prototype.images=function(){if(this.active)return[this.logoImage(),this.listenImage()]},e.prototype.logoImage=function(){if(this.logo)return this.image({width:75,type:"logo",src:this.logo+".png"})},e.prototype.listenImage=function(){return this.image({width:150,type:"listen",src:"listen.svg"})},e.prototype.image=function(t){var e,r,n,s;return r=t.src,n=t.type,s=t.width,e=t.height,new i.Image(this.server).render({retina:!0,width:s,preload:!0,class:"socials-podcasts__"+n,alt:"Listen To "+o.startCase(this.name),src:"https://fsmedia.imgix.net/assets/podcast/"+r})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(237),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.assign(this,{id:"75db2999-cc83-45ea-80ba-1c100b67241a"})}return o(e,t),e.prototype.cropOverrides=function(){var t,e,r;return e=this.dimensions(),r=e.width,t=e.height,{"2:1":this.cropOverride(r,640),"3:4":this.cropOverride(600,t,340),"4:3":this.cropOverride(1066,t,107),"3:1":this.cropOverride(r,426,0,200)}},e.prototype.dimensions=function(){return{height:800,width:1280}},e.prototype.image=function(){return"/75/db/29/99/cc83/45ea/80ba/1c100b67241a/bgfollowjpg.jpeg"},e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(238),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.setImage(),this.setOverrides(),this.setOembedData()}return o(e,t),e.prototype.crops=function(){var t;return t=e.__super__.crops.apply(this,arguments),t.shift(),t},e.prototype.setImage=function(){return this.url=""+n.PATH+this.image()},e.prototype.setOverrides=function(){return this.overrides.crops=this.cropOverrides()},e.prototype.setOembedData=function(){var t,r,n;return r=this.dimensions(),n=r.width,t=r.height,e.__super__.setOembedData.call(this,n,t)},e.prototype.cropOverride=function(t,e,r,n){return{width:t,height:e,x_offset:r||0,y_offset:n||0,zoom:0}},e.prototype.image=i.noop,e.prototype.dimensions=i.noop,e.prototype.cropOverrides=i.noop,e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(67),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.assign(this,{position:null,type:"widgets",source:"Inverse.com"})}return o(e,t),e.prototype.setOembedData=function(t,e){return this.oembed_data={url:this.url,type:"photo",version:"1.0",width:t||0,height:e||0,provider_name:this.source
}},e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Link:r(134),Links:r(213),Search:r(207),Fullpage:r(214),Image:r(147),Section:r(151),Channel:r(141)},o={App:r(48),Screen:r(40),Navigation:r(115)},s={Ga:r(55)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.navigation=o.Navigation.get(this.server),this.component("search",i.Search),this.component("fullpage",i.Fullpage)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.track=h(this.track,this),e.__super__.constructor.apply(this,arguments),this.screen=o.Screen,this.navigation=this.state.navigation,this.srcsets={channel:this.channelSrcsets(),category:this.categorySrcsets()}}return c(e,t),e.prototype.channelSrcsets=function(){var t;return t=this.screen.sizes,{palm:!0,sets:[{crop:"4:3",sizes:{small:t.small,medium:t.medium,large:350}},{crop:"2:1",sizes:{xlarge:450}}]}},e.prototype.categorySrcsets=function(){var t;return t=this.screen.sizes,{palm:!0,sets:[{crop:"2:1",sizes:{small:t.small,medium:t.medium}},{crop:"4:3",sizes:{large:250}},{crop:"2:1",sizes:{xlarge:350}}]}},e.prototype.render=function(){return this.state.component("fullpage").render({tag:NAV,auto:!0,hidden:this.hidden(),class:"consumer-explore"},[this.search(),this.sections(),this.channels(),new i.Links(this.server).render({category:"explore"})])},e.prototype.search=function(){return this.state.component("search").render({category:"explore"})},e.prototype.sections=function(){var t,e,r;return r=this.palm(),e=this.hidden(),t=i.Section,UL({class:"sections list-bare list-inline"},[a.map(this.navigation.categories.sections(),function(n){return function(i){return n.state.lazyComponent("category",i.id,t).render({el:LI,height:100,linked:!0,overlay:!0,preload:!0,centered:!0,class:"section",hide_image:e,full_screen:!r,image:i.widget,srcsets:n.srcsets.category,href:"/"+i.permalink,onclick:function(){return n.track("section",i.permalink)}},i.name)}}(this))])},e.prototype.channels=function(){var t;return t=this.navigation.channels.sections(),UL({class:"channels layout list-bare"},[a.map(t,function(t){return function(e,r){return t.channel(e,r)}}(this))])},e.prototype.channel=function(t,e){var r,n,o,s,a,p;if(t)return r=this.hidden(),s=t.permalink,t.body?(a=!0,n=t.body):(n=t,p=t.widget,o=n.displayName()),this.state.lazyComponent("channel",t.id,i.Channel).render({el:LI,flex:!1,model:n,widget:p,label:t,ratio:this.palm(),highlight:!0,title_text:o,hide_image:r,preload:!r,show_time:a,gradient:{small:!0},srcsets:this.srcsets.channel,spin:this.navigation.fetching,class:"channel layout__item",track:function(t){return function(){return t.track("article",s,e)}}(this),onlabelclick:function(t){return function(){return t.track("channel",s,e)}}(this)})},e.prototype.hidden=function(){if("explore"!==this.state.app.static)return"explore"!==this.navigation.menu()},e.prototype.palm=function(){return this.server||this.screen.palm()},e.prototype.track=function(t,e,r){return s.Ga.event("explore",t,e,r)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u,h=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty,d=function(t,e){return function(){return t.apply(e,arguments)}};u=r(16),c=r(24),n=r(26),i={Button:r(144),Bgmodal:r(241),Newsletter:r(250),Mediaobj:r(166),Scrollspy:r(137),Modal:r(253),Facebook:r(255)},s={App:r(48),Modal:r(102),Screen:r(40),Pillager:r(97),Newsletter:r(118)},o={BgImage:r(256)},p={Image:r(57)},a={Layout:r(101)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.top=u.prop(0),this.subscribe=u.prop(c.noop),this.screen=s.Screen,this.image=this.m(o.BgImage),this.app=s.App.get(this.server),this.modal=s.Modal.get(this.server),this.pillager=s.Pillager.get(this.server),this.newsletter=s.Newsletter.get(this.server),this.text="Sign up to get our daily newsletter",this.arms={},this.setTop(),this.component("scrollspy",i.Scrollspy),window&&window.setTimeout(function(t){return function(){return t.can_activate=!0,u.redraw()}}(this),3e3)}return h(e,t),e.prototype.initTests=function(){if(!this.app.navigating&&!this.initialized)return this.initialized=!0,this.fetchTest("layout")},e.prototype.fetchTest=function(t){var e,r,n;if(r=this.m(a[c.capitalize(t)]),n=r.name,e=this.pillager.getArm(n),this.arms[t]=e,!e.fetched()&&!e.fetching())return this.pillager.fetchArm(n).then(function(){if("layout"===t&&e.parseTests(),!e.isControl())return u.redraw()})},e.prototype.setTop=function(){return this.top(3*this.screen.height())},e}(n.State),e.View=function(t){function e(){this.onactivate=d(this.onactivate,this),this.onclose=d(this.onclose,this),this.close=d(this.close,this),this.onsubmit=d(this.onsubmit,this),this.onFbError=d(this.onFbError,this),this.onFbLogin=d(this.onFbLogin,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.top=this.state.top,this.arms=this.state.arms,this.screen=this.state.screen,c.defaults(this,{tracking:{},label:"newsletter-overlay"}),this.state.initTests()}return h(e,t),e.prototype.render=function(){if(!this.state.closed&&this.state.can_activate)return this.state.component("scrollspy").render({top:this.top,onactivate:this.onactivate,class:this.classes([this.class,"newsletter-overlay",this.showAuthor()?void 0:"newsletter-overlay--no-author",this.state.submitted?"newsletter-overlay--submitted":void 0])},this.components())},e.prototype.components=function(){if(this.state.active)return[this.modal(),DIV({class:"newsletter-overlay__overlay overlay"})]},e.prototype.modal=function(){var t;return t=this.state.component_id,this.state.lazyComponent("modal",t,i.Modal).render({no_header:!0,flex_wrap:!0,onclose:this.close,header_flex:!1,height:this.screen.height()},[this.bgmodal(),DIV({class:"newsletter-overlay__footer"},this.backToSite())])},e.prototype.bgmodal=function(){var t;return t=this.state.component_id,this.state.lazyComponent("bgmodal",t,i.Bgmodal).render({mono:!1,preload:!0,srcsets:this.bgsrcsets(),widget:this.state.image},[this.intro(),this.author(),this.newsletter()])},e.prototype.intro=function(){if(this.arms.layout.shouldShow("lead"))return H2(["Join The Cause To ",SPAN({class:"brand-color"},["Spark Curiosity"])])},e.prototype.author=function(){var t,e,r,n,o;if(this.showAuthor())return o=125,t=125,r=this.authorImage(),e=this.state.component_id,n=p.Image.circleMaskParams(o,t).replace(/w=\d*/,""),this.state.lazyComponent("author",e,i.Mediaobj).render({ratio:"1:1",ratio_wrap:!0,body:this.authorText(),body_class:"flex flex-centered",class:"overlay newsletter-overlay__author",image:{width:o,retina:!0,preload:!0,height:t,model:{query:n,crop:function(){return r},width:function(){return o},height:function(){return t},embed:u.prop(r)}}})},e.prototype.authorText=function(){return[DIV({class:"flex-1"},[DIV(["Inverse is fueling the next generation of dreamers and doers by ","reporting the wonder of the world in a new light."]),BR(),STRONG(["- Nick Lucchesi, Executive Editor"])])]},e.prototype.newsletter=function(){var t;return t=this.state.component_id,this.state.lazyComponent("newsletter",t,i.Newsletter).render({arms:this.arms,label:this.label,input_text:!1,tracking:this.tracking,onsubmitcb:this.onsubmit,send_subscribe:this.state.subscribe,signup_text:"Continue with Email",no_intro:!this.arms.layout.shouldShow("cta"),hide_form:!this.arms.layout.shouldShow("email")},[this.facebook()])},e.prototype.facebook=function(){var t;if(this.arms.layout.shouldShow("fb")&&!this.state.submitted&&"flipboard"!==this.app.referrer)return t=this.state.component_id,this.state.lazyComponent("facebook",t,i.Facebook).render({onerror:this.onFbError,onlogin:this.onFbLogin,onclick:function(t){return function(){return t.event("click",{button:"facebook"})}}(this)})},e.prototype.onFbLogin=function(){return this.state.subscribe()(this.app.fb.email,c.assign(this.tracking,{button:"facebook",fb_token:this.app.fb.token}))},e.prototype.onFbError=function(t){return this.state.text=["There was an error logging in to your Facebook account.","Please try again or subscribe with your email address."].join(" "),this.event("error",{button:"facebook",response:t}),u.redraw()},e.prototype.onsubmit=function(t){return this.state.submitted=!0,window.setTimeout(function(e){return function(){return t(),e.closeModal(),u.redraw()}}(this),2e3)},e.prototype.backToSite=function(){return new i.Button(this.server).render({onclick:this.close,class:"newsletter-overlay__skip",text:"Skip and continue to site"})},e.prototype.close=function(){return this.onclose(),this.closeModal()},e.prototype.closeModal=function(){return this.state.closed=!0,this.state.modal.reset()},e.prototype.onclose=function(){return this.state.newsletter.setCookie("closed"),this.event("close")},e.prototype.onactivate=function(){if(!this.state.active)return this.state.active=!0,this.event("impression"),this.testImpressions(),u.redraw()},e.prototype.event=function(t,e){return null==e&&(e={}),this.app.event(this.url,{action:t,category:"newsletter",ga:{label:this.label+"_"+this.screen.device()},params:c.assign(e,this.tracking,{promo:this.label})})},e.prototype.testImpressions=function(){return c.forEach(this.arms,function(t){return function(e){if(e.fetched())return t.app.impression(e,{params:t.tracking})}}(this))},e.prototype.bgsrcsets=function(){return{img:"large",sizes:{small:"(max-width:"+this.screen.breakpoints.palm+"px)"},sets:[{src:this.state.image.url,sizes:{small:{width:375,height:500},large:{width:600,height:799}}}]}},e.prototype.authorImage=function(){return["https://fsmedia.imgix.net/05/d5/84/c9/3128/4046/b708/534e99f3a949/","img5363jpg.jpeg"].join("")},e.prototype.showAuthor=function(){return this.arms.layout.shouldShow("quote")},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Tabs:r(242),Background:r(197)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{el:DIV,mono:"white"})}return a(e,t),e.prototype.render=function(){var t;if(t=o.without(o.flatten(this.children),null,void 0),null!=t?t.length:void 0)return this.el({config:this.config,class:this.classes([this.class,"app-bgmodal",this.breadcrumbs?"app-bgmodal--tabs":void 0])},[this.tabs(),this.children,this.background()])},e.prototype.tabs=function(){var t;if(this.breadcrumbs)return t=this.state.component_id,this.state.lazyComponent("tabs",t,i.Tabs).render({tabs:this.breadcrumbs})},e.prototype.background=function(){var t;if(this.widget)return t=this.state.component_id,this.state.lazyComponent("background",t,i.Background).render({mono:this.mono,crops:this.crops,model:this.widget,background:!0,preload:this.preload,srcsets:this.srcsets,centered:this.centered})},e.prototype.config=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Tab:r(243),Social:r(244)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{el:DIV,social:!1,referrer:!0,campaign:"tabs",button:"facebook"})}return s(e,t),e.prototype.render=function(){return this.el({class:this.classes([this.class,"app-tabs clearfix"])},[this.breadcrumbs(),this.socialTab()])},e.prototype.breadcrumbs=function(){return o.map(this.tabs,function(t){return function(e,r){var n;return n=o.pick(e,["icon","fake","href","text","social","onclick"]),0===r&&(n.side="right"),n.class=t.classes(["tab-"+(r+1),n.social&&n.icon?"btn--"+n.icon:void 0]),new i.Tab(t.server).render(n)}}(this))},e.prototype.socialTab=function(){var t;if(this.social)return t=this.state.component_id,this.state.lazyComponent("social",t,i.Social).render({long:!0,angle:"up",side:"left",model:this.model,button:this.button,campaign:this.campaign,referrer:this.referrer,class:"app-tabs__social"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Button:r(144)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{angle:"down"})}return s(e,t),e.prototype.render=function(){var t;return t={fake:this.fake,icon:this.icon,text:this.text,small:this.small,config:this.config,social:this.social,class:this.classes(),onclick:this.onclick},this.href&&(t.href=this.href),new i.Button(this.server).render(t,this.children)},e.prototype.classes=function(){return e.__super__.classes.call(this,[this.class,"app-tab","-"+this.angle,this.side?"-side":void 0,"left"===this.side?"-left":void 0,"right"===this.side?"-right":void 0])},e.prototype.config=o.noop,e.prototype.onclick=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};s=r(24),n=r(26),o={App:r(48)},i={Twitter:r(245),Facebook:r(248),Flipboard:r(249)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return a(e,t),e}(n.State),e.View=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),s.defaults(this,{show_text:!0,button:"facebook"}),this.referrer&&(t=this.state.app.referrer,c.call(this.referrers,t)>=0)&&(this.button=this.state.app.referrer||this.button)}return a(e,t),e.prototype.referrers=["twitter","flipboard"],e.prototype.render=function(){var t;if(t=i[s.capitalize(this.button)])return this.state.lazyComponent("social",this.state.component_id,t).render({long:this.long,side:this.side,angle:this.angle,model:this.model,class:this.class,campaign:this.campaign,trackers:this.trackers,show_text:this.show_text},this.children)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,p=function(t,e){return function(){return t.apply(e,arguments)}};o=r(24),n=r(246),i={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){this.onclick=p(this.onclick,this),this.text="tweet",this.icon="twitter",this.utm="twitter.com",e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.href=function(){if(this.server)return e.__super__.href.apply(this,arguments)},e.prototype.onclick=function(t){var e,r,n,s,a,p,c;return t.preventDefault(),a=i.Screen,c=a.width(),e=a.height(),n="twitter-window",r=o.random(0,c),p=o.random(0,e),s="left="+r+",top="+p+",width=575,height=253",window.open(this.shareUrl(),n,s),this.track(),!1},e.prototype.shareUrl=function(){var t,e,r,n,i;return t="",n=this.urlText(),e="inversedotcom",i=encodeURIComponent(this.state.shortlink),this.server?t="&url="+i+"&via="+e:n=n+" "+i+" via @"+e,r="text="+n+t,"https://twitter.com/intent/tweet?"+r},e.prototype.urlText=function(){var t,e;return(e=this.model.author().twitter)&&(t=", by @"+e),encodeURIComponent([this.title()||"",t||""].join("").trim())},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(24),n=r(26),i={Tab:r(243),Button:r(144)},o={Shorty:r(247)},s={App:r(48),Screen:r(40),Article:r(62)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=s.App.get(this.server),this.article=s.Article.get(this.server),this.shorty=this.m(o.Shorty),this.skreemr=this.app.skreemr}return p(e,t),e.prototype.needsFetch=function(t){if(!this.fetching&&this.id!==t)return this.id=t,this.shortlink=null,!0},e.prototype.get=function(t,e){if(this.shortlink||(this.shortlink=e||t),!this.fetching)return this.fetching=!0,this.shorty.get(t).then(function(t){return function(e){return t.fetching=!1,t.shortlink=e.url}}(this))},e}(n.State),e.View=function(t){function e(){this.onclick=u(this.onclick,this);var t;e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.skreemr=this.state.skreemr,a.defaults(this,{trackers:{},shortlink:!0,url:this.model.url()}),this.shortlink&&this.model.published&&this.state.needsFetch(this.model.id)&&this.state.get(this.articleUrl(),this.model.shortlink),this.platform="mobile",this.server||(t=s.Screen,t.palm()||(this.platform="desktop"))}return p(e,t),e.prototype.render=function(){var t,e;return t=this.href(),e={icon:this.icon,side:this.side,social:!0,angle:this.angle,config:this.config,onclick:this.onclick,text:this.buttonText(),class:this.classes([this.class,"btn--"+(this.name||this.icon)])},t&&a.assign(e,{href:t,target:"_blank"}),this.angle||this.side?new i.Tab(this.server).render(e,this.children):new i.Button(this.server).render(e,this.children)},e.prototype.buttonText=function(){return this.show_text?this.long?this.text+" this":this.text:""},e.prototype.href=function(){return this.shareUrl()},e.prototype.shareUrl=function(){return this.articleUrl()},e.prototype.onclick=function(){return this.track()},e.prototype.track=function(t){var e,r,n,i,o;return o=this.url,i=this.trackers,e=this.name||this.icon,t=t||this.action||this.text,this.campaign&&(r=this.campaignString(e),i.campaign=this.campaign),n={action:t,params:i},this.app.event(o,a.assign({},n,{category:"socials",ga:{label:r||e}})),this.app.social(o,a.assign({},n,{category:e,ga:{label:this.campaignString()||this.encodedUrl()}}))},e.prototype.encodedUrl=function(){return encodeURIComponent(this.articleUrl())},e.prototype.articleUrl=function(){var t,e;return e="utm_source="+this.utm+"&utm_medium=on_site",(t=this.campaignString())&&(e=e+"&utm_campaign="+t),""+this.app.www+(this.url||"")+"?"+e},e.prototype.campaignString=function(t){return this.platform||this.campaign?a.without([t,this.platform,this.campaign],"",null,void 0).join("_"):t},e.prototype.urlText=function(){return encodeURIComponent([this.title(),this.state.shortlink].join(" "))},e.prototype.title=function(){return this.model.socialTitle()},e.prototype.config=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;o=r(24),s=r(16),n=r(64),t.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.api=function(){return"https://inv.rs/shorten.json?url="+encodeURIComponent(this.url)},e.prototype.get=function(t){return this.url=t,e.__super__.get.call(this,{})},e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=function(t,e){return function(){return t.apply(e,arguments)}};n=r(246),i={Accounts:r(61)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){this.onShare=a(this.onShare,this),this.onclick=a(this.onclick,this),this.shortlink=!1,this.action="send",this.text="share",this.icon="facebook",this.utm="facebook.com",e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.onclick=function(t){var e,r,n,i,o,s,a;return t.preventDefault(),"undefined"!=typeof FB&&null!==FB&&(s={method:"feed",link:this.articleUrl()},(a="function"==typeof(e=this.model).socialTitle?e.socialTitle():void 0)&&(s.name=a),(o="function"==typeof(r=this.model).socialImage?r.socialImage():void 0)&&(s.picture=o),(i="function"==typeof(n=this.model).socialDescription?n.socialDescription():void 0)&&(s.description=i),FB.ui(s,this.onShare),this.track(),!1)},e.prototype.onShare=function(t){if(null!=t&&!t.error_message)return this.track("shared")},e.prototype.shareUrl=function(){return["https://www.facebook.com/dialog/share?","app_id="+i.Accounts.facebook.app,"&display=popup","&href="+this.encodedUrl()].join("")},e}(n.View),e}(n)},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=r(246),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.View=function(t){function e(){this.text="share",this.utm=this.icon="flipboard",e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.shareUrl=function(){return["https://share.flipboard.com/bookmarklet/popout?v=2","&title="+encodeURIComponent(this.title()),"&url="+this.encodedUrl()].join("")},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Lists:r(251),Signup:r(216)},o={App:r(48),Screen:r(40),Pillager:r(97),Newsletter:r(118)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.lists=a.prop([]),this.screen=o.Screen,this.app=o.App.get(this.server),this.pillager=o.Pillager.get(this.server),this.newsletter=o.Newsletter.get(this.server),this.arms={},this.component("signup",i.Signup)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onsubmit=u(this.onsubmit,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{tracking:{},input_text:!0,show_lists:!1,arms:this.state.arms,label:"newsletter-modal"})}return p(e,t),e.prototype.render=function(){return DIV({config:this.config,class:this.classes([this.class,"newsletter-modal",this.show_lists?"newsletter-modal--lists":void 0])},[this.signup(),this.lists()])},e.prototype.signup=function(){var t;return t={label:this.label,cta_text:!0,set_default:!0,no_intro:this.no_intro,tracking:this.tracking,hide_form:this.hide_form,onsubmitcb:this.onsubmit,input_text:this.input_text,signup_text:this.signup_text,send_subscribe:this.send_subscribe,text:this.text||this.state.newsletter.title()},this.show_lists&&(t.lists=this.state.lists),this.state.component("signup").render(t,[this.children])},e.prototype.lists=function(){var t;if(this.show_lists)return t=this.state.component_id,this.state.lazyComponent("lists",t,i.Lists).render({lists:this.state.lists,show_caption:!1})},e.prototype.onsubmit=function(t){return this.conversion(),this.onsubmitcb(t)},e.prototype.onsubmitcb=function(t){return t()},e.prototype.conversion=function(){return s.forEach(this.arms,function(t){return function(e){if(e.fetched())return t.state.app.conversion(e,{params:t.tracking})}}(this))},e.prototype.config=s.noop,e.prototype.send_subscribe=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}},h=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(16),s=r(24),n=r(26),i={Fieldset:r(252)},o={App:r(48),Newsletter:r(118)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.newsletter=o.Newsletter.get(this.server)}return p(e,t),e.prototype.fetchLists=function(){if(!this.fetched&&!this.newsletter.model.newsletters.length)return this.fetched=!0,this.newsletter.get().then(function(){return a.redraw()})},e}(n.State),e.View=function(t){function e(){this.onchange=u(this.onchange,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{fetch:!0,wrapper:DIV,show_caption:!0}),this.fetch&&!this.server&&this.state.fetchLists()}return p(e,t),e.prototype.render=function(){return this.wrapper({class:"newsletter-lists layout"},[this.newsletters()])},e.prototype.newsletters=function(){return s.map(this.state.newsletter.newsletters(),function(t){return function(e){var r,n;return r={type:"checkbox",id:e.id,label:e.title,onchange:function(r){return t.onchange(r,e.id)}},n=e.id,h.call(t.lists(),n)>=0&&(r.checked=!0),DIV({class:t.classes([t.show_caption?"palm-1/1":void 0,"newsletter-lists__card layout__item 1/2"])},[new i.Fieldset(t.server).render(r,[t.caption(e.description)])])}}(this))},e.prototype.caption=function(t){if(this.show_caption)return DIV({class:"caption"},t||"")},e.prototype.onchange=function(t,e){var r;return r=t.target.checked,r?h.call(this.lists(),e)<0?this.lists(this.lists().concat([e])):void 0:this.lists(s.without(this.lists(),e))},e.prototype.lists=function(){return[]},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Icon:r(142),Link:r(134),Input:r(209)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){return FIELDSET({config:this.config,class:this.classes([this.class,"app-fieldset",this.type?"app-"+this.type:void 0])},[this.input(),LABEL({for:this.id},[this.iconTag(),this.labelTag(),this.children])])},e.prototype.input=function(){var t,e;return e=["class"],t=this.attributes(),t.checked!==!0&&e.push("checked"),t=o.omit(this.attributes(),e),this.type?(t.type=this.type,INPUT(t)):(new i.Input).render(t)},e.prototype.labelTag=function(){var t;return t={class:"label"},this.href?(o.assign(t,{href:this.href,target:"_blank"}),new i.Link(this.server).render(t,this.label)):SPAN(t,this.label)},e.prototype.iconTag=function(){var t;if(t=this.iconString())return(new i.Icon).render({icon:t})},e.prototype.iconString=function(){if(this.icon)return this.icon;switch(this.type){case"radio":return"circle-o";case"checkbox":return"square-o";default:return null}},e.prototype.config=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),n=r(26),o={Modal:r(102)},i={Button:r(144),Close:r(254)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.modal=o.Modal.get(this.server)}return a(e,t),e}(n.State),e.View=function(t){function e(){this.mainConfig=c(this.mainConfig,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{contained:!0,header_flex:!0})}return a(e,t),e.prototype.render=function(){var t,e;return e={config:this.mainConfig,class:this.classes([this.class,"app-modal",this.flex_wrap?"flex flex-centered":void 0,this.contained?"app-modal--contained":void 0])},this.height&&(e.style="height:"+this.height+"px;max-height:"+this.height+"px;"),t=[this.header(),DIV({class:"app-modal__body"},[this.descriptionTag(),this.children])],this.flex_wrap&&(t=DIV({class:"app-modal__wrapper flex-1"},[t])),DIV(e,t)},e.prototype.descriptionTag=function(){if(this.description)return H4({class:"app-modal__description"},[this.description])},e.prototype.header=function(){return DIV({class:this.classes(["app-modal__header",this.header_flex?"flex":void 0])},[this.headerComponent(),new i.Close(this.server).render({onclick:this.onclose,beforeClose:this.beforeClose})])},e.prototype.headerComponent=function(){if(!this.no_header)return this.menu?this.menu:this.titleTag()},e.prototype.titleTag=function(){return new i.Button(this.server).render({fake:!0,text:this.title||"",class:"strip title"})},e.prototype.mainConfig=function(t,e,r){var n;return this.config(t,e,r),n=r.onunload||s.noop,r.onunload=function(i){return function(){return n(),i.onunload(t,e,r),i.state.modal.reset()}}(this)},e.prototype.top=s.noop,e.prototype.config=s.noop,e.prototype.onclose=s.noop,e.prototype.onresize=s.noop,e.prototype.onunload=s.noop,e.prototype.onactivate=s.noop,e.prototype.beforeClose=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),a=r(16),n=r(26),o={Modal:r(102)},i={Button:r(144)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.View=function(t){function e(){this.closeModal=u(this.closeModal,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{reset:!0,icon:"close"})}return p(e,t),e.prototype.render=function(){return new i.Button(this.server).render({icon:this.icon,text:this.text,reverse:this.reverse,onclick:this.closeModal,class:this.classes([this.class,"close"])})},e.prototype.closeModal=function(t){if(this.beforeClose(t)!==!1)return this.reset&&o.Modal.get(this.server).reset(),this.onclick(t),a.redraw()},e.prototype.onclick=s.noop,e.prototype.beforeClose=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),n=r(26),i={Button:r(226)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return a(e,t),e}(n.State),e.View=function(t){function e(){this.facebookLogin=c(this.facebookLogin,this),e.__super__.constructor.apply(this,arguments),s.defaults(this,{verb:"continue"}),this.server||window.inverse_facebook_login||(window.inverse_facebook_login=this.facebookLogin)}return a(e,t),e.prototype.facebookLogin=function(){if(FB)return this.onclick(),this.state.app.checkFacebookLoginAndEmail(this.onlogin,this.onerror);
},e.prototype.render=function(){return new i.Button(this.server).render({active:!0,class:"fb-login-button",props:{scope:"public_profile,email",onlogin:"window.inverse_facebook_login();"},data_attributes:{width:345,size:"large","max-rows":1,"show-faces":!1,"use-continue-as":!1,"auto-logout-link":!1,"button-type":this.verb+"_with"}})},e.prototype.onclick=s.noop,e.prototype.onerror=s.noop,e.prototype.onlogin=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(237),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.assign(this,{id:"7e69e2d4-5cce-4a53-af95-459885be192d"})}return o(e,t),e.prototype.image=function(){return"/newsletters/astronaut.jpg"},e.prototype.dimensions=function(){return{width:915,height:1219}},e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),o={App:r(48),Screen:r(40),Article:r(62),Navigation:r(115)},i={Tab:r(243),Header:r(258)},s={Ga:r(55),Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.top=0,this.scroll_up=0,this.activate=!0,this.app=o.App.get(this.server),this.article=o.Article.get(this.server),this.navigation=o.Navigation.get(this.server),this.component("header",i.Header)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.onscroll=h(this.onscroll,this),this.trackLogo=h(this.trackLogo,this),this.onclose=h(this.onclose,this),this.onopen=h(this.onopen,this),this.config=h(this.config,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen,this.menu=this.state.navigation.menu,this.nav_page="navigation"===this.app.section}return c(e,t),e.prototype.render=function(){return this.state.component("header").render({before:this.left(),after:this.right(),config:this.config,onlogoclick:this.trackLogo,class:"consumer-header",section:this.state.navigation.section})},e.prototype.config=function(t,e,r){var n;if(this.state.el=t,this.app.header.el=t,!e)return n=this.state.component_id,this.screen.addCallback(n,"scroll",this.onscroll),r.onunload=function(t){return function(){return t.screen.removeCallback(n,"scroll")}}(this)},e.prototype.left=function(){return this.button("explore","compass","left","down")},e.prototype.right=function(){return this.button("follow","rocket","right","up")},e.prototype.button=function(t,e,r,n){var o;return this.nav_page||this.menu()!==t?(o={icon:e,side:r,angle:n,text:a.capitalize(t),onclick:function(e){return function(){return e.onopen(t)}}(this),class:this.classes([t,"ellipsis","menu-button",this.app.static===t?"brand-color":void 0])},(this.server||this.nav_page)&&(o.href="/"+t),new i.Tab(this.server).render(o)):this.close(r,n)},e.prototype.close=function(t,e){return new i.Tab(this.server).render({side:t,angle:e,text:"Close",onclick:this.onclose,icon:"times-circle",class:"close menu-button"})},e.prototype.onopen=function(t){if(!this.nav_page)return"explore"===t&&this.state.navigation.updateChannels(),this.menu(t),this.app.event(document.location.href,{action:"open",category:t}),this.app.toggleLockAndOverlay(!0,0),p.redraw()},e.prototype.onclose=function(){if(!this.nav_page)return this.app.event(document.location.href,{action:"close",category:this.menu()}),this.menu(null),this.app.toggleLockAndOverlay(!1),p.redraw()},e.prototype.trackLogo=function(){var t;return t=this.menu(),t||(t="header"),this.app.event(document.location.href,{action:"logo",category:t})},e.prototype.onscroll=function(){var t,e;if(this.state.navigation.menu()){if(!this.state.toggled)return;e=!1}else if(this.sliding(!0)?(this.state.toggled=!0,t=this.state.activate,this.updateActive(t),e=this.activateToggle(t)):(this.state.toggled&&(e=!1,this.state.activate=!0),this.state.toggled=!1),null==e&&!this.app.header_up)return;return this.app.header_up&&(e=!0,this.state.toggled=!0,this.state.activate=null),s.Dom.toggleClass(this.state.el,this.upClass(),e)},e.prototype.updateActive=function(t){var e,r,n,i,o;if(o=this.state.top,i=(null!=(r=this.screen.scroll)?r.top():void 0)||0,this.state.top=i,n=i<10,e=o-i,e>10||n){if(this.state.scroll_up+=e,n||this.state.scroll_up>this.screen.height())return this.state.activate=!0}else if(t&&e<=-10||!t&&e<0)return this.state.scroll_up=0,this.state.activate=null},e.prototype.activateToggle=function(t){return!(!t||this.state.activate)||!(this.state.activate&&!t)&&void 0},e.prototype.upClass=function(){return"consumer-header--up"},e.prototype.sliding=a.noop,e.prototype.onlogoclick=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Logo:r(259)},o={App:r(48),Screen:r(40),Navigation:r(115)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.navigation=o.Navigation.get(this.server),this.component("logo",i.Logo)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen}return a(e,t),e.prototype.render=function(){return NAV({config:this.config,class:this.classes([this.class,"app-header"])},[this.elements()])},e.prototype.elements=function(){var t;return t=[this.before,this.centerElement(),this.after],this.app.cms||this.app.amp?[DIV({class:"flex"},t),this.children]:t.concat([this.children])},e.prototype.centerElement=function(){return DIV({class:"center"},[this.center,this.logoTag()])},e.prototype.logoTag=function(){return this.state.component("logo").render({section:this.section,onclick:this.onlogoclick,skip_loading:this.skip_loading,show_chiclet:this.show_chiclet})},e.prototype.config=s.noop,e.prototype.onlogoclick=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),o=r(44),i={Link:r(134),Image:r(147)},s={App:r(48),Screen:r(40),Article:r(62),Navigation:r(115)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.loading=!0,this.top=p.prop(100),this.app=s.App.get(this.server),this.article=s.Article.get(this.server),this.navigation=s.Navigation.get(this.server),this.component("image",i.Image)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.onload=h(this.onload,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=s.Screen,a.defaults(this,{href:"/"})}return c(e,t),e.prototype.logos={big:{url:"logo_desktop.png",width:246,height:60},small:{url:"logo_mobile.png",width:155,height:44},chiclet:{url:"logo_mobile_in.png",width:39,height:44},big_section:{url:"titles/desktop_",width:246,height:46,section:!0},small_section:{url:"titles/mobile_",width:155,height:37,section:!0}},e.prototype.render=function(){return DIV({class:this.classes([this.class,"app-logo"])},[this.renderLogos()])},e.prototype.renderLogos=function(){return this.logo?[this.linkOrDiv(this.href,this.image(this.logo))]:[this.linkOrDiv(this.href,this.image("big")),this.sectionLogos()]},e.prototype.image=function(t){return this.state.component("image").render(this.imageProps(t))},e.prototype.sectionLogos=function(){if(this.app.sectionPage())return DIV({class:"section-logos"},[this.sectionLogo()])},e.prototype.sectionLogo=function(){var t,e,r;if(this.app.sectionPage()&&this.section&&("function"!=typeof(t=this.section).none||!t.none()))return e=this.state.component_id,r=a.assign(this.imageProps("big_section"),{srcsets:this.srcsets(!0),alt:"Inverse "+this.section.name+" Logo"}),this.linkOrDiv(this.section.url(),[this.state.lazyComponent("image",e,i.Image).render(r)])},e.prototype.imageProps=function(t){var e;return e=this.logos[t],{retina:this.logo,preload:!0,onload:this.onload,width:e.width,alt:"Inverse Logo",srcsets:this.srcsets(),height:e.height,src:this.logoPath(e.url,e.section),class:this.classes([this.state.loading&&!this.app.amp?"loading":void 0])}},e.prototype.onload=function(t){var e;return this.state.loading=!1,e=t.target,e.className=e.className.replace("loading","")},e.prototype.srcsets=function(t){var e,r,n;return!this.logo&&(r="big",t&&(r+="_section"),e=this.set(r,"large",!0),n=this.small(t),{img:"large",sizes:n.sizes,sets:n.sets.concat([e])})},e.prototype.small=function(t){var e,r,n;return r="small",n=r,t?n+="_section":this.show_chiclet&&(n="chiclet"),{sets:[this.set(n,r)],sizes:(e={},e[""+r]="(max-width:"+this.screen.breakpoints.palm+"px)",e)}},e.prototype.set=function(t,e){var r,n;return r=this.logos[t],{src:this.logoPath(r.url,r.section),sizes:(n={},n[""+e]={width:r.width,height:r.height},n)}},e.prototype.linkOrDiv=function(t,e){var r,n;return n={class:this.classes(["logo",this.logoClass()])},this.href?(a.assign(n,{href:t,onclick:this.onclick}),r=new i.Link(this.server).render):r=DIV,r(n,e)},e.prototype.logoClass=function(){return this.logo?this.logo:this.classes(["block",this.show_chiclet?"-chiclet":void 0])},e.prototype.logoPath=function(t,e){var r;return r="https://fsmedia.imgix.net/assets/"+t,e?""+r+this.section.permalink.replace(/-/g,"_")+".png":r},e.prototype.onclick=a.noop,e}(n.View),e}(n)},function(t,e,r){var n;n={Up:r(261),404:r(37),Consumer:r(262)},t.exports={"/search":{legacy:n.Consumer.Search},"/search/page/:page":{legacy:n.Consumer.Search},"/search/:query":{legacy:n.Consumer.Search},"/search/:query/page/:page":{legacy:n.Consumer.Search},"/article/:id":{legacy:n.Consumer.Article},"/article/:id/page/:page":{legacy:n.Consumer.Article},"/topic/:topic":{legacy:n.Consumer.Topic},"/topic/:topic/page/:page":{legacy:n.Consumer.Topic},"/topics":{legacy:n.Consumer.Topics},"/topics/:letter":{legacy:n.Consumer.Topics},"/channel/:channel":{legacy:n.Consumer.Channel},"/user/:id":{legacy:n.Consumer.User},"/user/:id/page/:page":{legacy:n.Consumer.User},"/newsletter":{legacy:n.Consumer.Newsletter},"/archive":{legacy:n.Consumer.Archive},"/archive/:month/:year/:section":{legacy:n.Consumer.Archive},"/archive/:month/:year/:section/page/:page":{legacy:n.Consumer.Archive},"/labs":{legacy:n.Consumer.Labs},"/about":{legacy:n.Consumer.About},"/about/:section":{legacy:n.Consumer.About},"/browse":{legacy:n.Consumer.Browse},"/browse/:category":{legacy:n.Consumer.Browse},"/browse/:category/:label":{legacy:n.Consumer.Browse},"/browse/:category/:label/page/:page":{legacy:n.Consumer.Browse},"/follow":{legacy:n.Consumer.Navigation},"/explore":{legacy:n.Consumer.Navigation},"/up":{legacy:n.Up},"/404":{legacy:n[404]},"/":{legacy:n.Consumer.Section},"/culture":{legacy:n.Consumer.Section},"/science":{legacy:n.Consumer.Section},"/innovation":{legacy:n.Consumer.Section},"/entertainment":{legacy:n.Consumer.Section},"/mind-and-body":{legacy:n.Consumer.Section},"/miscellaneous":{legacy:n.Consumer.Section},"/news":{legacy:n.Consumer.Section},"/none":{legacy:n.Consumer.Section},"/life-work":{legacy:n.Consumer.Section},"/science-tech":{legacy:n.Consumer.Section},"/humans":{legacy:n.Consumer.Section},"/point-b":{legacy:n.Consumer.Section},"/replicant":{legacy:n.Consumer.Section},"/life-in-space":{legacy:n.Consumer.Section},"/brave-new-worlds":{legacy:n.Consumer.Section},"/science-and-chill":{legacy:n.Consumer.Section},"/:custom":{legacy:n.Consumer.Custom}}},function(t,e,r){var n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=r(26),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.render=function(){return"ok"},e}(n.View),e}(n)},function(t,e,r){t.exports={About:r(263),Archive:r(305),Article:r(313),Browse:r(315),Channel:r(321),Custom:r(264),Labs:r(323),Navigation:r(324),Newsletter:r(325),Search:r(326),Section:r(328),Topic:r(329),Topics:r(330),User:r(332)}},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};o=r(24),n=r(264),i={Error:r(37),About:r(298),Jobs:r(299),Team:r(301),Press:r(302),Header:r(303),Contact:r(304),Footer:r(294)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){var t;return e.__super__.constructor.apply(this,arguments),t=this.section,p.call(this.sections,t)<0?this.set404():(this.component("footer",i.Footer),this.component(this.section,i[o.capitalize(this.section)]),void("about"!==this.section&&this.setAppData()))}return s(e,t),e.prototype.sections=["about","team","jobs","press","contact","advertise"],e.prototype.initHeader=function(){return this.component("header",i.Header)},e.prototype.fetch=function(){if(this.ads.setRendering(!1),this.app.no_background=!0,this.section=this.param("section"),this.section||(this.section="about"),"about"===this.section)return e.__super__.fetch.apply(this,arguments)},e.prototype.ondone=function(){return e.__super__.ondone.apply(this,arguments),this.ads.setRendering(!1)},e.prototype.setAppData=function(){var t,e;if(t=this.navigation.meta("home"),t.home=!1,t.title=o.capitalize(this.section),this.app.section="",this.app.static="about",this.app.surrogateKey("about"),this.app.pageData(t,this.navigation.social(t)),"jobs"!==(e=this.section)&&"team"!==e&&"press"!==e)return this.app.stopNavigating()},e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.renderProps=function(){return{class:"about-route",header:this.state.component("header"),header_props:{is_static:!0,section:this.state.section,sections:this.state.sections}}},e.prototype.components=function(){return[DIV({class:"app-container wrapper"},[this.state.component(this.state.section).render({model:this.model})]),this.state.component("footer").render()]},e.prototype.initRoute=o.noop,e.prototype.routeConfig=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),a=r(16),n=r(265),i={Link:r(134),Pixel:r(135),Image:r(147),Footer:r(294),Header:r(257),Container:r(266)},o={Trackers:r(297)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.initHeader()}return p(e,t),e.prototype.initHeader=function(){return this.component("header",i.Header)},e.prototype.fetch=function(){return this.path=this.strippedOriginalUrl(),"cms"===this.path?this.redirect("/cms/articles"):(this.no_redirect=!0,this.query=this.queryString(),this.navigation.onload(function(t){return function(){return e.__super__.fetch.call(t,t.path)}}(this)))},e.prototype.ondone=function(){return this.ads.setRendering(!0),e.__super__.ondone.apply(this,arguments),this.navigation.section=null,this.setDefaultBackground(),this.updateSpotlightPage(),this.addNetNeutralityWidget()},e.prototype.setDefaultBackground=function(){var t;if(t=this.model.bodyWidget("background").widget,t.persisted()&&(this.app.background=t),this.app.background)return this.app.no_background=!1},e.prototype.updateSpotlightPage=function(){var t,e,r,n;if(this.model.flags.spotlight)return this.sponsor=this.m(o.Trackers),this.query.video&&(e=null,r=this.model.sections()[0],t=r.children(),n=s.find(t,function(t){return function(r,n){var i;if(i=r.oembed_data)return e=n,i.mediaid===t.query.video}}(this)))?(t.splice(e,1),t.splice(1,0,n),this.model.sections()[0].children(t)):void 0},e.prototype.addNetNeutralityWidget=function(){var t;if(this.model.flags.net_neutrality_widget)return t=["<script src=",'"https://widget.battleforthenet.com/widget.js"',"</script>"].join(""),this.scripts.load(t,"net-neutrality")},e.prototype.setAppData=function(){return this.app.page="custom"},e.prototype.articleRedirect=function(t){if(e.__super__.articleRedirect.apply(this,arguments))return!0;if(!this.model.isCustom())return this.redirect("/article/"+t),!0},e.prototype.initTests=s.noop,e.prototype.articlePathRedirect=s.noop,e}(n.State),e.View=function(t){function e(){this.routeConfig=u(this.routeConfig,this),this.logo=u(this.logo,this),this.breadcrumbs=u(this.breadcrumbs,this),e.__super__.constructor.apply(this,arguments),this.initRoute()}return p(e,t),e.prototype.initRoute=function(){if(this.class=this.classes([this.class,"routes-custom",this.model.wide()?"routes-custom--wide":void 0,this.model.isSpotlight()?"routes-custom--spotlight":void 0,this.model.ignoreRules()?"routes-custom--ignorerules":void 0]),this.sponsor=this.state.sponsor,this.sponsor)return this.sponsor.device=this.screen.device(!0)},e.prototype.article=function(){var t,e;return t=this.state.component_id,e={rail:!1,first:!0,logo:this.logo(),model:this.model,social:!1,show_ads:!1,scrollspy:!1},this.model.flags.legal&&(e.breadcrumbs=this.breadcrumbs),this.state.lazyComponent("container",t,i.Container).render(e)},e.prototype.breadcrumbs=function(){var t,e;return e=this.state.originalUrl(),t=s.startCase(this.state.strippedOriginalUrl()),[{href:"/",text:"Home"},{href:e,text:t}]},e.prototype.logo=function(){var t,e,r,n,o;if(r={},t=this.state.component_id,e=this.model.bodyWidget("logo"),null!=(n=e.widget)?n.url:void 0)return this.sponsor&&(r.href=this.sponsor.logoHref(),this.server||(o=this.sponsor.logoTracking())),new i.Link(this.server).render(r,[this.state.lazyComponent("image",t,i.Image).render({retina:!0,preload:!0,src:e.widget.embed(),width:this.screen.sizes.content,class:"routes-custom__logo"}),o])},e.prototype.backgroundHref=function(){if(this.sponsor)return this.sponsor.skinHref()},e.prototype.backgroundTrackers=function(){if(!this.server&&this.sponsor)return this.sponsor.skinTracking()},e.prototype.routeConfig=function(t,r,n){var i;if(e.__super__.routeConfig.apply(this,arguments),!r)return i=n.onunload,n.onunload=function(t){return function(){if(t.onExit("article",{type:"custom"}),i)return i()}}(this)},e.prototype.stream=function(){if(!this.model.flags.spotlight&&!this.model.flags.no_footer)return this.footer()},e.prototype.footer=function(){var t;return t=this.state.component_id,this.state.lazyComponent("footer",t,i.Footer).render()},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,l=function(t,e){return function(){return t.apply(e,arguments)}},d=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};c=r(16),p=r(24),n=r(38),s={Authors:r(111)},o={Article:r(70)},i={Container:r(266)},a={Schema:r(124),Accounts:r(61),Navigator:r(65)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){this.set404=l(this.set404,this);var t;e.__super__.constructor.apply(this,arguments),p.assign(this,{authors:s.Authors.get(this.server)}),this.app.page="article",t=this.app.loaded,this.model=this.article.model(),this.page=this.param("page"),this.fetch()}return u(e,t),e.prototype.fetch=function(t){var e,r,n,i,s,a,u;return t||(t=this.param("id")),a=this.app.loaded,u=this.originalUrl(),this.server||a?(r=[this.model.path(),this.model.id],a&&d.call(r,t)<0&&this.article.reset(),n=t,s=this.isUUID(n),i=this.isPermalink(n),i&&!s&&(n=n.replace(/^(\d*-).*/,"$1")),e=this.m(o.Article,{id:n,referrer:this.app.referrer,taxonomy:this.model.taxonomy.diffsyncData()}),e.get().then(function(r){return function(){var n,i,o,s,a;return(a=e.customPageRedirect(u,t))?r.redirect(a):(r.model=e,s=r.model.path(),r.setSurrogateKey(),r.setSlideshowPage(),r.articleRedirect(s,t)?void 0:(i=r.model.created_by,(n=r.authors.models[i])&&r.model.setAuthor(n),r.article.model(r.model),r.article.landing_id=r.model.id,r.server&&(o=r.model.strippedData({article:!0,body_widgets:{banner:["2:1","3:1"],primary:["2:1","3:1"]}}),r.article.json=p.assign(o,{landing_id:r.model.id})),n||r.model.differentAuthor()||r.fetchAuthors(i),r.ondone(),c.redraw()))}}(this),function(t){return function(e){return console.error(e),t.set404(),e}}(this))):(this.setSlideshowPage(),this.ondone())},e.prototype.articleRedirect=function(t,e){if(this.articlePathRedirect(t,e))return!0;if(!this.domain().isOrigin()){if("deleted"===this.model.state)return this.redirect(this.model.deletedRedirect()),!0;if(!this.model.published)return this.set404(),!0}},e.prototype.articlePathRedirect=function(t,e){var r,n;if(!this.no_redirect&&(r=t!==e||this.slideshowShouldRedirect()))return n="/"+this.articleRedirectUrl(t),this.page&&this.model.slideshow()&&(n=n+"/page/"+this.page),this.redirect(n),!0},e.prototype.slideshowShouldRedirect=function(){if(this.page)return!this.model.slideshow()||(this.page>this.model.sections().length?(this.page=null,!0):void 0)},e.prototype.articleRedirectUrl=function(t){return"article/"+t},e.prototype.set404=function(){return this.fetched=!0,this.app.stopNavigating(),this.setSurrogateKey(),e.__super__.set404.apply(this,arguments)},e.prototype.setSurrogateKey=function(){return this.app.surrogateKey("article "+this.model.id)},e.prototype.ondone=function(){return this.fetched=!0,this.app.hide_top_ad=this.model.slideshow(),this.updateMeta(),this.setAppData(),this.updateTargeting(),this.navigation.setSection(this.model.section()),this.model.long()&&(this.app.no_background=!0),this.app.stopNavigating()},e.prototype.setSlideshowPage=function(){if(this.model.slideshow()&&this.app.standardLayout())return this.page||(this.page=1),this.model.slideshow_page=parseInt(this.page,10)},e.prototype.updateMeta=function(){return this.app.pageData(this.model.meta(),this.model.socialMeta())},e.prototype.updateTargeting=function(){if(this.model.flags.no_preroll&&(this.ads.preroll=!1),this.server||this.app.navigated)return this.ads.updateArticle(this.model)},e.prototype.setAppData=function(){if(this.app.page="article",this.app.setArticlePageData(this.model),this.app.loaded)return a.Schema.updateArticle(this.model,!0)},e.prototype.fetchAuthors=function(t){return this.authors.fetch({id:t}).then(function(e){return function(){return e.model.setAuthor(e.authors.models[t]),c.redraw()}}(this),this.onError)},e.prototype.setAppRedirect=function(){var t,r,n;if(n=this.param("id"),r=n.match(/^\d*-/),t=0===n.replace(/[a-zA-Z0-9\-]*/g,"").length,!t&&!r)return e.__super__.setAppRedirect.apply(this,arguments)},e.prototype.isPermalink=function(t){return null==t&&(t=""),t.match(/^\d{4,}(-.*)/)},e.prototype.isUUID=function(t){return null==t&&(t=""),t.match(/[0-9a-f]{8}(-[0-9a-f]{4}){3}-[0-9a-f]{12}/)},e}(n.State),e.View=function(t){function e(){this.routeConfig=l(this.routeConfig,this),e.__super__.constructor.apply(this,arguments),this.model=this.state.model}return u(e,t),e.prototype.render=function(){return e.__super__.render.call(this,this.renderProps(),[this.components()])},e.prototype.renderProps=function(){return{header:this.state.component("header"),class:this.classes([this.class,"article-route"])}},e.prototype.components=function(){if(!this.app.error)return[this.article(),this.stream()]},e.prototype.article=function(){var t;return t=this.state.component_id,this.state.lazyComponent("container",t,i.Container).render({first:!0,model:this.model,component:this.component()})},e.prototype.routeConfig=function(t,e,r){if(e||(r.onunload=this.onunload),this.state.fetched)return this.app.stopNavigating()},e.prototype.onunload=function(){return a.Schema.removeArticle()},e.prototype.stream=p.noop,e.prototype.component=p.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u,h=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty,d=function(t,e){return function(){return t.apply(e,arguments)}};u=r(16),c=r(24),n=r(26),o=r(44),s={Ads:r(39),App:r(48),Screen:r(40),Stream:r(103),Article:r(62),Pillager:r(97),Navigation:r(115),Newsletter:r(118)},i={Ad:r(133),Rail:r(267),Header:r(272),StickyAd:r(273),Sections:r(274),Article:r(290),Container:r(291),Accordion:r(293)},p={GA:r(55),Dom:r(46),Schema:r(124)},a={Image:r(100)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),c.assign(this,{page:1,arms:{},pages:0,viewed:0,rewarded:1,tracked:!1,model:u.prop(null),screen:s.Screen,read_more:u.prop(!0),container:u.prop(null),ads:s.Ads.get(this.server),app:s.App.get(this.server),stream:s.Stream.get(this.server),article:s.Article.get(this.server),pillager:s.Pillager.get(this.server),navigation:s.Navigation.get(this.server),newsletter:s.Newsletter.get(this.server),scroll:{apex:u.prop(null),top:u.prop(null),bottom:u.prop(null),height:u.prop(null)},rail:{top:u.prop(null),bottom:u.prop(null),height:u.prop(null)}}),this.component("container",i.Container)}return h(e,t),e.prototype.initTests=function(){var t;if(!this.app.navigating&&(null!=(t=this.model())?t.persisted():void 0)&&!this.initialized)return this.initialized=!0,this.fetchTest("image")},e.prototype.fetchTest=function(t){var e,r,n;if(r=this.m(a[c.capitalize(t)]),n=r.name,e=this.pillager.getArm(n),this.arms[t]=e,!(e.fetched()||e.fetching()||this.model().long()))return this.pillager.fetchArm(n).then(function(r){return function(){if("image"===t&&r.app.impression(e),!e.isControl())return u.redraw()}}(this))},e}(n.State),e.View=function(t){function e(){this.onscroll=d(this.onscroll,this),this.setMeta=d(this.setMeta,this),this.onactivate=d(this.onactivate,this),this.setScrollData=d(this.setScrollData,this),this.onresize=d(this.onresize,this),this.articleConfig=d(this.articleConfig,this),this.config=d(this.config,this);var t;e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=this.state.screen,this.article=this.state.article,this.read_more=this.state.read_more,c.defaults(this,{index:0,rail:!0,social:!0}),this.model&&(t=this.model.long(),(!this.rail||t||this.app.amp)&&(this.state.rail=!1),(t||this.first||this.model.slideshow())&&this.read_more(!1),this.setPages(),this.state.model(this.model),this.state.initTests(),this.first&&this.track())}return h(e,t),e.prototype.setPages=function(){var t;if(!this.cms)return this.model.id!==(null!=(t=this.state.model())?t.id:void 0)&&(this.read_more()||this.model.slideshow()?this.state.pages=1:this.state.pages=this.model.pageCount()),this.state.was_read_more&&!this.read_more()&&(this.state.page=2,this.state.exited=!1,this.state.pages=this.model.pageCount()),this.state.was_read_more=this.read_more()},e.prototype.render=function(){var t,e,r,n,o,s;if(this.model)return n=this.model.long(),o=this.state.scroll,s=o.top,t=o.apex,e=o.bottom,r=o.height,this.state.component("container").render({top:s,apex:t,end:r,tags:this.tags,first:this.first,index:this.index,model:this.model,bottom:e,tabs:!n,style:this.style(),config:this.config,second:this.second,social:this.social,preload:this.preload,sponsor:this.sponsor,rail:this.state.rail,read_more:this.read_more,onresizecb:this.onresize,onscrollcb:this.onscroll,sticky_ad:this.stickyAd(),campaign:"article-top",onactivate:this.onactivate,onrailresize:this.onresize,featured:this.model.featured(),breadcrumbs:this.breadcrumbs(),container:this.state.container,articleConfig:this.articleConfig,cms_components:this.cms_components,rail_component:i.Rail,trackers:this.model.skreemrParams(),header_component:i.Header,class:this.classes(["article-container",this.model.ignoreRules()?void 0:"article-"+this.format(),this.model.slideshow()?"article-slideshow":void 0,this.model.slideshow_transition?"article-slideshow--transition":void 0])},[this.logo,this.main(),this.oopTP()])},e.prototype.stickyAd=function(){var t,e;if(this.model.slideshow())return t=this.state.component_id,e=this.screen.palm()?10:0,this.state.lazyComponent("sticky-ad",t,i.StickyAd).render({index:this.index,model:this.model,offset:e/2,bottom_offset:e,height:function(t){return function(){return t.state.rect.height}}(this),bottom:function(t){return function(){return t.state.article_rect.bottom}}(this)})},e.prototype.main=function(){var t,e,r;return e={first:this.first,index:this.index,model:this.model,second:this.second,read_more:this.read_more,top:this.state.scroll.apex,no_ads:this.model.isCustom(),newsletter:this.newsletter(),container:this.state.container},this.component?this.component.render(e):(t=this.state.component_id,r=this.state.lazyComponent("sections",t,i.Sections),this.cms?new i.Article(this.server).render(e,[r]):r.render(e))},e.prototype.style=function(){if(!this.server)return{zIndex:""+(98-this.index)}},e.prototype.breadcrumbs=function(){return c.map(this.model.breadcrumbs(),function(t){return{href:t.url(),text:t.name}})},e.prototype.format=function(){var t;return t=this.model.format,"short"===t&&this.app.amp,t},e.prototype.config=function(t,e){if(e&&t!==this.state.el&&this.onresize(),this.state.el=t,this.state.container(t),!e)return this.onresize()},e.prototype.articleConfig=function(t,e){if(e&&t!==this.state.article_el&&this.onresize(),this.state.article_el=t,!e)return this.onresize()},e.prototype.onresize=function(){return this.state.el&&(this.state.rect=p.Dom.rect(this.state.el)),this.state.article_el&&(this.state.article_rect=p.Dom.rect(this.state.article_el)),this.setScrollData()},e.prototype.setScrollData=function(){var t,e,r;if(this.state.rect&&this.state.article_rect)return e=this.state.article_rect,r=this.state.rect.top,t=this.screen.height()/2,this.state.scroll.apex(r),this.state.rail&&!this.model.long()&&this.setRail(),this.first||(r-=t),this.state.scroll.top(r),this.state.scroll.height(e.height),this.state.scroll.bottom(e.bottom-t)},e.prototype.setRail=function(){var t;return t=this.state.article_rect,this.state.rail.top(t.top),this.state.rail.bottom(t.bottom),this.state.rail.height(t.height)},e.prototype.onactivate=function(){var t,e,r,n,i,o,s,a;if(!(this.app.navigating||this.state.navigation.menu()||this.model.isCustom())&&(r=this.state.model(),r.permalink))return a=r.url(),n=this.article.model().url(),e="article"===this.app.page,o=null!=(i=window.history)?i.replaceState:void 0,t=document.location.pathname.replace(/\/page\/\d*$/,""),e&&o&&t!==a&&(s=a,r.slideshow_page>1&&(s=a+"/page/"+r.slideshow_page),window.history.replaceState({},"",s)),this.track(this.article.model().canonicalUrl()),a!==n?(this.article.model(r),this.state.activated=!0,this.state.ads.updateArticle(r),this.setMeta(e)):void 0},e.prototype.setMeta=function(t){var e;return e=this.state.model(),t?(this.app.setArticlePageData(e),this.app.pageData(e.meta(),e.socialMeta(),!0)):this.app.updateDynamicMeta(e),p.Schema.updateArticle(e,!0)},e.prototype.track=function(t){
var e,r,n;if(!this.state.tracked&&(this.app.pages+=1,this.state.tracked=!0,c.assign(this.article.bookmark,{stream_index:this.index,seen:this.article.bookmark.seen+1}),!this.first))return r=this.state.model(),n=r.skreemrParams(),this.app.track(r.url(),{dimensions:r.gaDimensions(),params:c.assign({},n,{index:this.index})}),this.app.event(this.state.article.previous.url(),{category:"stream",action:"completion",params:{to:n,index:this.index,from:this.state.article.previous.skreemrParams()}}),null!=("undefined"!=typeof SPR&&null!==SPR?SPR.Reach:void 0)?(e=r.simplereachData(),t&&(e.ref_url=t),SPR.Reach.collect(e)):void 0},e.prototype.onscroll=function(){var t,e,r,n,i;if(!(this.app.navigating||this.app.cms||this.state.exited)&&this.model.id===this.article.model().id)return r=this.state.article_rect.height/this.state.pages,t=0===this.state.viewed,i=this.state.viewed<=this.state.page,e=this.state.page<=this.state.pages+1,this.shouldReward()&&(n=c.assign({},this.model.skreemrParams(),{reward:1}),this.app.conversion(this.state.arms.image,n)),(t||i&&e&&this.atBottom(r))&&(this.article.bookmark.pages=this.state.pages,t&&(this.article.bookmark.page=1),t||(this.convert(),this.pageview(),this.article.bookmark.page=this.state.viewed),this.state.viewed=this.state.page,this.state.page+=1),this.screen.scroll.top()+this.screen.height()>this.state.article_rect.bottom?(this.state.exited=!0,this.state.article.previous=this.model,this.app.onExit("article",{type:"scroll"})):void 0},e.prototype.convert=function(){var t;if(!this.first&&2===this.state.page&&(t={ga:{label:this.model.mainTags(!0)+"_"+this.screen.device()},params:c.assign({},this.model.skreemrParams(),{index:this.index})},this.app.event(this.model.url(),c.assign({},t,{action:"scroll",category:"stream"})),!this.model.long()))return this.app.event(this.model.url(),c.assign({},t,{action:"impression",category:"read_more"}))},e.prototype.pageview=function(){if(this.state.page>1&&this.state.page<=this.state.pages)return p.GA.pageview(this.model.url()+"/page/"+this.state.page,{both:!1})},e.prototype.shouldReward=function(){var t,e,r;if(!this.model.long()&&(r=this.state.article_rect.top,t=this.screen.height(),e=this.screen.scroll.top()>this.state.rewarded*t+r))return this.state.rewarded+=1,!0},e.prototype.atBottom=function(t){var e;return e=this.state.article_rect.top,this.screen.scroll.top()>(this.state.viewed-1)*t+e},e.prototype.onScreen=function(){return this.screen.onscreen(this.state.article_rect.top,.9)},e.prototype.newsletter=function(){var t;if(!this.hideNewsletter())return t=this.state.component_id,this.state.lazyComponent("newsletter",t,i.Accordion).render({first:this.first,separator:!0,url:this.model.url(),class:"contained",label:"article-accordion",tracking:this.model.skreemrParams()})},e.prototype.hideNewsletter=function(){return!(!this.state.newsletter.cookied()&&!this.app.navigating)||(!!(this.popupActive()||this.model.slideshow()&&!this.app.amp)||(this.model.isCustom()||this.app.thirdParty()&&!this.app.amp))},e.prototype.popupActive=function(){if(!this.app.amp)return this.app.showNewsletterOverlay()},e.prototype.oopTP=function(){if(!(this.app.thirdParty()||this.app.cms||this.first))return this.state.lazyComponent("ooptp",this.state.component_id,i.Ad).render({preload:!0,position:"oop_tp"})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,l=function(t,e){return function(){return t.apply(e,arguments)}};c=r(16),p=r(24),n=r(26),o=r(44),s={Ads:r(39),App:r(48),Screen:r(40),Article:r(62),Navigation:r(115)},i={Rail:r(268),Related:r(270)},a={Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),p.assign(this,{related:null,top:c.prop(0),ad:c.prop(null),height:c.prop(0),offset:c.prop(0),bottom:c.prop(null),onresizecb:c.prop(p.noop),bottom_offset:c.prop(null),ads:s.Ads.get(this.server),app:s.App.get(this.server),article:s.Article.get(this.server),navigation:s.Navigation.get(this.server)})}return u(e,t),e}(n.State),e.View=function(t){function e(){this.inline=l(this.inline,this),this.disabled=l(this.disabled,this),this.setDimensions=l(this.setDimensions,this),this.onrailresize=l(this.onrailresize,this),this.unload=l(this.unload,this),this.config=l(this.config,this),e.__super__.constructor.apply(this,arguments),p.defaults(this,{index:0,padding:40,top:c.prop(0),bottom:c.prop(0),buffer:c.prop(0)}),this.app=this.state.app,this.screen=s.Screen,this.skin=this.state.ads.skin(),!this.skin&&this.state.ad()&&this.railBiggerThan()&&(this.no_bottom=!0)}return u(e,t),e.prototype.render=function(){var t,e;return this.inline()?this.unload():(e=this.model.slideshow(),t=this.state.component_id,this.read_more()&&(this.no_bottom=!0),this.state.component("rail",t,i.Rail).render({skin:this.skin,show_ad:!0,top:this.state.top,config:this.config,no_ads:this.inline(),disabled:this.disabled,no_top:e,class:"article-rail",bottom:this.state.bottom,offset:this.state.offset,no_bottom:this.no_bottom,slide_ad:e,ad_refresh_id:this.model.id,bottom_offset:this.state.bottom_offset},[this.related()]))},e.prototype.config=function(t,e,r){var n;if(e&&t!==this.state.el&&this.unload(),this.state.el=t,this.inline()||this.state.listening||(this.state.listening=!0,this.state.sensor=new o(t,this.onrailresize)),!this.state.initialized)return this.state.initialized=!0,n=this.state.component_id,this.screen.addCallback(n,"resize",this.setDimensions),this.setDimensions(),r.onunload=this.unload},e.prototype.unload=function(){var t;if(t=this.state.component_id,this.state.listening=!1,this.state.initialized=!1,this.screen.removeCallback(t,"resize"),this.state.sensor)return this.state.sensor.detach(this.state.el)},e.prototype.onrailresize=function(){var t;return this.onresize(),this.setDimensions(),(t=this.state.onresizecb())()},e.prototype.setDimensions=function(){var t,e,r,n,i;if(e=this.inline(),e||!this.disabled())return n=a.Dom.rect(this.state.el),e?this.state.top(n.top):((t=this.ad2El())&&this.state.ad(a.Dom.rect(t)),i=a.Dom.rect(this.state.related),r=this.adjustedOffset(n,i)||0,this.state.offset(r),this.state.height(n.height),this.state.top(this.top()+r),this.setBottom(n,r))},e.prototype.setBottom=function(t,e){var r,n,i,o,s;if(this.bottom())return o=this.screen.height(),s=this.end()||t.height,i=s-t.height,n=t.height-o-e,r=this.bottom()-this.buffer()-n,this.model.slideshow()?r-=o:(i-=o,r-=2*o),i<0&&(i=0),this.state.bottom(r),this.state.bottom_offset(i)},e.prototype.adjustedOffset=function(t,e){var r,n;return null==this.top()?0:(r=this.state.ad(),r&&!this.skin&&(n=r.top-t.top-this.padding),(this.skin||null==n)&&e&&(n=e.top-t.top-this.padding),n)},e.prototype.related=function(){var t;if(!this.read_more()&&!this.model.slideshow())return t=this.state.component_id,this.state.lazyComponent("related",t,i.Related).render({index:this.index,model:this.model,config:function(t){return function(e){return t.state.related=e}}(this),class:this.classes([this.inline()?void 0:this.margin("bottom")])})},e.prototype.margin=function(t){return"rail__"+t},e.prototype.disabled=function(){return!!(this.inline()||this.app.navigating||this.state.fakead)||(this.state.fakead=a.Dom.hasClass(this.ad2El(),"vert--fake"),this.model.slideshow()?void 0:this.railBiggerThan(this.screen.height()))},e.prototype.railBiggerThan=function(t){if(this.height()&&this.state.height()&&this.state.offset())return this.height()-(t||0)<=this.state.height()},e.prototype.inline=function(){if(!this.server)return!this.screen.rail()},e.prototype.ad2El=function(){if(this.state.el)return this.state.ad2?this.state.ad2:this.state.ad2=this.state.el.querySelector(".vert--rail2")},e.prototype.end=p.noop,e.prototype.height=p.noop,e.prototype.onresize=p.noop,e.prototype.read_more=p.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Sticky:r(136),Ad:r(133),FakeAd:r(269),Scrollspy:r(137)},o={Ads:r(39),App:r(48),Screen:r(40)},s={Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.active=!1,this.ads=o.Ads.get(this.server),this.app=o.App.get(this.server),this.ads.targeting.rail=!0}return c(e,t),e}(n.State),e.View=function(t){function e(){this.inline=h(this.inline,this),this.onadrender=h(this.onadrender,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen}return c(e,t),e.prototype.render=function(){var t,e,r;if(t=a.without([this.topAd(),this.children,this.bottomAd()],void 0),t.length)return e=this.classes([this.class,"app-rail"]),this.show_ad?(r=this.state.component_id,this.state.lazyComponent("rail",r,i.Sticky).render({top:this.top,tag:ASIDE,class:e,bottom:this.bottom,config:this.config,offset:this.offset,update:this.update,disabled:this.disabled,onresizecb:this.onresizecb,bottom_offset:this.bottom_offset},t)):ASIDE({class:e,config:this.config},t)},e.prototype.topAd=function(){if(!this.skin&&this.show_ad&&!this.no_top)return this.ad("rail1")},e.prototype.bottomAd=function(){if(!this.no_bottom&&this.show_ad)return this.ad("rail2",!0)},e.prototype.ad=function(t,e){var r,n,o;if(!this.app.amp&&!this.inline()){if(r=i.Ad,n=this.state.component_id,o={position:t},this.skin){if(!e)return;o.sponsor=this.skin,t="fake-"+t,r=i.FakeAd}return"rail1"===t?a.assign(o,{onrender:this.onadrender}):"rail2"===t&&a.assign(o,{slide:this.slide_ad,refresh_id:this.ad_refresh_id}),this.state.lazyComponent(t,n,r).render(o)}},e.prototype.onadrender=function(t){var e;if(e=document.querySelector("#"+t.slot.getSlotElementId()),e&&t.size[0]>1)return s.Dom.addClass(e,this.margin("bottom"))},e.prototype.margin=function(t){return"rail__"+t},e.prototype.inline=function(){if(!this.server)return!this.screen.rail()},e.prototype.top=a.noop,e.prototype.bottom=a.noop,e.prototype.config=a.noop,e.prototype.offset=a.noop,e.prototype.disabled=a.noop,e.prototype.onresizecb=a.noop,e.prototype.bottom_offset=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Ad:r(133)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.component("ad",i.Ad)}return a(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(){return this.state.component("ad").render({fake:!0,href:this.href,header:!0,pixels:this.pixels,sponsor:this.sponsor,campaign:this.campaign,position:this.position,class:this.classes([this.class,"vert--fake"])})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}},h=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(24),n=r(26),i={Ad:r(133),Tabs:r(242),Mediaobj:r(162),Header:r(271)},o={App:r(48),Screen:r(40),Pillager:r(97)},s={Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.pillager=o.Pillager.get(this.server),this.arms={count:0,impressions:[],tests:{}}}return p(e,t),e}(n.State),e.View=function(t){function e(){this.track=u(this.track,this),this.unload=u(this.unload,this),this.onscroll=u(this.onscroll,this),this.onresize=u(this.onresize,this),this.card=u(this.card,this),this.relatedConfig=u(this.relatedConfig,this);var t;e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.arms=this.state.arms,this.screen=o.Screen,this.bodies||(this.bodies=null!=(t=this.model.related)?t.bodies:void 0),a.defaults(this,{card_count:1,text:"Related Stories"})}return p(e,t),e.prototype.render=function(){var t,e;if(null!=(e=this.bodies)?e.length:void 0)return t=this.rail(),[DIV({config:this.relatedConfig,class:this.classes([this.class,"article-related",t?void 0:"article-related--card"])},[this.show_header?this.tab():void 0,this.articles(),this.promo()])]},e.prototype.promo=function(){var t;if(!this.app.cms)return t=this.state.component_id,this.state.lazyComponent("ad",t,i.Ad).render({preload:!0,position:"oop_related"})},e.prototype.relatedConfig=function(t,e,r){var n,i;if(this.state.el=t,this.config(t,e,r),!this.state.loaded)return this.state.loaded=!0,n=this.state.component_id,this.screen.addCallback(n,"resize",this.onresize),this.screen.addCallback(n,"scroll",this.onscroll),this.onresize(),this.onscroll(),i=r.onunload,r.onunload=function(t){return function(){if(t.state.loaded=!1,i&&i(),t.unload(),t.state.el.className.match(/article-related/))return t.state.el.innerHTML=""}}(this)},e.prototype.tab=function(){return this.show_header||!this.rail()?this.header():new i.Tabs(this.server).render({tabs:[{fake:!0,text:this.text}]})},e.prototype.header=function(){return DIV({class:"article-related__header"},[SPAN(this.text)])},e.prototype.articles=function(){var t,e;return t=this.bodies,this.rail()?(e=t.length-1,a.map(t,function(t){return function(r,n){var i;return i=n===e,t.mediaobj(r,i)}}(this))):a.map(t.slice(0,this.card_count),this.card)},e.prototype.card=function(t){return this.article("card",t,!1,"media",{width:400,height:200,crop:"2:1",max_length:9999,include_teaser:!0})},e.prototype.mediaobj=function(t,e){return this.article("mediaobj",t,e,"media",{width:100,height:66,crop:"4:3",max_length:55})},e.prototype.article=function(t,e,r,n,o){var s,p;return null==o&&(o={}),p=e.id,s=i.Mediaobj,this.state.lazyComponent(t,p,s).render(a.assign(o,{model:e,retina:!0,outlined:!0,sponsor:!1,show_tag:!1,preload:this.preload,title_type:"social",track:function(t){return function(e){return t.track(e,n)}}(this),class:this.classes([o.class,r?"-last":void 0])}))},e.prototype.onresize=function(){if(this.state.el)return this.state.top=s.Dom.rect(this.state.el).top},e.prototype.onscroll=function(){if(this.screen.onscreen(this.state.top))return this.impression()?this.unload():void 0},e.prototype.impression=function(){var t;return t=a.assign({},this.model.skreemrParams(),{index:this.index}),this.state.impressed||(this.state.impressed=!0,this.app.event(this.model.url(),{params:t,action:"impression",category:"suggested-articles",ga:{label:this.model.mainTags(!0)+"_"+this.screen.device()}})),a.forEach(this.arms.tests,function(e){return function(r){var n;if(r.fetched()&&(n=r.name,!(h.call(e.arms.impressions,n)>=0)))return e.arms.impressions.push(r.name),e.app.impression(r,{params:t})}}(this)),this.arms.impressions.length===this.arms.count},e.prototype.unload=function(){var t;return this.state.top=null,t=this.state.component_id,this.screen.removeCallback(t,"resize"),this.screen.removeCallback(t,"scroll")},e.prototype.track=function(t,e){var r,n;return n=this.model.url(),r={action:"click",ga:{label:this.model.mainTags(!0)+"_"+this.screen.device()+"_"+e},params:a.assign({},t.skreemrParams(),{index:this.index,active:this.model.id,widget_type:e})},this.app.event(n,a.assign({},r,{category:"suggested-articles"})),a.forEach(this.arms.tests,function(t){return function(e){if(e.fetched())return t.app.conversion(e,{params:r.params})}}(this))},e.prototype.rail=function(){return!this.app.amp&&(!!this.server||this.screen.rail())},e.prototype.config=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(26),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return P({config:this.config,class:this.classes([this.class,"separator__header"])},["Article continues below"])},e.prototype.config=i.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),i={Info:r(163),Header:r(174),Podcasts:{Inms:r(234)}},o={App:r(48),Article:r(62)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.article=o.Article.get(this.server),this.component("header",i.Header)}return p(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.render=function(){return this.state.component("header").render({cms:this.cms,image:this.image,dek:this.getDek(),highlight:!1,active:this.active(),title:this.getTitle(),short:this.model.short(),sponsor:this.getSponsor(),title_url:this.titleUrl(),featured:this.model.long(),podcast:this.podcastBadge(),preload:this.preload||this.first,cms_components:this.cms_components,color_reversal:this.color_reversal},[this.info()])},e.prototype.getDek=function(){var t;if(!this.model.secondarySlide())return null!=(t=this.model.abstract("dek"))?t.styledText():void 0},e.prototype.getTitle=function(){return this.model.secondarySlide()?this.model.currentSlideTitle():this.model.title("large").styledText()},e.prototype.getSponsor=function(){return this.model.sponsor()},e.prototype.titleUrl=function(){var t;if(!this.cms&&"custom"!==(t=this.state.app.page)&&"article"!==t)return this.model.url()},e.prototype.podcastBadge=function(){var t,e;if((e=this.model.podcast())&&(t=i.Podcasts[s.startCase(e)]))return this.state.lazyComponent("podcast",this.state.component_id,t).render({logo:!1})},e.prototype.info=function(){var t;if(!this.model.secondarySlide())return t=this.state.component_id,this.state.lazyComponent("info",t,i.Info).render({tags:this.tags,first:this.first,model:this.model,second:this.second,newsletter:this.newsletter,cms_components:this.cms_components})},e.prototype.active=function(){return this.model.id===this.state.article.model().id},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,l=function(t,e){return function(){return t.apply(e,arguments)}};c=r(16),p=r(24),n=r(26),o=r(44),s={App:r(48),Screen:r(40)},i={Ad:r(133)},a={Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),p.assign(this,{screen:s.Screen,sticky_ad_height:c.prop(0),app:s.App.get(this.server)})}return u(e,t),e}(n.State),e.View=function(t){function e(){this.onadresize=l(this.onadresize,this),this.config=l(this.config,this),this.adjustedBottomOffset=l(this.adjustedBottomOffset,this),this.adjustedBottom=l(this.adjustedBottom,this),this.disabled=l(this.disabled,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=this.state.screen,p.defaults(this,{index:0,offset:0,position:"content"})}return u(e,t),e.prototype.render=function(){if(this.model.slideshow())return this.state.lazyComponent("ad",this.state.component_id,i.Ad).render({slide:!0,sticky:!0,config:this.config,collect:this.first,url:this.model.url(),position:this.position,refresh_id:this.model.id,bottom:this.adjustedBottom,stickyDisabled:this.disabled,no_resize_breakpoint:820,class:"article-slideshow__ad",bottom_offset:this.adjustedBottomOffset,params:p.assign({},this.model.skreemrParams(),{index:"slide",stream_index:this.index+1})})},e.prototype.disabled=function(){return this.screen.rail()},e.prototype.adjustedBottom=function(){return this.bottom()-this.state.sticky_ad_height()-this.offset},e.prototype.adjustedBottomOffset=function(){return this.height()-this.state.sticky_ad_height()-this.bottom_offset},e.prototype.config=function(t,e,r){if(!this.state.ad_initialized)return this.state.ad_initialized=!0,this.state.ad_el=t,this.state.ad_div=t.querySelector(".app-sticky"),this.state.sensor=new o(this.state.ad_div,this.onadresize),r.onunload=function(t){return function(){return t.state.ad_initialized=!1,t.state.sensor.detach(t.state.ad_div)}}(this)},e.prototype.onadresize=function(){var t;if(t=a.Dom.rect(this.state.ad_div).height,t>1&&t>this.state.sticky_ad_height())return this.state.sticky_ad_height(t),this.state.ad_el.style.height=this.state.sticky_ad_height()+"px"},e.prototype.height=function(){return 0},e.prototype.bottom=function(){return 0},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),o={App:r(48),Screen:r(40),Scripts:r(114)},i={Ad:r(133),AmpAd:r(157),Body:r(275),Card:r(283),Footer:r(286),Pixel:r(135),Comments:r(289)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.show_comments=a.prop(!1),this.app=o.App.get(this.server),this.scripts=o.Scripts.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{show_ads:!1}),this.ads_count=0,this.app=this.state.app,this.showAds()&&(this.show_ads=!0),this.model.flags.bottom_ad&&(this.no_ads=!1)}return p(e,t),e.prototype.showAds=function(){if(!(this.model.isCustom()||this.model.slideshow()&&!this.app.amp))return!this.model.long()||1===this.model.sections().length},e.prototype.render=function(){return[this.sections(),this.footer(),this.comments(),this.pixel()]},e.prototype.sections=function(){var t,e,r,n,i,o;return t=this.app.amp,n=this.model.sections(),o=this.model.slideshow(),i=n.length,this.cms||t||!o?this.cms||this.model.long()||(n=[n[0]],e=s.flatten(s.map(this.model.sections(),function(e){var r,n;return n=e.widget,r=e.children(),o&&n?n.slideModels(t).concat(r):r}))):(this.is_slideshow=!0,this.model.initSlideshowPage(),this.server&&s.forEach(this.model.slideshowWidgets(),function(t){return function(e){return t.state.scripts.loadFromModel(e)}}(this)),n=[this.model.currentSlide()],e=n[0].children()),r=s.map(n,function(t){return function(r,n){return[t.section(r,n,e,i),t.ad(n,i),1===n&&t.model.long()?t.newsletter:void 0]}}(this)),this.trackAdCount(),r},e.prototype.ad=function(t,e){var r,n;if(!(this.cms||this.show_ads||this.no_ads)&&(this.customAd(t,e)||this.sectionAd(t)))return this.ads_count+=1,r=this.state.component_id+"-"+t,n={section:!0,collect:this.first,url:this.model.url(),position:"article",params:s.assign(this.model.skreemrParams(),{index:this.ads_count})},this.app.amp?this.ampAd(n,t,r):((this.first||this.second)&&0===t&&s.assign(n,{position:"content"}),this.state.lazyComponent("ad",r,i.Ad).render(n))},e.prototype.sectionAd=function(t){if(this.long())return t%2===0},e.prototype.customAd=function(t,e){if(t===e-1)return this.model.flags.bottom_ad},e.prototype.trackAdCount=function(){if(!(this.server||this.cms||this.show_ads||this.no_ads||this.app.navigating)&&!this.state.ads_counted&&this.first&&this.model.long())return this.state.ads_counted=!0,this.app.event(this.model.url(),{category:"ad",action:"count",ga:{label:this.ads_count+"_"+o.Screen.device()},params:s.assign(this.model.skreemrParams(),{count:this.ads_count})})},e.prototype.ampAd=function(t,e,r){return s.assign(t,{index:e,model:this.model}),this.state.lazyComponent("ampad",r,i.AmpAd).render(t)},e.prototype.section=function(t,e,r,n){var o,s,a,p,c,u;return a="body",o=i.Body,s=this.state.component_id+"-"+e,p={cms:this.cms,top:this.top,mode:this.mode,index:e,first:this.first,model:this.model,second:this.second,models:r,section:t,show_ads:this.show_ads,parent_index:this.index,container:this.container,read_more:this.read_more,cms_components:this.cms_components},this.long()?(a="card",o=i.Card,e===n-1&&(p.last=!0)):0===e&&(p.newsletter=this.newsletter),o=this.state.lazyComponent(a,s,o).render(p),this.cms&&this.sectionUI()&&(u=null!=(c=this.cms_components)?c.section:void 0)?this.state.lazyComponent("cms-section",s,u).render({index:e,model:t,parent:this.model},[o]):o},e.prototype.sectionUI=function(){return this.model.long()||this.model.slideshow()},e.prototype.footer=function(){if(!(this.cms||this.model.isCustom()||this.no_footer||this.is_slideshow&&this.model.slideshow_page>1))return this.state.lazyComponent("footer",this.model.id,i.Footer).render({mode:this.mode,first:this.first,index:this.index,model:this.model,read_more:this.read_more,show_comments:this.state.show_comments})},e.prototype.comments=function(){var t;if(this.app.standardLayout()&&!this.app.cms&&this.model.showComments())return t=this.state.component_id,this.state.lazyComponent("comments",t,i.Comments).render({model:this.model,amp:this.app.amp,active:this.state.show_comments})},e.prototype.pixel=function(){if(!this.cms)return(new i.Pixel).render({amp:this.app.amp,src:this.model.pixel()})},e.prototype.long=function(){if(!this.cms)return this.model.long()},e.prototype.mode=s.noop,e.prototype.header=s.noop,e.prototype.read_more=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),o={App:r(48)},i={Content:r(276),Wrapper:r(282),Pagination:r(198),Slide:r(280)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.empty=a.prop(!0),this.app=o.App.get(this.server),!this.server&&this.app.loaded||this.empty(!1),this.component("content",i.Content)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),null!=this.empty&&this.state.empty(this.empty),this.cms&&this.state.empty(!1),s.defaults(this,{show_ads:!0})}return p(e,t),e.prototype.render=function(){var t;return t=this.models||this.section.children(),new i.Wrapper(this.server).render({config:this.config,empty:this.state.empty(),class:"article-body"},[this.state.component("content").render({cms:this.cms,first:this.first,index:this.index,model:this.model,models:t,second:this.second,section:this.section,empty:this.state.empty,show_ads:this.show_ads,read_more:this.read_more,show_modals:this.show_ads,newsletter:this.newsletter,show_teads:this.show_teads,show_related_video:!0,pagination:this.pagination(),parent_index:this.parent_index,cms_components:this.cms_components})])},e.prototype.pagination=function(){var t,e;if(!this.cms&&!this.state.app.amp&&("function"==typeof(t=this.model).slideshow?t.slideshow():void 0))return e=this.state.component_id,this.state.lazyComponent("pagination",e,i.Pagination).render({top:this.top,model:this.model,class:"contained",position:"bottom",center_start:!1,container:this.container,start_wrapper_class:"contained"})},e.prototype.top=s.noop,e.prototype.config=s.noop,e.prototype.read_more=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(26),s={Ads:r(39),App:r(48),Screen:r(40),Navigation:r(115)},i={Ad:r(133),AmpAd:r(157),Graf:r(277),FakeAd:r(269),Related:r(270),Slider:r(279)},o={Podcast:r(281)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.ads=s.Ads.get(this.server),this.app=s.App.get(this.server),this.navigation=s.Navigation.get(this.server)}return c(e,t),e}(n.State),e.View=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),a.assign(this,{carousels:1,ads:this.state.ads,app:this.state.app,read_more_words:0,screen:s.Screen,limits:{min:2,units:3,letters:300},counters:{ad:0,units:2,letters:100}}),a.defaults(this,{index:0,show_ads:!0,show_teads:!0,show_related_video:!1,pages:"function"==typeof(t=this.model).pageCount?t.pageCount():void 0}),a.defaults(this,{no_dropcap:0!==this.index})}return c(e,t),e.prototype.render=function(){var t,e,r,n,i,o;return t=[],r=[],o=[],e=a.without(a.flatten(this.formattedSections()),null,void 0),n=e.length,i=Math.floor(n/3),a.forEach(e,function(s){return function(a,p){var c,u,h,l,d,f,m,y,g,_,v,w;return g=e[p+1],d=null!=g,_=d&&"paragraphs"===g.type,m="paragraphs"!==a.type,c=m||!_,!s.cms&&m&&(f=a.item.isSlide(),v=d&&!_&&g.item.isSlide()),s.show_ads||(c=!0),c||(c=s.shouldAddGraf(a,g)),f&&v?t.push(a):s.cms||a.ad||c||!g?(y=a.item,o.length?y=o.concat([y]):f&&(y=t.concat([a])),s.show_related_video&&(d||("function"==typeof(u=a.item).isVideo?u.isVideo():void 0)||("function"==typeof(h=a.item).isPodcast?h.isPodcast():void 0)||(s.show_related_video=!1,w=s.relatedWidget(p,a.item),w&&(a.last=!1))),(a.last||w)&&s.showDisclaimer()&&(a.last=!1,l=s.disclaimer(p)),r.push([a.ad,s.component(y,p,a,t.length),w,s.read_more()||p!==i?void 0:s.newsletter,p===n-1?s.pagination:void 0,l]),t=[],o=[]):o.push(a.item)}}(this)),this.trackAdCount(),r},e.prototype.relatedWidget=function(t,e){var r,n,i,s,a,p;if(!(this.read_more()||("function"==typeof(r=this.model).slideshow?r.slideshow():void 0)&&!this.app.amp)){if("science"===(null!=(s=this.model.taxonomy)&&null!=(a=s.category)?a.permalink:void 0))p=this.m(o.Podcast),i=p.prompt();else{if(p=this.model.related_widget,!(null!=p?p.persisted():void 0))return;i=p.relatedPrompt()}return n={id:"related-widget-prompt",content_html:"<p><strong>"+i+"</strong></p>"},[("function"==typeof e.isHR?e.isHR():void 0)?void 0:HR({class:"contained"}),this.component(n,t+1,{first:!1,last:!1}),this.component(p,t+2,{first:!1,last:!0})]}},e.prototype.disclaimer=function(t){var e;return e=a.assign({},this.model.commerce_disclaimer,{id:"disclaimer"}),this.component(e,t+1,{last:!0,first:!1,class:"article__disclaimer"})},e.prototype.showDisclaimer=function(){var t;if(!(this.cms||("function"==typeof(t=this.model).long?t.long():void 0)&&!this.last))return this.model.commerce_disclaimer},e.prototype.component=function(t,e,r,n){var o,s,a,p;return a=this.state.component_id+e,n?this.carousel(t,a):(p=r.last,s=r.first,o=r.clearfix,this.state.lazyComponent("graf",a,i.Graf).render({cms:this.cms,model:t,first:s,article:this.model,parent:this.section,clearfix:o,no_dropcap:this.no_dropcap,cms_components:this.cms_components,class:this.classes([r.class,this.positionClasses(s,p)])}))},e.prototype.carousel=function(t,e){var r,n,o;return n=this.carousels,r=t[0].first,o=t[t.length-1].last,this.carousels+=1,this.state.lazyComponent("carousel",e,i.Slider).render({index:n,model:this.model,parent_index:this.parent_index,models:a.pluck(t,"item"),class:this.classes([t[0].class,this.positionClasses(r,o),"article-media article-media--full"])
})},e.prototype.positionClasses=function(t,e){return this.classes([e?"-last":void 0,t?"-first clearfix":void 0])},e.prototype.shouldAddGraf=function(t,e){var r,n,i;return i=/^\s*<blockquote/,r=t.item.content_html.trim().match(i),n=null!=e?e.item.content_html.trim().match(i):void 0,r&&!n||!r},e.prototype.formattedSections=function(){var t,e,r,n,i,o,s,p,c;return p={},c={},i=!0,t=this.railActive(),e=this.filteredChildren(),r=e.length,n=r-1,a.assign(c,{related:this.modalPosition(r,this.bouncePosition())}),t&&(p.related=!0),s=this.modals(p,c),o=s.modal,a.map(e,function(t){return function(r,a){var u,h,l,d,f,m;return l=i,i=!1,m=r.type,h=t.hideGraf(a),f=!p[o]&&a>=c[o],t.empty(!1),t.cms||(r.position=a),d={type:m,item:r,first:l,last:a===n,is_image:r.is_image,class:t.classes([h?"display-none":void 0])},"paragraphs"===m?(t.read_more_words+=r.wordCount(),d.letters=r.letterCount()):t.read_more_words=100,t.updateCounters(d),t.show_modals&&f&&t.counters.ad>=t.limits.min?t.showModal(e[a-1])&&(p[o]=!0,t[o]&&(d.ad=t[o]("middle")),"related"===o&&(d.clearfix=!0),o=s.other,t.counters.units=1,t.counters.letters=100):(u=t.ad(a,e[a-1]))&&(d.ad=u),d}}(this))},e.prototype.hideGraf=function(t){if(this.read_more())return t>1||this.read_more_words>this.model.read_more_breakpoint},e.prototype.filteredChildren=function(){return this.cms?this.models:a.reject(this.models,function(t){var e,r,n;return"add"===t.type||"paragraphs"===t.type&&(!t.content_html.match(/^<hr/)&&(e=""===(n=t.content_html)||null===n||void 0===n,r=a.without(t.words(),"",null,void 0).length<=0,e||r))})},e.prototype.bouncePosition=function(){var t,e;return t=null!=(e=this.model.metrics)?e.bounce_position:void 0,(!t||t>.8||t<.2)&&(t=.65),t},e.prototype.ad=function(t,e){var r,n;if(!(this.read_more()&&this.counters.ad>0)&&this.show_ads&&!this.cms&&!this.app.navigating)return n=0,t>n&&this.showAd(e)?(this.counters.units=0,this.counters.letters=0,r=this.adComponent(this.counters.ad),this.counters.ad+=1,r):void 0},e.prototype.updateCounters=function(t){return"paragraphs"!==t.type?this.counters.units+=1:(this.counters.letters+=t.letters,this.counters.letters>this.limits.letters?(this.counters.units+=1,this.counters.letters-=this.limits.letters):void 0)},e.prototype.trackAdCount=function(){if(!this.server&&!this.app.navigating&&!this.state.ads_counted&&this.first&&this.show_ads)return this.state.ads_counted=!0,this.app.event(this.model.url(),{category:"ad",action:"count",ga:{label:this.counters.ad+"_"+this.screen.device()},params:a.assign(this.skreemrParams(),{count:this.counters.ad})})},e.prototype.noAd=function(){if(!this.show_ads)return!0;if(!this.first&&!this.second||0!==this.counters.ad)return this.railActive()},e.prototype.showAd=function(t){if(this.counters.units>=this.limits.units&&"widgets"!==(null!=t?t.type:void 0)&&!this.isHeader(t))return!0},e.prototype.showModal=function(t){if(this.counters.units>0&&"widgets"!==(null!=t?t.type:void 0)&&!this.isHeader(t))return!0},e.prototype.isHeader=function(t){return this.isEl("h[1-6]",t)},e.prototype.isEl=function(t,e){var r,n;if(null==e&&(e={}),r=(null!=(n=e.item)?n.content_html:void 0)||e.content_html)return r.match(new RegExp("^<"+t,"i"))},e.prototype.adComponent=function(t){var e,r,n,o,s,p;return r=this.state.component_id+"-"+t,p=this.show_teads&&this.showTeads(t),o={url:this.model.url(),position:"article",collect:this.first||p,params:a.assign(this.skreemrParams(),{index:t+1,stream_index:this.parent_index+1})},this.app.amp?this.ampAd(o,t,r):(n="ad",e=i.Ad,!this.app.amp&&(s=this.skin())&&(o.sponsor=s,n="fake-ad",e=i.FakeAd),p&&a.assign(o,{preload:this.first,position:"content"}),this.state.lazyComponent(n,r,e).render(o))},e.prototype.ampAd=function(t,e,r){return a.assign(t,{index:e,model:this.model}),this.state.lazyComponent("ampad",r,i.AmpAd).render(t)},e.prototype.showTeads=function(t){return 0===t},e.prototype.related=function(){var t;if(!this.read_more())return t=this.state.component_id,this.state.lazyComponent("related",t,i.Related).render({model:this.model,class:"contained",index:this.parent_index})},e.prototype.skin=function(){var t;return this.ads.skin(null!=(t=this.state.navigation.section)?t.permalink:void 0)},e.prototype.railActive=function(){return!this.app.amp&&(!!this.server||this.screen.rail())},e.prototype.modals=function(t,e){return t.related?{}:{modal:"related"}},e.prototype.modalPosition=function(t,e){return Math.floor(t/this.pages*(this.pages*e))},e.prototype.skreemrParams=function(){return this.model.skreemrParams?this.model.skreemrParams():{}},e.prototype.empty=a.noop,e.prototype.read_more=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),o={Ads:r(39),App:r(48),Screen:r(40),Stream:r(103),Navigation:r(115)},i={Link:r(134),Button:r(144),Image:r(147),Paragraphs:r(278),Widgets:r(175)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.assign(this,{app:this.state.app,screen:o.Screen}),s.defaults(this,{cms_components:{},threshold:this.screen.sizes.content}),s.defaults(this.cms_components,{buttons:s.noop})}return p(e,t),e.prototype.render=function(){var t,e,r;if(e=this.bodyComponent(),null!=e)return r={model:this.model,disabled:this.disabled},this.cms&&s.assign(r,{parent:this.parent,article:this.article}),this.model.is_image?this.image(e,r):"widgets"===this.model.type?(t=[e.render(s.assign(r,{activate:this.activate})),this.caption(this.model)],this.model.isAfilliate()&&t.unshift(this.affiliateWidgetTitles()),this.media(t,{breakout:this.model.full()})):this.paragraph(e,s.assign(r,{class:this.classes([this.class])}))},e.prototype.bodyComponent=function(){var t,e,r,n,o;return r=this.model.id||this.model[0].id,this.cms&&(t=this.cms_components[this.model.type.toLowerCase()])?(e=t,n="cms-article-"+this.model.type,this.is_slide="paragraphs"!==this.model.type&&this.model.isSlide()):this.model.is_image?(n="article-image",e=i.Image):(o=this.model.type||"paragraphs",n="article-"+o,e=i[s.capitalize(o)]),this.state.lazyComponent(n,r,e)},e.prototype.image=function(t,e){var r,n,o,s,a,p,c;return c=this.model.width(),s=this.model.noCrop(),!this.app.amp&&s&&c<this.threshold&&(e.style={width:c+"px"},n={maxWidth:c+"px"}),p=t.render(e),r=this.caption(s,n,this.text_overlay),a=this.image_link||this.model.overrides.affiliate_link,this.text_overlay&&(p=[p,DIV({class:"article-media__overlay middle"},[this.text_overlays,r])]),!a||this.cms&&!this.use_link_wrapper||(p=new i.Link(this.server).render({href:a},[p])),o=[p,this.text_overlay?void 0:r],this.media(o,{overlay:this.text_overlay,breakout:!s})},e.prototype.caption=function(t,e,r){var n,i;if(!this.is_slide&&(n=this.model.caption(),null!=n?n.length:void 0))return i={class:this.classes(["caption",t||r?void 0:"contained"])},e&&(i.style=e),FIGCAPTION(i,[a.trust(n)])},e.prototype.paragraph=function(t,e){return this.cms&&this.first&&(e.placeholder="<body>"),t.render(s.assign({},e,{clearfix:this.clearfix,no_dropcap:this.no_dropcap,buttons:this.cms_components.buttons}))},e.prototype.media=function(t,e){var r,n,i;if(null==e&&(e={}),t)return r=[this.cms_components.buttons(this.model),t],this.is_slide?r:(n={class:this.classes([this.class,"article-media",e.overlay?"overlay":void 0,e.breakout?void 0:"contained",e.breakout?"article-media--full":void 0])},!this.app.amp&&(i=e.style)&&(n.style=i),FIGURE(n,r))},e.prototype.affiliateWidgetTitles=function(){var t,e,r,n,o,s;return n=this.model.overrides.name,e=this.model.overrides.description,(r=this.model.overrides.affiliate_link)&&(s="Buy Now",(o=this.model.overrides.price)&&(s="$"+o+" "+s),t=new i.Button(this.server).render({href:r,text:s,class:"brand-background widget__buy"})),DIV({class:"widget__info flex"},[DIV({class:"flex-1"},[n?H3({class:"brand-color widget__title"},n):void 0,e?H3({class:"brand-color widget__dek"},e):void 0]),t])},e.prototype.activate=s.noop,e}(n.View),e}(n)},function(t,e,r){(function(e){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),i={App:r(48)},o={String:r(58)},t.exports=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return p(r,t),r.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=i.App.get(this.server)}return p(e,t),e}(n.State),r.View=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return p(r,t),r.prototype.render=function(){var t,e,r,n,i,s,p;if(e=[],n=this.grafs()){if(n.match(/^<hr[\s\/>]/))return HR({class:this.classes([this.class,"contained"])});if(p=o.String.cleanGraph(this.replaceWrappingTag(n)),p.length)return s=this.getTag(n),s||(s=P),(r=this.dropcap(p,s))&&(e.push(SPAN({class:"dropcap"},p[0])),p=p.slice(1)),this.state.app.amp&&(i=/onclick="window\.inverse_amazon_tracking\(this\);"/g,p=p.replace(i,"")),e.push(a.trust(this.formatBlockquotes(p))),(t=this.buttons(this.model))&&(e=[t,e]),s({class:this.classes([this.class,"contained",this.clearfix?"clearfix":void 0,"blockquote"===this.tag_string?"blockquote":void 0])},[e])}},r.prototype.grafs=function(){return this.isArray()?s.map(this.model,this.removeReturn).join(""):this.removeReturn(this.model)},r.prototype.dropcap=function(t,e){var r;if(!this.no_dropcap)return r=this.isArray()?this.model[0]:this.model,0===r.position&&e===P&&t[0].match(/^[a-z\d]/i)},r.prototype.replaceWrappingTag=function(t){return t.replace(/^\s*<[^>]*>/,"").replace(/<[^>]*>\s*$/,"")},r.prototype.formatBlockquotes=function(t){var e,r;return r=o.String.regexes.spaces,e=new RegExp("<\\/blockquote>["+r+"]*<blockquote>","g"),t.replace(e,"")},r.prototype.getTag=function(t){var r;if(r=o.String.getTag(t),null!=r&&s.isString(r)&&r.length)return r.toLowerCase().match(/^h[1-6]/)&&(r="h2"),this.tag_string=r,e[r.toUpperCase()]},r.prototype.isArray=function(){return s.isArray(this.model)},r.prototype.removeReturn=function(t){var e;if(e=t.content_html)return e.slice(0,e.length-1)},r.prototype.buttons=s.noop,r}(n.View),r}(n)}).call(e,function(){return this}())},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Ad:r(133),Slide:r(280),Slider:r(156),Sticky:r(136),Button:r(144),Image:r(147),Widgets:r(175)},o={Ads:r(39),App:r(48),Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){this.addActivate=u(this.addActivate,this),e.__super__.constructor.apply(this,arguments),this.activated={},this.activates={},this.ads=o.Ads.get(this.server),this.app=o.App.get(this.server),this.component("slider",i.Slider)}return p(e,t),e.prototype.addActivate=function(t){return this.activates[t]=a.prop(s.noop)},e}(n.State),e.View=function(t){function e(){this.onnavigate=u(this.onnavigate,this),this.items=u(this.items,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen,s.defaults(this,{intro:!0,padding:20,play_buttons:!0}),this.model&&this.model.textOverlaySlider()&&(this.text_overlay=!0,this.intro=!1,this.play_buttons=!1)}return p(e,t),e.prototype.render=function(){return this.state.component("slider").render({per_page:1,looped:!0,index:this.index,intro:this.intro,items:this.items,models:this.models,onnavigate:this.onnavigate,slideClass:this.slideClass,position:"media-slider",tracking:this.skreemrParams(),play_buttons:this.play_buttons,slides_class:this.classes(["flex flex-centered"]),class:this.classes([this.class,"media-slider clearfix",this.text_overlay?"media-slider__overlay":void 0])})},e.prototype.slideClass=function(t){var e;if(e=t[0],!e.is_image)return"flex-1"},e.prototype.items=function(t,e,r,n,o){var a;return a=t[0],(this.app.amp||n===o+1)&&(r=!1),this.state.activates[e]||a.is_image||this.state.addActivate(e),this.state.lazyComponent("slide",a.id||e,i.Slide).render({model:a,disabled:r,text_overlay:this.text_overlay,activate:this.state.activates[e]||s.noop})},e.prototype.onnavigate=function(t){if(this.state.activates[t]&&!this.state.activated[t])return this.state.activated[t]=this.state.activates[t]()()},e.prototype.skreemrParams=function(){return this.model.skreemrParams?this.model.skreemrParams():{}},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(26),i={Graf:r(277)},o={App:r(48)},s={Markdown:r(59)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return c(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=this.state.app}return c(e,t),e.prototype.render=function(){if(this.model)return DIV({class:"media-slide"},[this.model.ad,this.widget(),this.text_overlay?void 0:this.textComponents()])},e.prototype.widget=function(){var t;if(!this.model.ad)return t={model:this.model,disabled:this.disabled,activate:this.activate,use_link_wrapper:!0,text_overlay:this.text_overlay,image_link:this.model.overrides.affiliate_link},this.text_overlay&&a.assign(t,{text_overlays:this.textComponents()}),this.state.lazyComponent("slide",this.model.id,i.Graf).render(t)},e.prototype.textComponents=function(){return[this.title(),this.text()]},e.prototype.title=function(){var t;if(!this.model.ad&&(t=this.model.override("title")))return H2({class:this.textClasses()},[this.addTags(t)])},e.prototype.text=function(){var t;if(!this.model.ad&&(t=this.model.grafs()))return a.map(t,function(t){return function(e){return P({class:t.textClasses()},[t.addTags(e)])}}(this))},e.prototype.addTags=function(t){return p.trust(s.Markdown.replaceWithHtml(t||"",this.app.amp))},e.prototype.textClasses=function(){return this.classes([this.text_class,"media-slide__text"])},e.prototype.activate=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(68),t.exports=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),t=["https://art19.com/shows/i-need-my-space/embed?","playlist_type=latest&theme=light-gray-custom&primary_color=%23f6c30f"].join(""),i.assign(this,{url:t,source:"Art19",id:"art19-inms-embed",oembed_data:{type:"link",provider_name:"Art19"}})}return o(e,t),e.prototype.prompt=function(){return["Love space? Listen to the latest episode of our new podcast:",'<em><a href="https://apple.co/2FYhQBh%20" target="_blank"','rel="noopener">I Need My Space</a></em>'].join(" ")},e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{background:!0,app:i.App.get(this.server)})}return s(e,t),e.prototype.render=function(){var t;return t={config:this.config,class:this.classes([this.class,"app-content",this.empty?"empty":void 0])},this.app.amp||this.style&&(t.style=this.style),SECTION(t,this.children)},e.prototype.config=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Column:r(284),Content:r(282),Background:r(285)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{widget:this.section.widget})}return a(e,t),e.prototype.render=function(){var t,e;if(this.cms||(null!=(e=this.children)?e.length:void 0)||this.section.hasContent())return t=this.state.component_id,this.state.lazyComponent("content",t,i.Content).render({parent_index:this.parent_index,class:this.classes([this.mobile()?"flex-column":void 0,"article-card flex palm-flex-column"])},[this.columns(),this.background()])},e.prototype.columns=function(){var t,e;return this.children?this.children:(e=this.state.component_id,t=this.section.columns.length,o.map(this.section.columns,function(r){return function(n,o){return r.state.lazyComponent("column",e+o,i.Column).render({cms:r.cms,mode:r.mode,count:t,index:o,model:n,first:r.first,article:r.model,second:r.second,section:r.section,show_ads:r.show_ads,no_styles:r.no_styles,models:r.section.column(o),cms_components:r.cms_components,no_dropcap:r.index+o!==0,last:r.last&&o===t-1})}}(this)))},e.prototype.background=function(){var t;if(!this.noBackground())return t=this.state.component_id,this.state.lazyComponent("background",t,i.Background).render({widget:this.widget})},e.prototype.noBackground=function(){return this.no_styles||!this.widget},e.prototype.mobile=function(){return"mobile"===this.mode()},e.prototype.mode=o.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Content:r(276),Background:r(285)},o={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("content",i.Content)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.screen=o.Screen,s.defaults(this,{crops:{},models:[],threshold:75,show_ads:!1,cms_components:{}}),s.defaults(this.cms_components,{photo:s.noop,buttons:s.noop})}return a(e,t),e.prototype.render=function(){var t,e,r,n;if(t=this.background(),e=this.models.length||t,!this.palm()||e||this.hasOverlay())return r={class:this.classes(["article-column flex",this.cms?"article-column--"+this.index:void 0,this.count>1?"article-column--multi":void 0,this.styleClasses()])},(n=this.styles())&&(r.style=n),DIV(r,[t,this.alignment(),this.cms_components.photo(this.model)])},e.prototype.styleClasses=function(){if(!this.no_styles)return this.classes(["styles--"+this.model.style,this.model.overlay()?"overlay":void 0,this.model.backgroundOverlay()?"static-background":void 0])},e.prototype.hasOverlay=function(){return this.model.overlay()||this.model.backgroundOverlay()},e.prototype.background=function(){var t;if(!this.noBackground())return t=this.state.component_id,this.count>1&&(this.crops.large="3:4"),this.state.lazyComponent("background",t,i.Background).render({crops:this.crops,mono:this.model.mono(),widget:this.model.widget})},e.prototype.alignment=function(){var t;return t=s.map(this.model.positions(),function(t){return"alignment--"+t}),DIV({class:"alignment "+t.join(" ")},[DIV({class:this.classes(["alignment__body",this.show_ads?"alignment__body--full":void 0])},[this.state.component("content").render({cms:this.cms,last:this.last,first:this.first,model:this.article,models:this.models,second:this.second,section:this.section,show_ads:this.show_ads,show_modals:this.show_ads,no_dropcap:this.no_dropcap,cms_components:this.cms_components})])])},e.prototype.noBackground=function(){return this.no_styles||!(this.model.widget||this.model.showBackground())},e.prototype.styles=function(){var t;if(!this.server&&!this.article.ignoreRules())return this.state.height&&!this.screen.heightResize(this.state.height)||(t=this.screen.height(),this.palm()&&this.count>1&&(t/=2),this.state.height=t+this.threshold),{minHeight:this.state.height+"px"}},e.prototype.palm=function(){if(!this.server)return this.screen.palm()},e.prototype.mode=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Background:r(197)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{crops:{}}),o.defaults(this.crops,{large:"4:3",medium:"3:4"})}return a(e,t),e.prototype.render=function(){if(this.widget)return this.lazyComponent("background",i.Background,{model:this.widget,centered:!0,background:!0,no_overlay:!0,size_classes:!0,wrapper_class:this.wrapperClasses()})},e.prototype.lazyComponent=function(t,e,r){var n;return n=this.state.component_id,r=o.assign(r,this.sharedProps()),this.state.lazyComponent(t,n,e).render(r)},e.prototype.sharedProps=function(){return{mono:this.mono,crops:this.crops,preload:this.preload}},e.prototype.wrapperClasses=function(){return this.classes([this.class,"article-background"])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(26),i={Dot:r(164),Link:r(134),Author:r(165),Button:r(144),Credits:r(287),Readtime:r(288),Social:r(244)},o={App:r(48),Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.component("referrer",i.Social),this.component("facebook",i.Social)}return p(e,t),e}(n.State),e.View=function(t){function e(){this.onreadmoreclick=u(this.onreadmoreclick,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen,this.first&&this.read_more(!1)}return p(e,t),e.prototype.render=function(){var t;return t=this.read_more()&&!this.yahoo?[this.readMore()]:[this.credits(),this.author(),this.socials()],this.yahoo?t:FOOTER({class:this.classes(["article-footer contained",this.read_more()?"article-footer--readmore":void 0,this.showComments()?"article-footer--comments":void 0])},t)},e.prototype.readMore=function(){return new i.Button(this.server).render({icon:"angle-down",text:"Continue Reading",class:"brand-background",onclick:this.onreadmoreclick})},e.prototype.onreadmoreclick=function(){var t;return t=s.assign({},this.model.skreemrParams(),{index:this.index}),this.read_more(!1),this.app.event(this.model.url(),{params:t,action:"click",category:"read_more",ga:{label:this.model.mainTags(!0)+"_"+this.screen.device()}})},e.prototype.credits=function(){return new i.Credits(this.server).render({model:this.model})},e.prototype.author=function(){var t,e,r,n;if(this.model.hideAuthor()||(n=this.model.author(),e=this.model.guestAuthor(),t=this.writtenBy(n,e),r=this.authorLinks(n,e)),r||t)return this.yahoo?[P(t),P(r)]:DIV({class:"author article-footer__bottom"},[t,DIV({class:"links"},r)])},e.prototype.writtenBy=function(t,e){return new i.Author(this.server).render({guest:e,model:t,yahoo:this.yahoo,class:"byline",intro:"Written by"})},e.prototype.authorLinks=function(t,e){return e?e.match(/inverse loot/i)?new i.Link(this.server).render({href:"/topic/inverse-loot"},"More Inverse Loot Articles"):void 0:this.moreLinks(t)},e.prototype.moreLinks=function(t){return[new i.Author(this.server).render({short:!0,model:t,yahoo:this.yahoo,link_intro:!0,intro:"More articles by"}),this.pageLinks(t)]},e.prototype.pageLinks=function(t){var e,r,n,i,o,s;if(s=t.twitterUrl(),n=t.facebookPageUrl(),s||n)return this.yahoo&&(i=a.trust("&nbsp;")),n&&(r=this.socialPageLink(n,"Facebook Page")),s&&(o=this.socialPageLink(s,"Twitter")),r&&o&&(e=[i,this.dot(),i]),[i,this.dot(),i,r,e,o]},e.prototype.socialPageLink=function(t,e){return new i.Link(this.server).render({href:t,target:"_blank"},e)},e.prototype.socials=function(){var t,e;return e={model:this.model,campaign:"article-footer"},t={facebook:s.assign({},e),referrer:s.assign({},e,{referrer:!0,button:"twitter"})},this.palm()||this.mobile()||(this.model.long()?s.assign(t.facebook,{angle:"down",side:"right"}):s.assign(t.referrer,{angle:"up",side:"left"})),DIV({class:"socials article-footer__bottom"},[this.state.component("referrer").render(t.referrer),this.state.component("facebook").render(t.facebook),this.commentsButton()])},e.prototype.commentsButton=function(){var t;if(this.showComments())return t="comments",new i.Button(this.server).render({icon:t,text:s.capitalize(t),class:"button__comments",onclick:function(t){return function(){return t.show_comments(!t.show_comments())}}(this)})},e.prototype.dot=function(){return(new i.Dot).render({yahoo:this.yahoo})},e.prototype.mobile=function(){return"mobile"===this.mode},e.prototype.palm=function(){return!!this.server||this.screen.palm()},e.prototype.showComments=function(){if(!this.model.long()&&this.app.standardLayout())return this.model.showComments()},e.prototype.read_more=s.noop,e.prototype.show_comments=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Link:r(134)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),o.defaults(this,{el:CITE})}return s(e,t),e.prototype.render=function(){var t,e,r,n;if(r="function"==typeof(t=this.model).groupedCredits?t.groupedCredits():void 0,null!=r?r.length:void 0)return e=["Photos via ",this.credits(r)],this.small&&(e=SMALL(e)),n=CITE,this.yahoo&&(n=P),n({class:this.classes([this.class,"credits"])},e)},e.prototype.credits=function(t){var e;return e=t.length,o.map(t,function(t){return function(r,n){return[t.creditElement(r),n!==e-1?", ":void 0]}}(this))},e.prototype.creditElement=function(t){return t.numbers?this.numberedCredit(t):t.link?this.link(t.text,t.link):t.text},e.prototype.numberedCredit=function(t){var e,r;return r=t.numbers.length,e=o.map(t.numbers,function(t){return function(e,n){var i;return i=t.link(e.index,e.credit.link),n===r-1?i:[i,", "]}}(this)),[t.text+" (",e,")"]},e.prototype.link=function(t,e){return new i.Link(this.server).render({href:e},t)},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(26),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.assign(this,{words_per_minute:275,seconds_per_widget:12}),i.defaults(this,{word_count:0,widget_count:0}),this.model&&i.assign(this,{word_count:this.model.wordCount(),widget_count:this.model.widgetCount(!1)})}return o(e,t),e.prototype.render=function(){var t;if(this.word_count||this.widget_count)return t=this.wordMinutes()+this.widgetMinutes(),SPAN({class:"app-read-time"},[this.round(t||1)+" Minutes"])},e.prototype.round=function(t){return t%1<.5?Math.floor(t):Math.ceil(t)},e.prototype.wordMinutes=function(){return this.word_count/this.words_per_minute},e.prototype.widgetMinutes=function(){var t,e,r;return e=this.seconds_per_widget,r=i.reduce(function(){t=[];for(var e=0,r=this.widget_count;0<=r?e<=r:e>=r;0<=r?e++:e--)t.push(e);return t}.apply(this),function(t,r){return t+=(r+1)*e,r<10&&(e-=1),e<3&&(e=3),t},0),r/60},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Vendor:r(226)},o={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(){var t,e,r,n;return r=this.state.component_id,n={numposts:3,href:this.model.pagelessCanonicalUrl(),width:o.Screen.sizes.content},t=this.classes(["article-comments fb-comments contained",this.active()||this.amp?"article-comments--active":void 0]),e=i.Vendor,n={el:SECTION,active:!0,class:t,data_attributes:n},this.state.lazyComponent("comments",r,e).render(n)},e.prototype.active=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(26),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return ARTICLE({config:this.config,class:this.classes([this.class,"app-article"])},this.children)},e.prototype.config=i.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),i={Rail:r(268),Intro:r(292),Article:r(290),Scrollspy:r(137)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{index:0,rail:{},scrollspy:!0}),this.app=this.state.app,this.first&&(this.preload=!0),this.app.cms&&s.assign(this,{rail:!1,scrollspy:!1})}return p(e,t),e.prototype.render=function(){var t;return t={config:this.config,id:this.state.component_id,class:this.classes([this.class,"app-container",this.rail?"app-container--rail":void 0,this.first?"-main":void 0])},this.style&&(t.style=this.style),this.scrollspy&&s.assign(t,{top:this.top,main:this.first,onend:this.onend,bottom:this.bottom,onactivate:this.onactivate,onresizecb:this.onresizecb,onscrollcb:this.onscrollcb}),this.component(t,[this.sticky_ad,this.wrappedComponents()])},e.prototype.wrappedComponents=function(){var t;return t=[(new i.Article).render({featured:this.featured,config:this.articleConfig},[this.intro(),this.children]),this.railComponent()],this.sticky_ad?DIV({class:"relative"},t):t},e.prototype.component=function(t,e){var r,n;return this.scrollspy?(n=this.state.component_id,r=i.Scrollspy,this.state.lazyComponent("scrollspy",n,r).render(t,e)):this.first?a("main",t,e):DIV(t,e)},e.prototype.intro=function(){var t,e,r;if(null==(r=this.model)||"function"!=typeof r.hideBanner||!r.hideBanner())return t=this.state.component_id,e={cms:this.cms,dek:this.dek,top:this.top,apex:this.apex,mode:this.mode,tabs:this.tabs,tags:this.tags,
first:this.first,model:this.model,title:this.title,banner:this.banner,header:this.header,second:this.second,social:this.social,widget:this.widget,sponsor:this.sponsor,preload:this.preload,campaign:this.campaign,featured:this.featured,referrer:this.referrer,trackers:this.trackers,container:this.container,highlight:this.highlight,newsletter:this.newsletter,breadcrumbs:this.breadcrumbs,cms_components:this.cms_components,color_reversal:this.color_reversal,banner_component:this.banner_component,header_component:this.header_component},this.bannerComponent&&(e.bannerComponent=this.bannerComponent),this.state.lazyComponent("intro",t,i.Intro).render(e)},e.prototype.railComponent=function(){var t,e;if(this.rail)return e=this.state.component_id,t=this.rail_component||i.Rail,this.state.lazyComponent("rail",e,t).render({arm:this.arm,end:this.end,model:this.model,index:this.index,top:this.rail.top,no_bottom:this.no_ad2,bottom:this.rail.bottom,height:this.rail.height,read_more:this.read_more,onresize:this.onrailresize,no_newsletter:this.no_newsletter},[this.rail_children])},e.prototype.end=s.noop,e.prototype.top=s.noop,e.prototype.mode=s.noop,e.prototype.onend=s.noop,e.prototype.bottom=s.noop,e.prototype.config=s.noop,e.prototype.read_more=s.noop,e.prototype.newsletter=s.noop,e.prototype.onresizecb=s.noop,e.prototype.onscrollcb=s.noop,e.prototype.onrailresize=s.noop,e.prototype.articleConfig=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),i={Tabs:r(242),Header:r(174),Banner:r(172)},o={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=this.state.app,s.defaults(this,{tabs:!0,banner:!0,header:!0,social:!0,cms:this.app.cms,highlight:!1}),this.model&&null==this.breadcrumbs&&(this.breadcrumbs=this.model.breadcrumbs()),this.cms&&s.assign(this,{tabs:!1})}return p(e,t),e.prototype.render=function(){return DIV({class:"app-intro"},[this.tabsComponent(),this.bannerComponent(),this.headerComponent()])},e.prototype.tabsComponent=function(){var t,e;if(this.tabs&&((null!=(e=this.breadcrumbs)?e.length:void 0)||this.social))return t=this.state.component_id,this.state.lazyComponent("tabs",t,i.Tabs).render({model:this.model,social:this.social,tabs:this.breadcrumbs,campaign:this.campaign,referrer:this.referrer,trackers:this.trackers})},e.prototype.bannerComponent=function(){var t,e;if(this.banner)return e=this.state.component_id,t=this.banner_component||i.Banner,this.state.lazyComponent("banner",e,t).render({top:this.apex,article:!0,first:this.first,model:this.model,featured:!0,widget:this.widget,sponsor:this.sponsor,preload:this.preload,container:this.container,color_reversal:this.color_reversal})},e.prototype.headerComponent=function(){var t,e;if(this.header)return e=this.state.component_id,t=this.header_component||i.Header,this.state.lazyComponent("header",e,t).render({cms:this.cms,dek:this.dek,tags:this.tags,first:this.first,model:this.model,title:this.title,second:this.second,preload:this.preload,sponsor:this.sponsor,featured:this.featured,highlight:this.highlight,newsletter:this.newsletter,cms_components:this.cms_components,color_reversal:this.color_reversal})},e.prototype.mode=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Newsletter:r(250),Scrollspy:r(137),Header:r(271)},o={App:r(48),Screen:r(40),Pillager:r(97)},s={Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.arms={},this.disabled=p.prop(!1),this.screen=o.Screen,this.app=o.App.get(this.server),this.pillager=o.Pillager.get(this.server),this.top=p.prop(1.5*this.screen.height()),this.rects={header:{},newsletter:{}},this.component("scrollspy",i.Scrollspy),this.component("newsletter",i.Newsletter)}return c(e,t),e}(n.State),e.View=function(t){function e(){this.unload=h(this.unload,this),this.onactivate=h(this.onactivate,this),this.onsubmit=h(this.onsubmit,this),this.onresize=h(this.onresize,this),this.newsletterConfig=h(this.newsletterConfig,this),this.headerConfig=h(this.headerConfig,this),this.config=h(this.config,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.top=this.state.top,this.arms=this.state.arms,this.screen=this.state.screen,a.defaults(this,{tracking:{},label:"newsletter-accordion"})}return c(e,t),e.prototype.render=function(){return this.state.component("scrollspy").render({top:this.top,config:this.config,onactivate:this.onactivate,disabled:this.state.disabled,class:this.classes([this.class,"newsletter-accordion"])},[this.header(),this.newsletter()])},e.prototype.config=function(t,e,r){if(this.state.el=t,!e)return this.screen.addCallback(this.state.component_id,"resize",this.onresize),this.onresize(),r.onunload=this.unload},e.prototype.header=function(){if(this.separator)return new i.Header(this.server).render({config:this.headerConfig})},e.prototype.headerConfig=function(t){return this.state.header_el=t},e.prototype.newsletter=function(){return this.state.component("newsletter").render({label:this.label,show_lists:!1,tracking:this.tracking,onsubmitcb:this.onsubmit,config:this.newsletterConfig,class:this.classes([this.separator?"separator":void 0])})},e.prototype.newsletterConfig=function(t){return this.state.newsletter_el=t},e.prototype.onresize=function(){var t;return this.state.rects={header:s.Dom.rect(this.state.header_el),newsletter:s.Dom.rect(this.state.newsletter_el)},t=this.state.rects.header.top,this.top(t-.75*this.screen.height())},e.prototype.onsubmit=function(t){return window.setTimeout(function(e){return function(){return e.updateHeight(0),t()}}(this),500)},e.prototype.onactivate=function(){if(!this.state.activated)return this.state.activated=!0,this.impression(),this.updateHeight(this.state.rects.newsletter.height+this.state.rects.header.height),this.unload()},e.prototype.updateHeight=function(t){return this.state.el.setAttribute("style","height: "+t+"px;")},e.prototype.impression=function(){return this.app.event(this.url,{action:"impression",category:"newsletter",ga:{label:this.label+"_"+this.screen.device()},params:a.assign({},this.tracking,{promo:this.label})}),this.testImpressions()},e.prototype.testImpressions=function(){return a.forEach(this.arms,function(t){return function(e){if(e.fetched())return t.app.impression(e,{params:t.tracking})}}(this))},e.prototype.unload=function(){return this.state.disabled(!0),this.screen.removeCallback(this.state.component_id,"resize")},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(26),s={App:r(48),Screen:r(40),Navigation:r(115)},i={Link:r(134),Modal:r(241),Image:r(147),Links:r(200),Newsletter:r(215),Twitter:r(218),Youtube:r(220),Facebook:r(295),Snapchat:r(221),Instagram:r(222),Flipboard:r(296)},o={Background:r(236)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),a.assign(this,{app:s.App.get(this.server),navigation:s.Navigation.get(this.server)}),this.component("logo",i.Image),this.component("modal",i.Modal),this.component("company",i.Links)}return c(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),a.defaults(this,{www:""})}return c(e,t),e.prototype.render=function(){return this.state.component("modal").render({el:FOOTER,centered:!0,class:"consumer-footer",widget:this.m(o.Background),crops:{large:"2:1",medium:"3:4"}},[DIV({class:"layout wrapper"},[this.topNewsletter(),DIV({class:"layout__item consumer-footer__links"},[this.follow(),this.company(),this.sections(),this.streams()]),DIV({class:"layout__item consumer-footer__right"},[this.rightNewsletter(),this.logo(),this.copyright()])])])},e.prototype.topNewsletter=function(){if(this.palm())return this.newsletter("layout__item")},e.prototype.rightNewsletter=function(){if(!this.palm())return this.newsletter()},e.prototype.newsletter=function(t){var e;if(!this.no_newsletter)return e=this.state.component_id,this.state.lazyComponent("newsletter",e,i.Newsletter).render({label:"footer",class:t,intro_wrapper:H6,amp:this.state.app.amp})},e.prototype.logo=function(){return new i.Link(this.server).render({href:"/"},[this.state.component("logo").render({width:224,height:40,retina:!0,class:"consumer-footer__logo",src:"https://fsmedia.imgix.net/assets/logo_footer.png"})])},e.prototype.copyright=function(){return DIV({class:"consumer-footer__copy"},["Copyright ",SPAN({class:"copyright"},"Inverse "+(new Date).getFullYear())])},e.prototype.follow=function(){var t,e;return t=["facebook","twitter","instagram","youtube","flipboard"],e=a.map(t,function(t){return function(e){var r;return r=a.capitalize(e),LI(new i[r](t.server).render({text:r,category:"consumer-footer"}))}}(this)),this.links(e,"Follow",this.topClasses())},e.prototype.company=function(){return this.state.component("company").render({www:this.www,pipe:!1,inline:!1,skip_labs:!0,class:this.topClasses(),include_about:!0,title:LI(H6("Company"))})},e.prototype.sections=function(){return this.taxonomyList(this.state.navigation.categories,"Sections")},e.prototype.streams=function(){return this.taxonomyList(this.state.navigation.channels,"Story Streams")},e.prototype.taxonomyList=function(t,e){var r;return r=a.map(t.sections(),function(t){return function(e){return LI([new i.Link(t.server).render({href:""+t.www+e.url()},e.displayName())])}}(this)),this.links(r,e,this.bottomClasses())},e.prototype.links=function(t,e,r){return UL({class:"list-bare "+r},[LI(H6(e)),t])},e.prototype.topClasses=function(){return this.defaultClasses()+" palm-1/2"},e.prototype.bottomClasses=function(){return this.defaultClasses()+" palm-1/2"},e.prototype.defaultClasses=function(){return"layout__item 1/4"},e.prototype.palm=function(){if(!this.server)return s.Screen.palm()},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Page:r(219)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.page="inverse","culture"===this.section&&(this.page+=this.page+"entertainment"),o.defaults(this,{text:"/"+this.page})}return s(e,t),e.prototype.render=function(){return new i.Page(this.server).render({page:this.page,text:this.text,icon:"facebook",category:this.category,hide_text:this.hide_text,href:"https://www.facebook.com/"+this.page})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(26),i={Page:r(219)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.page="inversedotcom",o.defaults(this,{text:"@"+this.page})}return s(e,t),e.prototype.render=function(){return new i.Page(this.server).render({page:this.page,text:this.text,icon:"flipboard",category:this.category,hide_text:this.hide_text,href:"https://flipboard.com/@"+this.page})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),i=r(24),n=r(139),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.assign(this,{name:"microsoft-spotlight"})}return s(e,t),e.prototype.logoTracking=function(){var t;return t=this.logoIDs(),o.trust(['<script src="https://ad.doubleclick.net/ddm/trackimpj/N572608.2686400INVERSE/B20367831.'+t.track+";dc_trk_aid=408566072;dc_trk_cid=94976636;ord=["+this.timestamp+'];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=?"></script>','<script src="https://pixel.adsafeprotected.com/rjss/st/114654/'+t.skeleton+'/skeleton.js"></script>','<noscript><img src="https://pixel.adsafeprotected.com/rfw/st/114654/'+(t.skeleton-1)+'/skeleton.gif" border=0 width=1 height=1 alt=""></noscript>'].join(""))},e.prototype.logoIDs=function(){switch(this.device){case"desktop":return{skeleton:19963065,track:206807182};case"tablet":return{skeleton:19963069,track:206827290};default:return{skeleton:19962969,track:206824431}}},e.prototype.skinTracking=function(){var t;return t=this.skinIDs(),o.trust(['<script src="https://ad.doubleclick.net/ddm/trackimpj/N572608.2686400INVERSE/B20367831.'+t.track+";dc_trk_aid=408572786;dc_trk_cid=94947309;ord=["+this.timestamp+'];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=?"></script>','<script src="https://pixel.adsafeprotected.com/rjss/st/114654/'+t.skeleton+'/skeleton.js"></script>','<noscript><img src="https://pixel.adsafeprotected.com/rfw/st/114654/'+(t.skeleton-1)+'/skeleton.gif" border=0 width=1 height=1 alt=""></noscript>'].join(""))},e.prototype.skinIDs=function(){switch(this.device){case"desktop":return{skeleton:19963077,track:206806576};case"tablet":return{skeleton:19963071,track:206806573};default:return{skeleton:19963081,track:206807188}}},e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Container:r(266)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("container",i.Container)}return o(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){return this.state.component("container").render({rail:!1,first:!0,model:this.model,social:!1,scrollspy:!1})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),o={About:r(300)},i={Link:r(134),Button:r(144)},s={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.model=this.m(o.About,{rows:5,page:"jobs"}),this.model.get().then(function(t){return function(){return t.model.items=a.groupBy(t.model.items,"category"),s.App.get(t.server).stopNavigating(),p.redraw()}}(this))}return c(e,t),e}(n.State),e.View=function(t){function e(){return this.editorial=h(this.editorial,this),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.render=function(){return DIV({class:"about-jobs"},[a.map(this.state.model.items,function(t){return function(e,r){var n;return[t.category(r),(n=t[r.toLowerCase()])?n():void 0,t.jobs(e)]}}(this))])},e.prototype.category=function(t){return H2({class:"category brand-color"},a.startCase(t))},e.prototype.editorial=function(){return DIV({class:"info"},[SPAN({class:"info-text"},"Interested in writing for us?"),new i.Button(this.server).render({href:"https://inverse.submittable.com/submit/51468"},"Pitch a Story")])},e.prototype.jobs=function(t){return UL({class:"layout"},[a.map(t,function(t){return function(e){return LI({class:"layout__item 1/3 lap-1/2 phone-1/1"},t.job(e))}}(this))])},e.prototype.job=function(t){return DIV({class:"job"},[DIV({class:"header flex black-background brand-color"},[SPAN({class:"title flex-1"},t.title),SPAN({class:"location gray"},t.location)]),DIV({class:"description"},t.description),new i.Link(this.server).render({href:t.url,target:"_blank",class:"job-link brand-color"},["Learn More",SPAN({class:"gray"}," / "),"Apply Now"])])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),i=r(24),n=r(64),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.rows=1,e.prototype.type="about",e.prototype.private=!1,e.prototype.is_json_api=!1,e.prototype.pages={jobs:"1S95SE3i8LyjisTLHsZP1q3A_tL50l5_ot2Os3NtrDYk",press:"1kFPT7X5a7sbK0kfQmGQebTYsM1gtcP5XKa-x8E29lJw"},e.prototype.api=function(){var t;return t=this.pages[this.page],["https://spreadsheets.google.com/feeds/cells/"+t+"/od6/public/basic?","alt=json"].join("&")},e.prototype.get=function(){return e.__super__.get.call(this).then(function(t){return function(e){var r,n,o;return o=i.chunk(e.feed.entry,t.rows),r=i.map(o,function(t){return i.map(t,function(t){return t.content.$t})}),n=i.map(r.shift(),function(t){return t.toLowerCase()}),t.items=i.map(r,function(t){return i.zipObject(n,t)}),e}}(this))},e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),i={Link:r(134),Image:r(147)},o={App:r(48),Authors:r(111)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.authors=o.Authors.get(this.server),this.order=this.authors.order,this.app.user_page=!0,this.authors.fetchAll(!1).then(function(t){return function(){return t.order||(t.order=s.shuffle(s.keys(t.authors.models)),t.authors.order=t.order),t.app.stopNavigating(),a.redraw()}}(this))}return p(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.render=function(){return DIV({class:"about-team"},[UL({class:"layout"},this.people())])},e.prototype.people=function(){return s.map(this.state.order,function(t){return function(e,r){var n,o,s,a,p,c,u;if(s=t.state.authors.models[e])return o=s.id,p=r<6,c=s.section,n=i.Image,a=s.fullName(),"Writers"===c&&(c="Writer"),u=s.widget.persisted()?s:{mono:function(){return""},caption:function(){return a}},LI({class:"layout__item 1/3 lap-1/2 phone-1/1"},[new i.Link(t.server).render({href:s.url(),title:a},[DIV({class:"ratio 2:1"},[t.state.lazyComponent("user-image",o,n).render({mono:!0,crop:"2:1",ratio:!0,retina:!0,preload:p,model:u,src:s.aboutImage()})]),DIV({class:"info"},[DIV({class:"name"},a),DIV({class:"title"},c)])])])}}(this))},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),o={About:r(300)},i={Link:r(134),Image:r(147)},s={App:r(48)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.model=this.m(o.About,{rows:4,page:"press"}),this.model.get().then(function(t){return function(){return s.App.get(t.server).stopNavigating(),p.redraw()}}(this)),this.component("image",i.Image)}return c(e,t),e}(n.State),e.View=function(t){function e(){return this.card=h(this.card,this),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.render=function(){return DIV({class:"about-press"},[UL({class:"layout"},[a.map(this.state.model.items,function(t){return function(e){return LI({class:"layout__item 1/3 palm-1/2 phone-1/1"},t.card(e))}}(this))])])},e.prototype.card=function(t){return new i.Link(this.server).render({href:t.url,target:"_blank",class:"press-card"},[DIV({class:"wrapper"},[this.state.component("image").render({retina:!0,preload:!0,src:t.image})]),DIV({class:"info"},[SPAN({class:"date"},t.date),p.trust("&nbsp;&nbsp;"),p.trust(t.title)])])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Link:r(134),Image:r(147),Header:r(174)},o={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("image",i.Image),this.component("header",i.Header)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.width=o.Screen.sizes.content,this.srcsets={sets:[{sizes:{small:200,large:this.width}}]}}return a(e,t),e.prototype.render=function(){return HEADER({class:"about-header"},[this.image(),this.title(),this.links()])},e.prototype.title=function(){var t;return t=function(){switch(this.section){case"jobs":return"Jobs at Inverse";case"team":return"The Inverse Team";case"contact":return"Contact Inverse";case"press":return"Press about Inverse";default:return"About Inverse"}}.call(this),this.state.component("header").render({title:t,highlight:!1,class:"about-header__title"})},e.prototype.image=function(){return new i.Link(this.server).render({href:"/",class:"block wrapper"},[DIV({class:"ratio"},[this.state.component("image").render({crop:"2:1",ratio:!0,preload:!0,width:this.width,srcsets:this.srcsets,src:"https://fsmedia.imgix.net/assets/about/header.png"})])])},e.prototype.links=function(){return UL({class:"list-inline"},[s.map(this.sections,function(t){return function(e){var r;return r="/"+e,"about"===e&&(r=""),"/advertise"!==r&&(r="/about"+r),LI([new i.Link(t.server).render({href:r,class:t.classes([e===t.section?"active":void 0])},s.capitalize(e))])}}(this))])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(16),n=r(26),i={Button:r(144),Image:r(147)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return s(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){return DIV({class:"about-contact"},[this.contacts(),this.offices()])},e.prototype.contacts=function(){return UL({class:"contacts layout"},[this.admin(),this.pitch(),this.press(),this.advertise()])},e.prototype.admin=function(){return this.card("General questions & comments","admin")},e.prototype.pitch=function(){return this.card("Pitch your ideas and write for us","pitch")},e.prototype.press=function(){return this.card("Press inquiries","press")},e.prototype.advertise=function(){return this.card("Advertise with us","advertising")},e.prototype.card=function(t,e){return LI({class:"layout__item contact-card 1/4 palm-1/2"},[this.button(e),DIV({class:"info"},t)])},e.prototype.button=function(t){var e;return e=t+"@inverse.com",new i.Button(this.server).render({text:e,href:"mailto:"+e})},e.prototype.offices=function(){return DIV({class:"office"},[H2({class:"title middle"},[o.trust("155 Wooster Street<br>New York, NY 10012")]),this.state.lazyComponent("office","ny",i.Image).render({width:470,retina:!0,model:{caption:function(){return"NY Office"}},src:"https://fsmedia.imgix.net/assets/office_ny.jpg"})])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};p=r(16),a=r(24),n=r(38),o={Archive:r(306)},i={Main:r(307),Sections:r(311),Header:r(257)},s={Date:r(72)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app.no_index=!0,this.ads.setRendering(!0),this.params={page:this.param("page"),year:this.param("year"),month:this.param("month"),section:this.param("section")},this.navigation.onload(function(t){return function(){var e,r,n,i,s,p,c,u;return null!=t.params.month&&(r=t.m(o.Archive,t.params),n=t.navigation.redirect(t.params.section))?(u=t.params.page?r.pageUrl(t.params.page):r.anchor(),t.redirect(u.replace(t.params.section,n))):t.invalidRoute()?t.set404():(i=t.navigation.categories.section(t.params.section,!1),p=(null!=i?i.permalink:void 0)||"home",t.app.section=p,s=t.navigation.meta(p),e=t.meta((null!=r?r.title():void 0)||"Article Archive"),a.assign(s,e),c=t.navigation.social(s),a.assign(c,e),t.app.pageData(s,c),t.app.stopNavigating())}}(this)),null!=this.params.month?this.component("archive",i.Sections):this.component("archive",i.Main),this.component("header",i.Header)}return c(e,t),e.prototype.meta=function(t){var e,r,n,i,o,s,p;return i=this.params,o=i.section,p=i.year,n=i.month,s=this.canonical(),e=a.without(["Inverse Article Archives",o||n||p?"-":void 0,o,n,p],null,void 0,""),r=a.without(["inverse",null!=o?o.replace(/-/g," "):void 0,"archive",p,n],null,void 0,""),{url:s,home:!1,title:t,canonical:s,keywords:r.join(", "),description:a.startCase(e.join(" "))}},e.prototype.invalidRoute=function(){var t,e,r,n,i,o;if(null!=this.params.month)return!(null==(n=this.params.page)||!n.match(/[^\d]/))||(r=s.Date.MONTHS,o=this.navigation.categories.section(this.params.section),e=this.params.section&&!o,t=this.params.month&&(i=a.capitalize(this.params.month),h.call(r,i)<0),e||t)},e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"archive",header:this.state.component("header")},[this.state.component("archive").render()])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(51),i={BodyList:r(108)},t.exports=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.page||(this.page=1),this.pages=1,this.month&&this.year&&(this.start=new Date(this.month+" 1, "+this.year),this.end=new Date(this.month+" 1, "+this.year),this.end.setMonth(this.end.getMonth()+1),this.page=parseInt(this.page,10),"miscellaneous"===this.section?this.category="none":this.category=this.section,t=200,this.list=this.m(i.BodyList,{page:{bodies:{limit:t,offset:(this.page-1)*t}},filters:{category:this.category,publish_at:"("+this.start.toISOString()+".."+this.end.toISOString()+")"},includes:{abstracts:!1,body_widgets:!1}}))}return a(e,t),e.prototype.type="",e.prototype.strippedData=function(){return o.map(this.list.bodies,function(t){return t.strippedData({includes:{titles:["large"]},omits:["sections","taxonomy","created_by","updated_at","article_type","view_options"]})})},e.prototype.get=function(){return this.list.get().then(function(t){return function(e){return t.add(e),e}}(this))},e.prototype.add=function(t){return this.list.add(t,!1),this.pages=this.list.pages},e.prototype.title=function(t){return null==t&&(t="Articles"),o.startCase(o.without([this.month,this.year,this.section,t],null,void 0).join(" "))},e.prototype.emptyMessage=function(){return o.startCase(["No",this.section,"Articles in",this.month,this.year].join(" "))},e.prototype.pagination=function(){return this.list.pagination()},e.prototype.nextPage=function(){return this.list.next()},e.prototype.previousPage=function(){return this.list.previous()},e.prototype.pageUrl=function(t){return this.anchor()+"/page/"+t},e.prototype.breadcrumbs=function(){var t,e,r;return r="Archive",t="/archive",this.section&&(e={text:this.title(r),href:this.anchor()}),o.without([{text:r,href:t},e],void 0)},e.prototype.anchor=function(){return["/archive",this.month,this.year,this.section].join("/")},e}(n)},function(t,e,r){var n,i,o,s,a,p,c,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;c=r(16),p=r(24),n=r(26),i={Linkbank:r(308)},a={Date:r(72)},s={App:r(48),Navigation:r(115)},o={Archive:r(306)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.State=function(t){function e(){var t,r;for(e.__super__.constructor.apply(this,arguments),this.dates=[],t=new Date,r=new Date(2015,0),this.app=s.App.get(this.server),this.navigation=s.Navigation.get(this.server);r<=t;)this.dates.push(new Date(r)),r.setMonth(r.getMonth()+1);this.navigation.onload(function(t){return function(){return t.setGroups(),c.redraw()}}(this)),this.app.stopNavigating(),this.app.surrogateKey("archive"),this.component("linkbank",i.Linkbank)}return u(e,t),e.prototype.setGroups=function(){var t;return t=this.navigation.categories.models(),this.groups=p.map(this.dates.reverse(),function(e){var r,n;return n=e.getFullYear(),r=a.Date.MONTHS[e.getMonth()],{title:{text:r+" "+n},links:p.map(t,function(t){return"none"===t.permalink&&(t={name:"Miscellaneous",permalink:"miscellaneous"}),{name:t.name,title:r+" "+n+" "+t.name+" Articles",href:"/archive/"+r.toLowerCase()+"/"+n+"/"+t.permalink}})}})},e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.render=function(){return this.state.component("linkbank").render({rail:!1,groups:this.state.groups,title:"Article Archive",model:this.m(o.Archive)})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Link:r(134),Page:r(309)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("page",i.Page)}return a(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(){return this.state.component("page").render({rail:this.rail,model:this.model,social:!1,scrollspy:!1,tabs:this.breadcrumbs(),class:"linkbanks-sections",title:this.title||this.model.title()},[o.map(o.without(this.groups,null,void 0),function(t){return function(e){return[t.header(e.title),t.links(e)]}}(this))])},e.prototype.links=function(t){var e;if(e=t.links)return UL({class:"list-bare"
},[o.map(e,function(t){return function(e){return LI(t.link(e))}}(this)),this.morelink(t.title.more)])},e.prototype.link=function(t){var e;return(e=t.pages)?[SPAN(t.title),UL({class:this.classes(["pages","list-bare","list-inline"])},o.map(t.pages,function(t){return function(e){return LI({class:"pipe"},t.anchor(e))}}(this)))]:this.anchor(t)},e.prototype.anchor=function(t){return new i.Link(this.server).render({href:t.href,title:t.title},t.name||t.title)},e.prototype.breadcrumbs=function(){var t;if(null!=(t=this.model)?t.breadcrumbs:void 0)return this.model.breadcrumbs()},e.prototype.header=function(t){var e;return e=t.text,t.link&&(e=new i.Link(this.server).render({href:t.link},e)),H2(e)},e.prototype.morelink=function(t){if(this.more&&t)return LI(new i.Link(this.server).render({href:t,class:"more"},s.trust("More&hellip; &raquo;")))},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),i={Content:r(282),Container:r(291),Pagination:r(161),Footer:r(294)},o={Image:r(310)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("footer",i.Footer),this.component("container",i.Container)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.defaults(this,{title:""})}return a(e,t),e.prototype.render=function(){return DIV({class:this.classes([this.class,"statics-page"])},[this.state.component("container").render({rail:this.rail,tabs:this.tabs,model:this.model,title:this.title,social:this.social,widget:this.widget(),scrollspy:this.scrollspy,rail_component:this.rail_component},[this.body()]),this.state.component("footer").render()])},e.prototype.widget=function(){return this.image?this.image:this.m(o.Image)},e.prototype.body=function(){var t;return t=this.paginators(),new i.Content(this.server).render([DIV({class:this.classes(["contained -first clearfix",t?void 0:"-last"])},[this.children]),t])},e.prototype.paginators=function(){var t;if(this.pagination)return t=this.state.component_id,this.state.lazyComponent("paginators",t,i.Pagination).render({model:this.model,class:"contained",navigate:this.navigate})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(238),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.is_image=!0,e.prototype.id="generic-image",e.prototype.embed=function(){return"https://fsmedia.imgix.net/assets/generic.jpg"},e.prototype.crop=function(t){switch(t){case"2:1":return"https://fsmedia.imgix.net/assets/generic_2x1.jpg";case"3:4":return"https://fsmedia.imgix.net/assets/generic_3x4.jpg";default:return"https://fsmedia.imgix.net/assets/generic_4x2.jpg"}},e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(26),i={Error:r(131),Linkbank:r(312)},o={Archive:r(306)},s={App:r(48),Archive:r(127)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=s.App.get(this.server),this.archive=s.Archive.get(this.server),this.component("linkbank",i.Linkbank),this.params={page:this.param("page"),year:this.param("year"),month:this.param("month"),section:this.param("section")},this.model=this.m(o.Archive,this.params),this.server||this.app.loaded?this.model.get().then(function(t){return function(e){var r,n,i,o;return t.server&&(t.archive.json=a.assign({},e,{data:t.model.strippedData()})),t.app.surrogateKey(["archive","archive-"+t.model.category,"archive-"+t.model.category+"-"+t.params.year+"-"+t.params.month].join(" ")),o=/\s?\| Inverse/i,r=t.model.pagination(),a.assign(t.app.page_data,{pagination:r,title:(null!=(n=t.app.page_data.title)?n.replace(o,""):void 0)||""}),a.assign(t.app.social_data,{pagination:r,title:(null!=(i=t.app.social_data.title)?i.replace(o,""):void 0)||""}),t.app.pageData(t.app.page_data,t.app.social_data),t.app.stopNavigating(),t.fetched=!0,p.redraw()}}(this),function(t){return function(e){return t.error=!0,t.component("error",i.Error)}}(this)):(this.model.add(isomithric.archive),this.fetched=!0)}return c(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.render=function(){var t;return this.state.error?this.state.component("error").render():(t=this.state.model,this.state.component("linkbank").render({rail:!1,model:t,bodies:t.list.bodies,empty:t.emptyMessage()}))},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(26),i={Link:r(134),Page:r(309)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.component("page",i.Page)}return a(e,t),e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(){var t;return this.state.component("page").render({rail:this.rail,model:this.model,social:!1,navigate:!0,scrollspy:!1,pagination:!0,title:this.model.title(),tabs:"function"==typeof(t=this.model).breadcrumbs?t.breadcrumbs():void 0,rail_component:this.rail_component},[this.links()])},e.prototype.links=function(){var t;return t=o.map(this.bodies,function(t){return function(e){return LI([new i.Link(t.server).render({href:e.url()},s.trust(e.title("large").styledText()))])}}(this)),0===t.length&&this.state.fetched?P(this.empty):UL({class:"list-bare"},t)},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=function(t,e){return function(){return t.apply(e,arguments)}};n=r(265),i={Stream:r(314),Header:r(257)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.ads.setRendering(!0),this.component("header",i.Header),this.component("stream",i.Stream)}return o(e,t),e.prototype.fetch=function(){return this.navigation.onload(function(t){return function(){return e.__super__.fetch.apply(t,arguments)}}(this))},e}(n.State),e.View=function(t){function e(){this.routeConfig=a(this.routeConfig,this),e.__super__.constructor.apply(this,arguments),this.renderNewsletterOverlayModal(this.model.skreemrParams()),this.class=this.classes([this.class,this.model.short()&&!this.app.amp?"article-channel":void 0])}return o(e,t),e.prototype.stream=function(){return this.state.component("stream").render({load_stream:!0,long:this.model.long()})},e.prototype.routeConfig=function(t,r,n){var i;if(e.__super__.routeConfig.apply(this,arguments),!r)return i=n.onunload,n.onunload=function(t){return function(){if(t.onExit("article",{type:"page"}),i)return i()}}(this)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Container:r(266)},o={App:r(48),Screen:r(40),Stream:r(103),Article:r(62),Related:r(113),Navigation:r(115)},s={Dom:r(46)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server),this.stream=o.Stream.get(this.server),this.article=o.Article.get(this.server),this.related=o.Related.get(this.server),this.navigation=o.Navigation.get(this.server),this.fetched_articles={}}return c(e,t),e}(n.State),e.View=function(t){function e(){this.onFetch=h(this.onFetch,this),this.relatedPagination=h(this.relatedPagination,this),this.fetchNextPage=h(this.fetchNextPage,this),this.fetchArticles=h(this.fetchArticles,this),this.onscroll=h(this.onscroll,this),this.onresize=h(this.onresize,this),this.unload=h(this.unload,this),this.config=h(this.config,this),e.__super__.constructor.apply(this,arguments),this.app=this.state.app,this.screen=o.Screen,a.defaults(this,{bodies:this.state.related.models})}return c(e,t),e.prototype.render=function(){return DIV({config:this.config,class:this.classes([this.class,"article-stream",this.long?"article-stream--featured":void 0])},[this.articles()])},e.prototype.articles=function(){var t;if(!this.server&&!this.app.navigating&&(t=this.bodies,t.length))return a.map(t,function(t){return function(e,r){var n;return(n=t.taxonomy(e))&&(e.taxonomy=n),[t.article(e,r+1)]}}(this))},e.prototype.article=function(t,e){var r,n;return n=1===e,this.set_first&&(r=n,n=2===e,e-=1),this.state.lazyComponent("container",t.id,i.Container).render({first:r,index:e,model:t,second:n})},e.prototype.config=function(t,e,r){var n;if(e&&t!==this.state.el&&this.unload(),this.state.el=t,!this.state.initialized)return this.state.initialized=!0,n=this.state.component_id,this.screen.addCallback(n,"resize",this.onresize),this.screen.addCallback(n,"scroll",this.onscroll),this.onresize(),r.onunload=this.unload},e.prototype.unload=function(){var t;return t=this.state.component_id,this.state.initialized=!1,this.screen.removeCallback(t,"resize"),this.screen.removeCallback(t,"scroll")},e.prototype.onresize=function(){return this.state.rect=s.Dom.rect(this.state.el)},e.prototype.onscroll=function(){if(!(this.app.navigating||this.load_stream&&this.loadStream()))return this.loadNextPage()},e.prototype.loadStream=function(){if(!this.state.loaded&&this.state.rect.top<=this.threshold())return this.state.loaded=!0,this.fetch(this.fetchArticles),!0},e.prototype.loadNextPage=function(){if(this.state.rect.bottom<=this.threshold())return this.fetch(this.fetchNextPage)},e.prototype.fetch=function(t){var e;if(!this.state.navigation.menu()){if(this.state.fetching)return void(this.state.fetch_next=!0);if(this.state.fetching=!0,e=t())return null!=e?e.then(this.onFetch):void 0}},e.prototype.threshold=function(){return this.screen.scroll.top()+this.screen.threshold()},e.prototype.fetchArticles=function(){return this.fetchNextPage()},e.prototype.fetchNextPage=function(){var t,e;return t=this.model(),e=this.state.article.nextBodyID(t),!t||this.state.fetched_articles[e]?(this.state.fetching=!1,void(this.state.fetch_next=!1)):(this.state.fetched_articles[e]=!0,this.state.related.get({id:e,referrer:this.app.referrer,page:this.relatedPagination(),landing_id:this.state.article.landing_id}))},e.prototype.relatedPagination=function(){var t;return t=1,this.screen.rail()&&(t=8),{related:{offset:0,limit:t}}},e.prototype.onFetch=function(){var t,e;return e=this.model(),t=this.screen.device(),this.app.event(e.url(),{category:"stream",action:"impression",params:e.skreemrParams(),ga:{label:e.mainTags(!0)+"_"+t}}),this.state.fetching=!1,this.state.fetch_next&&(this.fetchNextPage(),this.state.fetch_next=!1),p.redraw()},e.prototype.model=function(){return this.state.article.model()},e.prototype.taxonomy=a.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=r(24),n=r(38),i={Label:r(316),Header:r(257),Categories:r(320)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app.no_index=!0,this.ads.setRendering(!0),this.key="browse",this.params={label:this.param("label"),category:this.param("category")},this.params.label?this.component(this.key,i.Label):this.component(this.key,i.Categories),this.navigation.onload(function(t){return function(){var e,r;if(e=t.navigation.categories,t.params.category&&(r=e.section(t.params.category),!r))return t.redirect("/browse")}}(this)),this.app.section=this.key,this.setSurrogateKeys(),this.component("header",i.Header)}return s(e,t),e.prototype.setSurrogateKeys=function(){var t,e,r;return r=this.params.label,t=this.params.category,e=o.without([this.key,r?"label-"+r:void 0,r||t?void 0:"home",t?"section-"+t:void 0],null,void 0),this.app.surrogateKey(e.join(" "))},e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"browse",header:this.state.component("header")},[this.state.component("browse").render()])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(26),i={Error:r(131),Rail:r(317),Linkbank:r(312)},o={Browse:r(319)},s={App:r(48),Bootstrap:r(128),Navigation:r(115)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){this.set404=h(this.set404,this);var t,r,n,c;e.__super__.constructor.apply(this,arguments),this.app=s.App.get(this.server),this.bootstrap=s.Bootstrap.get(this.server),this.navigation=s.Navigation.get(this.server),this.params={page:this.param("page"),label:this.param("label"),category:this.param("category")},r=100,n=parseInt(this.params.page||1,10),this.server||this.app.loaded||(t=null!=(c=isomithric.bootstrap)?c.browse:void 0),this.model=this.m(o.Browse,{category:this.params.category,label:{permalink:this.params.label},page:{bodies:{limit:r,offset:(n-1)*r}}}),this.navigation.onload(function(e){return function(){var r;return r=e.navigation.categories,e.category=r.section(e.params.category),e.server||e.app.loaded?e.model.get().then(function(t){var r,n,i;return r=e.model.meta(e.navigation.meta("home")),n=e.navigation.social(r),i=a.assign({},r,{title:e.model.title()}),e.app.pageData(i,n),e.server&&(e.bootstrap.json={browse:e.model.jsonData(t)}),e.app.stopNavigating(),p.redraw()},function(t){return 404===t.status?e.params.label?e.redirect("/browse/"+e.params.category):e.redirect("/browse"):(e.set404(),t)}):t&&e.model.add(t),e.app.stopNavigating(),p.redraw()}}(this)),this.component("linkbank",i.Linkbank)}return c(e,t),e.prototype.set404=function(){return this.set404Headers(),this.app.error=!0,this.server&&(this.server.force_render=!0,this.server.ignore_rejections=!0),this.app.stopNavigating(),p.redraw()},e.prototype.set404Headers=function(){if(this.server)return this.server.res.status(404),this.server.res.set("Cache-Control",this.cacheControl()),this.server.res.set("Surrogate-Control",this.surrogateControl())},e.prototype.cacheControl=function(){return"max-age=0, no-cache"},e.prototype.surrogateControl=function(){return"max-age=604800, stale-while-revalidate=604800, stale-if-error=604800"},e.prototype.redirect=function(t){var e;return this.server?(e=a.map(this.server.req.query,function(t,e){return e+"="+t}),e=e.join("&"),e.length&&(e="?"+e),this.server.halt=!0,this.server.res.redirect(301,""+t+e)):this.app.route(""+t+window.location.search,!0)},e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.render=function(){var t,e;return this.state.app.error?(t=this.state.component_id,this.state.lazyComponent("error",t,i.Error).render()):(e=this.state.model,this.state.component("linkbank").render({model:e,bodies:e.bodies,rail_component:i.Rail,empty:'No Articles For "'+a.startCase(e.title())+'"'}))},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(24),n=r(26),o={App:r(48)},i={Rail:r(268),Links:r(318)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.assign(this,{app:o.App.get(this.server)}),this.component("rail",i.Rail),this.component("links",i.Links)}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=this.state.app}return a(e,t),e.prototype.render=function(){return this.state.component("rail").render({model:this.model,class:"topic-rail"},[this.evergreens()])},e.prototype.evergreens=function(){return this.state.components("links").render({class:this.margin("bottom"),bodies:this.model.evergreen_bodies})},e.prototype.related=function(){},e.prototype.margin=function(t){return"rail__"+t},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=r(16),s=r(24),n=r(26),i={Tab:r(243),Link:r(134),Modal:r(241)},o={App:r(48),Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.app=o.App.get(this.server)}return p(e,t),e}(n.State),e.View=function(t){function e(){var t,r,n;e.__super__.constructor.apply(this,arguments),this.screen=o.Screen,n=this.screen.sizes,this.bodies&&s.defaults(this,{containers:[{models:this.bodies}]}),s.defaults(this,{srcsets:{},breadcrumbs:[{fake:!0,text:"Must Reads"}],widget:null!=(t=this.containers[0].models)&&null!=(r=t[0])?r.primaryPhoto().widget:void 0}),s.defaults(this.srcsets,{sets:[{crop:"3:4",sizes:{small:n.small}},{crop:"2:1",sizes:{large:n.content}}]})}return p(e,t),e.prototype.render=function(){var t,e,r;if(e=this.links())return t=this.state.component_id,r={el:this.el,config:this.config,widget:this.widget,srcsets:this.srcsets,breadcrumbs:this.breadcrumbs,class:this.classes([this.class,"article-links"])},this.tabs&&s.assign(r,{tabs:this.tabs,breadcrumbs:!1}),this.state.lazyComponent("modal",t,i.Modal).render(r,[e])},e.prototype.links=function(){var t,e,r,n,i;if(e=this.containers.length)return t=e>1,n="article-links__list",t||(i=n),r=s.map(this.containers,function(t){return function(e){return t.list(e,i)}}(this)),t?DIV({class:this.classes([n,this.layout?"layout":void 0])},[r]):r},e.prototype.list=function(t,e){var r,n;if(null==t&&(t={}),n=t.models||[],r=n.length)return r-=1,UL({class:this.classes([e,"list-bare",t.classes,this.layout?"layout__item":void 0])},[s.map(n,function(e){return function(n,o){var a,p;return n.thumbnailTitle?(p=n.url(),a=n.thumbnailTitle()):(p=n.url,a=n.link),LI({class:e.liClasses(o,r)},[new i.Link(e.server).render({href:p,onclick:t.onclick||s.noop},a)])}}(this))])},e.prototype.liClasses=function(t,e){return this.classes(["article-links__item",t===e?"article-links__item-last":void 0])},e.prototype.config=s.noop,e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(107),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.meta=function(){var t,e,r;return r=this.pageUrl(),t=i.without(["Browse",this.label.permalink||this.category,"Articles"],null,void 0,""),e=i.without(["inverse","browse",this.category,this.label.permalink],null,void 0,""),{url:r,home:!1,canonical:r,title:this.title(),pagination:this.pagination(),keywords:e.join(", "),description:i.startCase(t.join(" "))}},e.prototype.pageUrl=function(t){var e;return null==t&&(t=this.getPage()),e=this.anchor(),1===t?e:e+"/page/"+t},e.prototype.anchor=function(){return"/browse/"+this.category+"/"+this.label.permalink},e.prototype.title=function(){var t;return t="Browse",this.label.name?t+" "+i.startCase(this.label.displayName()):this.category?t+" "+i.startCase(this.category):t+" Categories"},e.prototype.breadcrumbs=function(){var t,e;if(this.category)return this.category&&(t={href:"/browse/"+this.category,text:"Browse "+i.startCase(this.category)}),this.label.name&&(e={href:"/browse/"+this.category+"/"+this.label.permalink,text:"Browse "+this.label.displayName()}),i.without([{text:"Browse",href:"/browse"},t,e],void 0)},e.prototype.jsonData=function(){var t;return t=e.__super__.jsonData.apply(this,arguments),i.assign(t.data,{label:i.omit(this.label.strippedData(),["widget","description","meta_keywords","meta_description","description_html"]),bodies:i.map(this.bodies,function(t){return t.strippedData({includes:{titles:["large"]},omits:["sections","taxonomy","created_by","updated_at","article_type","view_options"]})})}),t},e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(26),i={Linkbank:r(308)},s={App:r(48),Bootstrap:r(128),Navigation:r(115)},o={Browse:r(319)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.labels={},this.app=s.App.get(this.server),this.bootstrap=s.Bootstrap.get(this.server),this.navigation=s.Navigation.get(this.server),this.model=this.m(o.Browse,{category:this.param("category")}),this.server||this.app.loaded||(t=isomithric.bootstrap.browse),this.navigation.onload(function(e){return function(){var r,n,i;return r=e.navigation.categories,e.model.category&&(e.category=r.section(e.model.category)),n=r.meta(e.category||"home"),n.title=e.model.title(),e.app.pageData(n,r.social(n)),e.categories=a.reject(r.models(),{permalink:"none"}),e.category&&(e.categories=[e.category]),e.server||e.app.loaded?(i=a.map(e.categories,function(t){return t.get().then(function(r){return e.category||(r.data=r.data.slice(0,20)),e.labels[t.permalink]={links:r.links,data:a.map(r.data,function(t){return a.pick(t,["id","name","permalink"])})}})}),p.sync(i).then(function(){return e.setGroups(),e.app.stopNavigating(),e.server&&(e.bootstrap.json={browse:e.labels}),p.redraw()})):(e.labels=t,e.setGroups(),e.app.stopNavigating())}}(this)),this.component("linkbank",i.Linkbank)}return c(e,t),e.prototype.setGroups=function(){if(!this.groups)return this.groups=a.map(this.categories,function(t){return function(e){var r,n;if(n=e.permalink,"labs"!==n)return r=a.map(t.labels[n].data,function(t){var e;return e=t.name+" Articles",{title:e+":",pages:[{name:"Latest Stories",title:"Latest "+e,href:"/topic/"+t.permalink},{name:"Browse Archived",title:"Archived "+e,href:"/browse/"+n+"/"+t.permalink}]}}),t.category||(r=r.slice(0,20)),{links:r,title:{link:e.url(),text:e.displayName(),more:"/browse/"+e.permalink}}}}(this)),this.category?void 0:this.groups=this.groups.concat(this.channels())},e.prototype.channels=function(){return a.map(this.navigation.channels.models(),function(t){return{more:!1,title:{link:t.url(),text:t.text()}}})},e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.render=function(){return this.state.component("linkbank").render({rail:!1,model:this.state.model,groups:this.state.groups,more:!this.state.category})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(38),i={Stream:r(322),Header:r(257),Article:r(266),Newsletter:r(240)},o={Schema:r(124),Navigator:r(65)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.ads.setRendering(!0),t=this.param("channel"),this.app.section=t,this.app.page="channel",this.app.surrogateKey("home list channel channel-"+t),this.app.error||this.navigation.onload(function(e){return function(){var r,n,i;return e.navigation.setSection(t),n=e.navigation.section,n?t!==n.permalink?e.redirect(n.canonical()):e.server||e.app.loaded?(r=e.navigation.meta(n,!0),e.app.pageData(r,e.navigation.social(r,!0)),i={referrer:e.app.referrer,channel:n.diffsyncData()},e.channel.get(i).then(function(t){return t.errors?void e.set404():(e.ondone(),e.fetched=!0,a.redraw())},function(t){return e.set404(t),e.app.stopNavigating(),t})):e.ondone():void e.set404()}}(this)),this.component("header",i.Header),this.component("stream",i.Stream),this.component("article",i.Article)}return p(e,t),e.prototype.ondone=function(){return this.setArticle(),this.updateTargeting()},e.prototype.setArticle=function(){return this.model=this.channel.model.bodies.shift(),this.app.hide_top_ad=this.model.slideshow(),this.article.model(this.model),this.app.stopNavigating(),this.app.updateCanonical(this.model)},e.prototype.updateTargeting=function(){if(this.server||this.app.navigated)return this.ads.updateArticle(this.model)},e}(n.State),e.View=function(t){function e(){this.routeConfig=u(this.routeConfig,this),this.onunload=u(this.onunload,this),e.__super__.constructor.apply(this,arguments),this.state.model&&this.renderNewsletterOverlayModal(this.state.model.skreemrParams())}return p(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{header:this.state.component("header"),class:this.classes(["topic-route","article-channel"])},[this.components()])},e.prototype.components=function(){if(!this.app.error)return[this.article(),this.stream()]},e.prototype.article=function(){return this.state.component("article").render({first:!0,preload:!0,model:this.state.model})},e.prototype.stream=function(){return this.state.component("stream").render({bodies:this.state.channel.model.bodies})},e.prototype.onunload=function(){return e.__super__.onunload.apply(this,arguments),o.Schema.removeArticle()},e.prototype.routeConfig=function(t,e,r){return this.state.fetched&&this.app.stopNavigating(),r.onunload=function(t){return function(){return t.onExit("channel",{type:"page"})}}(this)},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=function(t,e){return function(){return t.apply(e,arguments)}};n=r(314),i={Channel:r(109)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.channel=i.Channel.get(this.server)}return o(e,t),e}(n.State),e.View=function(t){function e(){this.fetchNextPage=a(this.fetchNextPage,this),this.fetchArticles=a(this.fetchArticles,this),e.__super__.constructor.apply(this,arguments),this.channel=this.state.channel,this.taxonomy=this.channel.model.taxonomy,this.class=this.classes([this.class,"channel-stream"])}return o(e,t),e.prototype.fetch=function(){if(!this.channel.model.fetching())return e.__super__.fetch.apply(this,arguments)},e.prototype.fetchArticles=function(){return this.channel.get(this.props)},e.prototype.fetchNextPage=function(){return this.channel.nextPage()},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};a=r(16),s=r(24),n=r(38),o={Stream:r(103),Authors:r(111)},i={Stream:r(314),Header:r(257)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.State=function(t){function e(){this.fetchAuthor=u(this.fetchAuthor,this);var t;e.__super__.constructor.apply(this,arguments),t="labs",this.stream=o.Stream.get(this.server),this.authors=o.Authors.get(this.server),this.app.loaded||this.stream.setLabs(),this.navigation.onload(function(e){return function(){var r;return e.navigation.setSection(t),r=e.navigation.categories.section(t),e.meta=e.navigation.meta(r),e.server||e.app.loaded?e.stream.fetchLabs().then(function(r){var n,i,o;return o=r[0],n=r[1],e.app.surrogateKey("blog labs section-"+t),e.app.stopNavigating(),i=s.map(e.stream.stream().bodies,function(t){return e.fetchAuthor(t)}),a.sync(i).then(function(){return a.redraw()}),n.then(function(){return a.redraw()}),a.redraw()},function(){return e.app.stopNavigating()}):(e.app.stopNavigating(),s.map(e.stream.stream().bodies,function(t){return e.fetchAuthor(t)}))}}(this)),this.meta=this.navigation.meta(t),this.app.pageData(this.meta,this.navigation.social(this.meta)),this.app.section=t,this.component("header",i.Header),this.component("stream",i.Stream)}return p(e,t),e.prototype.fetchAuthor=function(t){var e;return e=t.created_by,this.authors.fetch({id:e}).then(function(r){return function(){return t.setAuthor(r.authors.models[e])}}(this),this.onError)},e}(n.State),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{header:this.state.component("header")},[this.state.component("stream").render({set_first:!0,bodies:this.state.stream.stream().bodies,taxonomy:function(t){return function(e){return t.state.stream.stream().taxonomy(e)}}(this)})])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=r(16),o=r(24),n=r(38),i={Header:r(257)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.app.no_background=!0,this.path=this.strippedOriginalUrl(),t=this.navigation.meta("home"),t.home=!1,t.title=o.startCase(this.path.replace("-"," ")),this.navigation.menu(this.path),"explore"===this.path&&this.navigation.updateChannels(),this.app.static=this.path,this.app.section="navigation",this.app.pageData(t,this.navigation.social("home")),this.app.toggleLockAndOverlay(!0,0),this.component("header",i.Header),this.app.surrogateKey("home navigation"),this.app.stopNavigating()}return a(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.main_classes="collapsed nooverflow"}return a(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"locked overlay",header:this.state.component("header")},[])},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(38),i={Content:r(282),Container:r(291),Banner:r(199),Footer:r(294),Header:r(257),
Newsletters:r(251),Signup:r(216)},o={Image:r(67)},s={Screen:r(40)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){var t,r;e.__super__.constructor.apply(this,arguments),this.lists=p.prop([]),this.submitted=p.prop(!1),this.image=this.m(o.Image),r=this.queryString(),this.email=r.email,this.submitted(r.submitted),r.lists&&!this.server&&this.lists(r.lists.split(",")),this.component("banner",i.Banner),this.component("footer",i.Footer),this.component("header",i.Header),this.component("signup",i.Signup),this.component("container",i.Container),this.component("newsletters",i.Newsletters),t=a.assign({},this.navigation.meta("home"),{home:!1}),t.title="Sign up for our Newsletters",this.app.section="",this.app.static="newsletter",this.app.pageData(t,this.navigation.social(t)),this.app.surrogateKey("newsletter"),this.navigation.onload(function(t){return function(){return t.newsletter.resetLists(),t.newsletter.model.newsletters.length?t.onlistsfetch():t.newsletter.get(!0).then(function(){return t.onlistsfetch(),p.redraw()},t.onError)}}(this)),this.server||this.app.event("/newsletter",{action:"impression",category:"newsletter",params:{promo:this.label},ga:{label:"newsletter-page_"+s.Screen.device()}})}return c(e,t),e.prototype.onlistsfetch=function(){return this.lists(this.newsletter.model.newsletterIds(this.lists())),this.app.stopNavigating()},e.prototype.fetchNewsletterData=a.noop,e}(n.State),e.View=function(t){function e(){this.banner=h(this.banner,this),this.onsubmit=h(this.onsubmit,this),e.__super__.constructor.apply(this,arguments),this.lists=this.state.lists}return c(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"newsletter-route",header:this.state.component("header")},[this.state.component("container").render({rail:!1,social:!1,title:this.title(),scrollspy:!1,bannerComponent:this.banner,color_reversal:this.state.submitted()},[this.form(),this.checkboxes()]),this.state.component("footer").render({no_newsletter:!0})])},e.prototype.title=function(){return this.state.submitted()?"Thank you for Subscribing!":"Sign up for our Newsletters"},e.prototype.form=function(){return this.state.component("signup").render({intro_tag:P,lists:this.lists,contained:!0,long_text:!0,email:this.state.email,onsubmitcb:this.onsubmit,label:"newsletter-page",wrapper:this.contentWrapper(),submitted:this.state.submitted,class:"newsletter-route__signup"})},e.prototype.checkboxes=function(){return this.state.component("newsletters").render({fetch:!1,lists:this.lists,wrapper:this.contentWrapper()})},e.prototype.contentWrapper=function(){return new i.Content(this.server).render},e.prototype.onsubmit=function(){return this.state.submitted(!0),this.lists([])},e.prototype.palm=function(){if(!this.server)return this.screen.palm()},e.prototype.banner=function(){return this.state.component("banner").render({dek:!1,retina:!0,no_title:!0,centered:!0,gradient:!1,hide_links:!0,ratio_class:this.state.arm.widget(),src:["https://fsmedia.imgix.net/4e/b9/1b/d1/c3bd/","454a/be00/b3ef89bd69d7/inverselogopng.png"].join("")})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(38),s={Stream:r(103),Authors:r(111),Bootstrap:r(128)},i={Container:r(291),Stream:r(327),Footer:r(294),Header:r(257)},o={Widget:r(67)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){var t,r;e.__super__.constructor.apply(this,arguments),this.app.no_index=!0,r="home",this.query=this.param("query"),this.page=this.param("page")||1,this.stream=s.Stream.get(this.server),this.authors=s.Authors.get(this.server),this.bootstrap=s.Bootstrap.get(this.server),this.stream.setSearch(this.app.loaded),this.navigation.onload(function(t){return function(){var e;return t.server||t.app.loaded?t.stream.fetchSearch(t.query,t.page).then(function(e){var r,n,i,o,s;return s=e[0],i=e[1],n=t.stream.stream(),t.setWidget(),t.app.stopNavigating(),r=a.uniq(a.map(n.bodies,function(t){return t.created_by})),null!=(o=t.authors.fetchAuthors(r))&&o.then(function(){return n.addAuthors(t.authors.models),p.redraw()}),i.then(p.redraw),p.redraw()},function(){return t.app.stopNavigating()}):(e=t.stream.stream(),e.setPage(t.page),e.addAuthors(t.authors.models),t.widget=t.m(o.Widget,isomithric.bootstrap.widget),t.app.stopNavigating())}}(this)),this.app.section=this.query,this.app.page="search",t=this.navigation.meta(r),t.home=!1,t.keywords+=" "+this.query,t.title="Searching "+a.startCase(this.query),this.app.pageData(t,this.navigation.social(t)),this.app.surrogateKey(r+" search"),this.component("footer",i.Footer),this.component("header",i.Header),this.component("stream",i.Stream),this.component("container",i.Container)}return c(e,t),e.prototype.setWidget=function(){var t,e,r;if(t=this.stream.stream().bodies,e=t[a.random(0,t.length-1)],e&&(this.widget=e.primaryPhoto().widget),this.server)return this.widget&&(r={widget:this.widget.strippedData()}),this.bootstrap.json=r||{}},e}(n.State),e.View=function(t){function e(){return this.routeConfig=h(this.routeConfig,this),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"search-route",header:this.state.component("header")},[this.state.component("container").render({rail:!1,first:!0,social:!1,scrollspy:!1,widget:this.state.widget,title:a.startCase(this.app.section)},[this.stream()]),this.state.component("footer").render()])},e.prototype.stream=function(){var t,e,r;return t="/search",e=this.state.stream.stream(),(null!=(r=this.state.query)?r.length:void 0)&&(t=t+"/"+this.state.query),this.state.component("stream").render({type:"grid",model:e,base_url:t,class:this.shruggyGuy(),nextPage:function(){return e.next()},previousPage:function(){return e.previous()}})},e.prototype.shruggyGuy=function(){var t,e;if(e=this.state.stream,t=e.stream().bodies.length,!(e.searching()||t>0))return"empty emoji-shrug"},e.prototype.routeConfig=function(t,e,r){if(!e)return r.onunload=function(t){return function(){if("search"!==t.app.page)return t.state.stream.searching(!1)}}(this)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,c=function(t,e){return function(){return t.apply(e,arguments)}};s=r(24),n=r(26),o={App:r(48),Screen:r(40),Stream:r(103),Article:r(62)},i={Pagination:r(161),Mediaobj:r(162)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.State=function(t){function e(){e.__super__.constructor.apply(this,arguments),s.assign(this,{app:o.App.get(this.server),stream:o.Stream.get(this.server),article:o.Article.get(this.server)}),this.component("pagination",i.Pagination)}return a(e,t),e}(n.State),e.View=function(t){function e(){this.track=c(this.track,this),e.__super__.constructor.apply(this,arguments),s.assign(this,{screen:o.Screen}),s.defaults(this,{tracking:{},show_author:!0}),s.defaults(this.tracking,{params:{},category:"paginated-stream-article"})}return a(e,t),e.prototype.render=function(){return ASIDE({class:this.classes([this.class,"stream-paginated"])},[this.articles(),this.pagination()])},e.prototype.articles=function(){return s.map(this.bodiesWithTaxonomies(),function(t){return function(e,r){if(!t.author_only||!e.differentAuthor())return t.state.lazyComponent("article",e.id,i.Mediaobj).render({ago:t.ago,model:e,show_tag:!1,position:"body",show_info:!0,track:function(){return t.track(r)},show_author:t.show_author,hide_info_intro:t.hide_info_intro,srcsets:{sizes:{small:"(max-width:"+t.screen.breakpoints.palm+"px)"},sets:[{crop:"4:3",sizes:{small:100}},{crop:"2:1",sizes:{large:350}}]}})}}(this))},e.prototype.bodiesWithTaxonomies=function(){return this.model.taxonomies?s.map(this.model.bodies,function(t){return function(e){var r;return(r=t.model.taxonomy(e))&&(e.taxonomy=r),e}}(this)):this.model.bodies},e.prototype.pagination=function(){return this.state.component("pagination").render({model:this.model,navigate:!0,no_intro:!0,base_url:this.base_url,nextPage:this.nextPage,previousPage:this.previousPage})},e.prototype.track=function(t){var e;return e="click",this.state.app.event(document.location.pathname,{action:e,category:this.tracking.category,params:s.assign(this.tracking.params,this.model.pagination(),{position:t})})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};p=r(16),a=r(24),n=r(38),o={Stream:r(103),Banner:r(126),Newsletter:r(240)},i={Stream:r(132),Banner:r(172),Header:r(257)},s={GA:r(55)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.stream=o.Stream.get(this.server),this.banner=o.Banner.get(this.server),t=this.strippedOriginalUrl(),t?(this.app.page="section",this.app.surrogateKey("section section-"+t)):(t="home",this.app.page=t,this.app.surrogateKey(t)),this.navigation.onload(function(e){return function(){var r,n,i,o,s,a;return(a=e.navigation.redirect(t))?e.redirect(a):(r=e.navigation.channels.find(t))?e.redirect(r.url()):(e.navigation.setSection(t),(i=e.navigation.categories.section(t))?(n=e.navigation.meta(i),e.app.pageData(n,e.navigation.social(n)),e.server||e.app.loaded?(o="home"===t?t:i.permalink,e.stream.fetchCategoryRecent(o),e.stream.fetchCategoryFeatured(o),s=e.stream.fetchCategoryStream(o),s.then(function(t){var r;return r=t[0],s=t[1],e.initBanner(r),e.app.stopNavigating(),s.then(p.redraw),p.redraw()})):e.app.stopNavigating()):e.set404())}}(this)),this.ads.setRendering(!0),this.app.section=t,this.component("banner",i.Banner),this.component("header",i.Header),this.component("stream",i.Stream)}return c(e,t),e.prototype.initBanner=function(t){var e;if(this.banner.model(a.pullAt(this.stream.stream().bodies,0)[0]),this.server)return this.banner.json=this.banner.formatJsonData({body:null!=(e=a.pullAt(t.data,0)[0])?e.body:void 0})},e}(n.State),e.View=function(t){function e(){this.track=h(this.track,this),e.__super__.constructor.apply(this,arguments),this.renderNewsletterOverlayModal({section:this.app.section})}return c(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"section-route",header:this.state.component("header")},[this.state.component("banner").render({url:!0,date:!1,preload:!0,class:"stream-banner",track:function(t){return function(){return t.track("banner")}}(this)}),this.state.component("stream").render({list_length:4})])},e.prototype.track=function(t){return s.GA.event(this.app.section,"click",t)},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(38),s={Authors:r(111),Bootstrap:r(128)},i={Error:r(37),Rail:r(317),Container:r(291),Body:r(275),Stream:r(327),Footer:r(294),Header:r(257)},o={Topic:r(107)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){var t,r,n;e.__super__.constructor.apply(this,arguments),this.ads.setRendering(!0),n=this.param("topic"),this.authors=s.Authors.get(this.server),this.bootstrap=s.Bootstrap.get(this.server),this.app.section=n,this.app.page="topic",this.app.surrogateKey("label label-"+n),this.model=this.m(o.Topic,{label:{permalink:n}}),this.model.setOffset("bodies",this.param("page")),this.server||this.app.loaded||(t=isomithric.authors,r=isomithric.bootstrap.topic),this.app.error||this.navigation.onload(function(e){return function(){return e.server||e.app.loaded?e.model.get().then(function(r){var i,o,s,c;return r.errors?e.set404():(i=e.model.canonical(),n!==e.model.permalink()?e.redirect(i):(e.app.canonical=e.model.pageUrl(),e.server&&(e.bootstrap.json={topic:e.model.jsonData(r)}),t=a.uniq(a.map(e.model.bodies,function(t){return t.created_by})),null!=(s=e.authors.fetchAuthors(t))&&s.then(function(){return e.model.addAuthors(e.authors.models),p.redraw()}),o=e.model.meta(e.navigation.meta("home")),c=e.navigation.social(o),e.app.pageData(o,c),e.app.stopNavigating(),p.redraw(),r))},function(t){return 404===t.status?e.redirect(e.model.letterLink()):(e.set404(),e.app.stopNavigating(),t)}):(e.model.add(r),e.model.addAuthors(t),e.app.stopNavigating())}}(this)),this.component("footer",i.Footer),this.component("header",i.Header)}return c(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.model=this.state.model}return c(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"topic-route",header:this.state.component("header")},[this.components()])},e.prototype.components=function(){var t,e;if(!this.app.error)return e=this.model.title(),t=this.state.component_id,[this.state.lazyComponent("container",t,i.Container).render({first:!0,title:e,model:this.model,widget:this.model.widget(),rail_component:i.Rail},[this.body(),this.stream(e)]),this.state.component("footer").render()]},e.prototype.stream=function(t){var e;return e=this.state.component_id,this.state.lazyComponent("stream",e,i.Stream).render({model:this.model,tracking:{params:{topic:t},category:"topic-page-article"}})},e.prototype.body=function(){var t,e;if(e=this.model.descriptionHtml(),e.length)return t=this.state.component_id,this.state.lazyComponent("body",t,i.Body).render({first:!0,empty:!1,model:this.model,show_ads:!1,show_teads:!1,section:this.model.section()})},e}(n.View),e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(38),i={Error:r(37),Link:r(134),Content:r(282),Container:r(291),Pagination:r(161),Footer:r(294),Header:r(257)},o={Labels:r(331)},s={Bootstrap:r(128)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){var t,r;return e.__super__.constructor.apply(this,arguments),this.app.no_index=!0,r=this.param("letter"),this.model=this.m(o.Labels,{letter:r}),r?"0"===r?this.redirect(this.model.url("0-9")):(r.length>1&&"0-9"!==r&&this.set404(),this.ads.setRendering(!0),this.app.section="",this.app.page="topics",this.bootstrap=s.Bootstrap.get(this.server),this.app.surrogateKey("topics label label-"+r),this.server||this.app.loaded||(t=isomithric.bootstrap.topics),this.app.error||this.navigation.onload(function(e){return function(){return e.server||e.app.loaded?e.model.get().then(function(t){var r,n;return t.errors?void e.set404():(e.app.canonical=e.model.url(),r=e.navigation.meta("home"),n=e.navigation.social(r),e.app.pageData(e.model.meta(r),n),e.server&&(e.bootstrap.json={topics:e.model.strippedData()}),e.app.stopNavigating(),p.redraw())}):(e.model.add(t.labels),e.app.stopNavigating(),p.redraw())}}(this)),this.component("footer",i.Footer),void this.component("header",i.Header)):this.redirect(this.model.allUrl())}return c(e,t),e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.model=this.state.model}return c(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"topics-route",header:this.state.component("header")},[this.components()])},e.prototype.components=function(){var t;if(!this.app.error)return t=this.state.component_id,[this.state.lazyComponent("container",t,i.Container).render({first:!0,no_ad2:!0,model:this.model,banner:!1,scrollspy:!1,no_newsletter:!0,title:this.model.title()},[new i.Content(this.server).render([this.paginators(),this.links()])]),this.state.component("footer").render()]},e.prototype.paginators=function(){var t;return t=this.state.component_id,this.state.lazyComponent("paginators",t,i.Pagination).render({model:this.model,no_intro:!0,lettered:!0})},e.prototype.links=function(){var t,e;return t=this.model.models(),e=t.length-1,P({class:"contained"},[a.map(t,function(t){return function(r,n){return[new i.Link(t.server).render({href:r.url()},r.displayName()),n!==e?", ":void 0]}}(this))])},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=r(24),n=r(86),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),i.defaults(this,{letter:"a"}),i.assign(this,{limit:9999})}return o(e,t),e.prototype.get=function(){return e.__super__.get.apply(this,arguments).then(function(t){return function(e){return t.add(e.labels),e}}(this))},e.prototype.pagination=function(){return{page:this.letter}},e.prototype.queryParams=function(){var t;return this.letter.match(/^0/)&&(t=this.letter[0]),i.assign(e.__super__.queryParams.apply(this,arguments),{letter:t||this.letter})},e.prototype.breadcrumbs=function(){return[{href:this.allUrl(),text:"All Topics"},{href:this.url(),text:this.letter.toUpperCase()}]},e.prototype.meta=function(t){var e,r;return null==t&&(t={}),r=this.url(),e=i.assign({},t,{url:r,permalink:r,canonical:r,title:this.title()}),i.assign(e,{title:e.title+" | Inverse",description:this.socialDescription(),keywords:(e.title+", "+t.keywords).toLowerCase()})},e.prototype.socialTitle=function(){return this.title()},e.prototype.socialDescription=function(){return"Follow all the "+this.letter+" Topics Inverse Covers"},e.prototype.title=function(){return"All "+i.capitalize(this.letter)+" Topics"},e.prototype.allUrl=function(){return"/topics/a"},e.prototype.url=function(t){return null==t&&(t=this.letter),"/topics/"+t},e}(n)},function(t,e,r){var n,i,o,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;p=r(16),a=r(24),n=r(38),s={Stream:r(103),Authors:r(111)},o={Person:r(63),BodyList:r(108)},i={Error:r(37),Dot:r(164),Tabs:r(242),Container:r(291),Body:r(275),Facebook:r(333),Stream:r(327),Footer:r(294),Header:r(257),Twitter:r(334)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.State=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.app.user_page=!0,this.stream=s.Stream.get(this.server),this.users=s.Authors.get(this.server),t=this.param("id"),this.page=this.param("page"),this.user=this.users.models[t],this.stream.setUser(),this.app.error||this.navigation.onload(function(e){return function(){var r,n;return e.server||e.app.loaded?e.user?e.fetchStream(t):(n=e.m(o.Person,{id:t}),r=n.get(),r?r.then(function(r){return r.data.deleted?e.redirect("/about/team"):(e.user=e.m(o.Person,r.data),e.users.models[t]=e.user,e.fetchStream(t),e.app.stopNavigating(),p.redraw())},function(t){return e.set404(),t}):e.set404()):e.stream.stream().setPage(e.page)}}(this)),this.component("footer",i.Footer),this.component("header",i.Header)}return c(e,t),e.prototype.fetchStream=function(t){var e,r;return e=10,r={is_user_page:!0,model:o.BodyList,filters:{created_by:t},category:this.navigation.categories.sections()+",none",page:{bodies:{limit:e,offset:(this.page-1)*e}}},this.app.stopNavigating(),this.stream.fetchStream(r).then(function(e){return function(r){var n,i;return i=r[0],n=r[1],e.app.surrogateKey("user "+t),e.updatePageData(),n.then(p.redraw),p.redraw()}}(this))},e.prototype.updatePageData=function(){var t,e,r;return r="home",this.app.section=r,this.app.page="user",e=this.navigation.meta(r),e.home=!1,this.user&&(t=this.stream.stream(),a.assign(e,this.user.meta(),{pagination:t.pagination()})),this.app.pageData(e,this.navigation.social(e))},e}(n.State),e.View=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.user=this.state.user,this.model=this.state.stream.stream()}return c(e,t),e.prototype.render=function(){return e.__super__.render.call(this,{class:"user-route",header:this.state.component("header")},[this.components()])},e.prototype.components=function(){var t,e;if(!this.app.error&&this.user)return e=this.user.fullName(),t=this.state.component_id,[this.state.lazyComponent("container",t,i.Container).render({rail:!1,first:!0,title:e,model:this.user,widget:this.widget(),dek:{components:this.follow()},tracking:{params:{topic:e},category:"user-page-article"}},[this.body(),this.stream()]),this.state.component("footer").render()]},e.prototype.body=function(){var t,e;if(t=this.user.bio,null!=t?t.length:void 0)return e=this.state.component_id,this.state.lazyComponent("body",e,i.Body).render({first:!0,empty:!1,model:this.user,show_teads:!1,section:this.user.graph()})},e.prototype.follow=function(){var t,e,r;if(r=new i.Twitter(this.server).render({model:this.user}),e=new i.Facebook(this.server).render({model:this.user}),e||r)return e&&r&&(t=new i.Dot(this.server).render()),DIV({class:"user-socials"},[e,t,r])},e.prototype.stream=function(){var t;return t=this.state.component_id,this.state.lazyComponent("stream",t,i.Stream).render({ago:!1,model:this.model,author_only:!0,show_author:!1,base_url:this.user.url(),nextPage:this.model.next,hide_info_intro:!0,previousPage:this.model.previous})},e.prototype.widget=function(){return this.user.widget.persisted()?this.user.widget:{id:this.user.id,is_image:!0,crop:this.user.crop,embed:p.prop(this.user.image())}},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Icon:r(142),Button:r(144)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){if(this.model.facebook)return new i.Button(this.server).render({plain:!0,icon:"facebook",text:this.model.facebook,class:"facebook-page",href:this.model.facebookPageUrl()})},e}(n.View),e}(n)},function(t,e,r){var n,i,o=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=r(26),i={Icon:r(142),Button:r(144)},t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.View=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.render=function(){if(this.model.twitter)return new i.Button(this.server).render({plain:!0,icon:"twitter",class:"twitter-handle",href:this.model.twitterUrl(),text:"@"+this.model.twitter})},e}(n.View),e}(n)}]);
//# sourceMappingURL=client.js.map